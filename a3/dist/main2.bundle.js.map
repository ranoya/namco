{"version":3,"file":"main2.bundle.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAgB,OAAID,IAEpBD,EAAa,OAAIC,GAClB,CATD,CASGK,MAAM,I,UCTLC,EACAC,E,kBCDJ,IAAIC,EAAM,CACT,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,iBAAkB,CACjB,IACA,KAED,oBAAqB,CACpB,IACA,KAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,KAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CAAC,IAIT,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,IAClCJ,EAAoBS,IAE7B,CACAX,EAAoBY,KAAO,IAAOC,OAAOD,KAAKb,GAC9CC,EAAoBW,GAAK,KACzBlB,EAAOD,QAAUQ,C,iBClFjB,IAAID,EAAM,CACT,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,aAAc,CACb,IACA,KAED,gBAAiB,CAChB,IACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,MAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,KAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CAAC,IAIT,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,IAClCJ,EAAoBS,IAE7B,CACAX,EAAoBY,KAAO,IAAOC,OAAOD,KAAKb,GAC9CC,EAAoBW,GAAK,KACzBlB,EAAOD,QAAUQ,C,wBChFjB,MAAMc,EAAY,WAIhB,MAAMC,EAAQ,MACZ,WAAAC,CAAYC,EAAGC,GACbC,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,CACX,GAGIE,EAAO,MACX,WAAAJ,CAAYK,EAAOC,GACjBH,KAAKE,MAAQA,EACbF,KAAKG,OAASA,CAChB,CAEA,IAAAC,GACE,OAAO,IAAIH,EAAKD,KAAKE,MAAOF,KAAKG,OACnC,CAEA,SAAIE,GACF,OAAOL,KAAKE,MAAQF,KAAKG,MAC3B,GAGIG,EAAO,MACX,WAAAT,CAAYC,EAAGC,EAAGG,EAAOC,GACvBH,KAAKO,OAAS,IAAIX,EAAME,EAAGC,GAC3BC,KAAKQ,KAAO,IAAIP,EAAKC,EAAOC,EAC9B,CAEA,KAAIL,GACF,OAAOE,KAAKO,OAAOT,CACrB,CAEA,KAAIC,GACF,OAAOC,KAAKO,OAAOR,CACrB,CAEA,SAAIG,GACF,OAAOF,KAAKQ,KAAKN,KACnB,CAEA,UAAIC,GACF,OAAOH,KAAKQ,KAAKL,MACnB,CAEA,KAAIM,GACF,OAAOT,KAAKO,OAAOT,CACrB,CAEA,KAAIY,GACF,OAAOV,KAAKO,OAAOT,EAAIE,KAAKQ,KAAKN,KACnC,CAEA,KAAIS,GACF,OAAOX,KAAKO,OAAOR,CACrB,CAEA,KAAIa,GACF,OAAOZ,KAAKO,OAAOR,EAAIC,KAAKQ,KAAKL,MACnC,GAGIU,EAAS,MACb,WAAAhB,CAAYiB,GACVd,KAAKe,KAAO,IAAIC,aAAaF,EAC/B,CAGA,SAAAG,GACE,MAAMC,EAAMlB,KAAKe,KACjB,IAAII,EAAM,EACV,IAAK,MAAMC,KAAQF,EACjBC,GAAOC,EAET,MAAMC,EAAO,EAAEF,EACf,IAAK,MAAMG,KAAKJ,EACdA,EAAII,IAAMD,EAEZ,OAAOrB,IACT,CAGA,GAAAuB,CAAIC,GACF,MAAMC,EAAI,IAAIZ,EAAO,GACrB,GAAqB,iBAATW,GAAuBxB,KAAKe,KAAKW,QAAUF,EAAMT,KAAKW,OAChE,OAAOD,EAGTA,EAAEV,KAAO,IAAIC,aAAahB,KAAKe,MAE/B,IAAK,IAAIO,EAAI,EAAGA,EAAIG,EAAEV,KAAKW,OAAQJ,IAE/BG,EAAEV,KAAKO,IADW,iBAATE,EACIA,EAEAA,EAAMT,KAAKO,GAI5B,OAAOG,CACT,CAEA,QAAAE,GACE,MAAMnB,EAAOR,KAAKe,KAAKW,OACjBD,EAAI,IAAIZ,EAAOL,GACrB,IAAK,IAAIc,EAAI,EAAGA,EAAId,EAAMc,IAAK,CAC7B,MAAMM,EAAQ,EAAIC,KAAKC,GAAKR,EAAId,EAEhC,IAAK,IAAIuB,EAAI,EAAGA,EAAIvB,EAAMuB,IACxBN,EAAEV,KAAKO,IAAMtB,KAAKe,KAAKgB,GAAKF,KAAKG,IAAID,EAAIH,EAE7C,CAEA,IAAK,IAAIN,EAAI,EAAGA,EAAId,EAAMc,IACxBG,EAAEV,KAAKO,IAAMd,EAGf,OAAOiB,CACT,CAEA,MAAAQ,CAAOnB,GACL,MAAMoB,EAAU,IAAIlB,aAAaF,GACjC,IAAK,IAAIQ,EAAE,EAAGA,EAAIO,KAAKM,IAAID,EAAQR,OAAQ1B,KAAKe,KAAKW,QAASJ,IAC5DY,EAAQZ,GAAKtB,KAAKe,KAAKO,GAGzB,OADAtB,KAAKe,KAAOmB,EACLlC,IACT,CAOA,sBAAOoC,CAAgBtB,EAAGuB,GACxB,MAAMC,EAAIxB,EAAI,EACd,IAAIW,EAAI,IAAIZ,EAAOyB,GAEnB,MAAMC,EAAQV,KAAKW,KAAKX,KAAKY,MAAMZ,KAAKa,IAAI,GAAIL,EAAa,KAAOC,GACpE,IAAK,IAAIhB,EAAI,EAAGA,EAAIgB,EAAGhB,IAAK,CAC1B,MAAMqB,EAAId,KAAKe,IAAIL,EAAQV,KAAKG,IAAIH,KAAKC,GAAKR,EAAIgB,IAEhDb,EAAEV,KAAKO,GADLqB,EAAI,EACMd,KAAKa,KAAK,EAAGpB,GAAKO,KAAKW,KAAKF,EAAIT,KAAKY,MAAME,IAE3Cd,KAAKa,KAAK,EAAGpB,GAAKO,KAAKG,IAAIM,EAAIT,KAAKgB,KAAKF,GACzD,CAEAlB,EAAIA,EAAEE,WAENF,EAAEQ,OAAOnB,GACTW,EAAEV,KAAK,IAAM,EACbU,EAAEV,KAAKD,EAAE,GAAKW,EAAEV,KAAK,GAErB,MAAM+B,EAAMrB,EAAEV,KAAKgC,QAAO,CAACC,EAAMC,IAAQpB,KAAKiB,IAAIE,EAAMnB,KAAKe,IAAIK,MACjE,IAAK,MAAM3B,KAAKG,EAAEV,KAChBU,EAAEV,KAAKO,IAAMwB,EAGf,OAAOrB,CACT,CAGA,oBAAOyB,CAAcpC,EAAGqC,GACtB,IAAIC,EAAI,IAAIvC,EAAOC,GACnBqC,EAAKtB,KAAKM,IAAIgB,EAAI,IAClB,MAAME,EAAQxB,KAAKyB,MAAMxC,EAAI,GAE7B,IAAK,IAAIQ,EAAI,EAAGA,EAAIR,EAAGQ,IAAK,CAC1B,MAAMxB,EAAI,EAAI+B,KAAKC,GAAKqB,GAAM7B,EAAI+B,GAElCD,EAAErC,KAAKO,GAAW,GAALxB,EAAY,EAAM+B,KAAK0B,IAAIzD,GAAKA,CAC/C,CAEA,OAAOsD,CACT,GAIII,EAAU,MACd,WAAA3D,CAAY4D,EAAKC,EAAKC,EACVC,EAAKC,EAAKC,EACVC,EAAKC,EAAKC,GACpBjE,KAAKe,KAAO,IAAIC,aAAa,CAACyC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACxE,CAEA,EAAAC,CAAG5C,EAAGS,GACJ,OAAO/B,KAAKe,KAAK,EAAIO,EAAIS,EAC3B,CAEA,GAAAR,CAAI4C,GACF,MAAM7B,EAAI,IAAIkB,EAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GACtC,GAAkB,iBAAPW,EACT7B,EAAEvB,KAAOf,KAAKe,KAAKnC,KAAIkB,GAAKA,EAAIqE,SAEhC,IAAK,IAAI7C,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAIS,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAIqC,EAAI,EAAGA,EAAI,EAAGA,IACrB9B,EAAEvB,KAAS,EAAJO,EAAQS,IAAMoC,EAAIpD,KAAS,EAAJO,EAAQ8C,GAAKpE,KAAKe,KAAS,EAAJqD,EAAQrC,GAKrE,OAAOO,CACT,GAuBI+B,EAAe,IAAI,GAAK,IACxBC,EAAe,EAAID,EA0BnBE,EAAgBC,IAGhBC,EA5Cc,GA4COH,EAA0B,IAC/CI,EAAkB,IAAIpE,EAAKmE,kBAtBZ,GAuBhBA,kBAxBgB,KAyBfE,EAAkB,IAAIrE,EAlDR,GAQI,GANF,GAQD,KA6CfsE,EAAiB,IAAItE,EAAKuE,kBAjBX,GAkBjBA,kBAnBiB,KAoBfC,EAAiB,IAAIxE,EAzDP,GASG,GAPD,GAQD,KAmDfyE,EAAsB,0PA+J5B,SAASC,EAAYC,EAAgBC,EAAaC,EAAaC,EAAWC,GACxE,MAAMC,EAAYJ,EAAYnF,EAExBwF,EA5NY,GA4NkBH,EAE9BI,EAAa3D,KAAKyB,MAAM4B,EAAYpF,GAEpC2F,EAAY,IAAIxF,EAAK4B,KAAKyB,MA9Nf,GA8NkC6B,EAAYjF,OACzD2B,KAAKyB,MAAM6B,EAAYhF,SAEvBuF,EAAY7D,KAAKyB,MAjON,IAiOakC,EAAWL,EAAYrF,IASrD,MAAO,CACLuF,IAAKA,EACLJ,eAAgBA,EAChBC,YAAaA,EACbC,YAAaA,EACbG,UAAWA,EACXF,UAAWA,EACXG,cAAeA,EACfC,WAAYA,EACZC,UAAWA,EACXC,UAAWA,EACXC,WAnBiB,CAAC,EAAI9D,KAAKC,KAAO,GAAG,IAAO4D,EAAY,EAAK,IAoB7DE,SAnBeL,EAAgB,GAoB/BM,QAjBc,IAAIjG,EAAM8F,EAAWJ,EAAYH,EAAYpF,GAkB3D+F,aAhBmB,IAAIlG,EAAM8F,EAAYK,EAAcT,EAAYH,EAAYpF,GAkBnF,CAEA,MAAMiG,EAAehB,EAAYP,EAAoBE,EACpBD,EA1OZ,IA0O4CL,GAC3D4B,EAAcjB,EA7MM,UAA2B,IA6MFF,EAC/CF,EAhOiB,IAPA,YA0OfsB,EAAYC,GACZ,IAAIlH,SAAQ,CAACC,EAASkH,KACpB,MAAMC,EAAM,IAAIC,MAChBD,EAAIE,OAAS,IAAMrH,EAAQmH,GAC3BA,EAAIG,QAAU,IAAMJ,EAAO,kBAAkBD,MAC7CE,EAAII,IAAMN,CAAI,IAyChBO,EAAgB,CACpB,mBACA,oBACA,sBACA,iBACA,mBACA,kBACA,WACA,gBACA,qBAKIC,EAAe,CACnB,YACA,UACA,OAGIC,EAAgBC,IAEpB,MAAMC,EAAeD,EAAOE,YACtBC,EAAgBH,EAAOI,aAGzBJ,EAAO3G,OAAS4G,GAChBD,EAAO1G,QAAU6G,IACnBH,EAAO3G,MAAQ4G,EACfD,EAAO1G,OAAS6G,EAClB,EAKIE,EAAe,CAACC,EAAIC,EAAMC,EAAMC,KACpC,MAAMC,EAASJ,EAAGD,aAAaG,GAI/B,GAHAF,EAAGK,aAAaD,EAAQD,GACxBH,EAAGM,cAAcF,GACDJ,EAAGO,mBAAmBH,EAAQJ,EAAGQ,gBAE/C,OAAOJ,EAGT,MAAMK,EAAMT,EAAGU,iBAAiBN,GAEhC,MADAJ,EAAGW,aAAaP,GACV,IAAIlI,MAAM,4BAA4B+H,QAAWQ,IAAM,EAKzDG,EAAgB,CAACZ,EAAIC,KAASY,KAClC,MAAMC,EAAUd,EAAGY,gBACnB,IAAK,IAAIR,KAAUS,EACjBb,EAAGe,aAAaD,EAASV,GAI3B,GAFAJ,EAAGgB,YAAYF,GACCd,EAAGiB,oBAAoBH,EAASd,EAAGkB,aAEjD,OAAOJ,EAET,MAAML,EAAMT,EAAGmB,kBAAkBL,GAEjC,MADAd,EAAGoB,cAAcN,GACX,IAAI5I,MAAM,6BAA6B+H,QAAWQ,IAAM,EAG1DY,EAAc,MAClB,WAAA3I,CAAYK,EAAOC,EAAQsI,GACzBzI,KAAKE,MAAQA,EACbF,KAAKG,OAASA,EACdH,KAAKyI,UAAYA,CACnB,CAEA,QAAIjI,GACF,OAAO,IAAIP,EAAKD,KAAKE,MAAOF,KAAKG,OACnC,GA23BF,MAAO,CACLuI,EAAG,CACDC,YA7vCgB,GA8vChBC,YA7vCgB,GA8vChBC,cA7vCkB,GA8vClBC,YA7vCgB,GA8vChB/C,WA5vCe,GA6vCfgD,YA5vCgB,EA6vChBC,gBA3vCoB,GA4vCpBC,eA3vCmB,GA4vCnBC,aA3vCiB,IA4vCjBC,YApwCkB,GAqwClBC,aA1vCiB,GA2vCjB5E,cA9tCkB,KA+tClB6E,cA9tCkB,IA+tClB9E,cAAeA,EACfyB,aAAcA,EACdC,YAAaA,GAEfC,UAAWA,EACXoD,WA3/BiB,CAACC,EAAOC,EAASC,GAAK,KACvC,GAA2B,KAAtBF,EAAMG,cAAgD,KAAvBH,EAAMI,cACxC,MAAM,IAAItK,MACM,4CAAQkK,EAAMG,gBAAgBH,EAAMI,iBAEtD,MAAM9C,EAAS+C,SAASC,cAAc,UAChCC,EAAUjD,EAAOkD,WAAW,MAC5B7J,EAAQsJ,EAAQ/D,UAAUvF,MAC1BC,EAASqJ,EAAQ/D,UAAUtF,OACjC0G,EAAO3G,MAAQA,EACf2G,EAAO1G,OAASA,EAChB2J,EAAQE,UAAY,gBACpBF,EAAQG,SAAS,EAAG,EAAG/J,EAAOC,GAC9B,MAAM0F,EAAU4D,EAAOD,EAAQ1D,aAAe0D,EAAQ3D,QAGtD,OAFAiE,EAAQI,UAAUX,EAAO1D,EAAQ/F,EAAG+F,EAAQ9F,GAErC,CAAC8G,EADUiD,EAAQK,aAAa,EAAG,EAAGjK,EAAOC,GAC1B,EA4+B1ByG,aAAcA,EACdM,aAAcA,EACda,cAAeA,EAGfqC,WAp1BiB,MACjB,WAAAvK,CAAYgH,GACV,MAAMM,EAAKN,EAAOkD,WAAW,SAE7B,GAAyB,MADC5C,EAAGkD,aAAa,qBAExC,MAAM,IAAIhL,MAAM,mDAGlBW,KAAK6G,OAASA,EACd7G,KAAKmH,GAAKA,EACVnH,KAAKsK,SAAW,CAAC,EACjBtK,KAAKgI,QAAU,CAAC,EAChBhI,KAAKuK,QAAU,GACfvK,KAAKuJ,MAAQ,KACbvJ,KAAKwK,QAAU,KACfxK,KAAKyK,gBAAkB,KACvBzK,KAAK0K,gBAAkB,KACvB1K,KAAK2K,gBAAkB,KACvB3K,KAAK4K,gBAAkB,KACvB5K,KAAK6K,aAAe,IAAI5K,EAAK,EAAG,GAChCD,KAAK8K,mBAAqB,IAAIxK,EAAK,EAAG,EAAG,EAAG,GAE5CN,KAAK+K,sBAAuB,EAC5B/K,KAAKgL,cAAe,CACtB,CAEA,SAAIzB,GACF,OAAOvJ,KAAKiL,MACd,CAEA,SAAI1B,CAAMA,GACRvJ,KAAKiL,OAAS1B,EACdvJ,KAAKgL,cAAe,CACtB,CAEA,wBAAIE,CAAqBA,GACvBlL,KAAKwK,QAAUU,EACflL,KAAK+K,sBAAuB,CAC9B,CAEA,gBAAMI,GACJ,MAAMhE,EAAKnH,KAAKmH,GAEhBA,EAAGiE,OAAOjE,EAAGkE,OACblE,EAAGmE,UAAUnE,EAAGoE,UAAWpE,EAAGqE,qBAE9BxL,KAAKsK,SAAW,CAAC,EAEjB,IAAK,IAAIlD,KAAQV,EACf1G,KAAKsK,SAASlD,GAAQ,IAAIoB,EAAY,EAAG,EAAGrB,EAAGsE,iBAGjD,IAAK,IAAInK,EAAI,EAAGA,EApLC,EAoLiBA,IAChCtB,KAAKuK,QAAQmB,KAAKvE,EAAGwE,sBAGjB3L,KAAK4L,eAEXzE,EAAG0E,YAAY1E,EAAG2E,eAAgB,GAClC3E,EAAG0E,YAAY1E,EAAG4E,iBAAkB,GAEpC/L,KAAKgM,aACP,CAEA,UAAAC,GACE,MAAM9E,EAAKnH,KAAKmH,GAEhB,IAAK,IAAIC,KAAQV,EACfS,EAAG+E,cAAclM,KAAKsK,SAASlD,GAAMqB,WAGvC,IAAK,IAAI0D,KAAUnM,KAAKuK,QACtBpD,EAAGiF,aAAaD,GAGlBnM,KAAKqM,eACP,CAEA,YAAAT,GACE,OAAO3M,QAAQqN,IAAI,CACjBtM,KAAKuM,YAAY,2rFAA2rF,EAAM,oBACltFvM,KAAKuM,YAAY,urCAAurC,EAAM,qBAC9sCvM,KAAKuM,YAAY,+WAA+W,EAAM,uBACtYvM,KAAKuM,YAAY,myBAAmyB,EAAM,kBAC1zBvM,KAAKuM,YAAY,uoGAAuoG,EAAM,qBAElqG,CAEA,iBAAMA,CAAYpG,EAAMqG,EAAUpF,GAChC,MAAMD,EAAKnH,KAAKmH,GACVsF,EAAUzM,KAAKsK,SAASlD,GACxBmC,QAAcrD,EAAUC,GAC9BgB,EAAGuF,YAAYvF,EAAGwF,WAAYF,EAAQhE,WACtCtB,EAAGyF,WAAWzF,EAAGwF,WAAY,EAAGxF,EAAG0F,KACrB1F,EAAG0F,KAAM1F,EAAG2F,cAAevD,GACrCiD,GACFrF,EAAG4F,eAAe5F,EAAGwF,YAGvBF,EAAQvM,MAAQqJ,EAAMG,aACtB+C,EAAQtM,OAASoJ,EAAMI,aACzB,CAEA,WAAAqC,GACEhM,KAAKgN,WAAW,YA/cK,iqCA+c0BjI,GAC/C/E,KAAKgN,WAAW,MAnXD,k4BAmXoBjI,GACnC/E,KAAKgN,WAAW,UAraG,svCA5DM,mYAke3B,CAEA,UAAAA,CAAW5F,EAAM6F,EAAgBC,GAC/B,MAAMC,EAAiBjG,EAAalH,KAAKmH,GAAIC,EAAMpH,KAAKmH,GAAGiG,cAAeF,GACpEG,EAAmBnG,EAAalH,KAAKmH,GAAIC,EAAMpH,KAAKmH,GAAGmG,gBAC1DL,GACGM,EAAYxF,EAAc/H,KAAKmH,GAAIC,EAAM+F,EAAgBE,GAC/DrN,KAAKmH,GAAGW,aAAaqF,GACrBnN,KAAKmH,GAAGW,aAAauF,GACrBrN,KAAKgI,QAAQZ,GAAQmG,CACvB,CAEA,aAAAlB,GACE,IAAK,IAAIjF,KAAQT,EACX3G,KAAKgI,QAAQZ,KACfpH,KAAKmH,GAAGoB,cAAcvI,KAAKgI,QAAQZ,IACnCpH,KAAKgI,QAAQZ,IAAQ,EAG3B,CAEA,KAAAoG,GACE,MAAMrG,EAAKnH,KAAKmH,GAChBP,EAAa5G,KAAK6G,QAClB,MAAM4G,EAAczN,KAAK6G,OAAO3G,MAC1BwN,EAAe1N,KAAK6G,OAAO1G,OAG5BH,KAAK6K,aAAa3K,OAASuN,GACxBzN,KAAK6K,aAAa1K,QAAUH,KAAK0N,eACvC1N,KAAK6K,aAAe,IAAI5K,EAAKwN,EAAaC,GAC1CvG,EAAGwG,SAAS,EAAG,EAAGF,EAAaC,GAC/B1N,KAAK+K,sBAAuB,GAG1B/K,KAAKgL,cACPhL,KAAK4N,cAGH5N,KAAK+K,sBACP/K,KAAK6N,oBAGH7N,KAAKgL,cAAgBhL,KAAK+K,uBAC5B/K,KAAK8N,eAGH9N,KAAKgL,cAAgBhL,KAAK+K,sBACO,GAAjC/K,KAAKuJ,MAAMwE,qBACb/N,KAAKgO,oBAGPhO,KAAKgL,cAAe,EACpBhL,KAAK+K,sBAAuB,CAC9B,CAEA,WAAA6C,GACE,MAAMzG,EAAKnH,KAAKmH,GACVoC,EAAQvJ,KAAKuJ,MAEnBvJ,KAAKiO,cAAc,WAAY1E,EAAMrJ,MAAOqJ,EAAMpJ,QAAQ,GAC1D,MAAM+N,EAAelO,KAAKsK,SAAmB,SAC7CnD,EAAGuF,YAAYvF,EAAGwF,WAAYuB,EAAazF,WAC3C,MAAM0F,EAAShH,EAAGiH,UACZ/G,EAAOF,EAAG2F,cACVuB,EApUY,CAACC,IACrB,MAAMpO,EAAQoO,EAAUpO,MAClBC,EAASmO,EAAUnO,OACnBY,EAAOuN,EAAUvN,KACjBP,EAAON,EAAQC,EACfoO,EAAM,IAAIC,WAAWhO,GAC3B,IAAK,IAAIc,EAAI,EAAGA,EAAId,EAAMc,IACxBiN,EAAIjN,GAAKO,KAAKiB,IAAI/B,EAAO,EAAFO,GAAMP,EAAO,EAAFO,EAAI,GAAIP,EAAO,EAAFO,EAAI,IAErD,OAAOiN,CAAG,EA2TUE,CAAclF,EAAMxI,MACtCoG,EAAGuH,cAAcvH,EAAGwF,WAAY,EACf,EAAG,EACHpD,EAAMxI,KAAKb,MACXqJ,EAAMxI,KAAKZ,OACXgO,EAAQ9G,EAAMgH,GAG1B9E,EAAMoF,YAAc3O,KAAKyK,iBACzBlB,EAAMqF,YAAc5O,KAAK0K,iBACzBnB,EAAMsF,YAAc7O,KAAK2K,iBACzBpB,EAAMuF,YAAc9O,KAAK4K,kBAE5B5K,KAAKyK,gBAAkBlB,EAAMoF,WAC7B3O,KAAK0K,gBAAkBnB,EAAMqF,WAC7B5O,KAAK2K,gBAAkBpB,EAAMsF,WAC7B7O,KAAK4K,gBAAkBrB,EAAMuF,WAE7B9O,KAAK+K,sBAAuB,GAI9B,MAAMgE,EAAY,GAAGlN,KAAKmN,KAAKnN,KAAKoN,KAAK1F,EAAMpJ,SACzCwF,EAAa4D,EAAM5D,WACnBuJ,EAAmB3F,EAAM2F,iBAEzBC,EAAY,IAAInO,aAAa,EAAI+N,GAEvC,IAAK,IAAIjP,EAAI,EAAGA,EAAIyJ,EAAMpJ,OAAQL,IAAK,CACrC,MAAMsP,EAAIzJ,EAAW7F,EAAI6F,EAAWjE,QAAU,EAAIG,KAAKC,GACvDqN,EAAU,EAAIrP,EAAI,GAAKsP,EAAIvN,KAAKyB,MAAM8L,GACtCD,EAAU,EAAIrP,EAAI,GAAKoP,EAAiBpP,EAAIoP,EAAiBxN,OAC/D,CAEA,MAAM2N,EAAerP,KAAKsK,SAA0B,gBACpDnD,EAAGuF,YAAYvF,EAAGwF,WAAY0C,EAAa5G,WAC3CtB,EAAGyF,WAAWzF,EAAGwF,WAAY,EAAGxF,EAAGmI,IAAK,EAAGP,EAAW,EACxC5H,EAAGmI,IAAKnI,EAAGoI,MAAOJ,EAClC,CAEA,eAAAK,GACE,OAAQxP,KAAKwK,QAAQiF,cACrB,IAAK,aACL,IAAK,oBACH,MAAO,CAACzP,KAAKgI,QAAa,IAAG,OAC/B,IAAK,aACL,IAAK,aACL,IAAK,mBACH,MAAO,CAAChI,KAAKgI,QAAmB,UAAG,aAErC,MAAM0H,EAAU1P,KAAKwK,QAAQiF,aAC7B,MAAM,IAAIpQ,MAAM,8CAA8CqQ,IAChE,CAEA,gBAAA7B,GACE,MAAM1G,EAAKnH,KAAKmH,IAETwI,EAAcC,GAAoB5P,KAAKwP,kBACxCK,EAAgB7P,KAAKgI,QAAiB,QAEtC8H,EAA0C,aAApBF,EAG5BzI,EAAG4I,WAAWJ,GAGVG,GACF3I,EAAG6I,UAAU7I,EAAG8I,mBAAmBN,EAAc,cACpC3P,KAAK4K,gBAAkB5K,KAAKyK,iBAI3C,MAAMhJ,EAAIZ,EAAOuB,gBAAgB,GAAI,IAAInB,YAEzC,IAAIiP,EAAIC,EAAIC,EAEZ,MAAMC,EAAYrQ,KAAKwK,QAAQ8F,eAAiBtQ,KAAKyK,gBAErD,GAAIqF,EAAoB,CACtB,IAAIS,EAAavQ,KAAKwK,QAAQgG,mBAAqBxQ,KAAKyK,gBACpDgG,EAAazQ,KAAKwK,QAAQkG,qBAAuB1Q,KAAKyK,gBACtDkG,EAAaF,EAEgB,cAA7BzQ,KAAKwK,QAAQiF,eACfgB,GAA0BlM,EAAgBvE,KAAKyK,kBAGpB,GAAxBzK,KAAK4K,iBAA2B5K,KAAKwK,QAAQoG,kBAE9CL,EAAaF,EACbI,EAAaJ,EACbM,EAAaN,GAGjBH,EAAKzO,EAAEF,IAAIV,EAAOqC,cAAc,GAAIqN,IACpCL,EAAKA,EAAGjP,YAERkP,EAAK1O,EAAEF,IAAIV,EAAOqC,cAAc,GAAIuN,IACpCN,EAAKA,EAAGlP,YAAYM,IAAI,GAExB6O,EAAK3O,EAAEF,IAAIV,EAAOqC,cAAc,GAAIyN,IACpCP,EAAKA,EAAGnP,YAAYM,IAAI,EAC1B,MACE2O,EAAKzO,EAAEF,IAAIV,EAAOqC,cAAc,GAAImN,IACpCF,EAAKC,EAAKF,EAAKA,EAAGjP,YAGpBkG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAC7CoG,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,MACpCO,EAAGnP,KAAK,GAAIoP,EAAGpP,KAAK,GAAIqP,EAAGrP,KAAK,IAG7C,IAAI+P,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAGjCsM,IAEHgB,EAAgB,IAAItN,EAAQ,MAAQ,QAAU,GAClB,MAAQ,SAAW,QACnB,KAAO,IAAM,SAAUjC,IAAIuP,IAIxB,qBAA7B9Q,KAAKwK,QAAQiF,eACfqB,EAAgB,IAAItN,EAAQ,EAAG,GAAK,EACR,EAAG,EAAG,EACN,EAAG,EAAG,GAAGjC,IAAIuP,IAGvChB,IAE2B,GAAxB9P,KAAK4K,iBAA2B5K,KAAKwK,QAAQoG,kBAChDE,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAAGjC,IAAIuP,IAK7CA,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAGxD,KAAKwK,QAAQuG,gBAAiB,EACjC,EAAG,EAAG/Q,KAAKwK,QAAQuG,iBAAiBxP,IAAIuP,GAGpE,IAAIE,EAAM,EAAInP,KAAKC,GAAK9B,KAAKwK,QAAQyG,SAOrC,OALAH,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAG3B,KAAKG,IAAIgP,IAAOnP,KAAK0B,IAAIyN,GAC5B,EAAGnP,KAAK0B,IAAIyN,GAAMnP,KAAKG,IAAIgP,IAAMzP,IAAIuP,GAGzD9Q,KAAKwK,QAAQiF,cACrB,IAAK,aACL,IAAK,oBAEHqB,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,GAAI,QAAU,MACd,OAAQ,QAAU,GAAGjC,IAAIuP,GACrD,MAEF,IAAK,aACL,IAAK,aAEHA,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,GAAI,QAAU,SACd,UAAW,QAAU,GAAGjC,IAAIuP,GACxD,MAEF,IAAK,mBAEHA,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAAGjC,IAAIuP,GAGzCE,EAAiB,IAAVnP,KAAKC,GAAU,IACtBgP,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,EAAG3B,KAAKG,IAAIgP,IAAOnP,KAAK0B,IAAIyN,GAC5B,EAAGnP,KAAK0B,IAAIyN,GAAMnP,KAAKG,IAAIgP,IAAMzP,IAAIuP,GAGjEA,EAAgB,IAAItN,EAAQ,EAAG,EAAG,EACN,MAAQ,MAAQ,MAChB,MAAQ,KAAO,OAAOjC,IAAIuP,GACtD,MACF,QACE,MAAM,IAAIzR,MAAM,yBAAyBW,KAAKwK,QAAQiF,gBAIxD,MAAMyB,EAAalR,KAAKwK,QAAQ2G,gBAAkBnR,KAAK0K,gBACvD,IAAI0G,EAGFA,EADEtB,EACcgB,EAAcvP,IAAI,IAAIiC,EAAQ0N,EAAY,EAAG,EACf,EAAG,EAAG,EACN,EAAG,EAAG,IAEpCJ,EAAcvP,IAAI,IAAIiC,EAAQ0N,EAAY,EAAG,EACfA,EAAY,EAAG,EACfA,EAAY,EAAG,IAE/D/J,EAAG0J,UAAU1J,EAAG8I,mBAAmBN,EAAc,iBACpCyB,EAAclN,GAAG,EAAG,GACpBkN,EAAclN,GAAG,EAAG,GACpBkN,EAAclN,GAAG,EAAG,IAGjC,IAAImN,EAAWrR,KAAKwK,QAAQ8G,cAE5B,MAAMC,EAAcvR,KAAK2K,gBAAkB3K,KAAK0K,gBAC5C6G,EAAa,EACfF,GAAYE,EAEZF,EAAW,EAETA,EAAW,IACbA,EAAW,GAEbP,EAAgBA,EAAcvP,IAAI8P,GAElClK,EAAGqK,iBAAiBrK,EAAG8I,mBAAmBN,EAAc,kBACpC,EAAOmB,EAAc/P,MAGzCoG,EAAG4I,WAAWF,GAGd1I,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,UACrC7P,KAAKwK,QAAQiH,eAG1BtK,EAAGuK,UAAUvK,EAAG8I,mBAAmBJ,EAAe,cAAe,GACjE1I,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,mBACrC7P,KAAKwK,QAAQmH,wBAK1BxK,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,oBACrC7P,KAAKwK,QAAQuD,oBACZ,EAJI,GAIc/N,KAAKwK,QAAQuD,qBAEN,GAAnC/N,KAAKwK,QAAQuD,oBACf/N,KAAKiO,cAAc,oBAAqB,EAAG,GAG7C,IAAI2D,EAAiB5R,KAAKwK,QAAQqH,sBAC9BhQ,KAAKe,IAAIgP,GAAkB,OAC7BA,EAAiB,MACnBzK,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,kBACrC,EAAM+B,EAAiB,GAGpCzK,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,iBACrC7P,KAAKwK,QAAQsH,qBAC5B,CAEA,WAAAhE,GACE,MAAM3G,EAAKnH,KAAKmH,IACTwI,EAAcC,GAAoB5P,KAAKwP,kBAExCM,EAA0C,aAApBF,EAE5BzI,EAAG4I,WAAWJ,GAEd,MAAMoC,EAAU/R,KAAKsK,SAAmB,SAAE9J,KAC1CR,KAAKiO,cAAc,gBAAiB8D,EAAQ7R,MAAO6R,EAAQ5R,QAE3DgH,EAAGuK,UAAUvK,EAAG8I,mBAAmBN,EAAc,WAAY,GAC7DxI,EAAG6K,UAAU7K,EAAG8I,mBAAmBN,EAAc,eACpCoC,EAAQ7R,MAAO6R,EAAQ5R,QAEhC2P,IAEF3I,EAAGuK,UAAUvK,EAAG8I,mBAAmBN,EAAc,aAAc,GAE/DxI,EAAG8K,cAAc9K,EAAG+K,UAEpB/K,EAAGuF,YAAYvF,EAAGwF,WAAY3M,KAAKsK,SAA0B,gBAAE7B,WAE/DtB,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGiL,mBAAoBjL,EAAGkL,SAC1DlL,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGmL,mBAAoBnL,EAAGkL,SAE1DlL,EAAG8K,cAAc9K,EAAGoL,WActB,MAAM9M,EAAYzF,KAAKuJ,MAAM/I,KAE7B,IAAK,IAAIT,EAAI,EAAGA,EAAIC,KAAKuJ,MAAMpJ,OAAQJ,GAAKC,KAAK6K,aAAa1K,OAC5D,IAAK,IAAIL,EAAI,EAAGA,EAAIE,KAAKuJ,MAAMrJ,MAAOJ,GAAKE,KAAK6K,aAAa3K,MAAO,CAElE,MAAMsS,EAAWxS,KAAK6K,aAAazK,OAE9BN,EAAI0S,EAAStS,MAASuF,EAAUvF,QACnCsS,EAAStS,MAAQuF,EAAUvF,MAAQJ,GAChCC,EAAIyS,EAASrS,OAAUsF,EAAUtF,SACpCqS,EAASrS,OAASsF,EAAUtF,OAASJ,GACvC,MAAM0S,EAAc,IAAInS,EAAKR,EAAIiS,EAAQ7R,MACZH,EAAIgS,EAAQ5R,OACZqS,EAAStS,MAAQ6R,EAAQ7R,MACzBsS,EAASrS,OAAS4R,EAAQ5R,QACjDuS,EAAa,IAAIpS,GAAM,GACA,EACD,EAAIkS,EAAStS,MAAQF,KAAK6K,aAAa3K,MACvC,EAAIsS,EAASrS,OAASH,KAAK6K,aAAa1K,QAGpEgH,EAAGuF,YAAYvF,EAAGwF,WAAY3M,KAAKsK,SAAmB,SAAE7B,WAExDtB,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGiL,mBAAoBjL,EAAGkL,SAC1DlL,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGmL,mBAAoBnL,EAAGkL,SAKjErS,KAAK2S,cAAchD,EAAc+C,EAAYD,GAG7CtL,EAAGuF,YAAYvF,EAAGwF,WAAY3M,KAAKsK,SAAwB,cAAE7B,WAE7DtB,EAAGyL,kBAAkBzL,EAAGwF,WAAY,EAC/B7M,EAAGC,EAAG,EAAG,EACTyS,EAAStS,MAAOsS,EAASrS,OACzB,CAEJ,CAEA,aAAAwS,CAAcpL,EAAQsL,EAASC,EAASC,GACtC,MAAM5L,EAAKnH,KAAKmH,GAEhBA,EAAG6L,WAAW,EAAG,EAAG,EAAG,GACvB7L,EAAG8L,MAAM9L,EAAG+L,iBAAmB/L,EAAGgM,kBAElC,MAAMC,EAAmBjM,EAAGkM,kBAAkB9L,EAAQ,cAChD+L,EAAoB,CAACnM,EAAGkM,kBAAkB9L,EAAQ,eAClDgM,EAAW,CAACT,GACdC,IACTO,EAAkB5H,KAAKvE,EAAGkM,kBAAkB9L,EAAQ,gBACpDgM,EAAS7H,KAAKqH,IAGT,MAAMS,EAAiBxT,KAAKuK,QAAQ,GACpCpD,EAAGsM,WAAWtM,EAAGuM,aAAcF,GAC/B,MAAMG,EAAOd,EAAQpS,EACfmT,EAAOf,EAAQnS,EACfmT,EAAOhB,EAAQlS,EACfmT,EAAOjB,EAAQjS,EACrBuG,EAAG4M,WAAW5M,EAAGuM,aAAc,IAAI1S,aAAa,CAC9C2S,EAAME,EACND,EAAMC,EACNF,EAAMG,EACNH,EAAMG,EACNF,EAAMC,EACND,EAAME,IACJ3M,EAAG6M,aAEP7M,EAAG8M,wBAAwBb,GAC3BjM,EAAGsM,WAAWtM,EAAGuM,aAAcF,GAC/BrM,EAAG+M,oBAAoBd,EAAkB,EAAGjM,EAAGoI,OAAO,EAAO,EAAG,GAEhE,IAAK,IAAIjO,EAAI,EAAGA,EAAIiS,EAAS7R,OAAQJ,IAAK,CAC/C,MAAM6S,EAAiBnU,KAAKuK,QAAQjJ,EAAE,GACtC6F,EAAGsM,WAAWtM,EAAGuM,aAAcS,GAC/B,MAAMC,EAAOb,EAASjS,GAAGb,EACnB4T,EAAOd,EAASjS,GAAGZ,EACnB4T,EAAOf,EAASjS,GAAGX,EACnB4T,EAAOhB,EAASjS,GAAGV,EACzBuG,EAAG4M,WAAW5M,EAAGuM,aAAc,IAAI1S,aAAa,CACvCoT,EAAME,EACND,EAAMC,EACNF,EAAMG,EACNH,EAAMG,EACNF,EAAMC,EACND,EAAME,IACXpN,EAAG6M,aAEP7M,EAAG8M,wBAAwBX,EAAkBhS,IAC7C6F,EAAGsM,WAAWtM,EAAGuM,aAAcS,GAC/BhN,EAAG+M,oBAAoBZ,EAAkBhS,GAAI,EAAG6F,EAAGoI,OAAO,EAAO,EAAG,EAC/D,CAEApI,EAAGqN,WAAWrN,EAAGsN,UAAW,EAAG,EACjC,CAEA,iBAAAzG,GACE,MAAM7G,EAAKnH,KAAKmH,GAEV0I,EAAgB7P,KAAKgI,QAAiB,QAO5C,GAAwB,GAApBhI,KAAKuJ,MAAMrJ,OAAmC,GAArBF,KAAKuJ,MAAMpJ,OAE7C,YADAH,KAAKiO,cAAc,oBAAqB,EAAG,GAKtC,MAAMyG,EAAoB1U,KAAKwK,QAAQkK,kBAGjCC,EAAa,IAAIrU,GAAM,GAAI,EAAG,EAAG,GAEjCsU,EAAsB5U,KAAK6K,aAAaxK,MACxCwU,EAAqBH,EAAkBrU,MAEvCA,EAAQuU,EAAsBC,EAEhCxU,EAAQ,GACjBsU,EAAWpU,OAAOT,GAAKO,EACvBsU,EAAWnU,KAAKN,OAASG,IAEzBsU,EAAWpU,OAAOR,GAAKM,EACvBsU,EAAWnU,KAAKL,QAAUE,GAIrB,MAAMyU,EAAc,IAAIxU,EAAK,EAAG,EAAG,EAAG,GAGhCyU,EAAiB/U,KAAKuJ,MAAMyL,UAAYhV,KAAKuJ,MAAMpJ,OAEnD8U,EAAqBjV,KAAKkV,yBACrC,IAAItV,GAAO,EAAQ,EAAImV,EAAR,IACJI,EAAsBnV,KAAKkV,yBACtC,IAAItV,EAAM,EAAG,EAAI,EAAImV,IAEVK,EAAgB,IAAI9U,EAAK2U,EAAmBnV,EACnBmV,EAAmBlV,EACnBoV,EAAoBrV,EAAImV,EAAmBnV,EAC3CqV,EAAoBpV,EAAIkV,EAAmBlV,GAEpEsV,EAAa,IAAIpV,EAAK,GAAMD,KAAK6K,aAAa3K,MACxByU,EAAWnU,KAAKN,MAChB,GAAMF,KAAK6K,aAAa1K,OACxBwU,EAAWnU,KAAKL,QAEtCmV,EAAkB,IAAIrV,EAAKoV,EAAWnV,MACXF,KAAKwK,QAAQ+K,UAAUrV,MACvBmV,EAAWlV,OACXH,KAAKwK,QAAQ+K,UAAUpV,QAExD,IAAIqV,EAGJ,MAAMC,EAAUzV,KAAKsK,SAAwB,cAG7CnD,EAAG4I,WAAWF,GAGd,MAAMkC,EAAU0D,EAAQjV,KAExB2G,EAAGuK,UAAUvK,EAAG8I,mBAAmBJ,EAAe,WAAY,GAC9D1I,EAAG6K,UAAU7K,EAAG8I,mBAAmBJ,EAAe,eACrCkC,EAAQ7R,MAAO6R,EAAQ5R,QAGpCqV,EAAgB,IAAIlV,GAAM,IAAM,GAAMuU,EACb,EAAK,EAAMA,GACpC1N,EAAG6K,UAAU7K,EAAG8I,mBAAmBJ,EAAe,cACrC,EAAG,EAAMgF,GAGtB,MAAMa,EAAiBJ,EAAgBnV,OAASH,KAAKuJ,MAAMpJ,OAC3D,IASIwV,EACAC,EAVAC,EAAgB7V,KAAKwK,QAAQsL,qBAWjC,OATAD,EAAkBH,EAAiB,IAAOG,EACxBH,EAAiB,EAAK,GACtBA,EAAiB,GAAK,GAAYG,EAEpD1O,EAAG6I,UAAU7I,EAAG8I,mBAAmBJ,EAAe,iBAAkBgG,GAK5D7V,KAAKwK,QAAQuL,mBAEnB,IAAK,mBACHJ,EAAoB3V,KAAKsK,SAA2B,iBACpDsL,EAAwB,GAAK,IAAQ,KACrC,MACF,IAAK,oBACHD,EAAoB3V,KAAKsK,SAA4B,kBACrDsL,EAAwB,EACxB,MACF,IAAK,sBACHD,EAAoB3V,KAAKsK,SAA8B,oBACvDsL,EAAwB,EACxB,MACF,IAAK,iBACHD,EAAoB3V,KAAKsK,SAAyB,eAClDsL,EAAwB,EACxB,MACF,IAAK,mBACHD,EAAoB3V,KAAKsK,SAA2B,iBACpDsL,EAAwB,EAI5B,IAAII,EAAqBhW,KAAKwK,QAAQyL,0BAElCD,GAAsB,OACxBA,EAAqB,MAEvB,MAAME,EAAmBxB,EAAkBxU,MAClBF,KAAKwK,QAAQ2L,oBACb,KAAO,GAAMH,EAChCI,EAAiB,IAAInW,EAAKiW,EACAA,EAAkBN,EAClBf,GAEhC1N,EAAG8K,cAAc9K,EAAG+K,UAEpB/K,EAAGuF,YAAYvF,EAAGwF,WAAYgJ,EAAkBlN,WAEhDtB,EAAG6K,UAAU7K,EAAG8I,mBAAmBJ,EAAe,kBACrCuG,EAAelW,MAAOkW,EAAejW,QAGlDgH,EAAG8K,cAAc9K,EAAGkP,UAEpBlP,EAAGuF,YAAYvF,EAAGwF,WAAY3M,KAAKsK,SAA4B,kBAAE7B,WAEjEtB,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGiL,mBAAoBjL,EAAGkL,SAC1DlL,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGmL,mBAAoBnL,EAAGkL,SAE1DlL,EAAG8K,cAAc9K,EAAGoL,UAEpBpL,EAAGuK,UAAUvK,EAAG8I,mBAAmBJ,EAAe,eAAgB,GAClE1I,EAAG6K,UAAU7K,EAAG8I,mBAAmBJ,EAAe,qBACrC7P,KAAK8K,mBAAmBhL,EAAGE,KAAK8K,mBAAmB/K,GAChEoH,EAAG6K,UAAU7K,EAAG8I,mBAAmBJ,EAAe,mBACrC7P,KAAK8K,mBAAmB5K,MAAOF,KAAK8K,mBAAmB3K,QAMpEgH,EAAGuF,YAAYvF,EAAGwF,WAAY8I,EAAQhN,WAEtCtB,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGiL,mBAAoBjL,EAAGmP,QAC1DnP,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGmL,mBAAoBnL,EAAGmP,QAE1DnP,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGoP,eAAgBpP,EAAGqP,eACtDrP,EAAGgL,cAAchL,EAAGwF,WAAYxF,EAAGsP,eAAgBtP,EAAGqP,eAItDxW,KAAK2S,cAAc9C,EAAe8E,EAAYS,EAAeN,EA8B/D,CAEA,wBAAAI,CAAyBwB,GACvB,MAAMC,EAAc3W,KAAKwK,QAAQmM,YAC3BpB,EAAYvV,KAAKwK,QAAQ+K,UAE/BmB,EAAI,IAAI9W,GAAO8W,EAAE5W,EAAI,EAAI6W,EAAY7W,GAAKyV,EAAUrV,OACrCwW,EAAE3W,EAAI,EAAI4W,EAAY5W,GAAKwV,EAAUpV,QAEpD,MAAMsF,EAAYzF,KAAKuJ,MAAM/I,KACvBuR,EAAU/R,KAAKsK,SAAmB,SAAE9J,KAK1C,OAHAkW,EAAE5W,EAAgB,IAAX4W,EAAE5W,EAAI,GAAW2F,EAAUvF,MAAQ6R,EAAQ7R,MAClDwW,EAAE3W,EAAgB,IAAX2W,EAAE3W,EAAI,GAAW0F,EAAUtF,OAAS4R,EAAQ5R,OAE5CuW,CACT,CAKA,aAAAzI,CAAc7G,EAAMlH,EAAOC,EAAQkO,GAAU,GAC3C,MAAMlH,EAAKnH,KAAKmH,GACVsF,EAAUzM,KAAKsK,SAASlD,GAC9B,IAAKqF,EACH,MAAM,IAAIpN,MAAM,6BAA6B+H,KAM/C,GAJIlH,EAAQ,IAAGA,EAAQ,GACnBC,EAAS,IAAGA,EAAS,GACzBD,EAAQ,GAAG2B,KAAKmN,KAAKnN,KAAKoN,KAAK/O,IAC/BC,EAAS,GAAG0B,KAAKmN,KAAKnN,KAAKoN,KAAK9O,IAC5BsM,EAAQvM,OAASA,GAASuM,EAAQtM,QAAUA,EAAQ,CACtDsM,EAAQvM,MAAQA,EAChBuM,EAAQtM,OAASA,EACjBgH,EAAGuF,YAAYvF,EAAGwF,WAAYF,EAAQhE,WAC7C,MACamO,EAAQ,IAAIpI,WADVtO,EAAQC,GAAUkO,EAAY,EAAI,IAE3ChH,EAAOgH,EAAYlH,EAAGiH,UAAYjH,EAAG0F,KACpC1F,EAAGyF,WAAWzF,EAAGwF,WAAY,EAAGtF,EAAMnH,EAAOC,EAAQ,EACvCkH,EAAMF,EAAG2F,cAAe8J,EACxC,CACF,GA8BAC,qBAn5B2B,MAC3B,WAAAhX,GACEG,KAAKyP,aAAe,aACpBzP,KAAKmR,gBAAkB,EACvBnR,KAAKsR,cAAgB,EACrBtR,KAAK+Q,gBAAkB,EACvB/Q,KAAKiR,SAAW,EAChBjR,KAAK2W,YAAc,IAAI/W,EAAM,EAAG,GAChCI,KAAKuV,UAAY,IAAItV,EAAK,KAAM,MAChCD,KAAKsQ,eAAiB,IACtBtQ,KAAKwQ,mBAAqB,IAC1BxQ,KAAK0Q,qBAAuB,IAC5B1Q,KAAK4Q,gBAAiB,EAEtB5Q,KAAK0U,kBAAoB,IAAIzU,EAAK,IAAK,KACvCD,KAAKmW,oBAAsB,GAC3BnW,KAAKyR,cAAgB,IACrBzR,KAAK8V,qBAAuB,IAC5B9V,KAAK2R,uBAAyB,IAC9B3R,KAAKiW,0BAA4B,GACjCjW,KAAK+V,kBAAoB,mBACzB/V,KAAK+N,mBAAqB,EAC1B/N,KAAK6R,sBAAwB,EAC7B7R,KAAK8R,qBAAuB,CAC9B,GA43BAgF,UAt3BgB,MAChB,WAAAjX,CAAYkB,GACV,GAAmB,iBAARA,EACT,MAAM,IAAI1B,MAAM,6CAA6C0B,MAE/D,KAAMA,aAAgBgW,WACpB,MAAM,IAAI1X,MAAM,wCAAwC0B,EAAKlB,YAAYuH,SAG3EpH,KAAK2O,WAAarK,EAClBtE,KAAK4O,WAAa,EAClB5O,KAAK6O,WAAa,EAClB7O,KAAKgV,UAAY,EACjBhV,KAAK8O,WAAazK,EAClBrE,KAAK2F,WAAaK,EAAaL,WAC/B3F,KAAKkP,iBAAmB,EAAC,GACzBlP,KAAKe,KAAOA,CACd,CAEA,SAAIb,GACF,OAAOF,KAAKe,KAAKb,KACnB,CAEA,UAAIC,GACF,OAAOH,KAAKe,KAAKZ,MACnB,CAEA,QAAIK,GACF,OAAO,IAAIP,EAAKD,KAAKe,KAAKb,MAAOF,KAAKe,KAAKZ,OAC7C,GA01BAU,OAAQA,EACRZ,KAAMA,EACNL,MAAOA,EAEV,CA/+CiB,GAk/ChBtB,EAAOD,QAAU,CACfsB,UAAWA,E,GCp/CXqX,EAA2B,CAAC,EAGhC,SAASjY,EAAoBkY,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAa7Y,QAGrB,IAAIC,EAAS0Y,EAAyBC,GAAY,CAGjD5Y,QAAS,CAAC,GAOX,OAHA+Y,EAAoBH,GAAU3Y,EAAQA,EAAOD,QAASU,GAG/CT,EAAOD,OACf,CAGAU,EAAoBuD,EAAI8U,ECxBxBrY,EAAoBsY,EAAI,CAAChZ,EAASiZ,KACjC,IAAI,IAAIC,KAAOD,EACXvY,EAAoBC,EAAEsY,EAAYC,KAASxY,EAAoBC,EAAEX,EAASkZ,IAC5E7X,OAAO8X,eAAenZ,EAASkZ,EAAK,CAAEE,YAAY,EAAMC,IAAKJ,EAAWC,IAE1E,ECNDxY,EAAoB4Y,EAAI,CAAC,EAGzB5Y,EAAoBK,EAAKwY,GACjB3Y,QAAQqN,IAAI5M,OAAOD,KAAKV,EAAoB4Y,GAAG5U,QAAO,CAAC8U,EAAUN,KACvExY,EAAoB4Y,EAAEJ,GAAKK,EAASC,GAC7BA,IACL,KCNJ9Y,EAAoB+Y,EAAKF,GAEZA,EAAU,aCHvB7Y,EAAoBC,EAAI,CAAC+Y,EAAKC,IAAUtY,OAAOuY,UAAUC,eAAeC,KAAKJ,EAAKC,GRA9EtZ,EAAa,CAAC,EACdC,EAAoB,UAExBI,EAAoB0B,EAAI,CAAC2X,EAAKC,EAAMd,EAAKK,KACxC,GAAGlZ,EAAW0Z,GAAQ1Z,EAAW0Z,GAAK1M,KAAK2M,OAA3C,CACA,IAAIC,EAAQC,EACZ,QAAWpB,IAARI,EAEF,IADA,IAAIiB,EAAU5O,SAAS6O,qBAAqB,UACpCnX,EAAI,EAAGA,EAAIkX,EAAQ9W,OAAQJ,IAAK,CACvC,IAAIoX,EAAIF,EAAQlX,GAChB,GAAGoX,EAAEC,aAAa,QAAUP,GAAOM,EAAEC,aAAa,iBAAmBha,EAAoB4Y,EAAK,CAAEe,EAASI,EAAG,KAAO,CACpH,CAEGJ,IACHC,GAAa,GACbD,EAAS1O,SAASC,cAAc,WAEzB+O,QAAU,QACjBN,EAAOO,QAAU,IACb9Z,EAAoB+Z,IACvBR,EAAOS,aAAa,QAASha,EAAoB+Z,IAElDR,EAAOS,aAAa,eAAgBpa,EAAoB4Y,GAExDe,EAAO7R,IAAM2R,GAEd1Z,EAAW0Z,GAAO,CAACC,GACnB,IAAIW,EAAmB,CAAChW,EAAMiW,KAE7BX,EAAO9R,QAAU8R,EAAO/R,OAAS,KACjC2S,aAAaL,GACb,IAAIM,EAAUza,EAAW0Z,GAIzB,UAHO1Z,EAAW0Z,GAClBE,EAAOc,YAAcd,EAAOc,WAAWC,YAAYf,GACnDa,GAAWA,EAAQG,SAASC,GAAQA,EAAGN,KACpCjW,EAAM,OAAOA,EAAKiW,EAAM,EAExBJ,EAAUW,WAAWR,EAAiBS,KAAK,UAAMtC,EAAW,CAAE9P,KAAM,UAAWqS,OAAQpB,IAAW,MACtGA,EAAO9R,QAAUwS,EAAiBS,KAAK,KAAMnB,EAAO9R,SACpD8R,EAAO/R,OAASyS,EAAiBS,KAAK,KAAMnB,EAAO/R,QACnDgS,GAAc3O,SAAS+P,KAAKC,YAAYtB,EApCkB,CAoCX,ESvChDvZ,EAAoB2B,EAAKrC,IACH,oBAAXwb,QAA0BA,OAAOC,aAC1Cpa,OAAO8X,eAAenZ,EAASwb,OAAOC,YAAa,CAAEC,MAAO,WAE7Dra,OAAO8X,eAAenZ,EAAS,aAAc,CAAE0b,OAAO,GAAO,ECL9Dhb,EAAoB2X,EAAI,Q,MCKxB,IAAIsD,EAAkB,CACrB,IAAK,GAGNjb,EAAoB4Y,EAAE5V,EAAI,CAAC6V,EAASC,KAElC,IAAIoC,EAAqBlb,EAAoBC,EAAEgb,EAAiBpC,GAAWoC,EAAgBpC,QAAWT,EACtG,GAA0B,IAAvB8C,EAGF,GAAGA,EACFpC,EAASnM,KAAKuO,EAAmB,QAC3B,CAGL,IAAIC,EAAU,IAAIjb,SAAQ,CAACC,EAASkH,IAAY6T,EAAqBD,EAAgBpC,GAAW,CAAC1Y,EAASkH,KAC1GyR,EAASnM,KAAKuO,EAAmB,GAAKC,GAGtC,IAAI9B,EAAMrZ,EAAoB2X,EAAI3X,EAAoB+Y,EAAEF,GAEpDuC,EAAQ,IAAI9a,MAgBhBN,EAAoB0B,EAAE2X,GAfFa,IACnB,GAAGla,EAAoBC,EAAEgb,EAAiBpC,KAEf,KAD1BqC,EAAqBD,EAAgBpC,MACRoC,EAAgBpC,QAAWT,GACrD8C,GAAoB,CACtB,IAAIG,EAAYnB,IAAyB,SAAfA,EAAM5R,KAAkB,UAAY4R,EAAM5R,MAChEgT,EAAUpB,GAASA,EAAMS,QAAUT,EAAMS,OAAOjT,IACpD0T,EAAMG,QAAU,iBAAmB1C,EAAU,cAAgBwC,EAAY,KAAOC,EAAU,IAC1FF,EAAM/S,KAAO,iBACb+S,EAAM9S,KAAO+S,EACbD,EAAMI,QAAUF,EAChBJ,EAAmB,GAAGE,EACvB,CACD,GAEwC,SAAWvC,EAASA,EAE/D,CACD,EAcF,IAAI4C,EAAuB,CAACC,EAA4B1Z,KACvD,IAGIkW,EAAUW,GAHT8C,EAAUC,EAAaC,GAAW7Z,EAGhBO,EAAI,EAC3B,GAAGoZ,EAASG,MAAMrb,GAAgC,IAAxBwa,EAAgBxa,KAAa,CACtD,IAAIyX,KAAY0D,EACZ5b,EAAoBC,EAAE2b,EAAa1D,KACrClY,EAAoBuD,EAAE2U,GAAY0D,EAAY1D,IAG7C2D,GAAsBA,EAAQ7b,EAClC,CAEA,IADG0b,GAA4BA,EAA2B1Z,GACrDO,EAAIoZ,EAAShZ,OAAQJ,IACzBsW,EAAU8C,EAASpZ,GAChBvC,EAAoBC,EAAEgb,EAAiBpC,IAAYoC,EAAgBpC,IACrEoC,EAAgBpC,GAAS,KAE1BoC,EAAgBpC,GAAW,CAC5B,EAIGkD,EAAqBrc,KAAyB,mBAAIA,KAAyB,oBAAK,GACpFqc,EAAmBxB,QAAQkB,EAAqBf,KAAK,KAAM,IAC3DqB,EAAmBpP,KAAO8O,EAAqBf,KAAK,KAAMqB,EAAmBpP,KAAK+N,KAAKqB,G,ioBCrFvF,MAAMC,OAA2C,IAAxBC,OAAOC,aAEjB,MAAMC,EAIjB,WAAArb,GACIG,KAAKoY,IAAM,IAAI+C,IAAIH,OAAOI,SAASC,MACnCrb,KAAKsb,MAAQN,OAAOpR,SAAS0R,KACjC,CAEA,SAAAP,GACI,OAAOA,CACX,CAIA,QAAAQ,CAASnU,EAAcoU,EAA8B,M,MACjD,OAAIxb,KAAKoY,IAAIqD,aAAaC,IAAItU,GACnBpH,KAAKoY,IAAIqD,aAAa/D,IAAItQ,GAGjC2T,GACwC,QAAjC,EAAAC,OAAOC,aAAaU,QAAQvU,UAAK,QAErCoU,CACX,CAEA,SAAAI,CAAUxU,EAAc2S,GAChB/Z,KAAKoY,IAAIqD,aAAaC,IAAItU,KAC1BpH,KAAKoY,IAAIqD,aAAaI,IAAIzU,EAAM2S,GAChC+B,QAAQC,aAAa,KAAM/b,KAAKsb,MAAOtb,KAAKoY,IAAI4D,aAGhDjB,GACAC,OAAOC,aAAagB,QAAQ7U,EAAM2S,EAE1C,EC/BJ,SAASmC,EAAkBxC,EAAQyC,GACjC,IAAK,IAAI7a,EAAI,EAAGA,EAAI6a,EAAMza,OAAQJ,IAAK,CACrC,IAAI8a,EAAaD,EAAM7a,GACvB8a,EAAW3E,WAAa2E,EAAW3E,aAAc,EACjD2E,EAAWC,cAAe,EACtB,UAAWD,IAAYA,EAAWE,UAAW,GACjD5c,OAAO8X,eAAekC,EAAQ0C,EAAW7E,IAAK6E,EAChD,CACF,CAQA,SAASG,EAAmBC,GAC1B,OAGF,SAA4BA,GAC1B,GAAIC,MAAMC,QAAQF,GAAM,OAAOG,EAAkBH,EACnD,CALSI,CAAmBJ,IAO5B,SAA0BK,GACxB,GAAsB,oBAAXhD,QAA0BA,OAAOiD,YAAYpd,OAAOmd,GAAO,OAAOJ,MAAMM,KAAKF,EAC1F,CAToCG,CAAiBR,IAWrD,SAAqCxd,EAAGie,GACtC,GAAKje,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO2d,EAAkB3d,EAAGie,GACvD,IAAInc,EAAIpB,OAAOuY,UAAU+D,SAAS7D,KAAKnZ,GAAGke,MAAM,GAAI,GAEpD,MADU,WAANpc,GAAkB9B,EAAEa,cAAaiB,EAAI9B,EAAEa,YAAYuH,MAC7C,QAANtG,GAAqB,QAANA,EAAoB2b,MAAMM,KAAKjc,GACxC,cAANA,GAAqB,2CAA2Cqc,KAAKrc,GAAW6b,EAAkB3d,EAAGie,QAAzG,CALc,CAMhB,CAlB6DG,CAA4BZ,IA4BzF,WACE,MAAM,IAAIa,UAAU,uIACtB,CA9BiGC,EACjG,CAmBA,SAASX,EAAkBH,EAAKe,IACnB,MAAPA,GAAeA,EAAMf,EAAI9a,UAAQ6b,EAAMf,EAAI9a,QAE/C,IAAK,IAAIJ,EAAI,EAAGkc,EAAO,IAAIf,MAAMc,GAAMjc,EAAIic,EAAKjc,IAAKkc,EAAKlc,GAAKkb,EAAIlb,GAEnE,OAAOkc,CACT,CAMA,IAEMC,EAEAC,EAwPAC,EA0BAC,EA+BAC,EArTFC,GAEEL,EAAqB,CAAC,UAAW,aAAc,gEAAiE,4CAA6C,8CAA+C,4CAA6C,SAAU,SAAU,QAAS,oBAAqB,mCAE3SC,EAAqB,WACvB,SAASA,EAAMK,GACb,IAAIC,EAAcD,EAAKC,YACnBC,EAAgBF,EAAKG,SACrBA,OAA6B,IAAlBD,EAA2B,GAAKA,EAC3CE,EAAcJ,EAAKK,OACnBA,OAAyB,IAAhBD,EAAyB,WAAa,EAAIA,EACnDE,EAAeN,EAAKO,QACpBA,OAA2B,IAAjBD,EAA0B,WAAa,EAAIA,EACrDE,EAAmBR,EAAKS,YACxBA,OAAmC,IAArBD,EAA8B,0BAA4BA,EACxEE,EAAoBV,EAAKW,aACzBA,OAAqC,IAAtBD,EAA+B,wBAA0BA,EACxEE,EAAiBZ,EAAKa,UACtBA,OAA+B,IAAnBD,EAA4B,UAAYA,EACpDE,EAAqBd,EAAKe,cAC1BA,OAAuC,IAAvBD,GAAwCA,EACxDE,EAAoBhB,EAAKiB,aACzBA,OAAqC,IAAtBD,GAAuCA,EACtDE,EAAwBlB,EAAKmB,oBAC7BA,OAAgD,IAA1BD,GAA2CA,EACjEE,EAAwBpB,EAAKqB,mBAC7BA,OAA+C,IAA1BD,GAA2CA,EAChEE,EAAiBtB,EAAKuB,UACtBA,OAA+B,IAAnBD,GAAoCA,GAnF1D,SAAyBE,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAInC,UAAU,oCAExB,CAiFMoC,CAAgBzf,KAAM0d,GAGtB1d,KAAK0f,MAAQ9V,SAAS+V,eAAe3B,GAErChe,KAAK4f,OAAS,CACZN,UAAWA,EACXR,cAAeA,EACfN,YAAaA,EACbE,aAAcA,EACdE,UAAWA,EACXR,OAAQA,EACRE,QAASA,EACTY,oBAAqBA,EACrBE,mBAAoBA,EACpBJ,aAAcA,GAGZd,EAASxc,OAAS,GAAG1B,KAAK6f,iBAAiBC,MAAM9f,KAAMuc,EAAmB2B,IAE9Ele,KAAK+f,QAAU/f,KAAK+f,QAAQtG,KAAKzZ,MACjCA,KAAKggB,UAAYhgB,KAAKggB,UAAUvG,KAAKzZ,KACvC,CA3FJ,IAAsBwf,EAAaS,EAyR/B,OAzRkBT,EAmGL9B,EAnGkBuC,EAmGX,CAAC,CACnB1I,IAAK,mBACLwC,MAAO,WAGL,IAFA,IAAImG,EAAQlgB,KAEHmgB,EAAOC,UAAU1e,OAAQwc,EAAW,IAAIzB,MAAM0D,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACnFnC,EAASmC,GAAQD,UAAUC,GAG7BnC,EAASoC,OAAOC,SAASjH,SAAQ,SAAUkH,GACzCA,EAAQC,iBAAiB,SAAS,SAAUxH,GAC1C,OAAOiH,EAAMQ,UAAUzH,EACzB,GACF,GACF,GACC,CACD1B,IAAK,YACLwC,MAAO,WACL,IAAI4G,EAAS3gB,KAETiZ,EAAQmH,UAAU1e,OAAS,QAAsByV,IAAjBiJ,UAAU,GAAmBA,UAAU,GAAK,KAChFpgB,KAAK4gB,cAAgBhX,SAASgX,cAC9B5gB,KAAK0f,MAAM3G,aAAa,cAAe,SACvC/Y,KAAK0f,MAAMmB,UAAUC,IAAI9gB,KAAK4f,OAAOhB,WACrC5e,KAAK+gB,gBAAgB,WACrB/gB,KAAKghB,oBAEDhhB,KAAK4f,OAAOR,mBAOdpf,KAAK0f,MAAMe,iBAAiB,gBANd,SAASQ,IACrBN,EAAOjB,MAAMwB,oBAAoB,eAAgBD,GAAS,GAE1DN,EAAOQ,qBACT,IAEqD,GAErDnhB,KAAKmhB,sBAGPnhB,KAAK4f,OAAOxB,OAAOpe,KAAK0f,MAAO1f,KAAK4gB,cAAe3H,EACrD,GACC,CACD1B,IAAK,aACLwC,MAAO,WACL,IAAId,EAAQmH,UAAU1e,OAAS,QAAsByV,IAAjBiJ,UAAU,GAAmBA,UAAU,GAAK,KAC5EV,EAAQ1f,KAAK0f,MAWjB,GAVA1f,KAAK0f,MAAM3G,aAAa,cAAe,QACvC/Y,KAAKohB,uBACLphB,KAAK+gB,gBAAgB,UAEjB/gB,KAAK4gB,eAAiB5gB,KAAK4gB,cAAcS,OAC3CrhB,KAAK4gB,cAAcS,QAGrBrhB,KAAK4f,OAAOtB,QAAQte,KAAK0f,MAAO1f,KAAK4gB,cAAe3H,GAEhDjZ,KAAK4f,OAAOV,oBAAqB,CACnC,IAAIN,EAAY5e,KAAK4f,OAAOhB,UAE5B5e,KAAK0f,MAAMe,iBAAiB,gBAAgB,SAASQ,IACnDvB,EAAMmB,UAAUS,OAAO1C,GACvBc,EAAMwB,oBAAoB,eAAgBD,GAAS,EACrD,IAAG,EACL,MACEvB,EAAMmB,UAAUS,OAAOthB,KAAK4f,OAAOhB,UAEvC,GACC,CACDrH,IAAK,iBACLwC,MAAO,SAAwBiE,GAC7Bhe,KAAK0f,MAAQ9V,SAAS+V,eAAe3B,GACjChe,KAAK0f,OAAO1f,KAAKuhB,YACvB,GACC,CACDhK,IAAK,kBACLwC,MAAO,SAAyByH,GAC9B,GAAKxhB,KAAK4f,OAAOd,cAAjB,CACA,IAAI2C,EAAO7X,SAAS8X,cAAc,QAElC,OAAQF,GACN,IAAK,SACH9hB,OAAOiiB,OAAOF,EAAKG,MAAO,CACxBC,SAAU,KAEZ,MAEF,IAAK,UACHniB,OAAOiiB,OAAOF,EAAKG,MAAO,CACxBC,SAAU,WAZsB,CAgBxC,GACC,CACDtK,IAAK,oBACLwC,MAAO,WACL/Z,KAAK0f,MAAMe,iBAAiB,aAAczgB,KAAK+f,SAC/C/f,KAAK0f,MAAMe,iBAAiB,QAASzgB,KAAK+f,SAC1CnW,SAAS6W,iBAAiB,UAAWzgB,KAAKggB,UAC5C,GACC,CACDzI,IAAK,uBACLwC,MAAO,WACL/Z,KAAK0f,MAAMwB,oBAAoB,aAAclhB,KAAK+f,SAClD/f,KAAK0f,MAAMwB,oBAAoB,QAASlhB,KAAK+f,SAC7CnW,SAASsX,oBAAoB,UAAWlhB,KAAKggB,UAC/C,GACC,CACDzI,IAAK,UACLwC,MAAO,SAAiBd,GAClBA,EAAMS,OAAOoI,aAAa9hB,KAAK4f,OAAOlB,eACxC1e,KAAKuhB,WAAWtI,EAEpB,GACC,CACD1B,IAAK,YACLwC,MAAO,SAAmBd,GACF,KAAlBA,EAAM8I,SAAgB/hB,KAAKuhB,WAAWtI,GAEpB,IAAlBA,EAAM8I,SAAe/hB,KAAKgiB,YAAY/I,EAC5C,GACC,CACD1B,IAAK,oBACLwC,MAAO,WACL,IAAIkI,EAAQjiB,KAAK0f,MAAMwC,iBAAiBzE,GACxC,OAAOhB,MAAMqD,WAAM,EAAQvD,EAAmB0F,GAChD,GAMC,CACD1K,IAAK,sBACLwC,MAAO,WACL,IAAIoI,EAASniB,KAEb,IAAIA,KAAK4f,OAAOZ,aAAhB,CACA,IAAIoD,EAAiBpiB,KAAKqiB,oBAE1B,GAA8B,IAA1BD,EAAe1gB,OAAnB,CAGA,IAAI4gB,EAA+BF,EAAe9B,QAAO,SAAUiC,GACjE,OAAQA,EAAKT,aAAaK,EAAOvC,OAAOlB,aAC1C,IACI4D,EAA6B5gB,OAAS,GAAG4gB,EAA6B,GAAGjB,QACjC,IAAxCiB,EAA6B5gB,QAAc0gB,EAAe,GAAGf,OAP1B,CAHH,CAWtC,GACC,CACD9J,IAAK,cACLwC,MAAO,SAAqBd,GAC1B,IAAImJ,EAAiBpiB,KAAKqiB,oBAE1B,GAA8B,IAA1BD,EAAe1gB,OAUnB,GAJA0gB,EAAiBA,EAAe9B,QAAO,SAAUiC,GAC/C,OAA6B,OAAtBA,EAAKC,YACd,IAEKxiB,KAAK0f,MAAM+C,SAAS7Y,SAASgX,eAE3B,CACL,IAAI8B,EAAmBN,EAAeO,QAAQ/Y,SAASgX,eAEnD3H,EAAM2J,UAAiC,IAArBF,IACpBN,EAAeA,EAAe1gB,OAAS,GAAG2f,QAC1CpI,EAAM4J,mBAGH5J,EAAM2J,UAAYR,EAAe1gB,OAAS,GAAKghB,IAAqBN,EAAe1gB,OAAS,IAC/F0gB,EAAe,GAAGf,QAClBpI,EAAM4J,iBAEV,MAbET,EAAe,GAAGf,OActB,IArRApB,GAAY/D,EAAkBsD,EAAYvH,UAAWgI,GAwRhDvC,CACT,CA/OyB,GAwPrBC,EAAc,KA0BdC,EAAwB,SAA+Bpe,GACzD,IAAKoK,SAAS+V,eAAengB,GAG3B,OAFAsjB,QAAQC,KAAK,8CAAmDC,OAAOxjB,EAAI,KAAM,8DAA+D,iEAChJsjB,QAAQC,KAAK,aAAc,8DAA+D,0BAA6BC,OAAOxjB,EAAI,cAC3H,CAEX,EAyBIqe,EAAe,SAAsBK,EAAU+E,GAEjD,GAlB4B,SAAiC/E,GACzDA,EAASxc,QAAU,IACrBohB,QAAQC,KAAK,kEAAwE,8DAA+D,mBACpJD,QAAQC,KAAK,aAAc,8DAA+D,uDAG9F,CAWEG,CAAwBhF,IACnB+E,EAAY,OAAO,EAExB,IAAK,IAAIzjB,KAAMyjB,EACbrF,EAAsBpe,GAGxB,OAAO,CACT,EA2DO,CACL2jB,KApDS,SAAcvD,GAEvB,IAAIwD,EAAU1jB,OAAOiiB,OAAO,CAAC,EAAG,CAC9BnD,YAAa,2BACZoB,GAEC1B,EAAW3B,EAAmB3S,SAASsY,iBAAiB,IAAIc,OAAOI,EAAQ5E,YAAa,OAGxFyE,EA1EmB,SAA4B/E,EAAUmF,GAC7D,IAAIJ,EAAa,GAMjB,OALA/E,EAAS5E,SAAQ,SAAUkH,GACzB,IAAIxC,EAAcwC,EAAQ8C,WAAWD,GAAatJ,WAClB5C,IAA5B8L,EAAWjF,KAA4BiF,EAAWjF,GAAe,IACrEiF,EAAWjF,GAAatS,KAAK8U,EAC/B,IACOyC,CACT,CAkEmBM,CAAmBrF,EAAUkF,EAAQ5E,aAEtD,IAA0B,IAAtB4E,EAAQ9D,YAA6D,IAAvCzB,EAAaK,EAAU+E,GAEzD,IAAK,IAAI1L,KAAO0L,EAAY,CAC1B,IAAIlJ,EAAQkJ,EAAW1L,GACvB6L,EAAQpF,YAAczG,EACtB6L,EAAQlF,SAAW3B,EAAmBxC,GACtC4D,EAAc,IAAID,EAAM0F,EAC1B,CACF,EAkCEI,KAzBS,SAAcxF,EAAa4B,GACpC,IAAIwD,EAAUxD,GAAU,CAAC,EACzBwD,EAAQpF,YAAcA,GAEI,IAAtBoF,EAAQ9D,YAA6D,IAAvC1B,EAAsBI,KAEpDL,GAAaA,EAAYyD,wBAE7BzD,EAAc,IAAID,EAAM0F,IAEZ1C,YACd,EAeE+C,MAPU,SAAezF,GACzBA,EAAcL,EAAY+F,eAAe1F,GAAeL,EAAY4D,YACtE,IAQFvG,OAAO8C,WAAaA,EAEpB,UCtbM6F,EAAM,oEAKL,SAASC,EACZ7iB,GAqBA,IAAI8iB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA9iB,EAAI,EACJ+iB,EAAK,EACLC,EAAM,GACV,MAAMC,EAAU,GAEhB,GAAKxjB,EAAL,CAIA,GAEI8iB,EAAK9iB,EAAKO,KACVwiB,EAAK/iB,EAAKO,KACVyiB,EAAKhjB,EAAKO,KAEV8iB,EAAQP,GAAM,GAAOC,GAAM,EAAKC,EAEhCC,EAAMI,GAAQ,GAAM,GACpBH,EAAMG,GAAQ,GAAM,GACpBF,EAAME,GAAQ,EAAK,GACnBD,EAAY,GAAPC,EAGLG,EAAQF,KACJV,EAAIa,OAAOR,GAAML,EAAIa,OAAOP,GAAMN,EAAIa,OAAON,GAAMP,EAAIa,OAAOL,SAC7D7iB,EAAIP,EAAKW,QAIlB,OAFA4iB,EAAMC,EAAQE,KAAK,IAEX1jB,EAAKW,OAAS,GAClB,KAAK,EACD4iB,EAAMA,EAAIpH,MAAM,GAAI,GAAK,KACzB,MACJ,KAAK,EACDoH,EAAMA,EAAIpH,MAAM,GAAI,GAAK,IAIjC,OAAOoH,CA/BP,CAgCJ,CAOO,SAASI,EACZ3jB,GAwBA,IAAI8iB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA9iB,EAAI,EACJ+iB,EAAK,EACT,MAAME,EAAU,GAEhB,GAAKxjB,EAAL,CAIA,GAEIijB,EAAKL,EAAIhB,QAAQ5hB,EAAKyjB,OAAOljB,MAC7B2iB,EAAKN,EAAIhB,QAAQ5hB,EAAKyjB,OAAOljB,MAC7B4iB,EAAKP,EAAIhB,QAAQ5hB,EAAKyjB,OAAOljB,MAC7B6iB,EAAKR,EAAIhB,QAAQ5hB,EAAKyjB,OAAOljB,MAE7B8iB,EAAQJ,GAAM,GAAOC,GAAM,GAAOC,GAAM,EAAKC,EAE7CN,EAAMO,GAAQ,GAAM,IACpBN,EAAMM,GAAQ,EAAK,IACnBL,EAAY,IAAPK,EAELG,EAAQF,KAAQR,EACL,KAAPK,IACAK,EAAQF,KAAQP,GAET,KAAPK,IACAI,EAAQF,KAAQN,SAEfziB,EAAIP,EAAKW,QAElB,OAAO,IAAI8M,WAAW+V,EAxBtB,CAyBJ,CAEA,MAAMI,EAAkB,wCCnJXC,EAAiB,iBACjBC,EAAgB,gBCCvBC,EAAa,mBAIZ,SAASC,IACZ,OAAwB,IAAhBljB,KAAKmjB,SAAoB,GACrC,CAUO,SAASC,EAASzkB,GACrB,MAAM0kB,EAAS,IAAI1W,WAAWhO,GAE9B,IAAK,IAAI2kB,EAAM,EAAGA,EAAM3kB,EAAM2kB,IAC1BD,EAAOC,GAAa,EAANA,EAAa,EAAO,IAGtC,IAAK,IAAIA,EAAM,EAAGA,EAAM3kB,EAAM2kB,GAAO,IACjCD,EAAOC,EAAM,IAAQJ,IACrBG,EAAOC,EAAM,IAAQJ,IACrBG,EAAOC,EAAM,KAAQJ,IACrBG,EAAOC,EAAM,KAAQJ,IAEzB,OAAOG,CACX,CAGO,SAASE,EAAcC,GAC1B,OAAOJ,EAASI,GAAS,EAC7B,CAGO,SAASC,EAAO/W,GACnB,OAAO,IAAIC,WAAWD,EAC1B,CAcO,SAAS,KAASgX,GACrBzC,QAAQlb,OAAO2d,EACnB,CAQO,SAAS,EAAMniB,EAAWtC,GACxBA,IACDA,EAAIsC,EAAI,IAAM,EAAI,GAEtB,IAAI8hB,EAAS,GACb,IAAK,IAAIC,EAAM,EAAGA,EAAMrkB,EAAGqkB,IACvBD,EAASJ,EAAe,GAAJ1hB,GAAY8hB,EAChC9hB,IAAM,EAEV,OAAO8hB,CACX,CCtEA,MAIaM,EAAuB,eAQ9B,EAAexK,OAAOyK,cAAgBzK,OAAO0K,mBAE5C,MAAMC,EAWT,WAAA9lB,CAAY+lB,GAKR,GAfI,KAAAC,OAAQ,EACR,KAAAC,QAAsB,GAKtB,KAAAC,SAAU,EAiFlB,KAAAC,UAAY,KACJhmB,KAAKimB,eAAiBjmB,KAAK+lB,UAC3B/lB,KAAK8lB,QAAU,GACf9lB,KAAKimB,aACAC,SACA/mB,MAAK,KACFa,KAAK+lB,SAAU,CAAI,IAEtBI,OAAOhM,IACJ2I,QAAQC,KAAK,oBAAqB5I,EAAM,IAEpD,EAGJ,KAAAiM,MAAQ,KACApmB,KAAKimB,eACLjmB,KAAK8lB,QAAU,GACf9lB,KAAKimB,aAAaC,SAASC,OAAOhM,IAC9B2I,QAAQC,KAAK,oBAAqB5I,EAAM,IAEhD,EAGJ,KAAAkM,UAAY,IACDrmB,KAAK6lB,MAmBhB,KAAAS,UAAY,CAAClf,EAAc2S,KACf3S,IACCoe,IACDxlB,KAAK6lB,MAAQ9L,EACrB,EA3HA/Z,KAAKimB,aAAe,IAAI,EAAa,CACjCtX,WAzBQ,OA4BRqM,OAAOuL,aAAc,CACrB,MAAMC,EAAexmB,KAAKimB,aAAaQ,aAAaC,UAChD,iCAEJ1mB,KAAK2mB,MAAQH,EACRrnB,MAAK,KACFa,KAAK4mB,YAAc,IAAIC,iBACnB7mB,KAAKimB,aACL,gBAGJL,EAAGjX,WAAW3O,KAAKimB,aAAatX,WAzC/B,KA0CDiX,EAAGkB,mBAAmBC,IAEd/mB,KAAK6lB,OACuB,YAA5B7lB,KAAKimB,aAAae,OAElBhnB,KAAK4mB,YAAYK,KAAKC,YAAYH,EACtC,IAEJ/mB,KAAK4mB,YAAYO,QAAQnnB,KAAKimB,aAAamB,YAAY,IAE1DjB,MAAMrD,QAAQ3I,MACvB,MAIIna,KAAKqnB,UAAYrnB,KAAKimB,aAAaqB,sBAxD3B,KA0DJ,EACA,GAGJtnB,KAAKqnB,UAAUE,eAAkBtO,IAC7B,MAAMlY,EAAOkY,EAAMuO,aAAaC,eAAe,GACzCV,EAAS/mB,KAAK8lB,QAAQ4B,QAC5B,IAAIvC,EAAM,EACN5H,EAAMxc,EAAKW,OAEf,GAAIqlB,EAEA,IADAxJ,EAAM1b,KAAKM,IAAI4kB,EAAOrlB,OAAQ6b,GACvB4H,EAAM5H,EAAK4H,IACdpkB,EAAKokB,GAAO4B,EAAO5B,GAI3B,KAAOA,EAAMpkB,EAAKW,OAAQyjB,IACtBpkB,EAAKokB,GAAO,CAChB,EAGJnlB,KAAKqnB,UAAUF,QAAQnnB,KAAKimB,aAAamB,aACzCxB,EAAGjX,WAAW3O,KAAKimB,aAAatX,WAjFxB,MAkFRiX,EAAGkB,mBAAmBC,IACd/mB,KAAK6lB,OAAqC,YAA5B7lB,KAAKimB,aAAae,OAC5BhnB,KAAK8lB,QAAQpkB,OAAS,GACtB1B,KAAK8lB,QAAQpa,KAAKqb,EAE1B,IAEJ/mB,KAAK2mB,MAAQ1nB,QAAQC,UAGzB8b,OAAOyF,iBAAiB,UAAWzgB,KAAKgmB,gBACZ7O,IAAxB6D,OAAO2M,cACP3M,OAAOyF,iBAAiB,aAAczgB,KAAKgmB,WAE/ChL,OAAOyF,iBAAiB,YAAazgB,KAAKgmB,WAE1C,EAAM,oBACV,CA6BA,UAAA4B,GACI,MAAO,CACH,CACIxgB,KAAM,QACNgc,QAAS,CACL,CACIhc,KAAMoe,EACNqC,MAAO,UACPxgB,KAAMud,EACNkD,YAAY,KAKhC,EChGG,SAASC,EAAyBplB,EAAqBS,GAC1D,OAAQT,EAAuBolB,SAAS3kB,EAC5C,C,0SCrDO,MAGM4kB,EAAgB,CAAC,EAAG,GA2DpBC,EAAU,QACVC,EAAkB,SAClBC,EAAqB,YACrBC,EAAiB,QAqCvB,MAAMC,EAGT,WAAAxoB,CACasO,EACAma,EACAC,GAAW,EACZC,GAHC,KAAAra,OAAAA,EACA,KAAAma,SAAAA,EACA,KAAAC,SAAAA,EACD,KAAAC,OAAAA,EANZ,KAAAC,SAAkCL,CAO/B,CAEG,UAAAM,G,yCACF,OAAO1oB,KAAKwoB,OAAO9mB,MACvB,G,CAEM,IAAAinB,CAAKC,G,yCACP,OAAO5oB,KAAKwoB,OAAOI,EACvB,G,CAEM,KAAAC,CAAMD,EAAe7nB,G,yCACvBf,KAAKwoB,OAAOI,GAAS7nB,CACzB,G,EAMG,MAAM+nB,EAAiB,CAAC,MAAO,MAAO,KAAM,MAAO,KAAM,OAUnDC,EAAiB,IACvBD,EAN2B,OAarBE,EAAgB,CAAC,MAAO,MAAO,MAK/BC,EAAe,IAAIF,KAAmBC,GAkB5C,SAASE,EAAeC,GAC3B,OAAQA,aAAI,EAAJA,EAAuBV,YAAaR,CAChD,CAGO,SAASmB,EAAaD,GACzB,OAAQA,aAAI,EAAJA,EAAqBV,YAAaP,CAC9C,CAGO,SAASmB,EAAUF,GACtB,OAAQA,aAAI,EAAJA,EAAkBV,YAAaN,CAC3C,CCvLO,MAAMmB,EAAS,CAElBC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EAGHC,GAAI,EACJC,GAAI,EAGJC,GAAI,EACJC,GAAI,EAGJC,MAAO,EACPC,OAAQ,EACRC,KAAM,GAGNC,GAAI,GACJC,KAAM,GACNC,KAAM,GACNC,MAAO,ICvBJ,IAAIC,EAA0B,KAErC,MAAMC,EAAwC,CAC1ChB,EAAG,EACHC,EAAG,EACHG,GAAI,EACJC,GAAI,EACJG,MAAO,KAULS,EAAwC,GAKxCC,EAA0B,GAqDzB,SAASC,EAAY3pB,GAExB,IAAK,IAAIokB,EAAM,EAAGA,EAAM,GAAIA,IACxBqF,EAAWrF,QAAOhO,EAEtB,MAAMvY,EAAMmC,GAAQwpB,EACpB,IAAK,MAAMI,KAASjrB,OAAOkrB,QAAQhsB,GAAM,CACrC,MAAM2Y,EAAMoT,EAAM,GACZxmB,EAAMwmB,EAAM,GAClB,IAAIE,EAEAA,EADe,iBAAR1mB,EACEA,EAAI2mB,WAAW,IAEd3mB,EAEVoT,KAAO+R,EACPkB,EAAWlB,EAAO/R,IAAQsT,EAE1BL,EAAWO,SAASxT,EAAK,KAAOsT,CAExC,CACJ,CAtEA7P,OAAOyF,iBAAiB,oBAAoB,SAAUrhB,GAClDkrB,EAAUlrB,EAAEkrB,OAChB,ICzBA,MAAMU,EAAS,CAEX,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,EAAM,EAAM,GACnB,EAAM,CAAC,IAAM,IAAM,KACnB,EAAM,CAAC,EAAM,EAAM,GACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IAEnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IAGnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,EAAM,EAAM,GACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IAEnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,EAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IAGnB,GAAM,CAAC,GAAM,EAAM,IACnB,GAAM,CAAC,GAAM,EAAM,IACnB,GAAM,CAAC,GAAM,EAAM,IACnB,GAAM,CAAC,GAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,EAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IAEnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,GAAM,IACnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,IAAM,IAAM,KACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IAGnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,GAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IAEnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IAGnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,IACnB,IAAM,CAAC,GAAM,GAAM,KACnB,IAAM,CAAC,GAAM,GAAM,KACnB,IAAM,CAAC,GAAM,GAAM,KACnB,IAAM,CAAC,GAAM,GAAM,KACnB,IAAM,CAAC,GAAM,GAAM,IAEnB,IAAM,CAAC,IAAM,IAAM,MAOjBC,EAAW,CACbC,KAAM,IACNC,oBAAqB,EACrBC,qBAAsB,GACtBC,kBAAmB,GACnBC,oBAAqB,GACrBC,iBAAkB,IAQTC,GAAQ,CACjB,CACI,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAC7D,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OAAQ,UAClE,CAAC,OAAQ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAAU,UACrE,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAC5D,CAAC,QAAS,WACX,CACC,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAM,IAAK,IAAK,IAAK,IAAK,IAAK,SAC9D,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OAAQ,UAClE,CAAC,OAAQ,IAAK,IAAK,IAAK,IAAK,OAAQ,IAAK,IAAK,IAAK,IAAK,IAAK,SAAU,UACxE,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAC5D,CAAC,QAAS,YAOLC,GAAS,CAClB,CACI,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,UACpE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MACpE,CAAC,OAAQ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,UAChE,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAC5D,CAAC,OAAQ,IAAK,MAAO,aAAc,SAAU,eAAgB,SAAU,SAAU,SAAU,WAC5F,CACC,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,UACpE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpE,CAAC,OAAQ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAM,UACjE,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,SAC5D,CAAC,OAAQ,IAAK,MAAO,aAAc,SAAU,eAAgB,SAAU,SAAU,SAAU,YAO7FC,GAAgB,CAClB,CACI,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OACnE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,UACtE,CAAC,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,UACnE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,QACjE,CAAC,MAAO,WACT,CACC,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OAClE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,UACtE,CAAC,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,UACnE,CAAC,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,QACjE,CAAC,MAAO,YAUD,MAAMC,GAgBjB,WAAA9rB,CACY+rB,EACAhG,EACAiG,GAER,OAJQ,KAAAD,IAAAA,EACA,KAAAhG,GAAAA,EACA,KAAAiG,OAAAA,EAfJ,KAAAC,SAAU,EACV,KAAAC,YAAa,EACb,KAAAC,YAAa,EAIb,KAAAC,iBAAkB,EAClB,KAAAC,UAAW,EACX,KAAAC,WAAY,EAEZ,KAAAC,UAAyC,CAAC,EAid1C,KAAAC,QAAWC,IACf,IACKtsB,KAAKusB,gBACJD,EAAIE,SAAWF,EAAIG,SAA2B,YAAhBzsB,KAAK6rB,QACvC,CACES,EAAIzJ,iBAEJ,MAAMtL,EAAMvX,KAAK0sB,YAAYJ,GAC7B,GAAY,MAAR/U,EAEA,YADAvX,KAAK4lB,GAAG+G,QAAQpV,EAGxB,CAEgB,UAAZ+U,EAAI/U,IACJvX,KAAK4iB,UAAS,GACK,aAAZ0J,EAAI/U,IACXvX,KAAK4sB,cACc,YAAZN,EAAI/U,IACXvX,KAAK6sB,YAAW,GACG,SAAZP,EAAI/U,IAEXvX,KAAK8sB,YAAW,GACG,QAAZR,EAAI/U,IACU,IAAjB+U,EAAIlR,SACJpb,KAAK8sB,YAAW,GAEhB9sB,KAAK+sB,WAAU,GAGfT,EAAI/U,OAAOvX,KAAKosB,YAChBpsB,KAAKosB,UAAUE,EAAI/U,KAAK+U,GACxBA,EAAIzJ,iBAEZ,EAGI,KAAAmK,MAASV,IACRtsB,KAAKusB,cACNvsB,KAAK4lB,GAAGqH,QAGI,UAAZX,EAAI/U,IAEJvX,KAAK4iB,UAAS,GACK,YAAZ0J,EAAI/U,IAEXvX,KAAK6sB,YAAW,GACG,SAAZP,EAAI/U,IAEXvX,KAAK8sB,YAAW,GACG,QAAZR,EAAI/U,MAEU,IAAjB+U,EAAIlR,SACJpb,KAAK8sB,YAAW,GAEhB9sB,KAAK+sB,WAAU,GAEvB,EApgBQ/sB,KAAK6rB,QACT,IAAK,UACD7rB,KAAKP,KAAOgsB,GACZ,MACJ,IAAK,YACDzrB,KAAKP,KAAOisB,GACZ1rB,KAAKgsB,YAAa,EAClB,MACJ,QACIhsB,KAAKP,KAAO+rB,GAIpBxQ,OAAOyF,iBAAiB,UAAWzgB,KAAKqsB,SACxCrR,OAAOyF,iBAAiB,QAASzgB,KAAKgtB,MAC1C,CAEA,WAAAE,CAAY3V,EAAagC,GACrBvZ,KAAKosB,UAAU7U,GAAOgC,CAC1B,CAEA,WAAAmT,CAAYJ,GACR,MAAMhtB,EAAOgtB,EAAIvK,QACjB,IAAIxK,EAAY,IAuBhB,OArBe+U,EAAI/U,OA9GX0T,EA+GJ1T,EAAM0T,EAASqB,EAAI/U,KA7H/B,SAAwBjY,GACpB,OAAOA,KAAQ0rB,CACnB,CA4HmBmC,CAAe7tB,IACtBiY,EAAMyT,EAAO1rB,GAAMgtB,EAAI1J,SAAW,EAAI0J,EAAIG,QAAU,EAAI,GAE3C,KAATntB,GAAeU,KAAKisB,iBACpBjsB,KAAK4sB,YAAYN,EAAIc,iBAAiB,aAGtCptB,KAAKgsB,YAAczU,GAAO,IAAQA,GAAO,MACzCA,GAAO,KAGX,EAAM,mBAAqB,EAAMjY,IAGzB,MAARiY,GAAgB+U,EAAI1J,UAAY0J,EAAIG,UACpCzsB,KAAK4rB,IAAIyB,QACT9V,EAAM,KAGHA,CACX,CAEA,QAAAqL,CAAS0K,GACL,MAAMC,EAAYvtB,KAAKwtB,GAAGtL,iBACN,cAAhBliB,KAAK6rB,OAAyB,aAAe,YAEjD7rB,KAAK8rB,QAAUwB,EACXA,GACAttB,KAAK4lB,GAAG6H,SAAS,GACjBF,EAAUjU,SAAS/B,IACfA,EAAIsJ,UAAUC,IAAI,SAAS,MAG/B9gB,KAAK4lB,GAAG8H,WAAW,GACnBH,EAAUjU,SAAS/B,IACfA,EAAIsJ,UAAUS,OAAO,SAAS,IAG1C,CAEA,UAAAuL,CAAWS,GACP,MAAMb,EAAUzsB,KAAKwtB,GAAG9L,cACJ,cAAhB1hB,KAAK6rB,OAAyB,YAAc,WAEhD7rB,KAAK+rB,WAAauB,EACdA,EACAb,EAAS5L,UAAUC,IAAI,UAEvB2L,EAAS5L,UAAUS,OAAO,SAElC,CAEA,UAAAwL,CAAWQ,GACP,MAAMR,EAAa9sB,KAAKwtB,GAAG9L,cAAc,mBACpCoL,IAGL9sB,KAAKmsB,UAAYmB,EACbA,GACAttB,KAAK4lB,GAAG8H,WAAW,GACnBZ,EAAWjM,UAAUC,IAAI,YAEzB9gB,KAAK4lB,GAAG6H,SAAS,GACjBX,EAAWjM,UAAUS,OAAO,WAEpC,CAEA,SAAAyL,CAAUO,GACN,MAAMP,EAAY/sB,KAAKwtB,GAAG9L,cAAc,qBACnCqL,IAGL/sB,KAAKksB,SAAWoB,EACZA,GACAttB,KAAK4lB,GAAG8H,WAAW,GACnBX,EAAUlM,UAAUC,IAAI,YAExB9gB,KAAK4lB,GAAG6H,SAAS,GACjBV,EAAUlM,UAAUS,OAAO,WAEnC,CASA,WAAAsL,CAAYU,GACR,MAAMK,EAAW3tB,KAAKwtB,GAAG9L,cACL,cAAhB1hB,KAAK6rB,OAAyB,YAAc,aAGvB,IAArBzL,UAAU1e,OACN1B,KAAKisB,gBACLjsB,KAAKgsB,YAAchsB,KAAKgsB,WAExBhsB,KAAKisB,iBAAkB,OAEX9U,IAATmW,GACPttB,KAAKgsB,YAAchsB,KAAKgsB,WACxBhsB,KAAKisB,iBAAkB,GAEvBjsB,KAAKgsB,WAAasB,EAGlBttB,KAAKgsB,WACL2B,EAAU9M,UAAUC,IAAI,UAExB6M,EAAU9M,UAAUS,OAAO,SAEnC,CAEA,KAAA+L,CAAMpU,GACFA,EAAM4J,iBACN5J,EAAM2U,kBACN5tB,KAAK4rB,IAAIyB,OACb,CAEA,MAAAQ,CAAOC,GAGH,IAAIhuB,EAAGC,EAAGguB,EAAKxW,EAAKsQ,EAAOmG,EAAQC,EAFnCjuB,KAAKwtB,GAAK5jB,SAAS8X,cAAcoM,GACjC9tB,KAAKwtB,GAAG3M,UAAUC,IAAI,UAAY9gB,KAAK6rB,QAGvC,MAAMqC,EAAc9pB,IAChB,MAAM+pB,EAAOvkB,SAASC,cAAc,QAIpC,OAHAskB,EAAKC,UAAYhqB,EACbA,EAAE1C,OAAS,GAAuB,MAAlB0C,EAAE8Y,MAAM,EAAG,IAC3BiR,EAAKtN,UAAUC,IAAI,SAChBqN,CAAI,EAGf,IAAKpuB,EAAI,EAAGA,EAAI,EAAGA,IAKf,IAJAguB,EAAMnkB,SAASC,cAAc,OAC7BkkB,EAAIlN,UAAUC,IAAI,OAClBiN,EAAIlN,UAAUC,IAAI,MAAM/gB,KACxBC,KAAKwtB,GAAGa,OAAON,GACVjuB,EAAI,EAAGA,EAAIE,KAAKP,KAAK,GAAGM,GAAG2B,OAAQ5B,IAAK,CACzC,MAAMwuB,EAAOtuB,KAAKP,KAAK,GAAGM,GAAGD,GACvByuB,EAAOvuB,KAAKP,KAAK,GAAGM,GAAGD,GAE7B+nB,EAAQje,SAASC,cAAc,OAC/BmkB,EAASE,EAAWI,GACpBL,EAASC,EAAWK,GAEpBhX,EAAM3N,SAASC,cAAc,OAC7B0N,EAAIsJ,UAAUC,IAAI,OAClBvJ,EAAIsJ,UAAUC,IAAI,OAASwN,EAAKE,QAAQ,SAAU,KAE9CF,EAAK5sB,OAAS,IACD,SAAT4sB,EAAiB/W,EAAIsJ,UAAUC,IAAI,aAClCvJ,EAAIsJ,UAAUC,IAAI,aAEvBwN,IAASC,IACThX,EAAIsJ,UAAUC,IAAI,OAASyN,EAAKC,QAAQ,QAAS,KACjD3G,EAAMwG,OAAOJ,GACbpG,EAAMwG,OAAOzkB,SAASC,cAAc,QAE3B,SAATykB,GACA/W,EAAIsJ,UAAUC,IAAI,UAGtB+G,EAAMwG,OAAOL,GACbzW,EAAI8W,OAAOxG,GACXtQ,EAAIkX,QAAQH,KAAOA,EACnB/W,EAAIkX,QAAQF,KAAOA,EAEnB,MAAMG,EAAY1uB,KAAK2uB,aAAapX,EAAK+W,EAAMC,GACzCK,EAAU5uB,KAAK6uB,WAAWtX,QACJJ,IAAxB6D,OAAO2M,cACPpQ,EAAIkJ,iBAAiB,YAAaiO,GAClCnX,EAAIkJ,iBAAiB,UAAWmO,GAChCrX,EAAIkJ,iBAAiB,aAAcmO,KAEnCrX,EAAIkJ,iBAAiB,aAAciO,GACnCnX,EAAIkJ,iBAAiB,WAAYmO,GACjCrX,EAAIkJ,iBAAiB,aAAcmO,IAGvCb,EAAIM,OAAO9W,EACf,CAER,CAEQ,YAAAoX,CAAajV,EAAqB4U,EAAWC,GACjD,OAAQO,IAIJ,IAAIvX,EAQJ,OAXAuX,EAAGjM,iBACHnJ,EAAOmH,UAAUC,IAAI,WAIjBvJ,EADgB,cAAhBvX,KAAK6rB,OACC7rB,KAAK8rB,QAAUyC,EAAOD,EAItBtuB,KAAK8rB,QAAUwC,EAAOC,EAExBhX,GACJ,IAAK,OACDA,EAAM,IACN,MACJ,IAAK,SACDA,EAAM,KACN,MACJ,IAAK,MACDA,EAAM,KACN,MACJ,IAAK,SACDA,EAAM,IACN,MACJ,IAAK,SACDA,EAAM,KACN,MACJ,IAAK,SACDA,EAAM,IACN,MACJ,IAAK,SACmB,cAAhBvX,KAAK6rB,SACLtU,EAAM,MAIV,MACJ,IAAK,SACDA,EAAM,KACN,MACJ,IAAK,SACDA,EAAM,IACN,MACJ,IAAK,MACDA,EAAM,IAMd,GAAoB,cAAhBvX,KAAK6rB,OAGL,OAAQtU,GAEJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IA6GL,QACI,MAzGJ,IAAK,MACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MAGJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MAGJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IACN,MACJ,IAAK,IACDA,EAAM,IAQlB,GAAIA,EAAI7V,OAAS,EACb,OAAQ6V,GACJ,IAAK,QACL,IAAK,MACDvX,KAAK4iB,UAAU5iB,KAAK8rB,SACpB,MACJ,IAAK,OACL,IAAK,KACD9rB,KAAK6sB,YAAY7sB,KAAK+rB,YACtB,MACJ,IAAK,OACL,IAAK,OACL,IAAK,OACD/rB,KAAK4sB,iBAAYzV,GACjB,MACJ,IAAK,MACL,IAAK,QACL,IAAK,MACG6D,OAAO+T,QAAQ,iBACf/T,OAAOI,SAAS4T,SACpB,MACJ,IAAK,QACL,IAAK,MACDhvB,KAAK4rB,IAAIyB,QACT,MACJ,IAAK,aACDrtB,KAAK8sB,YAAY9sB,KAAKmsB,WACtB,MACJ,IAAK,eACDnsB,KAAK+sB,WAAW/sB,KAAKksB,eASzBlsB,KAAK+rB,YAAcxU,GAAO,KAAOA,GAAO,IACxCvX,KAAK4lB,GAAG+G,QAAQpV,EAAIuT,WAAW,GAAK,IAEpB,YAAhB9qB,KAAK6rB,SACJ7rB,KAAK8rB,UACL9rB,KAAKgsB,YACNzU,GAAO,KACPA,GAAO,IAEPvX,KAAK4lB,GAAG+G,QAAQpV,EAAIuT,WAAW,GAAK,IAEpB,cAAhB9qB,KAAK6rB,SACJ7rB,KAAK8rB,SACN9rB,KAAKgsB,YACLzU,GAAO,KACPA,GAAO,IAGPvX,KAAK4lB,GAAG+G,QAAQpV,EAAIuT,WAAW,GAAK,IAEpC9qB,KAAK4lB,GAAG+G,QAAQpV,EAAIuT,WAAW,GAEvC,CAER,CAEQ,UAAAyB,GACJ,QAAS3iB,SAAS8X,cAAc,iBACpC,CAEQ,UAAAmN,CAAWnV,GACf,MAAO,IAAMA,EAAOmH,UAAUS,OAAO,UACzC,EC1rBG,MAAM2N,GAAa,CAAC,MAAO,OAAQ,MAAO,MAAO,OAEzC,MAAMC,GACjB,WAAArvB,CAA6B+lB,GAAA,KAAAA,GAAAA,CAAe,CAErC,eAAAuJ,CAAgBC,EAAY/W,GAC/B,MAAMgX,EAAMrvB,KAAK4lB,GAAG0J,SAGpB,IAAIxlB,EACJ,IAAI2b,aAKA,OAFAzK,OAAOuU,MAAM,sCACblX,GAAQA,KAHRvO,EAAU,IAAI2b,aAOlB,MAAM+J,EAAa,IAAIC,WACvBD,EAAWjpB,OAAUuoB,IACjB,MACM5J,EADqB4J,EAAGpV,OACKwL,OACnCpb,EAAQ4lB,gBAAgBxK,GAAQ/lB,MAC3BgN,IACG,MAAMwjB,EAAgB,GAChB5uB,EAAOoL,EAAOsb,eAAe,GACnC,IAEImI,EAEAC,EAJAC,EAAQ/uB,EAAK,GACbgvB,EAAMD,EAAQ,EAEdE,EAAO,EAEX,EAAM,iBAAiBjvB,EAAKW,UAC5B,EAAM,gBAAgByK,EAAOwC,cAC7B,IAAK,IAAIwW,EAAM,EAAGA,EAAMpkB,EAAKW,OAAQyjB,IAEjC,GADA2K,EAAQ/uB,EAAKokB,IACT2K,EAAQ,IAAOA,GAAS,MACxBF,EAAUE,EAAQ,EACdF,IAAYG,GAAK,CACjBF,EAAQ1K,EAAM6K,EACVH,EAAQ,MACRA,EAAQ,KAEZ,IAAII,EAAQJ,EAAQ1jB,EAAOwC,WAAc,IACrCshB,GAAQ,KAAQA,EAAO,IACvBA,EAAO,IACAA,GAAQ,MAASA,EAAO,KAC/BA,EAAO,GACAA,GAAQ,MAASA,EAAO,KAC/BA,EAAO,IACAA,GAAQ,KAAQA,EAAO,MAC9BA,EAAO,IAIXN,EAAIjkB,KAAK,CAACukB,EAAOZ,EAAKO,IACtBG,EAAMH,EACNI,EAAO7K,CACX,CAGRnlB,KAAK4lB,GAAGsK,QAAQP,GACZtX,GACAA,GACJ,IAEH8B,IACGa,OAAOuU,MAAMpV,EAAMG,QAAQ,GAElC,EAELkV,EAAWW,kBAAkBf,EACjC,ECxEG,MAAMgB,GAAwC,CACjD,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,OACN,IAAM,QACN,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,KACN,IAAM,OACN,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,MACN,IAAM,UACN,IAAM,QACN,IAAM,OACN,IAAM,QACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,SACN,IAAM,SACN,IAAM,QACN,IAAM,UACN,IAAM,SACN,IAAM,UACN,IAAM,QACN,IAAM,SACN,IAAM,OACN,IAAM,OACN,IAAM,SACN,IAAM,SACN,IAAM,QACN,IAAM,SACN,IAAM,SACN,IAAM,QACN,IAAM,SACN,IAAM,MACN,IAAM,OACN,IAAM,MACN,IAAM,KACN,IAAM,UACN,IAAM,IACN,IAAM,QACN,IAAM,SACN,IAAM,MACN,IAAM,OACN,IAAM,KACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,MACN,IAAM,OACN,IAAM,QACN,IAAM,OACN,IAAM,OACN,IAAM,QACN,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,KACN,IAAM,KACN,IAAM,OACN,IAAM,OACN,IAAM,KACN,IAAM,MACN,IAAM,OACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,MACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,QACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,MACN,IAAM,OACN,IAAM,MACN,IAAM,MACN,IAAM,OACN,IAAM,QACN,IAAM,SACN,IAAM,QAIGC,GAAwC,CACjDC,IAAK,IACLC,IAAK,IACLC,KAAM,IACNC,KAAM,IACNC,MAAO,IACPC,IAAK,IACLC,IAAK,IACLC,KAAM,IACNC,GAAI,IACJC,KAAM,IACN,MAAO,IACP,MAAO,IACPC,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,IAAK,IACL,UAAW,IACXC,MAAO,IACPC,KAAM,IACNC,MAAO,IACPC,KAAM,IACNC,KAAM,IACN,OAAQ,IACR,SAAU,IACVC,OAAQ,IACRC,MAAO,IACPC,QAAS,IACTC,OAAQ,IACRC,QAAS,IACTC,MAAO,IACP,SAAU,IACV,OAAQ,IACRC,KAAM,IACN,SAAU,IACV,SAAU,IACVC,MAAO,IACPC,OAAQ,IACRC,OAAQ,IACRC,MAAO,IACP,SAAU,IACVC,IAAK,IACLC,KAAM,IACNC,IAAK,IACLC,GAAI,IACJC,QAAS,IACT,IAAK,IACLC,MAAO,IACPC,OAAQ,IACRC,IAAK,IACLC,KAAM,IACNC,GAAI,IACJC,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,IAAK,IACLC,KAAM,IACNC,MAAO,IACPC,KAAM,IACNC,KAAM,IACNC,MAAO,IACPC,IAAK,IACLC,IAAK,IACL,OAAQ,IACRC,GAAI,IACJC,GAAI,IACJ,OAAQ,IACRC,KAAM,IACNC,GAAI,IACJC,IAAK,IACLC,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACLC,IAAK,IACLC,GAAI,IACJ,IAAK,IACL,IAAK,IACL,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACL,QAAS,IACTC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,KAAM,IACNC,IAAK,IACLC,KAAM,IACNC,IAAK,IACLC,IAAK,IACLC,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,KAAM,KCpNGC,GAAS,ICJhBC,GACF,qIAWEC,GAAgBC,IAClB,IAAIC,EAQJ,OANIA,EADAD,GAAS,KAAQA,GAAS,IACZ1F,GAAgB0F,QACJ3e,IAAnBye,GAAQE,GACDF,GAAQE,GAER,IAAI,EAAMA,MAErBC,CAAW,EAQhBC,GAAoC,CACtCC,OAAQ,IACRC,QAAS,IAOPC,GAA8C,CAChDvU,MAAO,UAKI,MAAMwU,GAMjB,2BAAOC,CAAqBC,GACxB,MAAMruB,EAAkB,GAElBme,EACFkQ,EAAI3N,KAAK,EAAMgN,KAAWW,EAAI3N,KAAK,EAAMgN,GAAS,IAAM,GACtDY,EAAMD,EAAI3N,KAAK,EDlCP,MCkCwB2N,EAAI3N,KAAK,EAAM6N,MAAe,GACpE,GAAIpQ,GAAS,OAAUmQ,GAAO,MAC1B,MAAM,IAAIl3B,MACN,kBAAkB,EAAM+mB,EAAO,MAAM,EACjCmQ,EACA,mBAIZ,IAAK,IAAIE,EAAOrQ,EAAOqQ,GAAQF,EAAKE,IAChCxuB,EAAQyD,KAAK4qB,EAAI3N,KAAK8N,GAAQ,EAAU,IAAPA,IAGrC,OAAO,IAAIL,GAAoB,IAAI5nB,WAAWvG,GAAUme,EAC5D,CAWA,WAAAvmB,CACqBoI,EACAyuB,EAAa,MAE9B,GAHiB,KAAAzuB,QAAAA,EACA,KAAAyuB,KAAAA,EAEC,IAAd12B,KAAK02B,KAAY,CAKjB,MAAMC,EAAW32B,KAAK42B,OAAO,GAE7B,IAAIC,EAAgB,EAEpB,KAAO5uB,EAAQ4uB,IACXA,IAGJA,IAEA72B,KAAK02B,KAAOC,EAAWE,CAC3B,CACJ,CAGQ,MAAAD,CAAOE,GACX,OAAO92B,KAAKiI,QAAQ6uB,IAAW92B,KAAKiI,QAAQ6uB,EAAS,IAAM,EAC/D,CAYQ,WAAAC,CACJha,EACAia,EACAC,GAEA,IAAIC,EAAQ,EACRJ,EAAS,EACTK,EAAen3B,KAAK42B,OAAOE,GAC3BM,EAAap3B,KAAK42B,OAAOE,EAAS,GACtC,KAAwB,IAAjBK,GAAsBC,EAAara,GAAM,CAC5C,KAAMma,EAtFA,MAuFF,MAAM,IAAI73B,MAAM,4BAEpBy3B,EAASK,EACTA,EAAen3B,KAAK42B,OAAOE,GAC3BM,EAAap3B,KAAK42B,OAAOE,EAAS,EACtC,CACA,KAAwB,IAAjBK,GAAsBC,GAAcJ,GAAI,CAC3C,KAAME,EA9FA,MA+FF,MAAM,IAAI73B,MAAM,4BAEpB43B,EAASH,EAAS,GAClBA,EAASK,EAAen3B,KAAK02B,KAC7BS,EAAen3B,KAAK42B,OAAOE,GAC3BM,EAAap3B,KAAK42B,OAAOE,EAAS,EACtC,CACJ,CAGA,QAAAO,CAASP,EAAc1T,GACnB,MAAMkU,EAAkB,GACxB,IAAIC,EAAO,GAEX,MAAMC,EAASx3B,KAAK42B,OAAOE,GAe3B,IAVuB,MAAnB1T,EAAQ6S,SACRsB,GAAQ,KAEZA,GAAQ,GAAGC,KACXV,GAAU,EAMsB,IAAzB92B,KAAKiI,QAAQ6uB,IAAe,CAC/B,GAAIA,GAAU92B,KAAKiI,QAAQvG,OAAQ,CAC/B41B,EAAMG,QAAQ,uBACd,KACJ,CACA,MAAM3B,EAAQ91B,KAAKiI,QAAQ6uB,GACvBhB,GAAS,KAAQA,GAAS,KAC1ByB,GAAQ,IACRA,GAAQ1B,GAAaC,GACrByB,GAAQ,KAERA,GAAQ1B,GAAaC,GAEzBgB,IAwBIS,EAAK71B,QAAU0hB,EAAQ8S,QAAU,IACjCqB,GAAQ,KACRD,EAAM5rB,KAAK6rB,GACXA,EAAO,QAEf,CAEA,OADAD,EAAM5rB,KAAK6rB,EAAO,MACXD,EAAM7S,KAAK,GACtB,CAgBA,IAAAiT,CACItU,EAAgC,CAAC,EACjCrG,EAAe,EACfia,EAAa,OAEb,MAAMW,EAAa,OAAH,wBAAQ3B,IAAyB5S,GAEjD,IAAI8B,EAAS,GAIb,OAHAllB,KAAK+2B,YAAYha,EAAMia,GAAKF,IACxB5R,GAAUllB,KAAKq3B,SAASP,EAAQa,EAAW,IAExCzS,CACX,CAMA,WAAA0S,CAAYd,GACR,IAAI5R,EAAS,GACT2S,EAA0C,KAAM,EAOpD,IAJA3S,GADellB,KAAK42B,OAAOE,GAE3Be,EAAWC,GAAsB,MAAM3a,KAAK2a,GAC5ChB,GAAU,EAEsB,IAAzB92B,KAAKiI,QAAQ6uB,IAAe,CAC/B,GAAIA,GAAU92B,KAAKiI,QAAQvG,OACvB,MAAO,sBAAwBwjB,EAEnC,MAAM4Q,EAAQ91B,KAAKiI,QAAQ6uB,GAC3B,IAAIf,EAAcF,GAAaC,GACX,UAAhBC,IACAA,EAAc,KAEd8B,EAAQ9B,KACR7Q,GAAU,KAGdA,GAAU6Q,EAEV8B,EAAU,KAAM,EACZ/B,IAAUzF,GAAoB,KAC9BwH,EAAWC,GACPA,EAAUC,cAAcC,WAAW,MAG3ClB,GACJ,CACA,OAAO5R,CACX,CAUA,UAAA+S,CAAWnB,GACP,IAAI5R,EAAS,GACTgT,GAAW,EACXL,EAAmC,KAAM,EAM7C,IAHA3S,GAAU,GADKllB,KAAK42B,OAAOE,MAE3BA,GAAU,EAEsB,IAAzB92B,KAAKiI,QAAQ6uB,IAAe,CAC/B,GAAIA,GAAU92B,KAAKiI,QAAQvG,OACvB,MAAO,sBAAwBwjB,EAEnC,MAAM4Q,EAAQ91B,KAAKiI,QAAQ6uB,GACrBf,EAAcF,GAAaC,GACb,MAAhBC,IACAmC,GAAYA,IAGZL,EAAQ/B,KAAYoC,GAA4B,MAAhBnC,KAChC7Q,GAAU,KAGdA,GAAU6Q,EAQN8B,GANCK,GAA4B,MAAhBnC,IAELmC,GAA4B,MAAhBnC,EADV,KAAM,EAGTD,GAAS,KAAQA,GAAS,IAEtBA,GAAgBA,EAAQ,KAAQA,EAAQ,IAC5CA,EAAQ,KAAQA,EAAQ,IAGpBA,GAA0B,KAAVA,EAGhBA,GAAgBA,GAAS,KAAQA,GAAS,IAGzDgB,GACJ,CACA,OAAO5R,CACX,CAKA,SAAAiT,CACI/U,EAAqC,CAAC,EACtCrG,EAAe,EACfia,EAAa,OAEb,MAAMW,EAAa,OAAH,wBAAQxB,IAA8B/S,GAEhDgV,EAAoB,GAQ1B,OAPAp4B,KAAK+2B,YAAYha,EAAMia,GAAKF,IACxBsB,EAAQ1sB,KACiB,YAArBisB,EAAW/V,MACL5hB,KAAK43B,YAAYd,GACjB92B,KAAKi4B,WAAWnB,GACzB,IAEEsB,EAAQ3T,KAAK,KACxB,EC9VJ,IAAK4T,GA4BL,SAASC,GAAUC,EAAa9B,EAAYtyB,GACxC,MAAMq0B,EAAO/B,GAAQ,EACfgC,EAAa,IAAPhC,EAEZ,OAAO8B,EAAI1P,MAAM2P,EAAMC,EAAKt0B,EAChC,CAEA,SAASu0B,GAAUH,EAAa9B,EAAYtyB,GACxC,MACMw0B,EAAMx0B,GAAO,EAEnBm0B,GAAUC,EAAK9B,EAHG,IAANtyB,GAIZm0B,GAAUC,EAAK9B,EAAO,EAAGkC,EAC7B,EAzCA,SAAKN,GAOD,uBAKA,uBAEA,yBAMA,mBAKA,8BACH,CA1BD,CAAKA,KAAAA,GAAM,KA2CX,MAAMO,GAEF,WAAA/4B,CACqB03B,EACTsB,EAAkB,GADT,KAAAtB,KAAAA,EACT,KAAAsB,QAAAA,EAHJ,KAAAC,SAAmB,CAIxB,CAEH,CAACjf,OAAOiD,YACJ,OAAO9c,IACX,CAEA,KAAA+4B,GACI,OAAO,IAAIH,GAAW54B,KAAKu3B,KAAMv3B,KAAK64B,QAC1C,CAEA,IAAAG,GACI,OAAIh5B,KAAKi5B,QACE,CAAE5gB,MAAM,EAAM0B,WAAO5C,IAEhCnX,KAAK84B,SAAW94B,KAAK64B,QACd,CAAExgB,MAAM,EAAO0B,MAAO/Z,KAAKu3B,KAAKv3B,KAAK64B,YAChD,CAaA,cAAAK,CAAepD,GACX,MAAMqD,EAAan5B,KAAK64B,QAClBO,EAAcp5B,KAAK84B,SACzB,IAAIO,EAAgB,GACpB,IAAK,MAAMC,KAAQt5B,KACf,GAAa,MAATs5B,IAGJD,GAAiBC,EACbD,EAAc33B,SAAWo0B,EAAMp0B,QAC/B,MAGR,OAAI23B,EAActB,gBAAkBjC,GAEhC91B,KAAK84B,SAAWK,GACT,IAGXn5B,KAAK64B,QAAUM,EACfn5B,KAAK84B,SAAWM,GACT,EACX,CAEA,MAAAG,GACIv5B,KAAK64B,QAAU74B,KAAK84B,QACxB,CAEA,IAAAU,GACI,GAAIx5B,KAAKi5B,QACL,MAAM,IAAIQ,WAAW,2BAA2Bz5B,KAAKu3B,QAEzD,OAAOv3B,KAAKu3B,KAAKv3B,KAAK64B,QAC1B,CAEA,KAAAI,GACI,OAAOj5B,KAAK64B,SAAW74B,KAAKu3B,KAAK71B,MACrC,EAGW,MAAMg4B,GAArB,cACY,KAAApC,MAA6B,IAAIqC,GAuM7C,CA5LI,sBAAOC,CACHrB,EACAtwB,EACA4xB,EAvIc,MAyId,MAAMC,EAAW,IAAIJ,GACrBI,EAASC,QAAQ9xB,GACjB,MAAM+xB,EAA8BF,EAAS7xB,QAAQ4xB,GAErD,IAAK,IAAIv4B,EAAI,EAAGA,EAAI04B,EAAgBC,WAAY34B,IAC5Cg3B,GAAUC,EAAKsB,EAAev4B,EAAG04B,EAAgB14B,IAUrD,MAAM44B,EAASL,EAAeG,EAAgBC,WAAa,EAC3DvB,GAAUH,EAAK5C,GAAQkE,GACvBnB,GAAUH,EFrII,IEqIS2B,GACvBxB,GAAUH,EFrJI,IEqJS2B,GACvBxB,GAAUH,EFpJI,IEoJS2B,GACvBxB,GAAUH,EFnJI,IEmJS2B,EAC3B,CAEQ,cAAAC,CAAeC,GACnB,IAAIC,EAAY,GAEhB,IAAK,MAAMC,KAAaF,EAAY,CAChC,IAAI,KAAKjd,KAAKmd,GAEP,CACHF,EAAWb,SACX,KACJ,CAJIc,GAAaC,CAKrB,CACA,GAAyB,IAArBD,EAAU34B,OACV,MAAM,IAAIrC,MAAM,uBAGpB,OAAO0rB,SAASsP,EAAW,GAC/B,CAEQ,SAAAE,CAAUH,G,YAEd,IAAK,MAAMf,KAAiBhJ,GACxB,GAAI+J,EAAWlB,eAAeG,GAAgB,CAM1C,GAAsB,OAAlBA,IAA2Be,EAAWnB,QAAS,CAC/C,MAAMuB,EAAYJ,EAAWZ,OAE7B,GAAkB,MAAdgB,EAEA,OADAJ,EAAWpB,OACJ3I,GAAqB,IAGhC,GAAkB,MAAdmK,EAIA,OAFAJ,EAAWb,SAEkC,QAAtC,EAAuB,QAAvB,EAAAa,EAAWpB,OAAOjf,aAAK,eAAE+Q,WAAW,UAAE,QAAI,CAEzD,CACA,OAAOuF,GAAgBgJ,EAC3B,CAIJ,OAA2D,QAApD,EAAuB,QAAvB,EAAAe,EAAWpB,OAAOjf,aAAK,eAAEge,cAAcjN,WAAW,UAAE,QAAI,CACnE,CAEQ,WAAA2P,CAAYlD,GAChB,MAAMrS,EAAiB,GACvB,IAAKqS,EACD,OAGJ,MAAM6C,EAAa,IAAIxB,GAAWrB,GAClC,IAAIvQ,EAAoCqR,GAAOvG,OAE/C,MAAM4I,EAAa16B,KAAKm6B,eAAeC,GACvC,GAAIM,EAAa,GAAKA,EAAa,MAC/B,MAAM,IAAIr7B,MAAM,4BAIpB,IAAK,MAAMi7B,KAAaF,EAAY,CAChC,MAAMO,EAAWL,EAAUxP,WAAW,GACtC,OAAQ9D,GACJ,KAAKqR,GAAOvG,OAER,GAAkB,MAAdwI,EACA,MAIJ,GAAkB,MAAdA,EAAmB,CACnBpV,EAAOxZ,KAAKivB,GACZ3T,EAAQqR,GAAOuC,OACf,KACJ,CAGA,GAAkB,MAAdN,EAAmB,CACnBpV,EAAOxZ,KAAK2kB,GAAuB,OACnC,KACJ,CAGA+J,EAAWb,SACX,CACI,MAAMzD,EAAQ91B,KAAKu6B,UAAUH,GACzBtE,IAAUzF,GAAqB,MAC/BrJ,EAAQqR,GAAOwC,SAEf/E,IAAUzF,GAAsB,OAChCrJ,EAAQqR,GAAO5H,MAEnBvL,EAAOxZ,KAAKoqB,EAChB,CACA,MACJ,KAAKuC,GAAOwC,QACR3V,EAAOxZ,KAAK4uB,EAAUxP,WAAW,IACjC,MACJ,KAAKuN,GAAOuC,OACU,MAAdN,IACAtT,EAAQqR,GAAOvG,QAEnB5M,EAAOxZ,KAAK4uB,EAAUxP,WAAW,IACjC,MACJ,KAAKuN,GAAO5H,KACU,MAAd6J,IACAtT,EAAQqR,GAAOvG,QAED,MAAdwI,IACAtT,EAAQqR,GAAOyC,YAEnB5V,EAAOxZ,KAAK4uB,EAAUxP,WAAW,IACjC,MACJ,KAAKuN,GAAOyC,WACU,MAAdR,IACAtT,EAAQqR,GAAO5H,MAEnBvL,EAAOxZ,KAAK4uB,EAAUxP,WAAW,IAG7C,CAEA9qB,KAAKs3B,MAAMzb,IAAI6e,EAAYxV,EAC/B,CAEA,OAAA6U,CAAQ9xB,GACJ,MAAMqvB,EAAQrvB,EAAQ8yB,MAAM,YAE5B,KAAOzD,EAAM51B,QAAQ,CACjB,MAAM61B,EAAOD,EAAM5P,QACnB1nB,KAAKy6B,YAAYlD,EACrB,CACJ,CAGA,OAAAtvB,CAAQ4xB,EA5SU,MA6Sd,MAAM3U,EAAiB,GAIjB8V,EAAc,IAAIh7B,KAAKs3B,MAAM73B,QAAQw7B,OAE3C,IAAK,MAAMzD,KAAUwD,EAAa,CAC9B,MAAME,EAAYl7B,KAAKs3B,MAAM5f,IAAI8f,IAAW,GACtCL,EACF0C,EAAe3U,EAAOxjB,OAAS,EAAIw5B,EAAUx5B,OAAS,EAC1DwjB,EAAOxZ,KAAoB,IAAfyrB,EAAqBA,GAAgB,GACjDjS,EAAOxZ,KAAc,IAAT8rB,EAAeA,GAAU,GACrCtS,EAAOxZ,QAAQwvB,GACfhW,EAAOxZ,KAAK,EAChB,CAGA,OAFAwZ,EAAOxZ,KAAK,EAAM,GAEX,IAAI8C,WAAW0W,EAC1B,E,2SCxOG,SAAeiW,GAAsBC,G,0CACxC,MAAMC,EAAOD,EAAGE,UAChB,GAA6B,oBAAlBC,cAA+B,CACtC,MAAMx6B,EAA6B,CAAC,EACpC,GAAKq6B,EAAGI,SAGD,CACH,MAAMC,EAAW,IAAIC,KAAK,CAAC,QAAQL,WAAe,CAC9Ch0B,KAAM,cAEVtG,EAAK06B,EAASp0B,MAAQo0B,EAEtB,MAAME,EAAW,IAAID,KAAK,CAACL,GAAO,CAC9Bh0B,KAAM,eAEVtG,EAAK46B,EAASt0B,MAAQs0B,CAC1B,KAbkB,CACd,MAAMC,QAAaR,EAAGS,kBACtB96B,EAAK66B,EAAKv0B,MAAQu0B,CACtB,OAYME,UAAUC,UAAUlT,MAAM,CAAC,IAAI0S,cAAcx6B,IACvD,YACU+6B,UAAUC,UAAUC,UAAUX,EAE5C,G,CChHO,MAAMY,GAAc,cACdC,GAAmB,YACnBC,GAAkB,iBAYxB,MAAMC,GACT,WAAAv8B,CAAoBu7B,GAAA,KAAAA,GAAAA,EAEpB,KAAAiB,gBAAkB,KACd,MAAMC,EAAO1yB,SAAS+V,eAAe,UACjC/V,SAAS2yB,kBACL3yB,SAAS4yB,kBACJ5yB,SAAS6yB,iBAETH,EAAKI,oBAEPJ,EAAKK,0BACR/yB,SAASgzB,mBACThzB,SAASizB,yBAETP,EAAKK,0BAEb,CAhBiC,CAmBrC,UAAA/U,GACI,MAAO,CACH,CACIxgB,KAAM,SACNgc,QAAS,CACL,CACIhc,KAAM60B,GACNpU,MAAO,cACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KAAM+0B,GACNtU,MAAO,iBACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KAAM80B,GACNrU,MAAO,YACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KAvDC,YAwDDygB,MAAO,gBACPxgB,KAAMud,EACNkD,YAAY,KAKhC,CAEA,SAAAxB,CAAUlf,EAAc2S,GACpB,OAAQ3S,GACJ,KAAK60B,GACDj8B,KAAKo7B,GAAG0B,KAAK/iB,GACb,MACJ,KAAKmiB,GACDl8B,KAAK+8B,YAAYhjB,GACjB,MACJ,KAAKoiB,GACDn8B,KAAKo7B,GAAG4B,UAAUjjB,GAG9B,CAEQ,WAAAgjB,CAAYE,GACZA,EACArzB,SAAS6X,KAAKZ,UAAUC,IAAI,aAE5BlX,SAAS6X,KAAKZ,UAAUS,OAAO,YAEvC,ECxFJ,MAAM4b,GAAmB,gBAWlB,MAAMC,GAOT,WAAAt9B,CAAoB+lB,GAAA,KAAAA,GAAAA,EANZ,KAAAwX,sBAAuB,EACvB,KAAAC,OAAQ,EACR,KAAAC,OAAQ,EACR,KAAAC,QAAS,EACT,KAAAjT,SAAU,EAwEV,KAAAkT,UAAalR,IACjB,GAAItsB,KAAKsqB,SAAWtqB,KAAKo9B,qBACrB,OAGJ,MAAM1kB,EAAI9O,SAAS8X,cAA8B,UAC3CoV,EAASpe,EAAE+kB,wBACjB,IAAI39B,GAAKwsB,EAAIoR,MAAQ5G,EAAO6G,MAAQjlB,EAAE3R,YAClChH,GAAKusB,EAAIsR,MAAQ9G,EAAO+G,KAAOnlB,EAAEzR,aACrC,MAAM62B,EAAIh+B,EAENE,KAAKu9B,SACLz9B,EAAIC,EACJA,EAAI+9B,GAGR99B,KAAK4lB,GAAGmY,OAAO,EAAG/9B,KAAKq9B,MAAQ,EAAIv9B,EAAIA,GACvCE,KAAK4lB,GAAGmY,OAAO,EAAG/9B,KAAKs9B,MAAQ,EAAIv9B,EAAIA,EAAE,EAtFzC6J,SAAS6W,iBAAiB,YAAazgB,KAAKw9B,WAC5C5zB,SAASsY,iBAAiB,UAAU5I,SAASzS,IACzCA,EAAO4Z,iBAAiB,aAAc6L,IAC7BtsB,KAAKsqB,SACN1E,EAAG8H,WAAyB,IAAdpB,EAAI0R,MAAc,EAAI,GAExC1R,EAAIzJ,gBAAgB,IAExBhc,EAAO4Z,iBAAiB,WAAY6L,IAC3BtsB,KAAKsqB,SACN1E,EAAG6H,SAAuB,IAAdnB,EAAI0R,MAAc,EAAI,EACtC,IAEJn3B,EAAO4Z,iBAAiB,eAAgB6L,IACpCA,EAAIzJ,gBAAgB,GACtB,IAEN7H,OAAOyF,iBAAiB,oBAAqBrhB,IACzCY,KAAKsqB,UAAYlrB,EAAEkrB,OAAO,GAElC,CAEA,UAAA1C,GACI,MAAO,CACH,CACIxgB,KAAM,WACNgc,QAAS,CACL,CACIhc,KAAM81B,GACNrV,MAAO,yBACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KApDK,SAqDLygB,MAAO,cACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KAzDK,SA0DLygB,MAAO,cACPxgB,KAAMud,EACNkD,YAAY,GAEhB,CACI1gB,KA9DG,WA+DHygB,MAAO,YACPxgB,KAAMud,EACNkD,YAAY,KAKhC,CAEA,SAAAxB,CAAUlf,EAAc2S,GACZ3S,IACC81B,KACDl9B,KAAK4lB,GAAGmY,OAAO,EAAG,IAClB/9B,KAAK4lB,GAAGmY,OAAO,EAAG,IAClB/9B,KAAKo9B,qBAAuBrjB,EAMxC,ECtFG,MAEMkkB,GAAyB,qBAE/B,MAAMC,GACT,WAAAr+B,CACY+lB,EACAxmB,GADA,KAAAwmB,GAAAA,EACA,KAAAxmB,EAAAA,CACT,CAEH,UAAAwoB,GACI,MAAO,CACH,CACIxgB,KAAM,OACNgc,QAASpjB,KAAKZ,EACR,CACI,CACIgI,KAjBK,kBAkBLygB,MAAO,KACPxgB,KAAMwd,EACNiD,WAAY,YACZqW,OAAQ,CACJ,CACIpkB,MAAO,YACP3S,KAAM,sBAEV,CACI2S,MAAO,UACP3S,KAAM,aAEV,CACI2S,MAAO,WACP3S,KAAM,uCAEV,CACI2S,MAAO,WACP3S,KAAM,mCAKtB,CACI,CACIA,KA1CI,iBA2CJygB,MAAO,KACPxgB,KAAMwd,EACNiD,WAAY,aACZqW,OAAQ,CACJ,CACIpkB,MAAO,aACP3S,KAAM,aAEV,CACI2S,MAAO,SACP3S,KAAM,sBAEV,CACI2S,MAAO,WACP3S,KAAM,sBAEV,CACI2S,MAAO,WACP3S,KAAM,YAEV,CACI2S,MAAO,UACP3S,KAAM,cAEV,CACI2S,MAAO,WACP3S,KAAM,8BAEV,CACI2S,MAAO,YACP3S,KAAM,wBAEV,CACI2S,MAAO,YACP3S,KAAM,kBAMhC,CACIA,KAAM,MACNgc,QAAS,CACL,CACIhc,KAAM62B,GACNpW,MAAO,cACPxgB,KAAMud,EACNkD,YAAY,KAKhC,CAEA,SAAAxB,CAAUlf,EAAc2S,GACpB,GAAQ3S,IACC62B,GACD,CACI,MAAM5O,EAAMtV,EAAQ,KAAO,KAC3B/Z,KAAK4lB,GAAGwY,UAAU/O,EACtB,CAGZ,EC/FG,MAAMgP,GAAK,CACd,EAAK,EAAK,GAAK,EAAK,GAAK,EAAK,GAAK,EACnC,GAAK,EAAK,GAAK,EAAK,EAAK,EAAK,EAAK,IAO1BC,GAAM,CACf,EAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EAAK,IAO1BC,GAAK,CACd,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,GACnC,EAAK,GAAK,EAAK,GAAK,EAAK,GAAK,EAAK,IAO1BC,GAAM,CACf,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,IAO1BC,GAAO,CAChB,EAAK,GAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,GAGnDC,GAAQ,CACjB,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,IAI1DC,GAAU,CACZ,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KAIjCC,GAAY,CACrB,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,GAC1C,EAAM,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAIxCC,GAAU,CACZ,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KAIjCC,GAAY,CACrB,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,GAAM,GAC1C,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,GAAM,GAC1C,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IASvC,SAASC,GAAU56B,GACtB,IAAI66B,EAAW,IAAN76B,EACL86B,EAAW,GAAN96B,EAMT,OAJA66B,IAAO,EACPA,GAAM,IACNC,GAAM,IAEC,CAACD,EAAIC,EAChB,CASO,SAASC,GAAYF,EAAUC,GAClC,OAASD,GAAM,EAAK,GAAQC,CAChC,CAYO,SAASE,GACZC,EACAC,EACAC,EACAv+B,GAEA,IACIw+B,EADA5P,EAAM,GASN4P,EAFW,IAAXD,EAEM,IAGU,IAAVD,EAAc,GAAO,GAG/B,IAAK,IAAIla,EAAM,EAAGA,EAAMoa,EAAKpa,IACzBwK,EAAIjkB,KAAK,KAOb,MAAM8zB,EAAWJ,EAASC,EAAQC,EAClC3P,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAC9B2M,EAAMA,EAAI3M,OAAO+b,GAAUK,IAC3BzP,EAAMA,EAAI3M,OAAO+b,GAAUM,IAC3B1P,EAAMA,EAAI3M,OAAO+b,GAAUO,IAC3B3P,EAAMA,EAAI3M,OAAO+b,GAAUS,IAC3B7P,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAM9B,IAAK,IAAImC,EAAM,EAAGA,EAAM,EAAMA,IAC1BwK,EAAIjkB,KAAK,KAObikB,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAE9B,MAAMyc,EAAkB,GAIxB,IAAK,IAAIta,EAAM,EAAGA,EAAM,IAAOA,IAC3Bsa,EAAQta,GAAO,EAGnB,IAAIua,EAAO,GACX,IAAK,IAAIC,EAAO,IAAOA,GAAQ,EAAGA,IAAQ,CACtC,IAAIC,EAAO7+B,EAAK4+B,EAAO,KACnBE,EAAaJ,EAVR,EAUuBC,GAEhCG,EAAQA,GAAQ,EAAa,EAAPD,EACtBA,IAAS,EACTC,EAAQA,GAAQ,EAAa,EAAPD,EACtBA,IAAS,EAETH,EAhBS,GAgBME,GAAQC,EACvBH,EAlBS,EAkBMC,GAAQG,IAEjBH,EAAO,IAAGA,EAAO,GAC3B,CAEA,IAAI1P,EAAO,EACX,IAAK,IAAI7K,EAAM,EAAGA,EAAM,IAAOA,IAAO,CAClC,MAAMhhB,EAAMs7B,EAAQta,GACpBwK,EAAIjkB,KAAKmzB,GAAQ7O,EAAO7rB,IACxB6rB,EAAO7rB,CACX,CAWA,OAVAwrB,EAAIjkB,KAAKmzB,GAAQ7O,IAEjBL,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAM9B2M,EAAIjkB,KAAK,KAEFikB,CACX,CAYO,SAASmQ,GACZV,EACAC,EACAC,EACAv+B,GAEA,IACIw+B,EADA5P,EAAM,GASN4P,EAFW,IAAXD,EAEM,IAGU,IAAVD,EAAc,GAAO,GAG/B,IAAK,IAAIla,EAAM,EAAGA,EAAMoa,EAAKpa,IACzBwK,EAAIjkB,KAAK,KAOb,MAAM8zB,EAAWJ,EAASC,EAAQC,EAClC3P,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAC9B2M,EAAMA,EAAI3M,OAAO+b,GAAUK,IAC3BzP,EAAMA,EAAI3M,OAAO+b,GAAUM,IAC3B1P,EAAMA,EAAI3M,OAAO+b,GAAUO,IAC3B3P,EAAMA,EAAI3M,OAAO+b,GAAUS,IAC3B7P,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAM9B,IAAK,IAAImC,EAAM,EAAGA,EAAM,EAAMA,IAC1BwK,EAAIjkB,KAAK,KAObikB,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAE9B,MAAMyc,EAAU,GAEhB,IAAIM,EAAM,EACV,IAAK,IAAI5a,EAAM,GAAMA,GAAO,EAAGA,IAAO,CAClC,MAAM6a,EAAKj/B,EAAKg/B,IAAQ,EAClBE,EAAiB,EAAZl/B,EAAKg/B,GAChBA,IACA,MAAMG,EAAKn/B,EAAKg/B,IAAQ,EAClBI,EAAiB,EAAZp/B,EAAKg/B,GAChBA,IACA,MAAMK,EAAKr/B,EAAKg/B,IAAQ,EAClBM,EAAiB,EAAZt/B,EAAKg/B,GAChBA,IACA,MAAMO,EAAKv/B,EAAKg/B,IAAQ,EAClBQ,EAAiB,EAAZx/B,EAAKg/B,GAChBA,IACA,MAAMS,EAAKz/B,EAAKg/B,IAAQ,EAClBU,EAAiB,EAAZ1/B,EAAKg/B,GAChBA,IACAN,EAAQta,EAAM,GAAQ6a,EACtBP,EAAQta,EAAM,IAAQ+a,EACtBT,EAAQta,EAAM,KAAQib,EACtBX,EAAQta,EAAM,KAAQmb,EACtBb,EAAQta,EAAM,KAAQqb,EACtBf,EAAQta,EAAM,KACT8a,GAAM,GAAY,EAALM,IAAa,GAAY,EAALE,IAAa,EACnDhB,EAAQta,EAAM,KAAUgb,GAAM,EAAW,EAALI,GAAmB,EAALE,IAAa,EAC/DhB,EAAQta,EAAM,KAAUkb,GAAM,GAAY,EAALE,IAAa,EAAW,EAALE,CAC5D,CACAhB,EAAQ,KAAQ1+B,EAAKg/B,IAAQ,EAC7BN,EAAQ,KAAqB,EAAZ1+B,EAAKg/B,GAEtB,IAAI/P,EAAO,EACX,IAAK,IAAI7K,EAAM,IAAOA,GAAO,IAAOA,IAAO,CACvC,MAAMhhB,EAAMs7B,EAAQta,GACpBwK,EAAIjkB,KAAKizB,GAAQ3O,EAAO7rB,IACxB6rB,EAAO7rB,CACX,CACA,IAAK,IAAIghB,EAAM,EAAKA,EAAM,IAAOA,IAAO,CACpC,MAAMhhB,EAAMs7B,EAAQta,GACpBwK,EAAIjkB,KAAKizB,GAAQ3O,EAAO7rB,IACxB6rB,EAAO7rB,CACX,CAWA,OAVAwrB,EAAIjkB,KAAKizB,GAAQ3O,IAEjBL,EAAMA,EAAI3M,OAAO,CAAC,IAAM,IAAM,MAM9B2M,EAAIjkB,KAAK,KAEFikB,CACX,CASA,IAAK+Q,IAAL,SAAKA,GACD,+EACA,iFACA,6CACA,qCACA,2CACA,2CACA,0CACH,CARD,CAAKA,KAAAA,GAAU,KAUR,MAAMC,WAAwBthC,MACjC,WAAAQ,CAAYw/B,EAAaC,EAAclgC,GACnCwhC,MACI,uBAAuBvB,MAAU,EAC7BA,eACUC,MAAW,EAAMA,SAC1BlgC,aAAaC,MAAQ,GAAGD,EAAEkb,UAAY,GAAGumB,OAAOzhC,MAE7D,EAoKG,MAAM0hC,WAAwBzhC,MACjC,WAAAQ,CAAYkhC,EAAgBC,GACxBJ,MAAM,aAAa,EAAMG,iBAAwB,EAAMC,KAC3D,EAGG,MAAMC,WAAwB5hC,MACjC,WAAAQ,CAAYw/B,EAAaC,EAAclgC,GACnCwhC,MACI,uBAAuBvB,MAAU,EAC7BA,eACUC,MAAW,EAAMA,SAC1BlgC,aAAaC,MAAQ,GAAGD,EAAEkb,UAAY,GAAGumB,OAAOzhC,MAE7D,EAoBG,SAAS8hC,GACZ/X,EACAkW,EACAC,GAEA,MAAM6B,EA5LH,SACHhY,EACAkW,EACAC,GAEA,MAAMr8B,EAAMkmB,EAAKiY,OAAO/B,GACxB,IAAIgC,EAA4B,GAC5Bra,EAAQ0Z,GAAWY,mCACnBnc,EAAM,EACNoc,EAAQ,EAEZ,SAASC,IACL,MAAMtc,EAASjiB,EAAIkiB,KAKnB,OAJIA,GAAOliB,EAAIvB,SACXyjB,EAAM,EACNoc,KAEGrc,CACX,CACA,SAASuc,EAAWvK,GAChB/R,GAAO+R,EACH/R,GAAOliB,EAAIvB,SACXyjB,GAAOliB,EAAIvB,OACX6/B,IAER,CACA,IAGIG,EAHA/gC,EAAI,EACJ+X,EAAI,EACJtV,EAAI,EAER,KAAOm+B,EAAQ,GAAG,CACd,IAAIp9B,EACJ,OAAQ6iB,GACJ,KAAK0Z,GAAWY,mCACZn9B,EAAMq9B,IACNxa,EACY,MAAR7iB,EACMu8B,GAAWiB,oCACXjB,GAAWY,mCACrB,MACJ,KAAKZ,GAAWiB,oCACZx9B,EAAMq9B,IACNxa,EACY,MAAR7iB,EACMu8B,GAAWkB,kBACXlB,GAAWY,mCACrB,MACJ,KAAKZ,GAAWkB,kBAEZ,OADAz9B,EAAMq9B,IACEr9B,GACJ,KAAK,IACD6iB,EAAQ0Z,GAAWmB,cACnBR,EAAU,GACV,MACJ,KAAK,IACDra,EAAQ0Z,GAAWmB,cACnBR,EAAU,GACV,MACJ,KAAK,IACDra,EACgB,KAAZqa,EACMX,GAAWoB,iBACXpB,GAAWqB,iBACrB,MACJ,QACI/a,EAAQ0Z,GAAWY,mCAE3B,MACJ,KAAKZ,GAAWmB,cACZz+B,EAAI87B,GAAYsC,IAAaA,KAC7B7gC,EAAIu+B,GAAYsC,IAAaA,KAC7B9oB,EAAIwmB,GAAYsC,IAAaA,KAC7BE,EAAWxC,GAAYsC,IAAaA,KAChCE,KAAct+B,EAAIzC,EAAI+X,IACtB,EACI,2BACA,EAAMtV,GACN,EAAMzC,GACN,EAAM+X,GACN,EAAMgpB,IAGdD,EAAW,GACXza,EAAQ,EACR,MACJ,KAAK0Z,GAAWoB,iBACZ,GAAIppB,IAAM4mB,GAAU3+B,IAAM0+B,EAAO,CAE7B,MAAM2C,EAAS7c,EAGf,IAAI6K,EAAO,EACX,IAAK,IAAI+P,EAAM,EAAGA,EAAM,IAAOA,IAC3B/P,EAAO8O,GAAU0C,IAAc,KAAQxR,EAE3C,MAAM0R,EAAW5C,GAAU0C,IAAc,KAAQxR,EAEjD,IAAK0R,EACD,MAAO,CAAErC,QAAOC,SAAQ0C,SAAQX,WAEhC,EACI,yBACA,EAAMrR,GACN,EAAMqP,GACN,EAAMC,GACN,EAAMoC,IAGdD,EAAW,EACf,MAAOA,EAAW,KAClBza,EAAQ0Z,GAAWY,mCACnB,MACJ,KAAKZ,GAAWqB,iBACZ,GAAIrpB,IAAM4mB,GAAU3+B,IAAM0+B,EAAO,CAE7B,MAAM2C,EAAS7c,EAGf,IAAI6K,EAAO,EACX,IAAK,IAAI+P,EAAM,EAAGA,EAAM,IAAOA,IAC3B/P,EAAO4O,GAAU4C,IAAc,KAAQxR,EAE3C,MAAM0R,EAAW9C,GAAU4C,IAAc,KAAQxR,EAEjD,IAAK0R,EACD,MAAO,CAAErC,QAAOC,SAAQ0C,SAAQX,WAEhC,EACI,yBACA,EAAMrR,GACN,EAAMqP,GACN,EAAMC,GACN,EAAMoC,IAGdD,EAAW,EACf,MACIA,EAAW,KAEfza,EAAQ0Z,GAAWY,mCACnB,MACJ,QACIta,EAAQ0Z,GAAWY,mCAG/B,CACA,MAAM,IAAIX,GAAgBtB,EAAOC,EAAQ,qBAAqBiC,KAClE,CAyCwBU,CAAW9Y,EAAMkW,EAAOC,IACtC,OAAE0C,EAAM,QAAEX,GAAYF,EACtBl+B,EAAMkmB,EAAKiY,OAAO/B,GAExB,IAAIla,EAAM6c,EACV,MAAMR,EAAY,KACd,MAAMtc,EAASjiB,EAAIkiB,KAInB,OAHIA,GAAOliB,EAAIvB,SACXyjB,EAAM,GAEHD,CAAM,EAGjB,IACI,OAAmB,KAAZmc,EA8Cf,SAAsBG,GAClB,MAAMzgC,EAAO,IAAIyN,WAAW,KAC5B,IAAIrK,EACA6rB,EAAa,EAGjB7rB,EAAMy6B,GAAU4C,IAAc,KAAQxR,EACtCA,EAAO7rB,EACPpD,EAAK,KAAc,EAANoD,EAGb,IAAK,IAAI7C,EAAI,IAAMA,GAAK,EAAMA,IAAK,CAC/B6C,EAAMy6B,GAAU4C,IAAc,KAAQxR,EACtCA,EAAO7rB,EACP,MAAMs0B,EAAM52B,KAAKyB,MAAMhC,EAAI,IAAQ,GAAK,GAAQA,EAAI,IAC9C4gC,EAAO,EAAI,GAAK,GAAQ5gC,EAAI,IAC5B6gC,EAAO,EAAI,GAAK,GAAQ7gC,EAAI,IAC5B8gC,EAAM,EAAIvgC,KAAKyB,MAAMhC,EAAI,IAC/BP,EAAK03B,IAAc,GAANt0B,IAAkB,EAC/BpD,EAAKmhC,KAAiB,EAAN/9B,IAAkB,GAAMi+B,EACxCrhC,EAAKohC,KAAgB,EAANh+B,IAAci+B,CACjC,CAGA,IAAK,IAAI9gC,EAAI,EAAGA,EAAI,IAAMA,IACtB6C,EAAMy6B,GAAU4C,IAAc,KAAQxR,EACtCA,EAAO7rB,EAEPpD,EADYc,KAAKyB,MAAMhC,EAAI,IAAQ,GAAK,GAAQA,EAAI,MACvC6C,GAAO,EAIxBA,EAAMy6B,GAAU4C,IAAc,KAAQxR,EACtCA,EAAO7rB,EACPpD,EAAK,MAASoD,GAAO,EAErB,MAAMu9B,EAAW9C,GAAU4C,IAAc,KAAQxR,EACjD,GAAI0R,EACA,MAAM,IAAIZ,GAAgB9Q,EAAM0R,EAAW1R,GAE/C,OAAOjvB,CACX,CAtFcshC,CAAab,GAO3B,SAAsBA,GAClB,MAAMzgC,EAAO,IAAIyN,WAAW,KACtB8zB,EAAQ,GACd,IACIn+B,EADA6rB,EAAa,EAGjB,IAAK,IAAI+P,EAAM,GAAMA,GAAO,EAAGA,IAC3B57B,EAAM26B,GAAU0C,IAAc,KAAQxR,EACtCsS,EAAMvC,GAAO57B,EACb6rB,EAAO7rB,EAEX,IAAK,IAAI47B,EAAM,EAAGA,EAAM,IAAOA,IAC3B57B,EAAM26B,GAAU0C,IAAc,KAAQxR,EACtCjvB,EAAKg/B,GAAO57B,EACZ6rB,EAAO7rB,EAEX,MAAMu9B,EAAW5C,GAAU0C,IAAc,KAAQxR,EACjD,GAAI0R,EACA,MAAM,IAAIZ,GAAgB9Q,EAAM0R,EAAW1R,GAE/C,IAAK,IAAIuS,EAAM,EAAGxC,EAAM,GAAMwC,EAAM,IAAOA,IACvCxhC,EAAKwhC,KAAS,EACI,EAAbD,EAAMvC,KACPh/B,EAAKwhC,IAAQ,GAEjBD,EAAMvC,KAAS,EAEfh/B,EAAKwhC,KAAS,EACI,EAAbD,EAAMvC,KACPh/B,EAAKwhC,IAAQ,GAEjBD,EAAMvC,KAAS,IAETA,EAAM,IAAGA,EAAM,IAEzB,OAAOh/B,CACX,CA1CcyhC,CAAahB,EACvB,CAAE,MAAOpiC,GACL,MAAM,IAAI6hC,GAAgB5B,EAAOC,EAAQlgC,EAC7C,CACJ,CA0QO,SAASqjC,GAAWre,EAAa0S,GACpC,IAAIkL,EAAS,EACTU,GAAa,EAEjB,KAAO5L,EAAS1S,EAAK1iB,SACL0iB,EAAK0S,IAEbkL,EAAUA,GAAU,EAAK,EACzBU,GAAa,GAERA,IACDV,IAAmB,KAGd,IAATA,KAIJlL,GAAU,EAGd,MAAO,CACHkL,OAAQA,EACRlL,OAAQA,EAEhB,CC73Be,SAAS6L,GAAkBvf,GACtC,MAAM,KAAEriB,EAAI,KAAEqG,EAAI,KAAEw7B,EAAI,QAAEC,EAAO,OAAEzD,EAAM,SAAE7W,GAAanF,EAClD+F,EAAmB,CACrBhb,OAAQ,MACRsa,SAAUP,EACVI,SAAU,CAAElhB,OAAMw7B,QAClBxD,SACA7W,WACA6Y,OAAQ,IAGZ,IAAK,IAAIzgC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,IAAI0+B,EAAgB,GACpB,IAAK,IAAIyD,EAAkB,EAAGA,EAAkB,GAAIA,IAAmB,CACnE,MAAMC,EAAa1E,GAAGyE,GACtB,IAAIxD,EACJ,GAAIuD,EAAS,CACT,MAAMpK,EAA8B,KAAvB,GAAK93B,EAAIoiC,GACtBzD,EAAS,IAAI9wB,WAAWq0B,EAAQ3lB,MAAMub,EAAKA,EAAM,KACrD,KAAO,KAAI13B,EAGP,MAAM,IAAI1B,MAAM,4BAFhBigC,EAAS,IAAI9wB,WAAWzN,EAAKJ,GAAGoiC,GAGpC,CACA1D,EAAQA,EAAMrc,OACVmc,GAAgBC,EAAQz+B,EAAGmiC,EAAiBxD,GAEpD,CACAnW,EAAKiY,OAAOzgC,GAAK2kB,EAAO+Z,EAC5B,CACA,OAAOlW,CACX,CCjCe,SAAS6Z,GAAqB5f,GACzC,MAAM,KAAEriB,EAAI,KAAEqG,EAAI,KAAEw7B,EAAI,QAAEC,EAAO,OAAEzD,EAAM,SAAE7W,GAAanF,EAClD+F,EAAmB,CACrBhb,OAAQ,MACRsa,SAAUP,EACVI,SAAU,CAAElhB,OAAMw7B,QAClBxD,OAAQA,GAAU,IAClB7W,SAAUA,IAAY,EACtB6Y,OAAQ,IAGZ,IAAK,IAAIzgC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,IAAI0+B,EACJ,GAAIwD,EAAS,CACT,MAAMpK,EAAU,KAAJ93B,EACZ0+B,EAAQ,IAAI7wB,WAAWq0B,EAAQ3lB,MAAMub,EAAKA,EAAM,MACpD,KAAO,KAAI13B,EAGP,MAAM,IAAI1B,MAAM,4BAFhBggC,EAAQt+B,EAAKJ,GAAG,EAGpB,CACAwoB,EAAKiY,OAAOzgC,GAAK0+B,CACrB,CAEA,OAAOlW,CACX,CC/BO,MAAM8Z,GAAa,ICgBX,SAASC,GACpB9f,GAEA,MAAM,KAAEriB,EAAI,KAAEqG,EAAI,KAAEw7B,EAAI,QAAEC,EAAO,OAAEzD,EAAM,SAAE7W,GAAanF,EACxD,IAAI+F,EACJ,GAAI0Z,GAAWA,EAAQ5I,WAAa,OAAY,CAC5C,MAAMzR,EAAuB,GAC7B,IACI,IAAIsO,EAAS,EACbA,EAAS+L,EAAQ5I,WACjBnD,GAAUmM,GAEVza,EAAO9c,KACH,IAAI8C,WAAWq0B,EAAQ3lB,MAAM4Z,EAAQA,EAASmM,MAGtD9Z,EAAO,IAAId,EACP,KACA,CAAEjhB,OAAMw7B,QACRra,IAAY,EACZC,EAER,KAAO,CACHW,EAAO,CACHhb,OAAQ,KACRsa,SAAUP,EACVI,SAAU,CAAElhB,OAAMw7B,QAClBxD,OAAQA,GAAU,IAClBgC,OAAQ,GACR7Y,SAAUA,IAAY,GAG1B,IAAK,IAAI4a,EAAiB,EAAGA,EAAiB,GAAIA,IAAkB,CAChE,IAAI9D,EAAgB,GACpB,IACI,IAAIyD,EAAkB,EACtBA,EAAkB,GAClBA,IACF,CACE,MAAMM,EAAgB7E,GAAGuE,GACzB,IAAIxD,EACJ,GAAIuD,EAAS,CACT,MAAMpK,EAA8C,KAAvC,GAAK0K,EAAiBC,GACnC9D,EAAS,IAAI9wB,WAAWq0B,EAAQ3lB,MAAMub,EAAKA,EAAM,KACrD,KAAO,KAAI13B,EAGP,MAAM,IAAI1B,MAAM,4BAFhBigC,EAASv+B,EAAKoiC,GAAgBC,EAGlC,CACA/D,EAAQA,EAAMrc,OACVmc,GACIC,EACA+D,EACAL,EACAxD,GAGZ,CACAnW,EAAKiY,OAAO+B,GAAkB7d,EAAO+Z,EACzC,CACJ,CAEA,OAAOlW,CACX,CCnEA,MAAMka,GAAU,CAEZC,UAAW,EAEXC,QAAS,EAETC,cAAe,EAEfC,QAAS,GAETC,OAAQ,GAERC,MAAO,GAMPC,OAAQ,GAKRC,YAAa,GAKbC,YAAa,GAObjJ,QAAS,GAITkJ,eAAgB,GAKhBC,aAAc,GAKdC,oBAAqB,GAErBC,QAAS,IAGPP,GAAQ,CACVQ,UAAW,WACXC,aAAc,IACdC,YAAa,KAGjB,IAAYX,GAiBL,SAASY,GAAczB,GAC1B,MAAM0B,EAAS,IAAIC,SAAS3B,GACtBnzB,EAAU,IAAI+0B,YAAY,SAC1BC,EAAYh1B,EAAQi1B,OACtB9B,EAAQ3lB,MAAMmmB,GAAQC,UAAWD,GAAQC,UAAY,IAEzD,GAAkB,SAAdoB,EACA,MAAM,IAAIrlC,MAAM,+BAA+BqlC,KAEnD,MAAME,EAAUl1B,EAAQi1B,OACpB9B,EAAQ3lB,MAAMmmB,GAAQE,QAASF,GAAQE,QAAU,IAE/CsB,EAAeN,EAAOO,SAASzB,GAAQG,eAAe,GAC5D,GAAqB,KAAjBqB,EACA,MAAM,IAAIxlC,MACN,kCAAkCwlC,YAG1C,MAAM12B,EAASo2B,EAAOQ,SAAS1B,GAAQK,QAAQ,GACzCsB,EAAQT,EAAOQ,SAAS1B,GAAQM,OAAO,GACvCnb,EAAS+b,EAAOQ,SAAS1B,GAAQO,QAAQ,GACzC9M,EAASyN,EAAOQ,SAAS1B,GAAQQ,aAAa,GAC9CoB,EAAQV,EAAOQ,SAAS1B,GAAQS,aAAa,GAC7CoB,EAAgBX,EAAOQ,SAAS1B,GAAQxI,SAAS,GACjDsK,EAAgBZ,EAAOQ,SAAS1B,GAAQU,gBAAgB,GACxDqB,EAAoBb,EAAOQ,SAAS1B,GAAQW,cAAc,GAC1DqB,EAAoBd,EAAOQ,SAC7B1B,GAAQY,qBACR,GAMJ,GAAI91B,IAAWu1B,GAAO4B,QAAmB,IAAT9c,IAAiByc,EAC7C,MAAM,IAAI5lC,MACN,+CAA+CmpB,eAAoByc,KAG3E,GAAInO,EAAS+N,EACT,MAAM,IAAIxlC,MACN,+CAA+Cy3B,OAAY+N,KAGnE,GAAI/N,EAASmO,EAAQV,EAAOtK,WACxB,MAAM,IAAI56B,MACN,uCAAuCy3B,OAAYmO,OAAWV,EAAOtK,cAG7E,MAAMsL,EAAUzO,EAASmO,EACzB,GAAIC,GAAiBA,EAAgBK,EACjC,MAAM,IAAIlmC,MACN,mDAAmD6lC,OAAmBpO,OAAYmO,KAG1F,MAAMO,EAAaN,EAAgBA,EAAgBC,EAAgBI,EACnE,GAAIC,EAAajB,EAAOtK,WACpB,MAAM,IAAI56B,MACN,0CAA0CmmC,OAAgBjB,EAAOtK,cAGzE,GAAImL,GAAqBA,EAAoBI,EACzC,MAAM,IAAInmC,MACN,sDAAsD+lC,OAAuBI,KAGrF,MAAMC,EAAiBL,EACjBA,EAAoBC,EACpBG,EACN,GAAIC,EAAiBlB,EAAOtK,WACxB,MAAM,IAAI56B,MACN,+CAA+ComC,OAAoBlB,EAAOtK,cAIlF,MAAMyL,EAAiE,CAAC,EACpER,IACAQ,EAAOC,QAAU,IAAIlB,YAAY,SAASE,OACtC,IAAIn2B,WAAWq0B,EAASqC,EAAeC,KAG3CC,IACAM,EAAOE,YAAc,IAAIp3B,WACrBq0B,EACAuC,EACAC,IAIR,MAAM9c,KAAYyc,EAAQrB,GAAMQ,WAChC,IAAI/E,EAASjxB,IAAWu1B,GAAOmC,IAAM,IAAM,EAK3C,OAJIb,EAAQrB,GAAMS,eACdhF,EAAS4F,EAAQrB,GAAMU,aAGpB,OAAP,QACIY,QACAL,UACAz2B,SACA2oB,SACAvO,WACA6W,UACGsG,EAEX,EAzHA,SAAYhC,GACR,iBACA,uBACA,gBACH,CAJD,CAAYA,KAAAA,GAAM,KAuIX,MAgFMoC,GAAyB,CAClCC,EACA5c,KACuB,O,OAAA,E,OAAA,E,EAAA,YACvB,MAAMT,QAAmBS,EAAKT,cACxB,OAAE6b,EAAM,OAAEyB,GArFc,EAC9BD,GACEvd,aAYF,GAVKud,IACDA,EAAa,CACTd,MAAgB,IAATzc,EACPoc,QAAS,OACTz2B,OAAQu1B,GAAO4B,OACfxO,OAAQ,GACRvO,UAAU,EACV6W,OAAQ,IAGZ2G,EAAW53B,SAAWu1B,GAAO4B,OAC7B,MAAM,IAAIjmC,MAAM,oCAEpB,GAAI0mC,EAAWd,QAAmB,IAATzc,EACrB,MAAM,IAAInpB,MAAM,yCAEpB,MAAMklC,EAAS,IAAI/1B,WAAW,IACxBy3B,EAAa,IAAIzB,SAASD,EAAOp4B,QAMjC64B,GAJce,EAAW3G,OACzB2G,EAAW3G,OAASuE,GAAMS,aAC1B,IACe2B,EAAWxd,SAAWob,GAAMQ,UAAY,GAEvD+B,EAAe3B,EAAO7iC,OACtBykC,EAAsB,IAAT3d,EAEnB,IAAI0c,EAAgB,EAChBC,EAAgB,EAChBiB,EAAc,IAAI53B,WAAW,GAC7Bu3B,EAAWJ,UACXS,GAAc,IAAIC,aAAcC,OAAOP,EAAWJ,SAClDT,EAAgBgB,EAAeC,EAC/BhB,EAAgBiB,EAAY1kC,QAEhC,IAAI0jC,EAAoB,EACpBC,EAAoB,EACpBO,EAAc,IAAIp3B,WAAW,GAC7Bu3B,EAAWH,cACXA,EAAc,IAAIp3B,WAAWu3B,EAAWH,aACxCR,EAAoBc,EAAeC,EAAahB,EAChDE,EAAoBU,EAAWH,YAAYlkC,QAG/C,MAAM6kC,EAAU,IAAIF,YAEpB9B,EAAO1oB,IAAI0qB,EAAQD,OAAO,QAASjD,GAAQC,WAC3CiB,EAAO1oB,IAAI0qB,EAAQD,OAAOP,EAAWnB,QAAQ1nB,MAAM,EAAG,IAAKmmB,GAAQE,SACnE0C,EAAWO,SAASnD,GAAQG,cAAe,IAAI,GAC/CyC,EAAWQ,SAASpD,GAAQI,QAAS,GAAG,GACxCwC,EAAWO,SAASnD,GAAQK,OAAQqC,EAAW53B,QAAQ,GACvD83B,EAAWO,SAASnD,GAAQM,MAAOqB,GAAO,GAC1CiB,EAAWO,SAASnD,GAAQO,OAAQpb,GAAQ,GAC5Cyd,EAAWO,SAASnD,GAAQQ,YAAaqC,GAAc,GACvDD,EAAWO,SAASnD,GAAQS,YAAaqC,GAAY,GACrDF,EAAWO,SAASnD,GAAQxI,QAASqK,GAAe,GACpDe,EAAWO,SAASnD,GAAQU,eAAgBoB,GAAe,GAC3Dc,EAAWO,SAASnD,GAAQW,aAAcoB,GAAmB,GAC7Da,EAAWO,SAASnD,GAAQY,oBAAqBoB,GAAmB,GAEpE,MAAMW,EAAS,IAAIx3B,WAAW22B,EAAgBE,GAI9C,OAHAW,EAAOnqB,IAAIuqB,GACXJ,EAAOnqB,IAAI+pB,EAAaT,GAEjB,CAAEZ,SAAQyB,SAAQ,EAiBEU,CAAmBX,EAAY,CACtDvd,OAAQE,IAGNie,EAAcpC,EAAO7iC,OAAsB,IAAbgnB,EAAmBsd,EAAOtkC,OACxDklC,EAAY,IAAIp4B,WAAWm4B,GACjCC,EAAU/qB,IAAI0oB,GACd,IAAK,IAAIpf,EAAM,EAAGA,EAAMuD,EAAYvD,IAAO,CACvC,MAAMyD,QAAcO,EAAKR,KAAKxD,GAC9ByhB,EAAU/qB,IAAI+M,EAAO2b,EAAO7iC,OAAe,IAANyjB,EACzC,CAGA,OAFAyhB,EAAU/qB,IAAImqB,EAAQzB,EAAO7iC,OAAsB,IAAbgnB,GAE/Bke,EAAUz6B,MACrB,E,YAhB2B,K,6QAgB1B,E,2SC5SD,MAAM06B,GAKF,WAAAhnC,GACIG,KAAKka,QAAU,IAAIjb,SAAQ,CAACC,EAASkH,KACjCpG,KAAKd,QAAUA,EACfc,KAAKoG,OAASA,CAAM,GAE5B,EAGG,MAAM0gC,GAUT,WAAAjnC,CACIuH,EACQ2/B,EACA3uB,GADA,KAAA2uB,cAAAA,EACA,KAAA3uB,IAAAA,EAZZ,KAAAqQ,SAAkCL,EAClC,KAAAja,OAAsB,KAEtB,KAAAoa,UAAoB,EACpB,KAAAwd,WAAgC,KAEhC,KAAAvd,OAAuB,GACvB,KAAAwe,SAAgC,GAO5BhnC,KAAKsoB,SAAW,CAAElhB,OACtB,CAEc,aAAA6/B,G,0CACV,GAAoB,QAAhBjnC,KAAKmO,OAAkB,CACvB,IAAKnO,KAAK+lC,WAAY,CAClB,MAAMmB,QAAeC,MAAMnnC,KAAKoY,IAAK,CACjCgvB,QAAS,CAAEC,MAAO,gBAEhBC,QAAmBJ,EAAOK,cAChCvnC,KAAK+lC,WAAazB,GAAcgD,EACpC,CACA,OAAOtnC,KAAK+lC,UAChB,CACA,OAAO,IACX,G,CAEM,UAAArd,G,0CACF,MAAMqd,QAAmB/lC,KAAKinC,gBAC9B,OAAIlB,EACOA,EAAWd,OAAS,EAEpBjlC,KAAK+mC,eAAiB,CAErC,G,CAEM,IAAApe,CAAK6e,G,gDAEP,IAAKxnC,KAAKwoB,OAAOgf,GAAc,CAC3B,MAAMC,EAAaD,GAFJ,EAGTE,EAAW1nC,KAAKgnC,SAASS,GAC/B,QAAiBtwB,IAAbuwB,QACMA,EAASxtB,YACZ,CACH,MAAMwtB,EAAW,IAAIb,GACrB7mC,KAAKgnC,SAASS,GAAcC,EAC5B,MAAM3B,QAAmB/lC,KAAKinC,gBAExB7gB,EAAQ,KAAOqhB,GAXV,IAU0B,QAAlB,EAAA1B,aAAU,EAAVA,EAAYjP,cAAM,QAAI,GAEnCP,EAAMnQ,EAAQ,MAAsB,EACpCuhB,QAAiBR,MAAMnnC,KAAKoY,IAAK,CACnCgvB,QAAS,CAAEC,MAAO,SAASjhB,KAASmQ,OAExC,IAAKoR,EAASC,GAAI,CACd,MAAMztB,EAAQ,IAAI9a,MACd,kBAAkBsoC,EAASE,cAG/B,MADAH,EAASthC,OAAO+T,GACVA,CACV,CACA,IAAKwtB,EAASlmB,KAAM,CAChB,MAAMtH,EAAQ,IAAI9a,MAAM,0BAExB,MADAqoC,EAASthC,OAAO+T,GACVA,CACV,CACA,MAAMhO,QAAew7B,EAASJ,cACxBO,EAAaL,GA7BR,EA8BLM,EAAWD,EAAa,GAC9B,IAAIE,EAAc,EAClB,IAAK,IAAI7iB,EAAM2iB,EAAY3iB,EAAM4iB,EAAU5iB,IAAO,CAC9C,MAAM8iB,EAAYD,EAAc,IAChChoC,KAAKwoB,OAAOrD,GAAO,IAAI3W,WACnBrC,EAAO+Q,MAAM8qB,EAAaC,IAE9BD,GAAe,GACnB,CACAN,EAASxoC,SAAQ,EACrB,CACJ,CACA,OAAOc,KAAKwoB,OAAOgf,EACvB,G,CAEM,KAAA3e,CAAM2e,EAAqB5e,G,0CAC7B5oB,KAAKwoB,OAAOgf,GAAe5e,CAC/B,G,6SCpEJ,IAAIsf,IAAS,EAETC,GAAYC,KAAKC,MACjBC,GAAa,EACbC,GAAa,EACbC,GAAqB,EAErBC,GAAU7+B,SAASwR,SAASstB,KAC5BC,GAAyB,GAE7B,MAAMvlB,GAAU,IxBnBT,MAAP,cACY,KAAAwlB,MAAe,IAAI1tB,EACnB,KAAAkI,QAAkC,CAAC,EACnC,KAAAylB,SAA0C,CAAC,EAC3C,KAAAC,SAA4B,EAwDxC,CAtDI,UAAAC,CAAW9nB,GACP,MAAM6nB,EAAW7nB,EAAQ2G,aACzB,IAAK,MAAMohB,KAAWF,EAAU,CAC5B,MAAM,QAAE1lB,GAAY4lB,EACpB,IAAK,MAAMC,KAAU7lB,EAAS,CAC1B,MAAM,KAAEhc,GAAS6hC,EACjBjpC,KAAK6oC,SAASzhC,GAAQ6Z,EACtBjhB,KAAKojB,QAAQhc,GAAQ6hC,EACrB,MAAMlvB,EAAQ/Z,KAAKkpC,UAAU9hC,GAChB,MAAT2S,GACAkH,EAAQqF,UAAUlf,EAAM2S,EAEhC,CACA/Z,KAAK8oC,SAASp9B,KAAKs9B,EACvB,CACJ,CAEA,SAAAE,CAAU9hC,GACN,MAAM6hC,EAASjpC,KAAKojB,QAAQhc,GAC5B,GAAI6hC,EAAQ,CACR,MAAM,KAAE7hC,EAAI,WAAE0gB,EAAU,KAAEzgB,GAAS4hC,EAC7BE,EAAYtI,OAAO/Y,GACnBshB,EAAUppC,KAAK4oC,MAAMrtB,SAASnU,EAAM+hC,GAC1C,OAAQ9hC,IACCud,EACkB,SAAZwkB,EAEAA,CAEnB,CACJ,CAEA,SAAA9iB,CAAUlf,EAAc2S,GACpB,GAAI3S,KAAQpH,KAAKojB,QAAS,CACtB,MAAMnC,EAAUjhB,KAAK6oC,SAASzhC,GACxB6hC,EAASjpC,KAAKojB,QAAQhc,GAC5BpH,KAAK4oC,MAAMhtB,UAAUxU,EAAMy5B,OAAO9mB,IAC1BkvB,EAAO5hC,OACNud,EACD3D,EAAQqF,UAAUlf,EAAMmZ,QAAQxG,IAGhCkH,EAAQqF,UAAUlf,EAAMy5B,OAAO9mB,GAE3C,CACJ,CAEA,UAAA6N,GACI,OAAO5nB,KAAKojB,OAChB,CAEA,WAAAimB,GACI,OAAOrpC,KAAK8oC,QAChB,GwBvCEQ,GAAe,IC7Cd,MACH,WAAAzpC,CAAoBujB,GAAA,KAAAA,QAAAA,EAEpB,KAAAmmB,UAAY,KACR,MAAMC,EAAU5/B,SAAS8X,cAAc,0BACvC,GAAI8nB,EAAS,CACTA,EAAQpb,UAAY,GACpB,IAAK,MAAM4a,KAAWhpC,KAAKojB,QAAQimB,cAAe,CAC9C,MAAM,KAAEjiC,EAAI,QAAEgc,GAAY4lB,EAGpB9B,EAASt9B,SAASC,cAAc,MACtCq9B,EAAOuC,YAAcriC,EACrBoiC,EAAQ5vB,YAAYstB,GAGpB,MAAMxP,EAAO9tB,SAASC,cAAc,MACpC,IAAK,MAAMo/B,KAAU7lB,EAAS,CAC1B,MAAM,KAAEhc,EAAI,MAAEygB,EAAK,KAAExgB,GAAS4hC,EACxBS,EACFpd,IAEA,MAAM,OAAE5S,GAAW4S,EACXjlB,IACCud,EACD5kB,KAAKojB,QAAQkD,UAAUlf,EAAMsS,EAAOiwB,SAGpC3pC,KAAKojB,QAAQkD,UAAUlf,EAAMsS,EAAOK,MAC5C,EAGE6vB,EAAWhgC,SAASC,cAAc,MAExC,IAAIggC,EACJ,OAAQxiC,GACJ,KAAKud,EACD,CACI,MAAMklB,EACFlgC,SAASC,cAAc,SACrB8/B,EAAU3pC,KAAKojB,QAAQ8lB,UACzB9hC,GAEJ0iC,EAAa/wB,aAAa,OAAQ,YAClC+wB,EAAaH,QAAUA,EACvBE,EAAUC,CACd,CACA,MACJ,KAAKjlB,EACD,CACI,MAAMklB,EAAed,EACfe,EACFpgC,SAASC,cAAc,UACrBogC,EAAWjqC,KAAKojB,QAAQ8lB,UAC1B9hC,GAEJ,IAAK,MAAM2S,KAASgwB,EAAa5L,OAAQ,CACrC,MAAM+L,EACFtgC,SAASC,cAAc,UAC3BqgC,EAAcnwB,MAAQA,EAAMA,MAC5BmwB,EAAcT,YAAc1vB,EAAM3S,KAClC8iC,EAAcD,SACVlwB,EAAMA,QAAUkwB,EACpBD,EAAcpwB,YAAYswB,EAC9B,CACAL,EAAUG,CACd,CACA,MACJ,QAAS,CACL,MAAMF,EACFlgC,SAASC,cAAc,SACrBkQ,EAAQ/Z,KAAKojB,QAAQ8lB,UACvB9hC,GAEJ0iC,EAAa/vB,MAAQA,EACrB8vB,EAAUC,CACd,EAEJD,EAAQrqC,GAAK4H,EACbyiC,EAAQppB,iBAAiB,SAAUipB,GACnCE,EAAShwB,YAAYiwB,GACrB,MAAMM,EAAevgC,SAASC,cAAc,SAE5CsgC,EAAaV,YAAc5hB,EAC3BsiB,EAAapxB,aAAa,MAAO3R,GACjCwiC,EAAShwB,YAAYuwB,GAErBzS,EAAK9d,YAAYgwB,EACrB,CACAJ,EAAQ5vB,YAAY8d,EACxB,CACA,MAAM0S,EAAgBxgC,SAASC,cAAc,KAC7CugC,EAAcX,YAAc,+BAC5BD,EAAQnb,OAAO+b,EACnB,MACItnB,QAAQ3I,MAAM,gDAElB,EAAWqJ,KAAK,gBAAgB,CAhGG,GD4CLJ,IAMhCinB,GAAuB,gCACvBC,GAAY,CAAC,OAEbC,GAAmB,IAClBthB,KACAgG,MACAqb,IAGDE,GAAkC,CAAE,cAAe,IACnDC,GAA4B,CAAC,EAE7BC,GAA0B,GAE1BC,GAAyB,GAE/B,IAAIC,GACAhf,GACAif,GACAzP,GACA0P,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACA1lB,GAEA2lB,GAEA5kB,GAHA6kB,GAAuB,EAKpB,MAAMC,GAAc,IE3FZ,MACJ,UAAAC,CAAWF,EAAsBvO,GACpC,MAAM9T,EAAOvf,SAAS8X,cAA2B,QAAQ8pB,KACrDriB,IACAA,EAAKvH,MAAM+pB,gBAAkB1O,EACvB,yBACA,0BAEd,CAEO,KAAA2O,CAAMC,EAAuBC,GAEpC,CAEO,KAAAjkB,CAAM2jB,EAAsB3jB,EAAgB+a,GAC/C,MAAMuH,EAAevgC,SAAS8X,cAC1B,cAAc8pB,KAElB,IAAIO,EAAY,GAQhB,OAPI5B,IACA4B,EAAY5B,EAAa6B,UACrBnkB,IACAkkB,EAAY,GAAGlkB,GAAS,MAAM+a,EAAO,KAAKA,IAAS,KACnDuH,EAAa6B,UAAYD,IAG1BA,CACX,GFkEG,SAASE,KAEZ,EADmB7V,GAAoBC,qBAAqBzK,IAC3C8L,KAAK,CAAEzB,OAAQsV,GAAK,IAAM,SAC/C,CAEO,SAASW,GAAwBjkC,GACpC,MAAMme,EAAQwF,GAAIjD,KAAKgN,KAAW/J,GAAIjD,KAAKgN,GAAS,IAAM,GAC1D+D,GAAkBE,gBAAgBhO,GAAK3jB,EAASme,GAChD6lB,IACJ,CAEO,SAASE,GAASC,EAAqBnzB,GAC1CuyB,GAAUzgB,SAASqhB,EAAa,IAC5BnzB,EAAMuT,SAAWzE,EAASC,EAAewjB,IAuc7C,EAAWhoB,KAAK,eApcRmnB,GAAaa,MAET5hC,SAAS8X,cAAiC,oBACtC3H,MAAQ4wB,GAAaa,IAC7Ba,MAEJ,EAAW7oB,KAAK,cAExB,CAEO,SAAS8oB,GAASF,EAAqBnzB,GAC1C8xB,GACKwB,UAAUf,IACVrsC,MAAMqtC,IACH,MAAMhB,EAAUzgB,SAASqhB,EAAa,IAIhCzpC,EACFiH,SAAS8X,cAAiC,oBAE9C,IAAK8qB,EAED,YADAjd,MAAM,sBAAsBic,KAIhC,MAAM,KAAEzqC,GAASyrC,EACX5Q,EAAO,IAAIF,KAAK,CAAC36B,GAAO,CAAEsG,KAXf,6BAYjB1E,EAAE0Y,KAAOL,OAAOG,IAAIsxB,gBAAgB7Q,GACpCj5B,EAAE+pC,SAAWjB,GAAY5jB,MAAM2jB,GAAW,OAEtCvyB,EAAMuT,QA0etB,SAAkBgf,GACd,MAAMmB,EAAO3xB,OAAO4xB,KAAK,GAAI,UAC7BD,EAAK/iC,SAAS0R,MAAQmwB,GAAY5jB,MAAM2jB,GACxCmB,EAAK/iC,SAASif,MAAM,SACpB8jB,EAAK/iC,SAASif,MAAMkiB,GAAO8B,QAAQrB,GAAS,IAC5CmB,EAAK/iC,SAASif,MAAM,UACpB8jB,EAAK/iC,SAAS6Z,OAClB,CAhfgBqpB,CAAStB,IAGL5hC,SAAS8X,cAAgC,cACpC3H,MAAQ0xB,GAAY5jB,MAAM2jB,GACnC,EAAWhoB,KAAK,cACpB,IAEH2C,OAAOhM,GAAU2I,QAAQ3I,MAAMA,IACxC,CAEO,SAAS4yB,GAAUC,GACXpjC,SAAS8X,cAA8B,yBAC/CsqB,UAAYgB,EACf,EAAWxpB,KAAK,cACpB,CAOO,SAASypB,GAAepB,EAAkB5yB,GAC7CA,EAAM4J,iBACN5J,EAAMi0B,aAAcC,WAAa,MACrC,CAEO,SAASC,GAAcvB,EAAkB5yB,GAC5C,MAAMo0B,EAAKp0B,EAAMi0B,aACjB,GAAIG,EAAGC,MACH,IAAK,IAAIhsC,EAAI,EAAGA,EAAI+rC,EAAGC,MAAM5rC,OAAQJ,IACjC+rC,EAAGC,MAAMhsB,OAAOhgB,QAGpB+rC,EAAGE,WAEX,CAEO,SAASC,GAAWhC,EAAiBvyB,GACxCA,EAAM4J,iBACN5J,EAAM2U,kBAEF4d,EAAU,IAMNA,EALCT,GAAO0C,YAAY,GAEZ1C,GAAO0C,YAAY,GAGjB,EAFA,EAFA,GAOlB,MAAMJ,EAAKp0B,EAAMi0B,aACjB,GAAwB,IAApBG,EAAGK,MAAMhsC,OAAc,CACvB,MAAMisC,EAAY10B,EAAM2J,SACxBgrB,GAAYpC,EAAwB6B,EAAGK,MAAM,GAAI,CAAEC,aACvD,MAAO,GAAwB,IAApBN,EAAGK,MAAMhsC,OAChBksC,GAAY,EAAGP,EAAGK,MAAM,IACxBE,GAAY,EAAGP,EAAGK,MAAM,SAExB,IAAK,IAAIvoB,EAAM,EAAGA,EAAMkoB,EAAGC,MAAM5rC,OAAQyjB,IACV,kBAAvBkoB,EAAGC,MAAMnoB,GAAK9d,MACdgmC,EAAGC,MAAMnoB,GAAK0oB,aAAY,SAAUz1B,GAChC,MAAM01B,EAAQC,KAAMhT,MAAM,KAC1B+S,EAAMtC,EAAU,GAAKpzB,EACrBxO,SAASwR,SAASstB,KAAOoF,EAAMrpB,KAAK,IACxC,GAIhB,CAEA,SAASupB,KACSpkC,SAAS8X,cACnB,yBAEEE,MAAMpX,QAAU,OACtB,EAAWgZ,KAAK,gBACpB,CAeA,SAASyqB,KACL,EAAWxqB,MAAM,iBAEZykB,IACDvhB,GACKxnB,MAAK,KACFyrC,GAAQsD,KAAK,IAEhB/nB,MAAMrD,QAAQ3I,MAE3B,CAEO,SAASg0B,GAAS3C,EAAsBpzB,GAC3C41B,KAEA7G,MAAM/uB,GACDjZ,MAAK,SAAUwoC,GACZ,GAAIA,EAASC,GACT,OAAOD,EAASyG,OAEhB,MAAM,IAAI/uC,MAAM,kBAAoBsoC,EAASE,WAErD,IACC1oC,MAAK,SAAU4B,GACM,WAAdA,EAAKsG,KAkYrB,SAAoBgnC,GAChB,MAAMC,EAASzsC,KAAKM,IAAIksC,EAAI3sC,OAAQ,MAAU2sC,EAAIjoB,OAClD,IAAK,IAAIjB,EAAM,EAAGA,EAAMmpB,EAAQnpB,IAAO,CACnC,MAAMopB,EAAMF,EAAIjoB,MAAQjB,EACxByG,GAAI/C,MAAM0lB,EAAKF,EAAIttC,KAAKokB,GAC5B,CACAyG,GAAIyB,QACJzB,GAAI4iB,MAAMH,EAAIjoB,MAClB,CAzYgBqoB,CAAW1tC,GACJgnB,EAASkB,EAAcloB,EAAKsG,OA6anD,SAAkBmkC,EAAsBriB,GACpC,IAAI/hB,EAAO+hB,EAAK/hB,KAChB,MAAMsnC,EAAWvlB,EAAKulB,SAElBvlB,EAAKA,OACL/hB,GAAQ,MAAQ+hB,EAAKA,MAGzBwhB,GAAaa,GAAWkD,EACxBhE,GAAcc,GAAWpkC,EAEzB2jC,GAAO4D,QAAQnD,EAASriB,GACxBuB,EAAYvB,EAAKmB,QACrB,CAzbgBskB,CAASpD,EAASzqC,GAEtB2pB,EAAY3pB,EAAKupB,SACjB2jB,IACJ,IACC9nB,OAAM,SAAUhM,GACb8zB,KACAlB,GAAU5yB,EAAMG,SAChBwI,QAAQ3I,MAAMA,EAClB,GACR,CAEO,SAAS00B,GAAO51B,GACnB,EAAWwK,MAAM,cACjB,MACMqrB,EADSllC,SAAS8X,cAAiC,gBACrC3H,MACpB,IAAI3B,EACA02B,GAAQA,EAAKptC,SAET0W,EADgB,iBAAT02B,EACDA,EAEAA,EAAK,IAInB,MACMpB,EADY9jC,SAAS8X,cAAgC,eACnCgsB,MACxB,GAAIA,GAA0B,IAAjBA,EAAMhsC,OAAc,CAC7B,MAAMisC,EAAY10B,EAAM2J,SACxBgrB,GAAYpC,GAASkC,EAAM,GAAI,CAAEC,aACrC,MAAO,GAAIv1B,EAAK,CACZ,IAAI22B,EAEJ,GADA,EAAWtrB,MAAM,cACO,WAApBrL,EAAI8E,MAAM,EAAG,GACb6xB,EAAW32B,EAAI8E,MAAM,GACJ,aAAb6xB,EA8QZ,EAAWvrB,KAAK,gBA6MpB,SAA0BgoB,EAAsBpkC,GAC5C,MAAM4nC,EAAYC,KAAKC,MACnBl0B,OAAOC,aAAaU,QAAQ,cAAgB,MAE5CqzB,EAAU5nC,KACV2jC,GAAOoE,QAAQ3D,EAASwD,EAAU5nC,IAClCqkC,GAAY5jB,MAAM2jB,EAASpkC,GAC3BqkC,GAAYG,MAAMJ,GAAS,GAEnC,CAjegB4D,CAAiB5D,GAASuD,OAE3B,CACH,MAAMM,EAAK,0BAA0BC,KAAKl3B,GAEtC22B,EADAM,EACWA,EAAG,GAEHj3B,EAEf,MAAM01B,EAAQC,KAAMhT,MAAM,KAC1B+S,EAAMtC,GAAU,GAAKuD,EACrBnlC,SAASwR,SAASstB,KAAOoF,EAAMrpB,KAAK,IACxC,CACJ,CACJ,CAEO,SAAS8qB,KACZ,MACMnoC,EADWwC,SAAS8X,cAAgC,cACpC3H,OA2a1B,SAA0ByxB,EAAsBpkC,GAC5C,MAAM4nC,EAAYC,KAAKC,MACnBl0B,OAAOC,aAAaU,QAAQ,cAAgB,MAG1CyyB,EAAOrD,GAAO8B,QAAQrB,GAC5BwD,EAAU5nC,GAAQgnC,EAElBpzB,OAAOC,aAAagB,QAAQ,YAAagzB,KAAKO,UAAUR,IAExDvD,GAAY5jB,MAAM2jB,EAASpkC,GAC3BqkC,GAAYG,MAAMJ,GAAS,GAC3BiE,IACJ,CAvbIC,CAAiBlE,GAASpkC,GAC1B,EAAWqc,MAAM,cACjBzI,OAAOxB,YAAW,IAAMuzB,GAAU,UAAU,EAChD,CAEO,SAAS4C,GAASvoC,GACjB4T,OAAO+T,QAAQ,UAAY3nB,EAAO,MAmb1C,SAA4BA,GACxB,MAAM4nC,EAAYC,KAAKC,MACnBl0B,OAAOC,aAAaU,QAAQ,cAAgB,MAE5CqzB,EAAU5nC,YACH4nC,EAAU5nC,GACjB2lC,GAAU,YAEd/xB,OAAOC,aAAagB,QAAQ,YAAagzB,KAAKO,UAAUR,IACxDS,IACJ,CA5bQG,CAAmBxoC,EAE3B,CAOA,SAASwmC,GACLpC,EACApc,EACAhM,EAAgC,CAAC,GAEjC,MAAM0qB,EAAQ1e,EAAKhoB,KAAK2zB,MAAM,KACxB8U,EAAM/B,EAAMA,EAAMpsC,OAAS,GAAGouC,cAC9BC,EAAU3gB,EAAKhoB,KAAK4oC,MAAM3F,IAChC,IAAIhjC,EAAM4oC,EAIV,GAHIF,GAA8B,IAAnBA,EAAQruC,UAClB,CAAE2F,EAAM4oC,GAAOF,GAEhBhoB,EAASkB,EAAc4mB,IAgD/B,SAAyBrE,EAAsBpc,GAC3C4e,KACA,MAAMxe,EAAa,IAAIC,WACvBD,EAAWjpB,OAAS,WAChB,MAAM2e,EAASllB,KAAKklB,OACd4oB,EAAQ1e,EAAKhoB,KAAK2zB,MAAM,KACxB8U,EAAM/B,EAAMoC,MAAOJ,cACnB1oC,EAAO0mC,EAAMrpB,KAAK,KAGlBipB,EAAQK,KAAMhT,MAAM,KAC1B2S,EAAMlC,EAAU,GAAK,GACrB5hC,SAASwR,SAASstB,KAAOgF,EAAMjpB,KAAK,KAEhCsD,EAASkB,EAAc4mB,KACnB3qB,EAAO+U,YAAc,OACjBlS,EAASiB,EAAe6mB,GACxB7E,GACKmF,UAAU3E,EAASpkC,EAAMyoC,EAAK3qB,GAC9B/lB,MAAK,IAAMurB,MACXvE,OAAOhM,IACJ2I,QAAQ3I,MAAMA,GACd4yB,GAAU,kBAAkB3lC,IAAO,IAG3C2lC,GAAU,kBAAkB3lC,KAG5B2gB,EAASgB,EAAgB8mB,GACzB9E,GACKoF,UAAU3E,EAASpkC,EAAMyoC,EAAK3qB,GAC9B/lB,MAAK,IAAMurB,MACXvE,OAAOhM,IACJ2I,QAAQ3I,MAAMA,GACd4yB,GAAU,kBAAkB3lC,IAAO,IAG3C2lC,GAAU,kBAAkB3lC,MAIxC6mC,IACJ,EACAze,EAAWW,kBAAkBf,EACjC,CA3FQghB,CAAgB5E,EAASpc,QACtB,GAAIrH,EAASkH,GAAY4gB,GAC5B/E,GAAK3b,gBAAgBC,QAClB,GAAIkb,GAAUviB,SAAS8nB,IAAiB,OAATxoC,GAAiB+b,EAAQitB,QAAS,CACpE,MAAMC,OACMn5B,IAAR84B,EAAoB,CAAEI,QAAStlB,SAASklB,EAAK,KAAQ,CAAC,EAC1DM,GAAanhB,EAAM,OAAF,wBAAOhM,GAAYktB,GACxC,KAAO,CACH,MAAME,EAAe5mC,SAAS8X,cAC1B,uBAEE+uB,EAAaD,aAAY,EAAZA,EAAcz2B,MACjC,GAAI02B,EAAY,CACZ,MAAMJ,EAAUtlB,SAAS0lB,EAAY,IACrC,GAAIC,MAAML,GAEN,YADAtD,GAAU,oBAAsB0D,GAGpCF,GAAanhB,EAAM,OAAF,QAAIihB,WAAYjtB,GACrC,MACI2pB,GAAU,sBAAwB8C,EAE1C,CACJ,CAEA,SAASU,GAAanhB,EAAYhM,GAC9B4qB,KAEA,MAAMxe,EAAa,IAAIC,WACvBD,EAAWjpB,OAAS,WAChB,MAAM2e,EAASllB,KAAKklB,OACpB,IAAI,QAAEmrB,GAAYjtB,EAClBitB,EAAUA,QAAAA,EAAW,KACrB,MAAMpL,EAAQ,IAAIz2B,WAAW0W,GAC7B,IAAK,IAAIC,EAAM,EAAGA,EAAMD,EAAO+U,WAAY9U,IACvCyG,GAAI/C,MAAMwnB,GAAW,EAAa,IAAVA,EAAgBpL,EAAM9f,IAC9CkrB,IAEAjtB,EAAQuqB,YACR/hB,GAAIyB,QACJzB,GAAI4iB,MAAM6B,IAEdpC,IACJ,EACAze,EAAWW,kBAAkBf,EACjC,CAgDA,SAASuhB,GAAgBv4B,EAAahR,EAAcyoC,GAChD1I,MAAM/uB,GACDjZ,MAAK,SAAUwoC,GACZ,GAAIA,EAASC,GAAI,CACb,MAAMgJ,EAASjJ,EAASlmB,KAAMovB,YAC9B,IAAI7P,EAAW,EACf,MAAM8P,EAAuB,GACvB/J,EAAgBhc,SAClB4c,EAASP,QAAQ1vB,IAAI,kBACrB,IAGJ,OAAOk5B,EACFjoB,OACAxpB,MAAK,SAAS4xC,EAAU7rB,GACrB,GAAIA,EAAO7M,KAAM,CACb,MAAMtX,EAAO,IAAIyN,WAAWwyB,GAC5B,IAAIlK,EAAS,EACb,IAAK,IAAI3R,EAAM,EAAGA,EAAM2rB,EAAOpvC,OAAQyjB,IACnCpkB,EAAK8a,IAAIi1B,EAAO3rB,GAAM2R,GACtBA,GAAUga,EAAO3rB,GAAKzjB,OAE1B,OAAOzC,QAAQC,QAAQ6B,EAAKoL,OAChC,CAQA,OANA60B,GAAY9b,EAAOnL,MAAMrY,OACrBqlC,GArP5B,SAAyBnX,EAAiBohB,GACtC,GAAIA,EAAO,CACP,MAAMC,EAAQrnC,SAAS8X,cACnB,yBAEEwvB,EAAWtnC,SAAS8X,cACtB,4BAEJuvB,EAAMrvB,MAAMpX,QAAU,QACtB0mC,EAAStvB,MAAM1hB,MAAY0vB,EAAUohB,EAASC,EAAMlqC,YAA7B,IAC3B,CACJ,CA2O4BoqC,CAAgBnQ,EAAU+F,GAE9B+J,EAAOplC,KAAKwZ,EAAOnL,OAEZ62B,EAAOjoB,OAAOxpB,KAAK4xC,EAC9B,GACR,CACI,MAAM,IAAI1xC,MAAM,kBAAoBsoC,EAASE,WAErD,IACC1oC,MAAK,SAAU4B,GACZ,IAAIgnB,EAASkB,EAAc4mB,GAuBvB,MAAM,IAAIxwC,MAAM,aAAawwC,qBAtBzB9uC,EAAKk5B,YAAc,OACflS,EAASiB,EAAe6mB,IACxB7E,GACKmF,UAAU3E,GAASpkC,EAAMyoC,EAAK9uC,GAC9B5B,MAAK,IAAMurB,MACXvE,OAAOhM,IACJ2I,QAAQ3I,MAAMA,GACd4yB,GAAU,kBAAkB3lC,IAAO,IAI3C2gB,EAASgB,EAAgB8mB,IACzB9E,GACKoF,UAAU3E,GAASpkC,EAAMyoC,EAAK9uC,GAC9B5B,MAAK,IAAMurB,MACXvE,OAAOhM,IACJ2I,QAAQ3I,MAAMA,GACd4yB,GAAU,kBAAkB3lC,IAAO,IAOvD6mC,IACJ,IACC9nB,OAAOhM,IACJ8zB,KACAlB,GAAU5yB,EAAMG,SAChBwI,QAAQ3I,MAAMA,EAAM,GAEhC,CAEO,SAASi3B,GAAW5F,EAAsBpzB,GACxCA,GACD,EAAWqL,MAAM,cAGrBuqB,KACA,MAAMqD,EAAQznC,SAAS8X,cAAgC,aAEvD,GADAtJ,EAAMA,GAAOi5B,EAAMt3B,MACV,CACL,MAEMu3B,EAFWl5B,EAAI2iB,MAAM,KACLmV,MACCnV,MAAM,KACvB8U,EAAMyB,EAAUpB,MAAOJ,cACvB1oC,EAAOmqC,mBAAmBD,EAAU7sB,KAAK,MAC/C0iB,MAAM/uB,EAAK,CAAEo5B,OAAQ,SAChBryC,MAAMwa,IACH,MAAMotB,EAAgBhc,SAClBpR,EAAKytB,QAAQ1vB,IAAI,mBAAqB,IACtC,IAGsC,UAAtCiC,EAAKytB,QAAQ1vB,IAAI,kBAGjBqQ,EAASiB,EAAe6mB,IACxB9I,GAAiB,QpBxN1B,iBoByNwBiE,IAEfA,GACKyG,aACGjG,EACA,IAAI1E,GAAc1/B,EAAM2/B,EAAe3uB,IAE1C+N,OAAOhM,IACJ4yB,GAAU5yB,EAAMG,SAChBwI,QAAQ3I,MAAMA,EAAM,IAE5B8zB,MAEA0C,GAAgBv4B,EAAKhR,EAAMyoC,EAC/B,IAEH1pB,OAAOhM,IACJ2I,QAAQC,KAAK,cAAe5I,GAC5Bw2B,GAAgBv4B,EAAKhR,EAAMyoC,EAAI,GAE3C,CACJ,CAUA,IAAI6B,GAAY,EAET,SAAStT,KACZ,MAAMiK,EAAMD,KAAKC,MACXsJ,EAAKtJ,EAAMF,GACXyJ,EAAShmB,GAAIimB,YACnB,IAAIhiB,EACAiiB,EACAC,EAEJ,MAAMC,EAAapoC,SAAS8X,cAA8B,QAC1D,OAAQgwB,IACJ,KAAK,EACD7hB,EAAQ+hB,EAAStJ,GACjByJ,EAAMlwC,KAAKowC,MAAMpiB,EAAQ8hB,GACzBK,EAAWhG,UAAY,GAAG+F,QAC1B,MAEJ,KAAK,EACDliB,EAAQgb,GAAMqH,eAAiB1J,GAC/BsJ,EAAMjwC,KAAKowC,MAAMpiB,GAAS8hB,EAAK,MAC/BK,EAAWhG,UAAY,GAAG8F,QAC1B,MAEJ,QACIjiB,EAAQgb,GAAMsH,OAAS5J,GACvBuJ,EAAMjwC,KAAKowC,MAAMpiB,GAAS8hB,EAAK,MAC/BK,EAAWhG,UAAY,GAAG8F,QAIlC3J,GAAYE,EACZC,GAAasJ,EACbpJ,GAAqBqC,GAAMqH,eAC3B3J,GAAasC,GAAMsH,MACvB,CAEO,SAASC,KACZV,KAAcA,GAAY,CAC9B,CAEO,SAASW,KACZ,MAAMpV,GAAMiO,GAAM7kB,YAClBjD,GAAQkD,UAAUd,EAAsByX,GACxCqV,GAAkBrV,EACtB,CAMA,SAASqV,GAAkBrV,GACvB,MAAMpV,EAAQje,SAAS8X,cAA8B,mBACjDub,GACApV,EAAMhH,UAAUS,OAAO,iBACvBuG,EAAMhH,UAAUC,IAAI,kBAEpB+G,EAAMhH,UAAUS,OAAO,gBACvBuG,EAAMhH,UAAUC,IAAI,iBAE5B,CAWO,SAAS,KACZ8pB,GAAQvd,OACZ,CAYO,SAASgf,KACZ,MAAMkG,EACF3oC,SAAS8X,cAAiC,gBACxC8wB,EACF5oC,SAAS8X,cAAiC,oBAC9C6wB,EAAWnkB,UAAY,GACvB,MAAMqkB,EAAMjI,GAAgBgI,EAAez4B,OAC3C,GAAI04B,EACA,IAAK,IAAIttB,EAAM,EAAGA,EAAMstB,EAAI/wC,OAAQyjB,IAAO,CACvC,MAAMiK,EAAOqjB,EAAIttB,GACjB,IAAI/d,EAAOgoB,EAAKhoB,KACZgoB,EAAKjG,OACL/hB,GAAQ,MAAMgoB,EAAKjG,QAEvB,MAAM8f,EAASr/B,SAASC,cAAc,UACtCo/B,EAAOlvB,MAAQqV,EAAK2f,SACpB9F,EAAO+C,UAAY5kC,EACnBmrC,EAAWlkB,OAAO4a,GACdyB,GAAcc,MAAapkC,IAC3B6hC,EAAOgB,UAAW,EAE1B,CAER,CAEO,SAASyI,KACM9oC,SAAS8X,cAAgC,eACjD3H,MAAQ,EACtB,CAEO,SAAS44B,GAAU15B,GACtB41B,GAAO51B,EACX,CAsBA,SAASw2B,KACL,MAAMT,EAAYC,KAAKC,MACnBl0B,OAAOC,aAAaU,QAAQ,cAAgB,MAE1Ci3B,EAAQlzC,OAAOD,KAAKuvC,GAEpByD,EAAyBjI,GAAgB,eAAiB,GAC1DqI,EAAajpC,SAAS8X,cACxB,yBAEJmxB,EAAWzkB,UAAY,GAEvBwkB,EAAMt5B,SAAQ,SAAUlS,GACpBqrC,EAAI/mC,KAAK,CACLgjC,SAAU,cACVtnC,KAAMA,EACN2nC,SAAU,SAAW3nC,IAEzByrC,EAAWzkB,UACP,4BACAhnB,EACA,2CACAA,EACA,8BACR,IACAqrC,EAAI/mC,KAAK,CACLgjC,SAAU,cACVtnC,KAAM,kBACN2nC,SAAU,kBAElB,MA4C4B53B,IAAxB6D,OAAOC,cACOrR,SAASsY,iBAA8B,aAC/C5I,SAAQ,SAAUwU,GACpBA,EAAGlM,MAAMpX,QAAU,cACvB,IAGJ,MAAMgoC,GACF5oC,SAAS8X,cAAiC,oBAgD9C,SAASoxB,GAAYpK,GACjB,MAAMgF,EAAQhF,EAAK3N,MAAM,KACzB,IAAK,IAAI5V,EAAM,EAAGA,EAAMtjB,KAAKM,IAAI,EAAGurC,EAAMhsC,QAASyjB,IAAO,CACtD,MAAM4tB,EAAQ5tB,EAAM,EACpB,IAAK4C,EAASC,EAAe+qB,GACzB,MAEJ,MAAM3jB,EAAOse,EAAMvoB,GACnB,GAAIiK,IAASuZ,GAAaxjB,GAG1B,GAAIiK,EAAKzM,QAAQ,OAAS,EAAG,CACzB,MAAMmrB,EAAQ1e,EAAK2L,MAAM,KAEb,SADA+S,EAAMA,EAAMpsC,OAAS,GAAGouC,cAEhC3B,GAAS4E,EAAO3jB,GAEhBgiB,GAAW2B,EAAO3jB,EAE1B,MAAWA,GACP+e,GAAS4E,EAAO,cAAgB3jB,EAAO,QAE/C,CACAuZ,GAAe+E,CACnB,CAEO,SAASsF,KACZ,GAAIppC,SAASwR,SAASstB,OAASD,GAAS,CACpCA,GAAU7+B,SAASwR,SAASstB,KAC5B,MAAMA,EAAOqF,KACTrF,GACAoK,GAAYpK,EAEpB,CACJ,CAEO,SAASuK,KACZ,MAAMprB,EAAQje,SAAS8X,cAA2B,gBAC9CwmB,IACAvhB,GACKxnB,MAAK,KACFyrC,GAAQsD,KAAK,IAEhB/nB,MAAMrD,QAAQ3I,OACnB0N,EAAMhH,UAAUS,OAAO,WACvBuG,EAAMhH,UAAUC,IAAI,cAEpB8pB,GAAQsI,OACRrrB,EAAMhH,UAAUS,OAAO,YACvBuG,EAAMhH,UAAUC,IAAI,YAExBonB,IAAUA,EACd,CAEO,SAASiL,KACZ7J,GAAaC,WACjB,CAEO,SAASnpC,KACP+6B,GAAsBC,GAC/B,CAEO,SAASgY,MACO,W,mCACf,MAAM/X,QAAaS,UAAUC,UAAUsX,WACvCztB,GAAG0tB,aAAajY,EACpB,G,CACKkY,EACT,CAEO,SAASC,KACZ,MACMzyC,EAAOkqC,GAASwI,eAChB9wC,EAAIiH,SAAS8X,cAAiC,uBAE9Cka,EAAO,IAAIF,KAAK,CAAC36B,GAAO,CAAEsG,KAJf,6BAKjB1E,EAAE0Y,KAAOL,OAAOG,IAAIsxB,gBAAgB7Q,GACpCj5B,EAAE+pC,SAAW,yBACb,EAAWlpB,KAAK,gBACpB,CAEO,SAASkwB,KACZzI,GAASh4B,OACb,CAEO,SAAS0gC,KACZvwB,GAAQkD,UAAU4V,IAAkB,EACxC,CA2BA,SAAS6R,KACL,MAAM6F,EAAQ,IAAIC,OAAO,SACnBnL,EAAO6I,mBAAmBv2B,OAAOI,SAASstB,MAC1CtQ,EAAUwb,EAAMtE,KAAK5G,GAC3B,OAAKtQ,EACOA,EAAQ,GADC,EAEzB,CA4JO,SAAS0b,GACZ7d,EACA8d,EACAC,EACAC,EACA70C,EACA80C,GAEAl5B,OAAOyF,iBAAiB,QAAQ,MAlKpC,SACIwV,EACA8d,EACAC,EACAC,EACA70C,EACA80C,G,MAEAtJ,GAAU3U,EACVrK,GAAMgf,GAAQuJ,SACdvuB,GAAKglB,GAAQwJ,QACbvJ,GAAQ5U,EAAOoe,WACfjZ,GAAKnF,EAAOqe,gBACZxJ,GAAO,IAAI5b,GAAKtJ,IAChBmlB,GAASgJ,EACT/I,GAAegJ,EACf/I,GAAWgJ,EACX1I,GAAKnsC,EAELisC,GAAS,IAAInN,GAAOtY,GAAIxmB,GACxBgkB,GAAQ2lB,WAAWsC,IAEnBD,GAAW,IAAIjO,GAASvX,IACxBxC,GAAQ2lB,WAAWqC,IAEnBD,GAAS,IAAI/O,GAAOhB,IACpBhY,GAAQ2lB,WAAWoC,IAEnBD,GAAQ,IAAIvlB,EAAMC,IAClBxC,GAAQ2lB,WAAWmC,IApXnBoH,GAAkBpH,GAAM7kB,aAuXxBM,GAAQ1nB,QAAQqN,IAAI,CAAC4+B,GAAMvkB,MAAOsP,EAAOtP,QAEzC,EAAWxD,OAEXmoB,GAAW,IAAI3f,GAASC,GAAKhG,GAAIsuB,GACjC5I,GAASzd,OAAO,aAChByd,GAASpe,YAAY,MAAM,IAAMtB,GAAIyB,UACrCie,GAASpe,YAAY,MAAOjU,IACpBA,EAAM2J,SAENQ,GAAQkD,UACJ4V,IACC9Y,GAAQ8lB,UAAUhN,KAGvBiP,GAAO9O,iBACX,IAEJiP,GAASpe,YAAY,MAAM,IAAMtH,GAAG+G,QAAQ,MAC5C2e,GAASpe,YAAY,KAAMoc,GAAaC,WACxC+B,GAASpe,YAAY,MAAM,KzBp1BxB,IAA+BkhB,EyBq1B9BpzB,OAAOC,aAAagB,QAChB,SzBt1B0BmyB,EyBu1BJxD,GAAQ2J,WzB/0B/BtF,KAAKO,UAAUpB,GAPL,CAAC/tB,EAActG,IACxBA,aAAiBvL,WACVmW,EAAkBf,EAAc7J,GAEpCA,KyBm1BN,IAELuxB,GAASpe,YAAY,MAAM,KACvB,MAAMsnB,EAAax5B,OAAOC,aAAaU,QAAQ,SzBt2BhD,IAA2ByyB,EyBu2BtBoG,GACA5J,GAAQ6J,UzBx2BcrG,EyBw2BaoG,EzBh2BpCvF,KAAKC,MAAMd,GAPF,CAAC/tB,EAActG,IACN,iBAAVA,GAAsBA,EAAMie,WAAWrT,GACvCD,EAAc3K,EAAMmD,MAAMyH,EAAgBjjB,SAE9CqY,KyBo2BP,IAhOR,WACI,IACIkvB,EADAyL,EAAS,GAEb,IAAK,IAAIvvB,EAAM,EAAGA,EAAMnK,OAAO25B,WAAWjzC,OAAQyjB,IAAO,CACrD,MAAMiK,EAAOpU,OAAO25B,WAAWxvB,GACzBstB,EAAMrjB,EAAKsf,SACXtnC,EAAOgoB,EAAKhoB,KACZ+hB,EAAOiG,EAAKjG,KACdiG,EAAKhwB,IAAMmsC,KAGXkH,IAAQiC,IACRzL,EAASr/B,SAASC,cAAc,UAChCo/B,EAAOlvB,MAAQ04B,EACfxJ,EAAO+C,UAAYyG,EACnBD,GAAenkB,OAAO4a,GAEtBuB,GAAgBiI,GAAO,GACvBiC,EAASjC,GAEbjI,GAAgBiI,GAAK/mC,KAAK0jB,GACtBjG,IACKshB,GAAUrjC,KACXqjC,GAAUrjC,GAAQ,IAEtBqjC,GAAUrjC,GAAMsE,KAAK0jB,IAE7B,CACA6Z,EAASr/B,SAASC,cAAc,UAChCo/B,EAAO+C,UAAY,cACnBwG,GAAenkB,OAAO4a,GAEtBwG,IACJ,CAkMImF,GAMA,MAAMC,EAAgBjrC,SAAS8X,cAAc,WAEvCozB,EAAW77B,IACb,MAAMm6B,GAASn6B,EAAM87B,eAAiB/5B,OAAO+5B,eAAgBC,QACzD,QAEJpvB,GAAG0tB,aAAaF,GAChBn6B,EAAM4J,gBAAgB,EAGpBoyB,EAAUh8B,IACZA,EAAM4J,iBACDsY,GAAsBC,GAAG,EAGlCpgB,OAAOyF,iBAAiB,SAAUxH,IAE1BrP,SAASgX,eACThX,SAASgX,gBAAkBhX,SAAS6X,MAIxCqzB,EAAQ77B,EAAM,IAGlB+B,OAAOyF,iBAAiB,QAASxH,IAEzBrP,SAASgX,eACThX,SAASgX,gBAAkBhX,SAAS6X,MAIxCwzB,EAAOh8B,EAAM,IAGjB47B,EAAcp0B,iBAAiB,QAASxH,IACpCg8B,EAAOh8B,EAAM,IAGjB47B,EAAcp0B,iBAAiB,SAAUxH,IACrC67B,EAAQ77B,EAAM,IAGd6iB,UAAUoZ,YACVtrC,SAAS6X,KAAKZ,UAAUC,IAAI,cAGhC8K,GAAIyB,QACJ8nB,YAAY/W,GAAW,KACvB1T,IAIA,MAAMge,EAzIS,IAAI0M,gBAAgBp6B,OAAOI,SAASi6B,QACrC39B,IAwIG,SAAWq2B,KACxBrF,GACAkC,GAAQsI,OACRJ,GAAYpK,IAEZ/hB,GACKxnB,MAAK,KACFyrC,GAAQsD,KAAK,IAEhB/nB,MAAMrD,QAAQ3I,OAI4B,QADnD,EAAAvQ,SACK8X,cAAgC,sBAAc,SAC7CjB,iBAAiB,UAAWxH,IAC1B,MAAMS,EAAST,EAAMS,OACf22B,EAAUzmC,SAAS8X,cACrB,6BAEEosB,EAAQp0B,EAAOK,MAAMghB,MAAM,KAC3B8U,EAAM/B,EAAMA,EAAMpsC,OAAS,GAE7B6oC,GAAiBxiB,SAAS8nB,GAC1BQ,EAAQzuB,MAAMpX,QAAU,OAExB6lC,EAAQzuB,MAAMpX,QAAU,cAC5B,GAEZ,CAWQ8qC,CAASrf,EAAQ8d,EAAOC,EAAaC,EAAS70C,EAAG80C,EAAe,GAExE,CGzlCe,MAAMqB,GAWjB,WAAA11C,CAAYiuB,GATJ,KAAA0nB,YAAc,GAEd,KAAAC,QAAU,EACV,KAAAC,KAAO,IAAIlnC,WAAW,MAO1BxO,KAAK21C,MAAQ/rC,SAAS8X,cAAcoM,GACpC9tB,KAAK41C,SACT,CAEQ,OAAAA,GACJ51C,KAAK61C,MAAQjsC,SAASC,cAAc,OACpC7J,KAAK61C,MAAMh1B,UAAUC,IAAI,QACzB9gB,KAAK61C,MAAM7J,UAAYhsC,KAAKw1C,YAC5Bx1C,KAAK21C,MAAMtnB,OAAOruB,KAAK61C,OACvB71C,KAAKw1C,YAAc,EACvB,CAEA,OAAAM,CAAQ3xC,GACJ,MAAM4xC,EAAc,IAAN5xC,EACR6xC,EAAU7xC,GAAO,GACjBiL,EAAIyxB,OAAOoV,aAAaF,GAiB9B,GAfU,OAAN3mC,EACApP,KAAK41C,UACQ,OAANxmC,IAEM,OAANA,EAEPpP,KAAKw1C,aAAe,WACH,IAAVO,EACP/1C,KAAKw1C,YAAcx1C,KAAKw1C,YAAYt4B,MAAM,GAAI,GACvC84B,IACPh2C,KAAKw1C,aAAepmC,IAExBpP,KAAK61C,MAAM7J,UAAYhsC,KAAKw1C,YAC5Bx1C,KAAK01C,KAAK11C,KAAKy1C,SAAWtxC,EAC1BnE,KAAKy1C,UACDz1C,KAAKy1C,QAAUz1C,KAAK01C,KAAKh0C,OAAQ,CACjC,MAAMw0C,EAAS,IAAI1nC,WAA8B,EAAnBxO,KAAK01C,KAAKh0C,QACxCw0C,EAAOr6B,IAAI7b,KAAK01C,MAChB11C,KAAK01C,KAAOQ,CAChB,CACJ,CAEA,KAAAjjC,GACIjT,KAAKw1C,YAAc,GACnBx1C,KAAK21C,MAAMvnB,UAAY,GACvBpuB,KAAK41C,UACL51C,KAAK01C,KAAO,IAAIlnC,WAAW,MAC3BxO,KAAKy1C,QAAU,CACnB,CAEA,WAAAU,GACI,OAAOn2C,KAAK21C,MAAM3J,UAAUtqC,OAAS,CACzC,CAEA,YAAA+xC,GACI,OAAOzzC,KAAK01C,KAAKx4B,MAAM,EAAGld,KAAKy1C,QACnC,EC3DJ,SAASW,GAAgBr1C,EAAgBqlB,EAAemQ,GACpD,MAAMqQ,EAAY,IAAIp4B,WAClBzN,EAAKoL,OAAO+Q,MAAMnc,EAAKs1C,WAAajwB,EAAOrlB,EAAKs1C,WAAa9f,IAEjE,OAAOsK,OAAOoV,gBAAgBrP,EAClC,CAEO,MAAM0P,GAkBT,WAAAz2C,CAAYkB,GAPZ,KAAAw1C,MAAc,EACd,KAAAC,WAAmB,EACnB,KAAAC,UAAkB,EAClB,KAAAC,mBAA2B,EAC3B,KAAAC,YAAoB,EACpB,KAAAC,aAAqB,EAGjB52C,KAAK62C,QAAU91C,EAAK+1C,SAAS,GAC7B92C,KAAK+2C,SAAWh2C,EAAK+1C,SAAS,GAC9B92C,KAAKg3C,eAAiBj2C,EAAK+1C,SAAS,GACpC92C,KAAKi3C,aAAel2C,EAAK+1C,SAAS,GAClC92C,KAAKk3C,QAAUn2C,EAAK+1C,SAAS,GAC7B92C,KAAK4kC,QAAUwR,GAAgBr1C,EAAM,EAAG,IAEpCf,KAAK62C,QAAU,IACf72C,KAAKu2C,MAAQx1C,EAAK+1C,SAAS,IAC3B92C,KAAKw2C,WAAaz1C,EAAK+1C,SAAS,IAChC92C,KAAKy2C,UAAY11C,EAAK+1C,SAAS,IAC/B92C,KAAK02C,mBAAqB31C,EAAKo2C,UAAU,IAAI,GAC7Cn3C,KAAK22C,YAAc51C,EAAKo2C,UAAU,IAAI,GACtCn3C,KAAK42C,aAAe71C,EAAKo2C,UAAU,IAAI,GAE/C,EAGG,MAAMC,GAGT,WAAAv3C,CAAYkB,GACRf,KAAKq3C,SAAW,GAEhB,IAAK,IAAIlyB,EAAM,EAAGA,EAAM,IAAKA,IACzBnlB,KAAKq3C,SAAS3rC,KAAK3K,EAAK+1C,SAAS3xB,GAEzC,EAMG,MAAMmyB,IAKN,MAAMC,WAAmBD,GAC5B,WAAAz3C,CAAYkB,GACR6/B,QAEA5gC,KAAKw3C,UAAY,GACjBx3C,KAAKohC,OAAS,GAEd,IACI,IAAIqW,EAAU,EAAGtyB,EAAM,EACvBA,EAAMpkB,EAAKk5B,WACX9U,GAlBW,KAkBYsyB,IACzB,CACE,IAAIpY,EAAQ,GACZ,MAAMqY,EAAkB,GAClBx6B,EAAQnc,EAAKoL,OAAO+Q,MACtBnc,EAAKs1C,WAAalxB,EAClBpkB,EAAKs1C,WAAalxB,EAxBX,MA0BLwyB,EAAY,IAAInpC,WAAW0O,GAE3B06B,EADY,IAAIpT,SAAStnB,GACCi6B,UA3BhB,MA6BZ,GAEJ,IAAK,IAAIpX,EAAM,EAAGA,EAAM6X,EAAe7X,IAAO,CAC1C,MAAM8X,EAAY9X,GAAO,EACnB+X,EAAW,GAAW,EAAN/X,GACtB2X,EAAS3X,GACJ4X,EAAUE,IAAcC,EAAY,EAAO,EAAI,CACxD,CAEAzY,EAAQ,GACR,IAAIvI,EAAS,EACb,KAAOA,EAAS4gB,EAASh2C,QAAQ,CAC7B,MAAMwjB,EAASud,GAAWiV,EAAU5gB,GACpC,IAAK5R,EAAO8c,OACR,MAEJ3C,EAAM3zB,KAAKwZ,EAAO8c,QAClBlL,EAAS5R,EAAO4R,OAAS,CAC7B,CAEA92B,KAAKohC,OAAOqW,GAAW,IAAIjpC,WAAW6wB,GACtCr/B,KAAKw3C,UAAUC,GAAW,IAAIjpC,WAAWkpC,EAC7C,CACJ,EASG,MAAMK,WAAmBT,GAG5B,WAAAz3C,CAAYkB,GAGR,IAAI02C,EAEJ,IAJA7W,QAGA5gC,KAAKg4C,KAAO,GACPP,EAAU,EAAGA,EAAU,IAAKA,IAAW,CACxC,MAAM3P,EAAa/mC,EAAKo2C,UAAoB,EAAVM,GAAa,GACzC/uB,EAAa3nB,EAAKo2C,UAAoB,EAAVM,EAAc,GAAG,GAC7CQ,EAAWl3C,EAAKm3C,UAAoB,EAAVT,EAAc,GAAG,GACjD,GAAiB,IAAbQ,EACA,MAEJj4C,KAAKg4C,KAAKtsC,KAAK,CACXo8B,WAAYA,EACZpf,WAAYA,EACZuvB,SAAUA,GAElB,CACAj4C,KAAKohC,OAAS,GACdphC,KAAKw3C,UAAY,GAEjB,MAAMpzB,EAAOrjB,EAAKoL,OAClB,IAAKsrC,EAAU,EAAGA,EAAUz3C,KAAKg4C,KAAKt2C,OAAQ+1C,IAAW,CACrD,MAAMU,EAAMn4C,KAAKg4C,KAAKP,GAEtB,IAAIpY,EAAQ,GACZ,MAAMqY,EAAkB,GAClBtxB,EAAyB,IAAjB+xB,EAAIrQ,WACZvR,EAAMnQ,EAAyB,IAAjB+xB,EAAIzvB,WAClBxL,EAAQkH,EAAKlH,MAAMkJ,EAAOmQ,GAC1BohB,EAAY,IAAInpC,WAAW0O,GAIjC,IAAK,IAAI6iB,EAAM,EAAGA,EAAMoY,EAAIF,SAAUlY,IAAO,CACzC,MAAM8X,EAAY9X,GAAO,EACnB+X,EAAW,GAAW,EAAN/X,GACtB2X,EAAS3X,GACJ4X,EAAUE,IAAcC,EAAY,EAAO,EAAI,CACxD,CAEAzY,EAAQ,GACR,IAAIvI,EAAS,EACb,KAAOA,EAAS4gB,EAASh2C,QAAQ,CAC7B,MAAMwjB,EAASud,GAAWiV,EAAU5gB,GACpC,IAAK5R,EAAO8c,OACR,MAEJ3C,EAAM3zB,KAAKwZ,EAAO8c,QAClBlL,EAAS5R,EAAO4R,OAAS,CAC7B,CAEA92B,KAAKohC,OAAOqW,GAAW,IAAIjpC,WAAW6wB,GACtCr/B,KAAKw3C,UAAUC,GAAW,IAAIjpC,WAAWkpC,EAC7C,CACJ,EAGG,MAAMU,GAGT,WAAAv4C,CAAYkB,GACR,MACM+sC,EADUsI,GAAgBr1C,EAAM,EAAGA,EAAKk5B,YACxBc,MAAM,MAC5B/6B,KAAKm+B,OAAS2P,EAAM/qC,QAAO,SACvBs1C,EACAC,GAEA,MAAMC,EAAWD,EAAKvd,MAAM,MAE5B,OADAsd,EAAIE,EAAS,IAAMA,EAAS,GACrBF,CACX,GAAG,CAAC,EACR,EClLG,SAASG,GACZC,EACAr1B,GAEA,IAAI+F,EAA0B,KAE9B,OAAQsvB,GACJ,IAAK,MACDtvB,EP+QG,SAA2B/F,GACtC,IACI+F,GADA,QAAE0Z,GAAYzf,EAGlB,IAAKyf,EACD,MAAM,IAAIxjC,MAAM,oBAGpB,MAAM,MAAE4lC,EAAK,OAAE92B,EAAM,OAAE2oB,EAAM,SAAEvO,EAAQ,OAAE6W,GAAWkF,GAAczB,GAMlE,OALAA,EAAUA,EAAQ3lB,MAAM4Z,EAAQA,EAASmO,GACzC7hB,EAAU,OAAH,wBAAQA,GAAO,CAAEyf,UAASta,WAAU6W,WAInCjxB,GACJ,KAAKu1B,GAAO4B,OACRnc,EAAO,GAAO/F,GACd,MACJ,KAAKsgB,GAAOgV,IACRvvB,EAAO,GAAO/F,GACd,MACJ,KAAKsgB,GAAOmC,IACZ,QACI1c,EAAO,GAAI/F,GAInB,OAAO+F,CACX,CO3SmBwvB,CAAkBv1B,GACzB,MACJ,IAAK,MACD+F,ECtCG,SAA6B/F,GACxC,MAAM,KAAEriB,EAAI,KAAEqG,EAAI,KAAEw7B,EAAI,QAAEC,EAAO,OAAEzD,EAAM,SAAE7W,GAAanF,EAClD+F,EAAmB,CACrBhb,OAAQ,MACRsa,SAAUP,EACVI,SAAU,CAAElhB,OAAMw7B,QAClBxD,SACA7W,WACA6Y,OAAQ,IAGZ,IAAKrgC,IAAS8hC,EACV,MAAM,IAAIxjC,MAAM,4BAapB,IAAK,IAAIsB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,IAAI0+B,EAAkB,GACtB,IAAK,IAAIuZ,EAAc,EAAGA,EAAc,GAAIA,IAAe,CACvD,MAAM9V,EAAkBrE,GAAKma,GAC7B,IAAItZ,EACJ,GAAIuD,EAAS,CACT,MAAMpK,EAAmC,KAA5B,GAAK93B,EAAImiC,GACtBxD,EAAS,IAAI9wB,WAAWq0B,EAAQ3lB,MAAMub,EAAKA,EAAM,KACrD,KAAO,KAAI13B,EAGP,MAAM,IAAI1B,MAAM,4BAFhBigC,EAASv+B,EAAKJ,GAAGmiC,EAGrB,CACAzD,EAAQA,EAAMrc,OACV8c,GAAgBV,EAAQz+B,EAAGmiC,EAAiBxD,GAEpD,CACAnW,EAAKiY,OAAO11B,KAAK,IAAI8C,WAAW6wB,GACpC,CAEA,OAAOlW,CACX,CDRmB,CAAkB/F,GACzB,MACJ,IAAK,KACL,IAAK,MACD+F,EAAOwZ,GAAkBvf,GACzB,MACJ,IAAK,MACD+F,EAAO6Z,GAAqB5f,GAC5B,MACJ,IAAK,KACD+F,EAAO+Z,GAAqB9f,GAC5B,MACJ,IAAK,MACD+F,ED0KG,SAA2B/F,GACtC,MAAM,QAAEyf,GAAYzf,EACpB,IAAKyf,EACD,MAAM,IAAIxjC,MAAM,oBAEpB,MAAMw5C,EAAK,IAAIrU,SAAS3B,EAAS,GACjC,IACIiW,EADAC,EAAW,EAEf,MAAMjI,EAAiB,CAAC,EAuBxB,SAASC,IACL,GAAIgI,GAAYF,EAAG5e,WACf,OAAO,KAGX,MAAM5yB,EAAOwxC,EAAGX,UAAUa,GAAU,GAC9Bv4C,EAAOq4C,EAAGX,UAAUa,EAAW,GAAG,GAClCh4C,EAAO,IAAIyjC,SAASqU,EAAG1sC,OAAQ4sC,EAAW,EAAGv4C,GAGnD,OAFAu4C,GAAYv4C,EAAO,EAEZ,CACH6G,KAAMA,EACN7G,KAAMA,EACNO,KAAMA,EAEd,CAEA,GAtCA,WAGI,OAFqB83C,EAAGX,UAAUc,GAAsB,IAGpD,KA3OW,UA4OPF,EAAa,EACb,MACJ,KA7OW,UA8OPA,EAAa,EACb,MACJ,QACI,OAAO,EAGf,OAnPoB,YAmPhBD,EAAGX,UAAUc,GAAsB,EAK3C,CAmBIC,GAAc,CACdF,EAhRgB,GAiRhB,IAAIG,EAAQnI,IACZ,KAAOmI,GAAO,CACV,OAAQA,EAAM7xC,MACV,KAAK,WACDypC,EAAOqI,KAAO,IAAI7C,GAAU4C,EAAMn4C,MAClC,MACJ,KAAK,WACD+vC,EAAOsI,KAAO,IAAIhC,GAAU8B,EAAMn4C,MAClC,MACJ,KAAK,WAEG+vC,EAAOkH,KADQ,IAAfc,EACc,IAAIvB,GAAW2B,EAAMn4C,MAErB,IAAIg3C,GAAWmB,EAAMn4C,MAEvC,MACJ,KAAK,WACD+vC,EAAOuI,KAAO,IAAIjB,GAAUc,EAAMn4C,MAClC,MACJ,KAAK,WAED,MACJ,QACI,EAAM,oBAAqB,EAAMm4C,EAAM7xC,KAAM,IAErD6xC,EAAQnI,GACZ,CACJ,MACI,EAAM,sBAKV,MAAM,KAAEsI,EAAI,KAAED,EAAI,KAAEpB,EAAI,KAAEmB,GAASrI,EAenC,MAbsB,CAClBroB,SAAUN,EACVha,OAAQ,MACRkpC,UAAU+B,aAAI,EAAJA,EAAM/B,WAAY,GAC5BG,WAAWQ,aAAI,EAAJA,EAAMR,YAAa,GAC9BjvB,UAAU,EACVD,SAAU,CACNlhB,MAAMiyC,aAAI,EAAJA,EAAMlb,OAAc,QAAK/a,EAAQhc,KACvCw7B,MAAMyW,aAAI,EAAJA,EAAMlb,OAAkB,aAAKkb,aAAI,EAAJA,EAAMlb,OAAa,OAE1Dgb,OAIR,CC7QmBG,CAAkBl2B,GAIjC,OAAO+F,CACX,CE9DO,MAAMowB,GAAmB,IAAI/qC,WAAW,CAC3C,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,EAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,EAAK,IAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,EAAK,GAAK,EAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,EAAK,IAAK,GAAK,GAAK,EAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,EAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,EAAK,EACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,EAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,GAAK,EACnC,EAAK,GAAK,GAAK,EAAK,EAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,IAAK,EAAK,EAAK,IAAK,GAAK,IAAK,IACnC,GAAK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GAAM,GAAM,GAC1F,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,EAAM,EAAM,IAAM,IAAM,EAAM,EAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,EAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1F,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,EAAM,EAAM,IAAM,IAAM,EAAM,GAiC1F,GA7BqB,CAQrB,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1F,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1F,IAAM,GAAM,EAAM,GAAM,GAAM,GAAM,GAAM,G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IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,EAAK,IACnC,GAAK,IAAK,GAAK,EAAK,IAAK,GAAK,IAAK,EACnC,IAAK,GAAK,IAAK,GAAK,EAAK,IAAK,GAAK,EACnC,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,EAAK,IACnC,GAAK,IAAK,GAAK,EAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,EACnC,GAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EACnC,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,EAAK,GACnC,GAAK,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,EAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IACnC,IAAK,GAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,EAAK,IAAK,EAAK,IAAK,GAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,EAAK,GAAK,IAAK,EAAK,IACnC,EAAK,IAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,GAAK,EAAK,IAAK,EACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,GAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,GAAK,EACnC,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EAAK,IACnC,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,EAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GACnC,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,GAAK,EAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,IAAK,IAAK,EAAK,GAAK,GAAK,EAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,IAAK,IAAK,IAAK,EAAK,GAAK,GAAK,IACnC,GAAK,EAAK,GAAK,EAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,EAAK,IAAK,EAAK,IAAK,GAAK,EAAK,IACnC,GAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EAAK,IACnC,GAAK,EAAK,GAAK,IAAK,IAAK,EAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,EAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IACnC,GAAK,EAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,EAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,EAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,EAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,EAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,EAAK,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,EAAK,GAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GACnC,EAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,EAAK,EAAK,GAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,GACnC,IAAK,IAAK,GAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,EAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,EAAK,GAAK,GAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,EACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,GACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,EACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,GAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,GAAK,EAAK,GAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,GAAK,IACnC,IAAK,GAAK,EAAK,IAAK,IAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,GAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GACnC,GAAK,EAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IACnC,IAAK,EAAK,IAAK,EAAK,IAAK,GAAK,EAAK,GACnC,GAAK,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IACnC,GAAK,EAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,GACnC,EAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,EAAK,GAAK,IAAK,EAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,EAAK,IACnC,GAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,GAAK,GAAK,IACnC,GAAK,EAAK,GAAK,GAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,GAAK,GAAK,IAAK,IAAK,EAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,IAAK,IACnC,EAAK,GAAK,GAAK,EAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,GAAK,IACnC,EAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,EACnC,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,EAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GACnC,GAAK,EAAK,EAAK,EAAK,GAAK,GAAK,EAAK,EACnC,GAAK,GAAK,EAAK,EAAK,GAAK,GAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GACnC,EAAK,GAAK,GAAK,IAAK,EAAK,GAAK,EAAK,GACnC,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,GAAK,EAAK,EAAK,EACnC,GAAK,GAAK,EAAK,EAAK,IAAK,GAAK,IAAK,GACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,GAAK,EAAK,GAAK,GAAK,IACnC,EAAK,GAAK,EAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,GAAK,EAAK,EAAK,EAAK,GAAK,GAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,IAAK,GAAK,EAAK,IAAK,GAAK,EAAK,GACnC,GAAK,GAAK,EAAK,IAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,IAAK,IAAK,EAAK,GAAK,EACnC,EAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EAAK,GACnC,IAAK,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,IACnC,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,EAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,EAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,EAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,EAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GACnC,IAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,GACnC,EAAK,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GAAK,GACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,GAAK,IACnC,IAAK,GAAK,GAAK,GAAK,GAAK,IAAK,IAAK,EACnC,GAAK,IAAK,GAAK,GAAK,EAAK,IAAK,IAAK,GACnC,GAAK,IAAK,EAAK,IAAK,GAAK,GAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,EAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,EAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IACnC,EAAK,GAAK,IAAK,GAAK,GAAK,GAAK,IAAK,EACnC,IAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,EAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,EAAK,EAAK,GACnC,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,GACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,GAAK,IAAK,EAAK,IAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IAAK,EACnC,IAAK,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GACnC,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IACnC,GAAK,GAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IACnC,EAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,EAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IACnC,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,EAAK,IAAK,EAAK,GAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,EAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GAAK,IACnC,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,EAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,GAAK,GAAK,GAAK,IAAK,EAAK,IAAK,GACnC,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,EAAK,GAAK,GAAK,GAAK,GACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GACnC,GAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,EAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,IAAK,GAAK,EAAK,EACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,GAAK,GAAK,GAAK,EAAK,GACnC,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GACnC,GAAK,EAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,GAAK,EAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,EAAK,IAAK,EAAK,EAAK,GAAK,GAAK,IACnC,GAAK,EAAK,EAAK,IAAK,EAAK,IAAK,GAAK,IACnC,GAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IAAK,IACnC,EAAK,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,EAAK,GAAK,EACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,EAAK,EACnC,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,EAAK,EAAK,GAAK,EAAK,EACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,EAAK,EACnC,IAAK,EAAK,GAAK,EAAK,EAAK,GAAK,EAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,EAAK,EAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GACnC,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IACnC,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,GAAK,GAAK,EAAK,GAAK,EAAK,EAAK,GACnC,EAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,IAAK,GAAK,GAAK,IAAK,EAAK,EAAK,GAAK,IACnC,GAAK,GAAK,EAAK,EAAK,GAAK,EAAK,GAAK,EACnC,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,EAAK,EAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,IAAK,EAAK,EAAK,GAAK,IAAK,GAAK,IACnC,EAAK,EAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,EACnC,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,EAAK,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GACnC,EAAK,EAAK,GAAK,EAAK,EAAK,GAAK,EAAK,EACnC,GAAK,EAAK,EAAK,GAAK,IAAK,EAAK,EAAK,IACnC,EAAK,EAAK,IAAK,GAAK,EAAK,IAAK,EAAK,EACnC,IAAK,EAAK,EAAK,IAAK,GAAK,EAAK,IAAK,EACnC,EAAK,GAAK,IAAK,EAAK,EAAK,IAAK,EAAK,EACnC,GAAK,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,IACnC,GAAK,IAAK,GAAK,EAAK,IAAK,IAAK,GAAK,EACnC,GAAK,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,IACnC,EAAK,EAAK,IAAK,GAAK,EAAK,IAAK,EAAK,EACnC,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,IAAK,GACnC,EAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GAAK,IACnC,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IAAK,EACnC,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,GAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,EAAK,EAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,GAAK,IAAK,EAAK,EAAK,IACnC,EAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,EAAK,EAAK,IAAK,GAAK,IAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,EACnC,EAAK,GAAK,GAAK,IAAK,EAAK,EAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,GAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,EAAK,GAAK,IAAK,EAAK,EAAK,GAAK,GACnC,GAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,GAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,EAAK,GAAK,EAAK,GACnC,EAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,GACnC,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,GAAK,EAAK,IAAK,EAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,GAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,GACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,GAAK,GACnC,IAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EACnC,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,EAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,EACnC,EAAK,IAAK,IAAK,GAAK,EAAK,IAAK,EAAK,EACnC,IAAK,EAAK,EAAK,GAAK,GAAK,IAAK,EAAK,EACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GACnC,GAAK,GAAK,IAAK,GAAK,IAAK,EAAK,EAAK,GACnC,EAAK,EAAK,IAAK,EAAK,GAAK,GAAK,GAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,EAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,EAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,EAAK,IACnC,EAAK,IAAK,EAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,EAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,EAAK,IAAK,EAAK,EAAK,GACnC,EAAK,EAAK,IAAK,GAAK,GAAK,IAAK,EAAK,EACnC,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,EAAK,EAAK,IAAK,IAAK,IACnC,EAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,EAAK,EAAK,GAAK,IAAK,IACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IAAK,EACnC,EAAK,IAAK,GAAK,IAAK,EAAK,EAAK,IAAK,EACnC,IAAK,EAAK,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AK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,EAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,EAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,EACnC,GAAK,IAAK,EAAK,IAAK,GAAK,EAAK,GAAK,IACnC,IAAK,GAAK,IAAK,GAAK,EAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,EAAK,IAAK,GAAK,IAAK,IACnC,IAAK,GAAK,EAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,IAAK,GAAK,EAAK,IAAK,GAAK,GAAK,GAAK,EACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,EACnC,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EAAK,IACnC,EAAK,GAAK,IAAK,GAAK,EAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,GAAK,EAAK,IAAK,EACnC,GAAK,IAAK,GAAK,EAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,GAAK,GACnC,EAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,EAAK,IAAK,GACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,EAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,EAAK,IAAK,GAAK,EACnC,IAAK,IAAK,IAAK,GAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IACnC,GAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,EAAK,IACnC,IAAK,IAAK,EAAK,IAAK,GAAK,GAAK,GAAK,GACnC,GAAK,IAAK,GAAK,EAAK,IAAK,GAAK,EAAK,GACnC,GAAK,GAAK,GAAK,EAAK,IAAK,GAAK,GAAK,EACnC,IAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,GACnC,IAAK,EAAK,IAAK,GAAK,GAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,IACnC,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,EAAK,GACnC,EAAK,IAAK,IAAK,EAAK,EAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,EAAK,EAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,EAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,GAAK,GACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,GAAK,GAAK,EAAK,IAAK,IAAK,IACnC,EAAK,EAAK,IAAK,IAAK,IAAK,GAAK,EAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,EACnC,IAAK,GAAK,EAAK,IAAK,IAAK,EAAK,GAAK,GACnC,IAAK,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,GACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IACnC,GAAK,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EACnC,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IACnC,EAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GACnC,IAAK,EAAK,IAAK,GAAK,IAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MC1OxB,MAAM6lD,GAGjB,WAAAx0D,GAIQ,KAAAq7C,OAAQ,EACR,KAAAoZ,QAAS,EACT,KAAAC,WAAY,EACZ,KAAAC,SAAW,EACX,KAAApwC,KAAkB,GAClB,KAAAm3B,QAzBC,EAiBL,EAAM,eACV,CASQ,KAAAnB,IAASC,GAEjB,CAEQ,QAAAoa,GACJ,MAAM/sC,EAASvjB,IACX,IAAK,IAAIghB,EAAM,EAAGA,EAAM,EAAGA,IACvBnlB,KAAKokB,KAAK1Y,QAAY,EAANvH,IAChBA,IAAQ,CACZ,EAGEuwD,EAAYvwD,IACdujB,EAAM7lB,KAAKyB,MAAMa,EAAM,KACvBujB,EAAMvjB,EAAM,GAAG,EAGbkkC,EAAM,IAAID,KACVusB,EAAMtsB,EAAIusB,UACVC,EAAUxsB,EAAIysB,SACdC,EAAQ1sB,EAAI2sB,WAAa,EACzBC,EAAO5sB,EAAI6sB,WACXC,EAAU9sB,EAAI+sB,aACdC,EAAUhtB,EAAIitB,aAEpBt1D,KAAKokB,KAAO,GACZsD,EAAMqtC,GACNrtC,EAAMmtC,GACNH,EAASC,GACTD,EAASO,GACTP,EAASS,GACTT,EAASW,EACb,CAEQ,KAAA3tC,GACA1nB,KAAKu0D,YACDv0D,KAAKokB,KAAK8rB,OACVlwC,KAAKo6C,MAAM,cACXp6C,KAAKw0D,UAAY,MAEjBx0D,KAAKo6C,MAAM,cACXp6C,KAAKw0D,UAAY,KAG7B,CAEQ,MAAA/X,CAAOhkB,EAAWt0B,GACtB,GAhFK,MAgFS,IAANs0B,SAEYthB,IAARhT,EAAmB,CACnB,MAAMmwD,KArEd,EAqEuBnwD,GACf,GAAImwD,IAAWt0D,KAAKs0D,SAChBt0D,KAAKo6C,MAAM,SAAUp6C,KAAKs0D,OAAS,OAAS,OACxCA,GAEA,OADAt0D,KAAKu7C,QAlFvB,GAkFiCp3C,EACPnE,KAAKu7C,SACT,KAjFrB,GAkFyBv7C,KAAKo6C,MAAM,SACXp6C,KAAKy0D,WACL,MACJ,KAtFlB,EAuFsBz0D,KAAKo6C,MAAM,YACXp6C,KAAKu0D,WAAY,EACjBv0D,KAAK0nB,QACL,MACJ,KA5FnB,EA6FuB1nB,KAAKo6C,MAAM,WACXp6C,KAAKu0D,WAAY,EACjB,MACJ,QACIv0D,KAAKo6C,MACD,kBACA,EAAMp6C,KAAKu7C,UAM/B,MAAML,KAlGf,EAkGuB/2C,GAEV+2C,IAAUl7C,KAAKk7C,QACfl7C,KAAKk7C,MAAQA,EACbl7C,KAAKo6C,MAAM,QAASp6C,KAAKk7C,MAAQ,OAAS,OACtCA,GACAl7C,KAAK0nB,QAGjB,CAKR,OAAO1nB,KAAKw0D,QAChB,CAEA,IAAA7rC,CAAK6P,EAAYC,GACb,IAAIvT,EAMJ,OAJIA,EADAsT,EAAO,IACE,GAAIC,GAEJ,GAAMD,EAAO,KAAS,EAAKC,GAEjCvT,CACX,CAEA,KAAA2D,GAEA,CAEA,QAAA8zB,CAASlkB,EAAWt0B,GAChB,OAAOnE,KAAKy8C,OAAOhkB,EAAKt0B,EAC5B,CAEA,QAAAowC,GACI,MAAO,CAAC,CACZ,CAEA,QAAAE,CAASwF,GAET,EC3JG,MAAMsb,GAAM,IAAI/mD,WAAW,CAC9B,IAAK,IAAK,EAAK,GAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GAAK,GACnC,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACnC,IAAK,IAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IACnC,EAAK,GAAK,EAAK,IAAK,EAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,IACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,GACnC,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,EAAK,GAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,GAAK,IAAK,IAAK,EAAK,GAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GACnC,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GACnC,GAAK,IAAK,GAAK,GAAK,GAAK,GAAK,EAAK,GACnC,GAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EAAK,EACnC,EAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,EAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GAAK,EACnC,IAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,GAAK,IAAK,IAAK,EAAK,GAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,EAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,IAAK,EAAK,GACnC,EAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GACnC,GAAK,EAAK,IAAK,GAAK,EAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,EAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IACnC,IAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IAAK,IACnC,GAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EAAK,IACnC,IAAK,IAAK,IAAK,EAAK,GAAK,EAAK,IAAK,IACnC,GAAK,IAAK,IAAK,EAAK,IAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,GAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,EAAK,GAAK,IAAK,EAAK,GAAK,IAAK,IACnC,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,IAAK,EAAK,IAAK,EAAK,GAAK,IAAK,IACnC,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EAAK,IACnC,IAAK,EAAK,GAAK,EAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,EAAK,GAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EAAK,IACnC,IAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IACnC,IAAK,EAAK,IAAK,GAAK,GAAK,GAAK,GAAK,IACnC,IAAK,EAAK,GAAK,IAAK,GAAK,IAAK,EAAK,IACnC,EAAK,IAAK,IAAK,EAAK,GAAK,EAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GACnC,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EAAK,GACnC,IAAK,GAAK,IAAK,IAAK,IAAK,EAAK,GAAK,IACnC,EAAK,IAAK,IAAK,EAAK,GAAK,GAAK,GAAK,GACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IACnC,GAAK,GAAK,GAAK,IAAK,IAAK,EAAK,GAAK,IACnC,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,EAAK,IACnC,GAAK,GAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,EAAK,GAAK,EAAK,IACnC,EAAK,IAAK,GAAK,GAAK,IAAK,GAAK,EAAK,IACnC,EAAK,GAAK,IAAK,IAAK,IAAK,GAAK,IAAK,GACnC,GAAK,IAAK,GAAK,IAAK,IAAK,EAAK,IAAK,IACnC,EAAK,GAAK,EAAK,IAAK,GAAK,IAAK,IAAK,GACnC,IAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IAAK,EACnC,IAAK,GAAK,IAAK,EAAK,IAAK,IAAK,EAAK,GACnC,EAAK,IAAK,IAAK,IAAK,IAAK,EAAK,GAAK,IACnC,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,IAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IACnC,IAAK,EAAK,GAAK,GAAK,IAAK,GAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,GAAK,GAAK,IACnC,IAAK,IAAK,IAAK,EAAK,IAAK,IAAK,IAAK,EACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IACnC,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,GAAK,GAAK,EAAK,IAAK,GAAK,GAAK,GACnC,GAAK,GAAK,EAAK,IAAK,GAAK,GAAK,IAAK,GACnC,IAAK,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,IACnC,EAAK,GAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EACnC,IAAK,GAAK,IAAK,EAAK,GAAK,GAAK,IAAK,IACnC,EAAK,GAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IACnC,IAAK,GAAK,IAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,EAAK,GAAK,GAAK,GAAK,IAAK,GAAK,IAAK,GACnC,IAAK,GAAK,IAAK,EAAK,IAAK,GAAK,IAAK,GACnC,GAAK,EAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,GAAK,IAAK,GAAK,IAAK,IAAK,IAAK,EAAK,IACnC,IAAK,IAAK,GAAK,IAAK,EAAK,EAAK,IAAK,GACnC,GAAK,GAAK,IAAK,EAAK,EAAK,IAAK,GAAK,IACnC,IAAK,EAAK,IAAK,EAAK,EAAK,IAAK,EAAK,GACnC,IAAK,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,GACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,GAAK,GAAK,EAAK,IAAK,IAAK,IACnC,IAAK,IAAK,GAAK,IAAK,IAAK,EAAK,GAAK,GACnC,IAAK,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,EACnC,IAAK,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,EACnC,IAAK,EAAK,GAAK,GAAK,IAAK,IAAK,EAAK,IACnC,IAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,EAAK,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,EACnC,IAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,IACnC,EAAK,GAAK,EAAK,IAAK,IAAK,EAAK,IAAK,IACnC,IAAK,EAAK,IAAK,GAAK,IAAK,IAAK,GAAK,IACnC,IAAK,IAAK,IAAK,GAAK,IAAK,IAAK,IAAK,IACnC,EAAK,IAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GACnC,IAAK,IAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,GAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAG1BgnD,GAAY,IAAIhnD,WAAW,CACpC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,IAAK,IAAK,IAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,IAAK,IACnC,IAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,EAAK,EAAK,EAAK,IAAK,IACnC,IAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,GAAK,GAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,GAAK,GAAK,GAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,GAAK,GAAK,IAAK,EAAK,EAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,GAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,IAAK,IAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,EAAK,GAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,IAAK,GAAK,GAAK,GAAK,IAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,IAAK,GAAK,GAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,EAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,IAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,EAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,EAAK,EAAK,GAAK,EAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,GAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,IAAK,EAAK,EAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,EAAK,EAAK,EAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,EAAK,EAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,EAAK,GAAK,GAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,EAAK,GAAK,GAAK,EAAK,GACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,EAAK,IAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,EAAK,GAAK,GAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,EAAK,GAAK,GAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,EAAK,EAAK,EAAK,EAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,IAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,EAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,EAAK,EAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,IAAK,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,IACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,EAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,IAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,EAAK,GACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,GAAK,GAAK,GAAK,IAAK,GACnC,GAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,EAAK,IAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,IAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,IAAK,IAAK,IAAK,IAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,EAAK,EAAK,GAAK,GAAK,GAAK,GAAK,GAAK,EACnC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EACnC,E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","sources":["webpack://Apple2/webpack/universalModuleDefinition","webpack://Apple2/webpack/runtime/load script","webpack://Apple2/./js/roms/character/ lazy ^\\.\\/.*$ namespace object","webpack://Apple2/./js/roms/system/ lazy ^\\.\\/.*$ namespace object","webpack://Apple2/./submodules/apple2shader/screenEmu.js","webpack://Apple2/webpack/bootstrap","webpack://Apple2/webpack/runtime/define property getters","webpack://Apple2/webpack/runtime/ensure chunk","webpack://Apple2/webpack/runtime/get javascript chunk filename","webpack://Apple2/webpack/runtime/hasOwnProperty shorthand","webpack://Apple2/webpack/runtime/make namespace object","webpack://Apple2/webpack/runtime/publicPath","webpack://Apple2/webpack/runtime/jsonp chunk loading","webpack://Apple2/./js/prefs.ts","webpack://Apple2/./node_modules/micromodal/dist/micromodal.es.js","webpack://Apple2/./js/base64.ts","webpack://Apple2/./js/options.ts","webpack://Apple2/./js/util.ts","webpack://Apple2/./js/ui/audio.ts","webpack://Apple2/./js/types.ts","webpack://Apple2/./js/formats/types.ts","webpack://Apple2/./js/ui/types.ts","webpack://Apple2/./js/ui/gamepad.ts","webpack://Apple2/./js/ui/keyboard.ts","webpack://Apple2/./js/ui/tape.ts","webpack://Apple2/./js/applesoft/tokens.ts","webpack://Apple2/./js/applesoft/zeropage.ts","webpack://Apple2/./js/applesoft/decompiler.ts","webpack://Apple2/./js/applesoft/compiler.ts","webpack://Apple2/./js/videomodes.ts","webpack://Apple2/./js/ui/screen.ts","webpack://Apple2/./js/ui/joystick.ts","webpack://Apple2/./js/ui/system.ts","webpack://Apple2/./js/formats/format_utils.ts","webpack://Apple2/./js/formats/do.ts","webpack://Apple2/./js/formats/nib.ts","webpack://Apple2/./js/formats/prodos/constants.ts","webpack://Apple2/./js/formats/po.ts","webpack://Apple2/./js/formats/2mg.ts","webpack://Apple2/./js/formats/http_block_disk.ts","webpack://Apple2/./js/ui/apple2.ts","webpack://Apple2/./js/ui/options_modal.ts","webpack://Apple2/./js/ui/drive_lights.ts","webpack://Apple2/./js/ui/printer.ts","webpack://Apple2/./js/formats/woz.ts","webpack://Apple2/./js/formats/create_disk.ts","webpack://Apple2/./js/formats/d13.ts","webpack://Apple2/./js/roms/cards/disk2.ts","webpack://Apple2/./js/cards/drivers/EmptyDriver.ts","webpack://Apple2/./js/cards/drivers/BaseDiskDriver.ts","webpack://Apple2/./js/cards/drivers/NibbleDiskDriver.ts","webpack://Apple2/./js/cards/drivers/WozDiskDriver.ts","webpack://Apple2/./js/cards/disk2.ts","webpack://Apple2/./js/ram.ts","webpack://Apple2/./js/cards/langcard.ts","webpack://Apple2/./js/roms/cards/parallel.ts","webpack://Apple2/./js/cards/parallel.ts","webpack://Apple2/./js/roms/cards/ramfactor.ts","webpack://Apple2/./js/cards/ramfactor.ts","webpack://Apple2/./js/roms/cards/smartport.ts","webpack://Apple2/./submodules/cpu6502/dist/js/util.js","webpack://Apple2/./submodules/cpu6502/dist/js/cpu6502.js","webpack://Apple2/./submodules/cpu6502/dist/js/debugger.js","webpack://Apple2/./js/cards/smartport.ts","webpack://Apple2/./js/formats/block.ts","webpack://Apple2/./js/formats/prodos/vdh.ts","webpack://Apple2/./js/formats/prodos/utils.ts","webpack://Apple2/./js/roms/cards/thunderclock.ts","webpack://Apple2/./js/cards/thunderclock.ts","webpack://Apple2/./js/roms/cards/videoterm.ts","webpack://Apple2/./js/cards/videoterm.ts","webpack://Apple2/./js/apple2io.ts","webpack://Apple2/./js/canvas.ts","webpack://Apple2/./js/gl.ts","webpack://Apple2/./js/mmu.ts","webpack://Apple2/./js/symbols.ts","webpack://Apple2/./js/main2.ts","webpack://Apple2/./js/apple2.ts","webpack://Apple2/./js/entry2.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Apple2\"] = factory();\n\telse\n\t\troot[\"Apple2\"] = factory();\n})(self, () => {\nreturn ","var inProgress = {};\nvar dataWebpackPrefix = \"Apple2:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var map = {\n\t\"./apple2_char\": [\n\t\t7298,\n\t\t298\n\t],\n\t\"./apple2_char.ts\": [\n\t\t7298,\n\t\t298\n\t],\n\t\"./apple2e_char\": [\n\t\t8327,\n\t\t327\n\t],\n\t\"./apple2e_char.ts\": [\n\t\t8327,\n\t\t327\n\t],\n\t\"./apple2enh_char\": [\n\t\t4685,\n\t\t685\n\t],\n\t\"./apple2enh_char.ts\": [\n\t\t4685,\n\t\t685\n\t],\n\t\"./apple2j_char\": [\n\t\t424,\n\t\t424\n\t],\n\t\"./apple2j_char.ts\": [\n\t\t424,\n\t\t424\n\t],\n\t\"./apple2lc_char\": [\n\t\t5053,\n\t\t53\n\t],\n\t\"./apple2lc_char.ts\": [\n\t\t5053,\n\t\t53\n\t],\n\t\"./pigfont_char\": [\n\t\t3775,\n\t\t775\n\t],\n\t\"./pigfont_char.ts\": [\n\t\t3775,\n\t\t775\n\t],\n\t\"./pravetz82_char\": [\n\t\t4740,\n\t\t740\n\t],\n\t\"./pravetz82_char.ts\": [\n\t\t4740,\n\t\t740\n\t],\n\t\"./rmfont_char\": [\n\t\t3424,\n\t\t43\n\t],\n\t\"./rmfont_char.ts\": [\n\t\t3424,\n\t\t43\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 9111;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./apple2e\": [\n\t\t1090,\n\t\t90\n\t],\n\t\"./apple2e.ts\": [\n\t\t1090,\n\t\t90\n\t],\n\t\"./apple2enh\": [\n\t\t6524,\n\t\t524\n\t],\n\t\"./apple2enh.ts\": [\n\t\t6524,\n\t\t524\n\t],\n\t\"./apple2ex\": [\n\t\t1664,\n\t\t664\n\t],\n\t\"./apple2ex.ts\": [\n\t\t1664,\n\t\t664\n\t],\n\t\"./apple2j\": [\n\t\t4619,\n\t\t619\n\t],\n\t\"./apple2j.ts\": [\n\t\t4619,\n\t\t619\n\t],\n\t\"./fpbasic\": [\n\t\t3419,\n\t\t419\n\t],\n\t\"./fpbasic.ts\": [\n\t\t3419,\n\t\t419\n\t],\n\t\"./intbasic\": [\n\t\t2418,\n\t\t418\n\t],\n\t\"./intbasic.ts\": [\n\t\t2418,\n\t\t418\n\t],\n\t\"./original\": [\n\t\t192,\n\t\t192\n\t],\n\t\"./original.ts\": [\n\t\t192,\n\t\t192\n\t],\n\t\"./pravetz82\": [\n\t\t9135,\n\t\t135\n\t],\n\t\"./pravetz82.ts\": [\n\t\t9135,\n\t\t135\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 4897;\nmodule.exports = webpackAsyncContext;","\"use strict\";\n\nconst screenEmu = (function () {\n\n  // Classes\n\n  const Point = class {\n    constructor(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }\n\n  const Size = class {\n    constructor(width, height) {\n      this.width = width;\n      this.height = height;\n    }\n\n    copy() {\n      return new Size(this.width, this.height);\n    }\n\n    get ratio() {\n      return this.width / this.height;\n    }\n  }\n\n  const Rect = class {\n    constructor(x, y, width, height) {\n      this.origin = new Point(x, y);\n      this.size = new Size(width, height);\n    }\n\n    get x() {\n      return this.origin.x;\n    }\n\n    get y() {\n      return this.origin.y;\n    }\n\n    get width() {\n      return this.size.width;\n    }\n\n    get height() {\n      return this.size.height;\n    }\n\n    get l() {\n      return this.origin.x;\n    }\n\n    get r() {\n      return this.origin.x + this.size.width;\n    }\n\n    get t() {\n      return this.origin.y;\n    }\n\n    get b() {\n      return this.origin.y + this.size.height;\n    }\n  }\n\n  const Vector = class {\n    constructor(n) {\n      this.data = new Float32Array(n);\n    }\n\n    // Normalize the vector.\n    normalize() {\n      const vec = this.data;\n      let sum = 0;\n      for (const item of vec) {\n        sum += item;\n      }\n      const gain = 1/sum;\n      for (const i in vec) {\n        vec[i] *= gain;\n      }\n      return this;\n    }\n\n    // Multiply this Vector by another, or by a number.\n    mul(other) {\n      const w = new Vector(0);\n      if ((typeof other != \"number\") && (this.data.length != other.data.length)) {\n        return w;\n      }\n\n      w.data = new Float32Array(this.data);\n\n      for (let i = 0; i < w.data.length; i++) {\n        if (typeof other == \"number\") {\n          w.data[i] *= other;\n        } else {\n          w.data[i] *= other.data[i];\n        }\n      }\n\n      return w;\n    }\n\n    realIDFT() {\n      const size = this.data.length;\n      const w = new Vector(size);\n      for (let i = 0; i < size; i++) {\n        const omega = 2 * Math.PI * i / size;\n\n        for (let j = 0; j < size; j++) {\n          w.data[i] += this.data[j] * Math.cos(j * omega);\n        }\n      }\n\n      for (let i = 0; i < size; i++) {\n        w.data[i] /= size;\n      }\n\n      return w;\n    }\n\n    resize(n) {\n      const newData = new Float32Array(n);\n      for (let i=0; i < Math.min(newData.length, this.data.length); i++) {\n        newData[i] = this.data[i];\n      }\n      this.data = newData;\n      return this;\n    }\n\n    // Chebyshev Window\n    //\n    // Based on ideas at:\n    // http://www.dsprelated.com/showarticle/42.php\n    //\n    static chebyshevWindow(n, sidelobeDb) {\n      const m = n - 1;\n      let w = new Vector(m);\n\n      const alpha = Math.cosh(Math.acosh(Math.pow(10, sidelobeDb / 20)) / m);\n      for (let i = 0; i < m; i++) {\n        const a = Math.abs(alpha * Math.cos(Math.PI * i / m));\n        if (a > 1)\n          w.data[i] = Math.pow(-1, i) * Math.cosh(m * Math.acosh(a));\n        else\n          w.data[i] = Math.pow(-1, i) * Math.cos(m * Math.acos(a));\n      }\n\n      w = w.realIDFT();\n\n      w.resize(n);\n      w.data[0] /= 2;\n      w.data[n-1] = w.data[0];\n\n      const max = w.data.reduce((prev, cur) => Math.max(prev, Math.abs(cur)));\n      for (const i in w.data) {\n        w.data[i] /= max;\n      }\n\n      return w;\n    }\n\n    // Lanczos Window\n    static lanczosWindow(n, fc) {\n      let v = new Vector(n);\n      fc = Math.min(fc, 0.5);\n      const halfN = Math.floor(n / 2);\n\n      for (let i = 0; i < n; i++) {\n        const x = 2 * Math.PI * fc * (i - halfN);\n\n        v.data[i] = (x == 0.0) ? 1.0 : Math.sin(x) / x;\n      }\n\n      return v;\n    }\n\n  };\n\n  const Matrix3 = class {\n    constructor(c00, c01, c02,\n                c10, c11, c12,\n                c20, c21, c22) {\n      this.data = new Float32Array([c00, c01, c02, c10, c11, c12, c20, c21, c22]);\n    }\n\n    at(i, j) {\n      return this.data[3 * i + j];\n    }\n\n    mul(val) {\n      const m = new Matrix3(0,0,0,0,0,0,0,0,0);\n      if (typeof val == \"number\") {\n        m.data = this.data.map(x => x * val);\n      } else {\n        for (let i = 0; i < 3; i++) {\n          for (let j = 0; j < 3; j++) {\n            for (let k = 0; k < 3; k++) {\n              m.data[i * 3 + j] += val.data[i * 3 + k] * this.data[k * 3 + j];\n            }\n          }\n        }\n      }\n      return m;\n    }\n  }\n\n\n  // From AppleIIVideo.cpp\n\n  const HORIZ_START = 16;\n  const HORIZ_BLANK = (9 + HORIZ_START) // 25;\n  const HORIZ_DISPLAY = 40;\n  const HORIZ_TOTAL = (HORIZ_BLANK + HORIZ_DISPLAY) // 65;\n\n  const CELL_WIDTH = 14;\n  const CELL_HEIGHT = 8;\n\n  const VERT_NTSC_START = 38;\n  const VERT_PAL_START = 48;\n  const VERT_DISPLAY = 192;\n\n  const BLOCK_WIDTH = HORIZ_DISPLAY; // 40\n  const BLOCK_HEIGHT = (VERT_DISPLAY / CELL_HEIGHT); // 24\n\n  // From CanvasInterface.h\n\n  const NTSC_FSC     = 315/88 * 1e6;         // 3579545 = 3.5 Mhz: Color Subcarrier\n  const NTSC_4FSC    = 4 * NTSC_FSC;         // 14318180 = 14.3 Mhz\n  const NTSC_HTOTAL  = (63+5/9) * 1e-6;\n  const NTSC_HLENGTH = (52+8/9) * 1e-6;\n  const NTSC_HHALF   = (35+2/3) * 1e-6;\n  const NTSC_HSTART  = NTSC_HHALF - NTSC_HLENGTH/2;\n  const NTSC_HEND    = NTSC_HHALF + NTSC_HLENGTH/2;\n  const NTSC_VTOTAL  = 262;\n  const NTSC_VLENGTH = 240;\n  const NTSC_VSTART  = 19;\n  const NTSC_VEND    = NTSC_VSTART + NTSC_VLENGTH;\n\n  const PAL_FSC      = 4433618.75; // Color subcarrier\n  const PAL_4FSC     = 4 * PAL_FSC;\n  const PAL_HTOTAL   = 64e-6;\n  const PAL_HLENGTH  = 52e-6;\n  const PAL_HHALF    = (37+10/27) * 1e-6;\n  const PAL_HSTART   = PAL_HHALF - PAL_HLENGTH / 2;\n  const PAL_HEND     = PAL_HHALF + PAL_HLENGTH / 2;\n  const PAL_VTOTAL   = 312;\n  const PAL_VLENGTH  = 288;\n  const PAL_VSTART   = 21;\n  const PAL_VEND     = PAL_VSTART + PAL_VLENGTH;\n\n  // From OpenGLCanvas.cpp\n  const NTSC_I_CUTOFF = 1300000;\n  const NTSC_Q_CUTOFF = 600000;\n  const NTSC_IQ_DELTA = NTSC_I_CUTOFF - NTSC_Q_CUTOFF;\n\n  // From AppleIIVideo::updateTiming\n  const ntscClockFrequency = NTSC_4FSC * HORIZ_TOTAL / 912;\n  const ntscVisibleRect = new Rect(ntscClockFrequency * NTSC_HSTART, NTSC_VSTART,\n\t\t\t\t   ntscClockFrequency * NTSC_HLENGTH, NTSC_VLENGTH);\n  const ntscDisplayRect = new Rect(HORIZ_START, VERT_NTSC_START,\n\t\t\t\t   HORIZ_DISPLAY, VERT_DISPLAY);\n  const ntscVertTotal = NTSC_VTOTAL;\n\n  const palClockFrequency = 14250450.0 * HORIZ_TOTAL / 912;\n  const palVisibleRect = new Rect(palClockFrequency * PAL_HSTART, PAL_VSTART,\n\t\t\t\t  palClockFrequency * PAL_HLENGTH, PAL_VLENGTH);\n  const palDisplayRect = new Rect(HORIZ_START, VERT_PAL_START,\n\t\t\t\t  HORIZ_DISPLAY, VERT_DISPLAY);\n  const palVertTotal = PAL_VTOTAL;\n\n  const VERTEX_RENDER_SHADER =`\n// an attribute will receive data from a buffer\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\n// all shaders have a main function\nvoid main() {\n  gl_Position = a_position;\n  v_texCoord = a_texCoord;\n}\n`;\n\n  const VERTEX_DISPLAY_SHADER =`\n// an attribute will receive data from a buffer\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_texCoord2;\nvarying vec2 v_texCoord;\nvarying vec2 v_texCoord2;\n\n// all shaders have a main function\nvoid main() {\n  gl_Position = vec4(a_position.x, -a_position.y, a_position.z, a_position.w);\n  v_texCoord = a_texCoord;\n  v_texCoord2 = a_texCoord2;\n}\n`;\n\n  const COMPOSITE_SHADER = `\nprecision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D texture;\nuniform vec2 textureSize;\nuniform float subcarrier;\nuniform sampler2D phaseInfo;\nuniform vec3 c0, c1, c2, c3, c4, c5, c6, c7, c8;\nuniform mat3 decoderMatrix;\nuniform vec3 decoderOffset;\n\nfloat PI = 3.14159265358979323846264;\n\nvec3 pixel(in vec2 q)\n{\n  vec3 c = texture2D(texture, q).rgb;\n  vec2 p = texture2D(phaseInfo, vec2(0, q.y)).rg;\n  float phase = 2.0 * PI * (subcarrier * textureSize.x * q.x + p.x);\n  return c * vec3(1.0, sin(phase), (1.0 - 2.0 * p.y) * cos(phase));\n}\n\nvec3 pixels(vec2 q, float i)\n{\n  return pixel(vec2(q.x + i, q.y)) + pixel(vec2(q.x - i, q.y));\n}\n\nvoid main(void)\n{\n  vec2 q = v_texCoord;\n  vec3 c = pixel(q) * c0;\n  c += pixels(q, 1.0 / textureSize.x) * c1;\n  c += pixels(q, 2.0 / textureSize.x) * c2;\n  c += pixels(q, 3.0 / textureSize.x) * c3;\n  c += pixels(q, 4.0 / textureSize.x) * c4;\n  c += pixels(q, 5.0 / textureSize.x) * c5;\n  c += pixels(q, 6.0 / textureSize.x) * c6;\n  c += pixels(q, 7.0 / textureSize.x) * c7;\n  c += pixels(q, 8.0 / textureSize.x) * c8;\n  gl_FragColor = vec4(decoderMatrix * c + decoderOffset, 1.0);\n}\n`;\n\n  const DISPLAY_SHADER = `\nprecision mediump float;\n\nvarying vec2 v_texCoord;\nvarying vec2 v_texCoord2;\n\nuniform sampler2D texture;\nuniform vec2 textureSize;\nuniform float barrel;\nuniform vec2 barrelSize;\nuniform float scanlineLevel;\nuniform sampler2D shadowMask;\nuniform vec2 shadowMaskSize;\nuniform float shadowMaskLevel;\nuniform float centerLighting;\nuniform sampler2D persistence;\nuniform vec2 persistenceSize;\nuniform vec2 persistenceOrigin;\nuniform float persistenceLevel;\nuniform float luminanceGain;\n\nfloat PI = 3.14159265358979323846264;\n\nvoid main(void)\n{\n  vec2 qc = (v_texCoord2 - vec2(0.5, 0.5)) * barrelSize;\n  vec2 qb = barrel * qc * dot(qc, qc);\n  vec2 q = v_texCoord + qb;\n\n  vec3 c = texture2D(texture, q).rgb;\n\n  float scanline = sin(PI * textureSize.y * q.y);\n  c *= mix(1.0, scanline * scanline, scanlineLevel);\n\n  vec3 mask = texture2D(shadowMask, (v_texCoord2 + qb) * shadowMaskSize).rgb;\n  c *= mix(vec3(1.0, 1.0, 1.0), mask, shadowMaskLevel);\n\n  vec2 lighting = qc * centerLighting;\n  c *= exp(-dot(lighting, lighting));\n\n  c *= luminanceGain;\n\n  vec2 qp = v_texCoord2 * persistenceSize + persistenceOrigin;\n  c = max(c, texture2D(persistence, qp).rgb * persistenceLevel - 0.5 / 256.0);\n\n  gl_FragColor = vec4(c, 1.0);\n}\n`;\n\n  const RGB_SHADER = `\nprecision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D texture;\nuniform vec2 textureSize;\nuniform vec3 c0, c1, c2, c3, c4, c5, c6, c7, c8;\nuniform mat3 decoderMatrix;\nuniform vec3 decoderOffset;\n\nvec3 pixel(vec2 q)\n{\n  return texture2D(texture, q).rgb;\n}\n\nvec3 pixels(in vec2 q, in float i)\n{\n  return pixel(vec2(q.x + i, q.y)) + pixel(vec2(q.x - i, q.y));\n}\n\nvoid main(void)\n{\n  vec2 q = v_texCoord;\n  vec3 c = pixel(q) * c0;\n  c += pixels(q, 1.0 / textureSize.x) * c1;\n  c += pixels(q, 2.0 / textureSize.x) * c2;\n  c += pixels(q, 3.0 / textureSize.x) * c3;\n  c += pixels(q, 4.0 / textureSize.x) * c4;\n  c += pixels(q, 5.0 / textureSize.x) * c5;\n  c += pixels(q, 6.0 / textureSize.x) * c6;\n  c += pixels(q, 7.0 / textureSize.x) * c7;\n  c += pixels(q, 8.0 / textureSize.x) * c8;\n  gl_FragColor = vec4(decoderMatrix * c + decoderOffset, 1.0);\n}\n`;\n\n  function buildTiming(clockFrequency, displayRect, visibleRect, vertTotal, fsc) {\n    const vertStart = displayRect.y;\n    // Total number of CPU cycles per frame: 17030 for NTSC.\n    const frameCycleNum = HORIZ_TOTAL * vertTotal;\n    // first displayed column.\n    const horizStart = Math.floor(displayRect.x);\n    // imageSize is [14 * visible rect width in cells, visible lines]\n    const imageSize = new Size(Math.floor(CELL_WIDTH * visibleRect.width),\n\t\t\t       Math.floor(visibleRect.height));\n    // imageLeft is # of pixels from first visible point to first displayed point.\n    const imageLeft = Math.floor((horizStart-visibleRect.x) * CELL_WIDTH);\n    const colorBurst = [2 * Math.PI * (-33/360 + (imageLeft % 4) / 4)];\n    const cycleNum = frameCycleNum + 16;\n\n    // First pixel that OpenEmulator draws when painting normally.\n    const topLeft = new Point(imageLeft, vertStart - visibleRect.y);\n    // First pixel that OpenEmulator draws when painting 80-column mode.\n    const topLeft80Col = new Point(imageLeft - CELL_WIDTH/2, vertStart - visibleRect.y);\n\n    return {\n      fsc: fsc,\n      clockFrequency: clockFrequency,\n      displayRect: displayRect,\n      visibleRect: visibleRect,\n      vertStart: vertStart,\n      vertTotal: vertTotal,\n      frameCycleNum: frameCycleNum,\n      horizStart: horizStart,\n      imageSize: imageSize,\n      imageLeft: imageLeft,\n      colorBurst: colorBurst,\n      cycleNum: cycleNum,\n      topLeft: topLeft,\n      topLeft80Col: topLeft80Col,\n    };\n  }\n\n  const NTSC_DETAILS = buildTiming(ntscClockFrequency, ntscDisplayRect,\n                                   ntscVisibleRect, ntscVertTotal, NTSC_FSC);\n  const PAL_DETAILS = buildTiming(palClockFrequency, palDisplayRect,\n\t\t\t\t  palVisibleRect, palVertTotal, PAL_FSC);\n\n  // https://codereview.stackexchange.com/a/128619\n  const loadImage = path =>\n        new Promise((resolve, reject) => {\n          const img = new Image();\n          img.onload = () => resolve(img);\n          img.onerror = () => reject(`error loading '${path}'`);\n          img.src = path;\n        });\n\n  // Given an image that's 560x192, render it into the larger space\n  // required for NTSC or PAL.\n  // image: a 560x192 image, from the same domain (hence readable).\n  // details: NTSC_DETAILS, or PAL_DETAILS\n  // returns: a canvas\n  const screenData = (image, details, dhgr=true) => {\n    if ((image.naturalWidth != 560) || (image.naturalHeight != 192)) {\n      throw new Error('screenData expects an image 560x192;' +\n                      ` got ${image.naturalWidth}x${image.naturalHeight}`);\n    }\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const width = details.imageSize.width;\n    const height = details.imageSize.height;\n    canvas.width = width;\n    canvas.height = height;\n    context.fillStyle = 'rgba(0,0,0,1)';\n    context.fillRect(0, 0, width, height);\n    const topLeft = dhgr ? details.topLeft80Col : details.topLeft;\n    context.drawImage(image, topLeft.x, topLeft.y);\n    const imageData = context.getImageData(0, 0, width, height);\n    return [canvas, imageData];\n  };\n\n  // Given an ImageData (RGBA), convert to luminance by taking the max\n  // of (R,G,B) for each pixel. Return a Uint8Array.\n  const luminanceData = (imageData) => {\n    const width = imageData.width;\n    const height = imageData.height;\n    const data = imageData.data;\n    const size = width * height;\n    const ary = new Uint8Array(size);\n    for (let i = 0; i < size; i++) {\n      ary[i] = Math.max(data[i*4], data[i*4+1], data[i*4+2]);\n    }\n    return ary;\n  };\n\n  const TEXTURE_NAMES = [\n    \"SHADOWMASK_TRIAD\",\n    \"SHADOWMASK_INLINE\",\n    \"SHADOWMASK_APERTURE\",\n    \"SHADOWMASK_LCD\",\n    \"SHADOWMASK_BAYER\",\n    \"IMAGE_PHASEINFO\",\n    \"IMAGE_IN\",\n    \"IMAGE_DECODED\",\n    \"IMAGE_PERSISTENCE\",\n  ];\n\n  const BUFFER_COUNT = 3;\n\n  const SHADER_NAMES = [\n    \"COMPOSITE\",\n    \"DISPLAY\",\n    \"RGB\",\n  ];\n\n  const resizeCanvas = (canvas) => {\n    // Lookup the size the browser is displaying the canvas.\n    const displayWidth = canvas.clientWidth;\n    const displayHeight = canvas.clientHeight;\n\n    // Check if the canvas is not the same size.\n    if (canvas.width != displayWidth ||\n        canvas.height != displayHeight) {\n      canvas.width = displayWidth;\n      canvas.height = displayHeight;\n    }\n  };\n\n  // Code from:\n  // https://webglfundamentals.org/webgl/lessons/webgl-fundamentals.html\n  const createShader = (gl, name, type, source) => {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (success) {\n      return shader;\n    }\n\n    const log = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error(`unable to compile shader ${name}: \\n${log}`);\n  };\n\n  // Code from:\n  // https://webglfundamentals.org/webgl/lessons/webgl-fundamentals.html\n  const createProgram = (gl, name, ...shaders) => {\n    const program = gl.createProgram();\n    for (let shader of shaders) {\n      gl.attachShader(program, shader);\n    }\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (success) {\n      return program;\n    }\n    const log = gl.getProgramInfoLog(program);\n    gl.deleteProgram(program);\n    throw new Error(`unable to compile program ${name}: \\n${log}`);\n  };\n\n  const TextureInfo = class {\n    constructor(width, height, glTexture) {\n      this.width = width;\n      this.height = height;\n      this.glTexture = glTexture;\n    }\n\n    get size() {\n      return new Size(this.width, this.height);\n    }\n  };\n\n  const DisplayConfiguration = class {\n    constructor() {\n      this.videoDecoder = \"CANVAS_YUV\";\n      this.videoBrightness = 0;\n      this.videoContrast = 1;\n      this.videoSaturation = 1;\n      this.videoHue = 0;\n      this.videoCenter = new Point(0, 0);\n      this.videoSize = new Size(1.05, 1.05);\n      this.videoBandwidth = 6000000; // 14318180;\n      this.videoLumaBandwidth = 2000000; // 600000;\n      this.videoChromaBandwidth = 600000; // 2000000;\n      this.videoWhiteOnly = false;\n\n      this.displayResolution = new Size(640, 480);\n      this.displayPixelDensity = 72;\n      this.displayBarrel = 0.05; // 0;\n      this.displayScanlineLevel = 0.05; // 0;\n      this.displayShadowMaskLevel = 0.05; // 0;\n      this.displayShadowMaskDotPitch = 0.5; // 1;\n      this.displayShadowMask = \"SHADOWMASK_TRIAD\";\n      this.displayPersistence = 0;\n      this.displayCenterLighting = 1;\n      this.displayLuminanceGain = 1;\n    }\n  };\n\n  // Corresponds to OEImage. Contains the data on an NTSC/PAL/whatever\n  // image. The `data` field is an ImageData object with the actual\n  // image data.\n  const ImageInfo = class {\n    constructor(data) {\n      if (typeof data != \"object\") {\n        throw new Error(`want typeof data == 'object'; got '${typeof data}'`);\n      }\n      if (!(data instanceof ImageData)) {\n        throw new Error(`want data instanceof ImageData; got '${data.constructor.name}'`);\n      }\n\n      this.sampleRate = NTSC_4FSC;\n      this.blackLevel = 0;\n      this.whiteLevel = 1;\n      this.interlace = 0;\n      this.subCarrier = NTSC_FSC;\n      this.colorBurst = NTSC_DETAILS.colorBurst;\n      this.phaseAlternation = [false];\n      this.data = data;\n    }\n\n    get width() {\n      return this.data.width;\n    }\n\n    get height() {\n      return this.data.height;\n    }\n\n    get size() {\n      return new Size(this.data.width, this.data.height);\n    }\n  };\n\n  const ScreenView = class {\n    constructor(canvas) {\n      const gl = canvas.getContext(\"webgl\");\n      const float_texture_ext = gl.getExtension('OES_texture_float');\n      if (float_texture_ext == null) {\n        throw new Error(\"WebGL extension 'OES_texture_float' unavailable\");\n      }\n\n      this.canvas = canvas;\n      this.gl = gl;\n      this.textures = {};\n      this.shaders = {};\n      this.buffers = [];\n      this.image = null;\n      this.display = null;\n      this.imageSampleRate = null;\n      this.imageBlackLevel = null;\n      this.imageWhiteLevel = null;\n      this.imageSubcarrier = null;\n      this.viewportSize = new Size(0, 0);\n      this.persistenceTexRect = new Rect(0, 0, 0, 0);\n\n      this.configurationChanged = true;\n      this.imageChanged = true;\n    }\n\n    get image() {\n      return this._image\n    }\n\n    set image(image) {\n      this._image = image;\n      this.imageChanged = true;\n    }\n\n    set displayConfiguration(displayConfiguration) {\n      this.display = displayConfiguration;\n      this.configurationChanged = true;\n    }\n\n    async initOpenGL() {\n      const gl = this.gl;\n\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n      this.textures = {};\n\n      for (let name of TEXTURE_NAMES) {\n        this.textures[name] = new TextureInfo(0, 0, gl.createTexture());\n      }\n\n      for (let i = 0; i < BUFFER_COUNT; i++) {\n        this.buffers.push(gl.createBuffer());\n      }\n\n      await this.loadTextures();\n\n      gl.pixelStorei(gl.PACK_ALIGNMENT, 1);\n      gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n\n      this.loadShaders();\n    }\n\n    freeOpenGL() {\n      const gl = this.gl;\n\n      for (let name of TEXTURE_NAMES) {\n        gl.deleteTexture(this.textures[name].glTexture);\n      }\n\n      for (let buffer of this.buffers) {\n        gl.deleteBuffer(buffer);\n      }\n\n      this.deleteShaders();\n    }\n\n    loadTextures() {\n      return Promise.all([\n        this.loadTexture(\"data:image/jpeg;base64,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\", true, \"SHADOWMASK_TRIAD\"),\n        this.loadTexture(\"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABACAIAAABdtOgoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxdJREFUeNrsnDtoVEEUhr9do0YwAR9YiGJhoYIiFiJooSJoI6KFj8KIIAQRIwQsLI2IYhHBQkGxUolgowQtREEJPlAxEhstYnwQNBLQJMSYxI3xetLkce7dCUuKvfv/TLP3nHNnmG927mPOXDKwE5rgB/yC3lEl+tkNb6EGyonRDGiA3NjIcSWyXiBe1eb0Oz7+D7yExRMjK62Fw2Flg1v5reD482787uD4VuJOMBAQfTKu9w6H1d5vnB2thC9hp7iYSgDZEzaI8+oorHANGwnSTFjvGpa5Q9vTFtKo7NIwv3kwxzVMC66qzG9AgfFFDyAT7JpBmgIA6gIBEABJAARAEgABkARAACQBEABJAASgVDQsAIXpb4Fd/TU4/pt79GdwE9pTCKAPXoR5fojr6ivwOSD+DVx3DU22qJZXA1CfQgA5OAXfA9xOwyfX9g72wwOD6aoHbsNB6HDNg1Bry6Wd8ZU3W/xd11z0y0zPYDMcgTW2tjp6nsnAELTBVXiUcIonsAPmwnRvnhq0fIXBhPiIzDGog1kxc2SXpRaQTgAjg7imwFP0T+Zi4Pdyp+6CdBsqCYAASAIgAJIACIAUpjQ8iC2CA7DaMoDHPQnn4CPcgJaE+GrL3B6Id4iekK8lvPJZB8et8qEYh8j0Gs76rzuKPb17lRmSI3tgV1zvbbXH4LyVd9q7DkcLbO9CSPtrUzgFZW3jQt4E7wp7U7PQte2xAZpX8+P2N0TDf21YY6tSCGA2bArzjP4oS1xDZXBlFe7R8uD4ynRehMsm83fRXZAkAAIgCYAASAIgAJIACIAkAAIgAJIACIBUrAAKzc8fLnUAfcGuOffoq7DgIUvSdtQWnNb6NJ0A7oT5PYb3ruEy3A+Ib4CbrqE5bufCWLXCmVQCKKuzrILtiU4ttuzf7dp6YR8cgm32Ta1xM1LGxnejZRXETlbnLMO8yr5dlh07KWXtY37P4VLYRpYiBNABe22Pw/IJGxRGNji0w8PkaaLLBnF9Ic1otFKK+r+kGl0G7lmRdBsqAJIACIAkAAIgCYAASFOvfwIMAIJ7Za+ecZHPAAAAAElFTkSuQmCC\", true, \"SHADOWMASK_INLINE\"),\n        this.loadTexture(\"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABACAIAAABdtOgoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNrs0bEJgEAURMHFWGzIOmzLQqzJJkyMBDUw85DLRJzHpQv/mCzJXvf6lJqq92NxP1Tv5/u4Sz59/1kTvRoAAAAEAIAAABAAAAIAQAAACAAAAQAgAA+tAN5tAyAAAAQAgAAAEAAAAgBAAAC4/hdfaAEIAAABACAAAAQAgAAAEAAAAgBAAAAIAAABACAAAAQAgAAAEAAAujoEGADEOVdpwC68FwAAAABJRU5ErkJggg==\", true, \"SHADOWMASK_APERTURE\"),\n        this.loadTexture(\"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABACAIAAABdtOgoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNrsnL9rFEEcR9+uPwhyXBQbm1QWRsg/kcomiCCWVoLYpE5rbWehFnYWpk9lIQhCCCgKWgmCoNglCIomBs/EzVReMnd+RTj94ntMczv72f3OvpvhDpahgQvwGD7AF/j8U+s+foSXsAhTjOAo3IfBcHJf63pvMpqr5aSt0flv8ARmDib7kL1+LsE27P6qXR9192uBcNe+ludUYQ7exS5xqzqA7PXzLJbegLPVApZj+a7dqOYvhvOvqgPIXn97mhAn4US14xBRDlePtn+Yz15/24QvED9zkmSvv0UUoABRgAJEAQoQBShAFKAAUYACRAEK+NfZTP70N7MLGCQXMHAJcglSgChAAaIABYgCFCAKUIAoQAFWP7H6cw+hl1xAzyXISawAUYACRAEKEAUoQBSgAFGAAkQBCpAcAnbCZ+7+xtHJ8bfrb+Ov2NffBX8aC3+H59WON7Aeu8Rq9Wj2+rkT2+7pEUxX8z14EMjfGzPZlgL513DmYLKfv/7mFNyFhbHuXsCVsjlYneOl+1zZk2rfjG7K92OlDGBrzB3Ow+WyrV07PKnbEluD2/C2OoBjyevf20aqG8M8zMKR4XRTZt57eBieZhOmG8Cn5PXnpp+/fn+G+j9AAaIABYgCFCAK+P/4IcAAEwdyjgWX2v0AAAAASUVORK5CYII=\", true, \"SHADOWMASK_LCD\"),\n        this.loadTexture(\"data:image/jpeg;base64,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\", true, \"SHADOWMASK_BAYER\"),\n      ]);\n    }\n\n    async loadTexture(path, isMipMap, name) {\n      const gl = this.gl;\n      const texInfo = this.textures[name];\n      const image = await loadImage(path);\n      gl.bindTexture(gl.TEXTURE_2D, texInfo.glTexture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,\n                    gl.RGBA, gl.UNSIGNED_BYTE, image);\n      if (isMipMap) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n\n      texInfo.width = image.naturalWidth;\n      texInfo.height = image.naturalHeight;\n    }\n\n    loadShaders() {\n      this.loadShader(\"COMPOSITE\", COMPOSITE_SHADER, VERTEX_RENDER_SHADER);\n      this.loadShader(\"RGB\", RGB_SHADER, VERTEX_RENDER_SHADER);\n      this.loadShader(\"DISPLAY\", DISPLAY_SHADER, VERTEX_DISPLAY_SHADER);\n    }\n\n    loadShader(name, fragmentSource, vertexSource) {\n      const glVertexShader = createShader(this.gl, name, this.gl.VERTEX_SHADER, vertexSource);\n      const glFragmentShader = createShader(this.gl, name, this.gl.FRAGMENT_SHADER,\n\t\t\t\t\t    fragmentSource);\n      const glProgram = createProgram(this.gl, name, glVertexShader, glFragmentShader);\n      this.gl.deleteShader(glVertexShader);\n      this.gl.deleteShader(glFragmentShader);\n      this.shaders[name] = glProgram;\n    }\n\n    deleteShaders() {\n      for (let name of SHADER_NAMES) {\n        if (this.shaders[name]) {\n          this.gl.deleteProgram(this.shaders[name]);\n          this.shaders[name] = false;\n        }\n      }\n    }\n\n    vsync() {\n      const gl = this.gl;\n      resizeCanvas(this.canvas);\n      const canvasWidth = this.canvas.width;\n      const canvasHeight = this.canvas.height;\n\n      // if viewport size has changed:\n      if ((this.viewportSize.width != canvasWidth)\n          || (this.viewportSize.height != this.canvasHeight)) {\n        this.viewportSize = new Size(canvasWidth, canvasHeight);\n        gl.viewport(0, 0, canvasWidth, canvasHeight);\n        this.configurationChanged = true;\n      }\n\n      if (this.imageChanged) {\n        this.uploadImage();\n      }\n\n      if (this.configurationChanged) {\n        this.configureShaders();\n      }\n\n      if (this.imageChanged || this.configurationChanged) {\n        this.renderImage();\n      }\n\n      if (this.imageChanged || this.configurationChanged ||\n          this.image.displayPersistence != 0) {\n        this.drawDisplayCanvas();\n      }\n\n      this.imageChanged = false;\n      this.configurationChanged = false;\n    }\n\n    uploadImage() {\n      const gl = this.gl;\n      const image = this.image;\n\n      this.resizeTexture(\"IMAGE_IN\", image.width, image.height, true);\n      const texInfoImage = this.textures[\"IMAGE_IN\"];\n      gl.bindTexture(gl.TEXTURE_2D, texInfoImage.glTexture);\n      const format = gl.LUMINANCE;\n      const type = gl.UNSIGNED_BYTE;\n      const luminance = luminanceData(image.data);\n      gl.texSubImage2D(gl.TEXTURE_2D, 0,\n                       0, 0, // xoffset, yoffset\n                       image.data.width,\n                       image.data.height,\n                       format, type, luminance);\n\n      // Update configuration\n      if ((image.sampleRate != this.imageSampleRate) ||\n          (image.blackLevel != this.imageBlackLevel) ||\n          (image.whiteLevel != this.imageWhiteLevel) ||\n          (image.subCarrier != this.imageSubcarrier))\n      {\n        this.imageSampleRate = image.sampleRate;\n        this.imageBlackLevel = image.blackLevel;\n        this.imageWhiteLevel = image.whiteLevel;\n        this.imageSubcarrier = image.subCarrier;\n\n        this.configurationChanged = true;\n      }\n\n      // Upload phase info\n      const texHeight = 2**Math.ceil(Math.log2(image.height));\n      const colorBurst = image.colorBurst\n      const phaseAlternation = image.phaseAlternation;\n\n      const phaseInfo = new Float32Array(3 * texHeight);\n\n      for (let x = 0; x < image.height; x++) {\n        const c = colorBurst[x % colorBurst.length] / 2 / Math.PI;\n        phaseInfo[3 * x + 0] = c - Math.floor(c);\n        phaseInfo[3 * x + 1] = phaseAlternation[x % phaseAlternation.length];\n      }\n\n      const texInfoPhase = this.textures[\"IMAGE_PHASEINFO\"];\n      gl.bindTexture(gl.TEXTURE_2D, texInfoPhase.glTexture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, 1, texHeight, 0,\n                    gl.RGB, gl.FLOAT, phaseInfo);\n    }\n\n    getRenderShader() {\n      switch (this.display.videoDecoder) {\n      case \"CANVAS_RGB\":\n      case \"CANVAS_MONOCHROME\":\n        return [this.shaders[\"RGB\"], \"RGB\"];\n      case \"CANVAS_YUV\":\n      case \"CANVAS_YIQ\":\n      case \"CANVAS_CXA2025AS\":\n        return [this.shaders[\"COMPOSITE\"], \"COMPOSITE\"];\n      }\n      const decoder = this.display.videoDecoder;\n      throw new Error(`unknown displayConfiguration.videoDecoder: ${decoder}`);\n    }\n\n    configureShaders() {\n      const gl = this.gl;\n\n      const [renderShader, renderShaderName] = this.getRenderShader();\n      const displayShader = this.shaders[\"DISPLAY\"];\n\n      const isCompositeDecoder = (renderShaderName == \"COMPOSITE\");\n\n      // Render shader\n      gl.useProgram(renderShader);\n\n      // Subcarrier\n      if (isCompositeDecoder) {\n        gl.uniform1f(gl.getUniformLocation(renderShader, \"subcarrier\"),\n                     this.imageSubcarrier / this.imageSampleRate);\n      }\n\n      // Filters\n      const w = Vector.chebyshevWindow(17, 50).normalize();\n\n      let wy, wu, wv;\n\n      const bandwidth = this.display.videoBandwidth / this.imageSampleRate;\n\n      if (isCompositeDecoder) {\n        let yBandwidth = this.display.videoLumaBandwidth / this.imageSampleRate;\n        let uBandwidth = this.display.videoChromaBandwidth / this.imageSampleRate;\n        let vBandwidth = uBandwidth;\n\n        if (this.display.videoDecoder == \"CANVAS_YIQ\")\n          uBandwidth = uBandwidth + NTSC_IQ_DELTA / this.imageSampleRate;\n\n        // Switch to video bandwidth when no subcarrier\n        if ((this.imageSubcarrier == 0.0) || this.display.videoWhiteOnly)\n        {\n            yBandwidth = bandwidth;\n            uBandwidth = bandwidth;\n            vBandwidth = bandwidth;\n        }\n\n        wy = w.mul(Vector.lanczosWindow(17, yBandwidth));\n        wy = wy.normalize();\n\n        wu = w.mul(Vector.lanczosWindow(17, uBandwidth));\n        wu = wu.normalize().mul(2);\n\n        wv = w.mul(Vector.lanczosWindow(17, vBandwidth));\n        wv = wv.normalize().mul(2);\n      } else {\n        wy = w.mul(Vector.lanczosWindow(17, bandwidth));\n        wu = wv = wy = wy.normalize();\n      }\n\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c0\"),\n                   wy.data[8], wu.data[8], wv.data[8]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c1\"),\n                   wy.data[7], wu.data[7], wv.data[7]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c2\"),\n                   wy.data[6], wu.data[6], wv.data[6]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c3\"),\n                   wy.data[5], wu.data[5], wv.data[5]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c4\"),\n                   wy.data[4], wu.data[4], wv.data[4]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c5\"),\n                   wy.data[3], wu.data[3], wv.data[3]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c6\"),\n                   wy.data[2], wu.data[2], wv.data[2]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c7\"),\n                   wy.data[1], wu.data[1], wv.data[1]);\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"c8\"),\n                   wy.data[0], wu.data[0], wv.data[0]);\n\n      // Decoder matrix\n      let decoderMatrix = new Matrix3(1, 0, 0,\n                                      0, 1, 0,\n                                      0, 0, 1);\n\n      // Encode\n      if (!isCompositeDecoder) {\n        // Y'PbPr encoding matrix\n        decoderMatrix = new Matrix3(0.299, -0.168736, 0.5,\n                                    0.587, -0.331264, -0.418688,\n                                    0.114, 0.5, -0.081312).mul(decoderMatrix);\n      }\n\n      // Set hue\n      if (this.display.videoDecoder == \"CANVAS_MONOCHROME\")\n        decoderMatrix = new Matrix3(1, 0.5, 0,\n                                    0, 0, 0,\n                                    0, 0, 0).mul(decoderMatrix);\n\n      // Disable color decoding when no subcarrier\n      if (isCompositeDecoder)\n      {\n        if ((this.imageSubcarrier == 0.0) || this.display.videoWhiteOnly) {\n          decoderMatrix = new Matrix3(1, 0, 0,\n                                      0, 0, 0,\n                                      0, 0, 0).mul(decoderMatrix);\n        }\n      }\n\n      // Saturation\n      decoderMatrix = new Matrix3(1, 0, 0,\n                                  0, this.display.videoSaturation, 0,\n                                  0, 0, this.display.videoSaturation).mul(decoderMatrix);\n\n      // Hue\n      let hue = 2 * Math.PI * this.display.videoHue;\n\n      decoderMatrix = new Matrix3(1, 0, 0,\n                                  0, Math.cos(hue), -Math.sin(hue),\n                                  0, Math.sin(hue), Math.cos(hue)).mul(decoderMatrix);\n\n      // Decode\n      switch (this.display.videoDecoder) {\n      case \"CANVAS_RGB\":\n      case \"CANVAS_MONOCHROME\":\n        // Y'PbPr decoder matrix\n        decoderMatrix = new Matrix3(1, 1, 1,\n                                    0, -0.344136, 1.772,\n                                    1.402, -0.714136, 0).mul(decoderMatrix);\n        break;\n\n      case \"CANVAS_YUV\":\n      case \"CANVAS_YIQ\":\n        // Y'UV decoder matrix\n        decoderMatrix = new Matrix3(1, 1, 1,\n                                    0, -0.394642, 2.032062,\n                                    1.139883, -0.580622, 0).mul(decoderMatrix);\n        break;\n\n      case \"CANVAS_CXA2025AS\":\n        // Exchange I and Q\n        decoderMatrix = new Matrix3(1, 0, 0,\n                                    0, 0, 1,\n                                    0, 1, 0).mul(decoderMatrix);\n\n        // Rotate 33 degrees\n        hue = -Math.PI * 33 / 180;\n        decoderMatrix = new Matrix3(1, 0, 0,\n                                    0, Math.cos(hue), -Math.sin(hue),\n                                    0, Math.sin(hue), Math.cos(hue)).mul(decoderMatrix);\n\n        // CXA2025AS decoder matrix\n        decoderMatrix = new Matrix3(1, 1, 1,\n                                    1.630, -0.378, -1.089,\n                                    0.317, -0.466, 1.677).mul(decoderMatrix);\n        break;\n      default:\n        throw new Error(`unknown videoDecoder: ${this.display.videoDecoder}`);\n      }\n\n      // Brightness\n      const brightness = this.display.videoBrightness - this.imageBlackLevel;\n      let decoderOffset;\n\n      if (isCompositeDecoder)\n        decoderOffset = decoderMatrix.mul(new Matrix3(brightness, 0, 0,\n                                                      0, 0, 0,\n                                                      0, 0, 0));\n      else\n        decoderOffset = decoderMatrix.mul(new Matrix3(brightness, 0, 0,\n                                                      brightness, 0, 0,\n                                                      brightness, 0, 0));\n\n      gl.uniform3f(gl.getUniformLocation(renderShader, \"decoderOffset\"),\n                   decoderOffset.at(0, 0),\n                   decoderOffset.at(0, 1),\n                   decoderOffset.at(0, 2));\n\n      // Contrast\n      let contrast = this.display.videoContrast;\n\n      const videoLevel = (this.imageWhiteLevel - this.imageBlackLevel);\n      if (videoLevel > 0)\n        contrast /= videoLevel;\n      else\n        contrast = 0;\n\n      if (contrast < 0)\n        contrast = 0;\n\n      decoderMatrix = decoderMatrix.mul(contrast);\n\n      gl.uniformMatrix3fv(gl.getUniformLocation(renderShader, \"decoderMatrix\"),\n                          false, decoderMatrix.data);\n\n      // Display shader\n      gl.useProgram(displayShader);\n\n      // Barrel\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"barrel\"),\n                   this.display.displayBarrel);\n\n      // Shadow mask\n      gl.uniform1i(gl.getUniformLocation(displayShader, \"shadowMask\"), 1);\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"shadowMaskLevel\"),\n                   this.display.displayShadowMaskLevel);\n\n      // Persistence\n      const frameRate = 60;\n\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"persistenceLevel\"),\n                   this.display.displayPersistence /\n                   (1.0 / frameRate + this.display.displayPersistence));\n\n      if (this.display.displayPersistence == 0)\n        this.resizeTexture(\"IMAGE_PERSISTENCE\", 0, 0);\n\n      // Center lighting\n      let centerLighting = this.display.displayCenterLighting;\n      if (Math.abs(centerLighting) < 0.001)\n        centerLighting = 0.001;\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"centerLighting\"),\n                   1.0 / centerLighting - 1);\n\n      // Luminance gain\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"luminanceGain\"),\n                   this.display.displayLuminanceGain);\n    }\n\n    renderImage() {\n      const gl = this.gl;\n      const [renderShader, renderShaderName] = this.getRenderShader();\n\n      const isCompositeDecoder = (renderShaderName == \"COMPOSITE\");\n\n      gl.useProgram(renderShader);\n\n      const texSize = this.textures[\"IMAGE_IN\"].size;\n      this.resizeTexture(\"IMAGE_DECODED\", texSize.width, texSize.height);\n\n      gl.uniform1i(gl.getUniformLocation(renderShader, \"texture\"), 0);\n      gl.uniform2f(gl.getUniformLocation(renderShader, \"textureSize\"),\n                   texSize.width, texSize.height);\n\n      if (isCompositeDecoder)\n      {\n        gl.uniform1i(gl.getUniformLocation(renderShader, \"phaseInfo\"), 1);\n\n        gl.activeTexture(gl.TEXTURE1);\n\n        gl.bindTexture(gl.TEXTURE_2D, this.textures[\"IMAGE_PHASEINFO\"].glTexture);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        gl.activeTexture(gl.TEXTURE0);\n      }\n\n      // Render to the back buffer, to avoid using FBOs\n      // (support for vanilla OpenGL 2.0 cards)\n\n      // I think webgl is rendering to the back buffer anyway, until\n      // we stop executing javascript statements and give control\n      // back, at which point it flips. So we might not need\n      // this. Although truly, I'm not certain what it's doing. If we\n      // *do* end up needing it, we'll have to go full webgl2.\n\n      // glReadBuffer(GL_BACK);\n\n      const imageSize = this.image.size;\n\n      for (let y = 0; y < this.image.height; y += this.viewportSize.height) {\n        for (let x = 0; x < this.image.width; x += this.viewportSize.width) {\n          // Calculate rects\n          const clipSize = this.viewportSize.copy();\n\n          if ((x + clipSize.width) > imageSize.width)\n            clipSize.width = imageSize.width - x;\n          if ((y + clipSize.height) > imageSize.height)\n            clipSize.height = imageSize.height - y;\n          const textureRect = new Rect(x / texSize.width,\n                                       y / texSize.height,\n                                       clipSize.width / texSize.width,\n                                       clipSize.height / texSize.height);\n          const canvasRect = new Rect(-1,\n                                      -1,\n                                      2 * clipSize.width / this.viewportSize.width,\n                                      2 * clipSize.height / this.viewportSize.height);\n\n          // Render\n          gl.bindTexture(gl.TEXTURE_2D, this.textures[\"IMAGE_IN\"].glTexture);\n\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n          // What is this, some ancient fixed pipeline nonsense? No way.\n          // glLoadIdentity();\n\n\t  this.drawRectangle(renderShader, canvasRect, textureRect);\n\n\t  // Copy framebuffer\n\t  gl.bindTexture(gl.TEXTURE_2D, this.textures[\"IMAGE_DECODED\"].glTexture);\n\n\t  gl.copyTexSubImage2D(gl.TEXTURE_2D, 0,\n\t\t\t     x, y, 0, 0,\n\t\t\t     clipSize.width, clipSize.height);\n        }\n      }\n    }\n\n    drawRectangle(shader, posRect, texRect, texRect2) {\n      const gl = this.gl;\n\n      gl.clearColor(0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n      const positionLocation = gl.getAttribLocation(shader, \"a_position\");\n      const texcoordLocations = [gl.getAttribLocation(shader, \"a_texCoord\")];\n      const texRects = [texRect];\n      if (texRect2) {\n\ttexcoordLocations.push(gl.getAttribLocation(shader, \"a_texCoord2\"));\n\ttexRects.push(texRect2);\n      }\n\n      const positionBuffer = this.buffers[0];\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n      const p_x1 = posRect.l;\n      const p_x2 = posRect.r;\n      const p_y1 = posRect.t;\n      const p_y2 = posRect.b;\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n        p_x1, p_y1,\n        p_x2, p_y1,\n        p_x1, p_y2,\n        p_x1, p_y2,\n        p_x2, p_y1,\n        p_x2, p_y2,\n      ]), gl.STATIC_DRAW);\n\n      gl.enableVertexAttribArray(positionLocation);\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n      gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n      for (let i = 0; i < texRects.length; i++) {\n\tconst texcoordBuffer = this.buffers[i+1];\n\tgl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n\tconst t_x1 = texRects[i].l;\n\tconst t_x2 = texRects[i].r;\n\tconst t_y1 = texRects[i].t;\n\tconst t_y2 = texRects[i].b;\n\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n          t_x1, t_y1,\n          t_x2, t_y1,\n          t_x1, t_y2,\n          t_x1, t_y2,\n          t_x2, t_y1,\n          t_x2, t_y2,\n\t]), gl.STATIC_DRAW);\n\n\tgl.enableVertexAttribArray(texcoordLocations[i]);\n\tgl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n\tgl.vertexAttribPointer(texcoordLocations[i], 2, gl.FLOAT, false, 0, 0);\n      }\n\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n\n    drawDisplayCanvas() {\n      const gl = this.gl;\n\n      const displayShader = this.shaders[\"DISPLAY\"];\n\n      // Clear\n      // (Moved inside drawRectangle)\n      // gl.clearColor(0, 0, 0, 1);\n      // gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n      if (this.image.width == 0 || this.image.height == 0) {\n\tthis.resizeTexture(\"IMAGE_PERSISTENCE\", 0, 0);\n\treturn;\n      }\n\n      // Grab common variables\n      const displayResolution = this.display.displayResolution;\n\n      // Vertex rect\n      const vertexRect = new Rect(-1, -1, 2, 2);\n\n      const viewportAspectRatio = this.viewportSize.ratio;\n      const displayAspectRatio = displayResolution.ratio;\n\n      const ratio = viewportAspectRatio / displayAspectRatio;\n\n      if (ratio > 1) {\n\tvertexRect.origin.x /= ratio;\n\tvertexRect.size.width /= ratio;\n      } else {\n\tvertexRect.origin.y *= ratio;\n\tvertexRect.size.height *= ratio;\n      }\n\n      // Base texture rect\n      const baseTexRect = new Rect(0, 0, 1, 1);\n\n      // Canvas texture rect\n      const interlaceShift = this.image.interlace / this.image.height;\n\n      const canvasTexLowerLeft = this.getDisplayCanvasTexPoint(\n\tnew Point(-1, -1 + 2 * interlaceShift));\n      const canvasTexUpperRight = this.getDisplayCanvasTexPoint(\n\tnew Point(1, 1 + 2 * interlaceShift));\n\n      const canvasTexRect = new Rect(canvasTexLowerLeft.x,\n                                     canvasTexLowerLeft.y,\n                                     canvasTexUpperRight.x - canvasTexLowerLeft.x,\n                                     canvasTexUpperRight.y - canvasTexLowerLeft.y);\n\n      const canvasSize = new Size(0.5 * this.viewportSize.width *\n                                  vertexRect.size.width,\n                                  0.5 * this.viewportSize.height *\n                                  vertexRect.size.height);\n\n      const canvasVideoSize = new Size(canvasSize.width *\n                                       this.display.videoSize.width,\n                                       canvasSize.height *\n                                       this.display.videoSize.height);\n\n      let barrelTexRect;\n\n      // Render\n      const texture = this.textures[\"IMAGE_DECODED\"];\n\n      // Set uniforms\n      gl.useProgram(displayShader);\n\n      // Texture\n      const texSize = texture.size;\n\n      gl.uniform1i(gl.getUniformLocation(displayShader, \"texture\"), 0);\n      gl.uniform2f(gl.getUniformLocation(displayShader, \"textureSize\"),\n                   texSize.width, texSize.height);\n\n      // Barrel\n      barrelTexRect = new Rect(-0.5, -0.5 / displayAspectRatio,\n                               1.0, 1.0 / displayAspectRatio);\n      gl.uniform2f(gl.getUniformLocation(displayShader, \"barrelSize\"),\n                   1, 1.0 / displayAspectRatio);\n\n      // Scanlines\n      const scanlineHeight = canvasVideoSize.height / this.image.height;\n      let scanlineLevel = this.display.displayScanlineLevel;\n\n      scanlineLevel = ((scanlineHeight > 2.5) ? scanlineLevel :\n                       (scanlineHeight < 2) ? 0 :\n                       (scanlineHeight - 2) / (2.5 - 2) * scanlineLevel);\n\n      gl.uniform1f(gl.getUniformLocation(displayShader, \"scanlineLevel\"), scanlineLevel);\n\n      // Shadow mask\n      let shadowMaskTexture;\n      let shadowMaskAspectRatio;\n      switch (this.display.displayShadowMask)\n      {\n        case \"SHADOWMASK_TRIAD\":\n          shadowMaskTexture = this.textures[\"SHADOWMASK_TRIAD\"];\n          shadowMaskAspectRatio = 2 / (274.0 / 240.0);\n          break;\n        case \"SHADOWMASK_INLINE\":\n          shadowMaskTexture = this.textures[\"SHADOWMASK_INLINE\"];\n          shadowMaskAspectRatio = 2;\n          break;\n        case \"SHADOWMASK_APERTURE\":\n          shadowMaskTexture = this.textures[\"SHADOWMASK_APERTURE\"];\n          shadowMaskAspectRatio = 2;\n          break;\n        case \"SHADOWMASK_LCD\":\n          shadowMaskTexture = this.textures[\"SHADOWMASK_LCD\"];\n          shadowMaskAspectRatio = 2;\n          break;\n        case \"SHADOWMASK_BAYER\":\n          shadowMaskTexture = this.textures[\"SHADOWMASK_BAYER\"];\n          shadowMaskAspectRatio = 2;\n        break;\n      }\n\n      let shadowMaskDotPitch = this.display.displayShadowMaskDotPitch;\n\n      if (shadowMaskDotPitch <= 0.001)\n        shadowMaskDotPitch = 0.001;\n\n      const shadowMaskElemX = (displayResolution.width /\n                               this.display.displayPixelDensity *\n                               25.4 * 0.5 / shadowMaskDotPitch);\n      const shadowMaskSize = new Size(shadowMaskElemX,\n                                      shadowMaskElemX * shadowMaskAspectRatio /\n                                      displayAspectRatio);\n\n      gl.activeTexture(gl.TEXTURE1);\n\n      gl.bindTexture(gl.TEXTURE_2D, shadowMaskTexture.glTexture);\n\n      gl.uniform2f(gl.getUniformLocation(displayShader, \"shadowMaskSize\"),\n                   shadowMaskSize.width, shadowMaskSize.height);\n\n      // Persistence\n      gl.activeTexture(gl.TEXTURE2);\n\n      gl.bindTexture(gl.TEXTURE_2D, this.textures[\"IMAGE_PERSISTENCE\"].glTexture);\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n      gl.activeTexture(gl.TEXTURE0);\n\n      gl.uniform1i(gl.getUniformLocation(displayShader, \"persistence\"), 2);\n      gl.uniform2f(gl.getUniformLocation(displayShader, \"persistenceOrigin\"),\n                   this.persistenceTexRect.x, this.persistenceTexRect.y);\n      gl.uniform2f(gl.getUniformLocation(displayShader, \"persistenceSize\"),\n                   this.persistenceTexRect.width, this.persistenceTexRect.height);\n\n      // Old fixed pipeline stuff.\n      // gl.loadIdentity();\n      // gl.rotatef(180, 1, 0, 0);\n\n      gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\n      // Render\n      this.drawRectangle(displayShader, vertexRect, canvasTexRect, baseTexRect);\n\n      // TODO(zellyn): implement\n/*\n    if (displayConfiguration.displayPersistence != 0.0)\n    {\n        updateTextureSize(OPENGLCANVAS_IMAGE_PERSISTENCE, viewportSize);\n\n        gl.bindTexture(gl.TEXTURE_2D, texture[OPENGLCANVAS_IMAGE_PERSISTENCE]);\n\n        gl.readBuffer(gl.BACK);\n\n        gl.copyTexSubImage2D(gl.TEXTURE_2D, 0,\n                            0, 0, 0, 0,\n                            viewportSize.width, viewportSize.height);\n\n        OESize persistenceTexSize = OEMakeSize(viewportSize.width /\n                                               textureSize[OPENGLCANVAS_IMAGE_PERSISTENCE].width,\n                                               viewportSize.height /\n                                               textureSize[OPENGLCANVAS_IMAGE_PERSISTENCE].height);\n        persistenceTexRect = OEMakeRect((vertexRect.origin.x + 1) * 0.5F * persistenceTexSize.width,\n                                        (vertexRect.origin.y + 1) * 0.5F * persistenceTexSize.height,\n                                        vertexRect.size.width * 0.5F * persistenceTexSize.width,\n                                        vertexRect.size.height * 0.5F * persistenceTexSize.height);\n\n        persistenceTexRect.origin.y += persistenceTexRect.size.height;\n        persistenceTexRect.size.height = -persistenceTexRect.size.height;\n    }\n*/\n\n    }\n\n    getDisplayCanvasTexPoint(p) {\n      const videoCenter = this.display.videoCenter;\n      const videoSize = this.display.videoSize;\n\n      p = new Point((p.x - 2 * videoCenter.x) / videoSize.width,\n                    (p.y - 2 * videoCenter.y) / videoSize.height);\n\n      const imageSize = this.image.size;\n      const texSize = this.textures[\"IMAGE_IN\"].size;\n\n      p.x = (p.x + 1) * 0.5 * imageSize.width / texSize.width;\n      p.y = (p.y + 1) * 0.5 * imageSize.height / texSize.height;\n\n      return p;\n    }\n\n    // Resize the texture with the given name to the next\n    // highest power of two width and height. Wouldn't be\n    // necessary with webgl2.\n    resizeTexture(name, width, height, luminance=false) {\n      const gl = this.gl;\n      const texInfo = this.textures[name];\n      if (!texInfo) {\n        throw new Error(`Cannot find texture named ${name}`);\n      }\n      if (width < 4) width = 4;\n      if (height < 4) height = 4;\n      width = 2**Math.ceil(Math.log2(width));\n      height = 2**Math.ceil(Math.log2(height));\n      if (texInfo.width != width || texInfo.height != height) {\n        texInfo.width = width;\n        texInfo.height = height;\n        gl.bindTexture(gl.TEXTURE_2D, texInfo.glTexture);\n\tconst length = width * height * (luminance ? 1 : 4);\n        const dummy = new Uint8Array(length);\n\tconst type = luminance ? gl.LUMINANCE : gl.RGBA;\n        gl.texImage2D(gl.TEXTURE_2D, 0, type, width, height, 0,\n                      type, gl.UNSIGNED_BYTE, dummy);\n      }\n    }\n  }\n\n  return {\n    C: {\n      HORIZ_START: HORIZ_START,\n      HORIZ_BLANK: HORIZ_BLANK,\n      HORIZ_DISPLAY: HORIZ_DISPLAY,\n      HORIZ_TOTAL: HORIZ_TOTAL,\n      CELL_WIDTH: CELL_WIDTH,\n      CELL_HEIGHT: CELL_HEIGHT,\n      VERT_NTSC_START: VERT_NTSC_START,\n      VERT_PAL_START: VERT_PAL_START,\n      VERT_DISPLAY: VERT_DISPLAY,\n      BLOCK_WIDTH: BLOCK_WIDTH,\n      BLOCK_HEIGHT: BLOCK_HEIGHT,\n      NTSC_I_CUTOFF: NTSC_I_CUTOFF,\n      NTSC_Q_CUTOFF: NTSC_Q_CUTOFF,\n      NTSC_IQ_DELTA: NTSC_IQ_DELTA,\n      NTSC_DETAILS: NTSC_DETAILS,\n      PAL_DETAILS: PAL_DETAILS,\n    },\n    loadImage: loadImage,\n    screenData: screenData,\n    resizeCanvas: resizeCanvas,\n    createShader: createShader,\n    createProgram: createProgram,\n\n    // Classes.\n    ScreenView: ScreenView,\n    DisplayConfiguration: DisplayConfiguration,\n    ImageInfo: ImageInfo,\n    Vector: Vector,\n    Size: Size,\n    Point: Point,\n  };\n})();\n\nif (typeof module !== 'undefined') {\n  module.exports = {\n    screenEmu: screenEmu\n  }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"dist/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t282: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkApple2\"] = self[\"webpackChunkApple2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const havePrefs = typeof window.localStorage !== 'undefined';\n\nexport default class Prefs {\n    url: URL;\n    title: string;\n\n    constructor() {\n        this.url = new URL(window.location.href);\n        this.title = window.document.title;\n    }\n\n    havePrefs() {\n        return havePrefs;\n    }\n\n    readPref(name: string): string | null;\n    readPref(name: string, defaultValue: string): string;\n    readPref(name: string, defaultValue: string | null = null) {\n        if (this.url.searchParams.has(name)) {\n            return this.url.searchParams.get(name);\n        }\n\n        if (havePrefs) {\n            return window.localStorage.getItem(name) ?? defaultValue;\n        }\n        return defaultValue;\n    }\n\n    writePref(name: string, value: string) {\n        if (this.url.searchParams.has(name)) {\n            this.url.searchParams.set(name, value);\n            history.replaceState(null, this.title, this.url.toString());\n        }\n\n        if (havePrefs) {\n            window.localStorage.setItem(name, value);\n        }\n    }\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar MicroModal = function () {\n\n  var FOCUSABLE_ELEMENTS = ['a[href]', 'area[href]', 'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])', 'select:not([disabled]):not([aria-hidden])', 'textarea:not([disabled]):not([aria-hidden])', 'button:not([disabled]):not([aria-hidden])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n\n  var Modal = /*#__PURE__*/function () {\n    function Modal(_ref) {\n      var targetModal = _ref.targetModal,\n          _ref$triggers = _ref.triggers,\n          triggers = _ref$triggers === void 0 ? [] : _ref$triggers,\n          _ref$onShow = _ref.onShow,\n          onShow = _ref$onShow === void 0 ? function () {} : _ref$onShow,\n          _ref$onClose = _ref.onClose,\n          onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n          _ref$openTrigger = _ref.openTrigger,\n          openTrigger = _ref$openTrigger === void 0 ? 'data-micromodal-trigger' : _ref$openTrigger,\n          _ref$closeTrigger = _ref.closeTrigger,\n          closeTrigger = _ref$closeTrigger === void 0 ? 'data-micromodal-close' : _ref$closeTrigger,\n          _ref$openClass = _ref.openClass,\n          openClass = _ref$openClass === void 0 ? 'is-open' : _ref$openClass,\n          _ref$disableScroll = _ref.disableScroll,\n          disableScroll = _ref$disableScroll === void 0 ? false : _ref$disableScroll,\n          _ref$disableFocus = _ref.disableFocus,\n          disableFocus = _ref$disableFocus === void 0 ? false : _ref$disableFocus,\n          _ref$awaitCloseAnimat = _ref.awaitCloseAnimation,\n          awaitCloseAnimation = _ref$awaitCloseAnimat === void 0 ? false : _ref$awaitCloseAnimat,\n          _ref$awaitOpenAnimati = _ref.awaitOpenAnimation,\n          awaitOpenAnimation = _ref$awaitOpenAnimati === void 0 ? false : _ref$awaitOpenAnimati,\n          _ref$debugMode = _ref.debugMode,\n          debugMode = _ref$debugMode === void 0 ? false : _ref$debugMode;\n\n      _classCallCheck(this, Modal);\n\n      // Save a reference of the modal\n      this.modal = document.getElementById(targetModal); // Save a reference to the passed config\n\n      this.config = {\n        debugMode: debugMode,\n        disableScroll: disableScroll,\n        openTrigger: openTrigger,\n        closeTrigger: closeTrigger,\n        openClass: openClass,\n        onShow: onShow,\n        onClose: onClose,\n        awaitCloseAnimation: awaitCloseAnimation,\n        awaitOpenAnimation: awaitOpenAnimation,\n        disableFocus: disableFocus\n      }; // Register click events only if pre binding eventListeners\n\n      if (triggers.length > 0) this.registerTriggers.apply(this, _toConsumableArray(triggers)); // pre bind functions for event listeners\n\n      this.onClick = this.onClick.bind(this);\n      this.onKeydown = this.onKeydown.bind(this);\n    }\n    /**\n     * Loops through all openTriggers and binds click event\n     * @param  {array} triggers [Array of node elements]\n     * @return {void}\n     */\n\n\n    _createClass(Modal, [{\n      key: \"registerTriggers\",\n      value: function registerTriggers() {\n        var _this = this;\n\n        for (var _len = arguments.length, triggers = new Array(_len), _key = 0; _key < _len; _key++) {\n          triggers[_key] = arguments[_key];\n        }\n\n        triggers.filter(Boolean).forEach(function (trigger) {\n          trigger.addEventListener('click', function (event) {\n            return _this.showModal(event);\n          });\n        });\n      }\n    }, {\n      key: \"showModal\",\n      value: function showModal() {\n        var _this2 = this;\n\n        var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        this.activeElement = document.activeElement;\n        this.modal.setAttribute('aria-hidden', 'false');\n        this.modal.classList.add(this.config.openClass);\n        this.scrollBehaviour('disable');\n        this.addEventListeners();\n\n        if (this.config.awaitOpenAnimation) {\n          var handler = function handler() {\n            _this2.modal.removeEventListener('animationend', handler, false);\n\n            _this2.setFocusToFirstNode();\n          };\n\n          this.modal.addEventListener('animationend', handler, false);\n        } else {\n          this.setFocusToFirstNode();\n        }\n\n        this.config.onShow(this.modal, this.activeElement, event);\n      }\n    }, {\n      key: \"closeModal\",\n      value: function closeModal() {\n        var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var modal = this.modal;\n        this.modal.setAttribute('aria-hidden', 'true');\n        this.removeEventListeners();\n        this.scrollBehaviour('enable');\n\n        if (this.activeElement && this.activeElement.focus) {\n          this.activeElement.focus();\n        }\n\n        this.config.onClose(this.modal, this.activeElement, event);\n\n        if (this.config.awaitCloseAnimation) {\n          var openClass = this.config.openClass; // <- old school ftw\n\n          this.modal.addEventListener('animationend', function handler() {\n            modal.classList.remove(openClass);\n            modal.removeEventListener('animationend', handler, false);\n          }, false);\n        } else {\n          modal.classList.remove(this.config.openClass);\n        }\n      }\n    }, {\n      key: \"closeModalById\",\n      value: function closeModalById(targetModal) {\n        this.modal = document.getElementById(targetModal);\n        if (this.modal) this.closeModal();\n      }\n    }, {\n      key: \"scrollBehaviour\",\n      value: function scrollBehaviour(toggle) {\n        if (!this.config.disableScroll) return;\n        var body = document.querySelector('body');\n\n        switch (toggle) {\n          case 'enable':\n            Object.assign(body.style, {\n              overflow: ''\n            });\n            break;\n\n          case 'disable':\n            Object.assign(body.style, {\n              overflow: 'hidden'\n            });\n            break;\n        }\n      }\n    }, {\n      key: \"addEventListeners\",\n      value: function addEventListeners() {\n        this.modal.addEventListener('touchstart', this.onClick);\n        this.modal.addEventListener('click', this.onClick);\n        document.addEventListener('keydown', this.onKeydown);\n      }\n    }, {\n      key: \"removeEventListeners\",\n      value: function removeEventListeners() {\n        this.modal.removeEventListener('touchstart', this.onClick);\n        this.modal.removeEventListener('click', this.onClick);\n        document.removeEventListener('keydown', this.onKeydown);\n      }\n    }, {\n      key: \"onClick\",\n      value: function onClick(event) {\n        if (event.target.hasAttribute(this.config.closeTrigger)) {\n          this.closeModal(event);\n        }\n      }\n    }, {\n      key: \"onKeydown\",\n      value: function onKeydown(event) {\n        if (event.keyCode === 27) this.closeModal(event); // esc\n\n        if (event.keyCode === 9) this.retainFocus(event); // tab\n      }\n    }, {\n      key: \"getFocusableNodes\",\n      value: function getFocusableNodes() {\n        var nodes = this.modal.querySelectorAll(FOCUSABLE_ELEMENTS);\n        return Array.apply(void 0, _toConsumableArray(nodes));\n      }\n      /**\n       * Tries to set focus on a node which is not a close trigger\n       * if no other nodes exist then focuses on first close trigger\n       */\n\n    }, {\n      key: \"setFocusToFirstNode\",\n      value: function setFocusToFirstNode() {\n        var _this3 = this;\n\n        if (this.config.disableFocus) return;\n        var focusableNodes = this.getFocusableNodes(); // no focusable nodes\n\n        if (focusableNodes.length === 0) return; // remove nodes on whose click, the modal closes\n        // could not think of a better name :(\n\n        var nodesWhichAreNotCloseTargets = focusableNodes.filter(function (node) {\n          return !node.hasAttribute(_this3.config.closeTrigger);\n        });\n        if (nodesWhichAreNotCloseTargets.length > 0) nodesWhichAreNotCloseTargets[0].focus();\n        if (nodesWhichAreNotCloseTargets.length === 0) focusableNodes[0].focus();\n      }\n    }, {\n      key: \"retainFocus\",\n      value: function retainFocus(event) {\n        var focusableNodes = this.getFocusableNodes(); // no focusable nodes\n\n        if (focusableNodes.length === 0) return;\n        /**\n         * Filters nodes which are hidden to prevent\n         * focus leak outside modal\n         */\n\n        focusableNodes = focusableNodes.filter(function (node) {\n          return node.offsetParent !== null;\n        }); // if disableFocus is true\n\n        if (!this.modal.contains(document.activeElement)) {\n          focusableNodes[0].focus();\n        } else {\n          var focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n\n          if (event.shiftKey && focusedItemIndex === 0) {\n            focusableNodes[focusableNodes.length - 1].focus();\n            event.preventDefault();\n          }\n\n          if (!event.shiftKey && focusableNodes.length > 0 && focusedItemIndex === focusableNodes.length - 1) {\n            focusableNodes[0].focus();\n            event.preventDefault();\n          }\n        }\n      }\n    }]);\n\n    return Modal;\n  }();\n  /**\n   * Modal prototype ends.\n   * Here on code is responsible for detecting and\n   * auto binding event handlers on modal triggers\n   */\n  // Keep a reference to the opened modal\n\n\n  var activeModal = null;\n  /**\n   * Generates an associative array of modals and it's\n   * respective triggers\n   * @param  {array} triggers     An array of all triggers\n   * @param  {string} triggerAttr The data-attribute which triggers the module\n   * @return {array}\n   */\n\n  var generateTriggerMap = function generateTriggerMap(triggers, triggerAttr) {\n    var triggerMap = [];\n    triggers.forEach(function (trigger) {\n      var targetModal = trigger.attributes[triggerAttr].value;\n      if (triggerMap[targetModal] === undefined) triggerMap[targetModal] = [];\n      triggerMap[targetModal].push(trigger);\n    });\n    return triggerMap;\n  };\n  /**\n   * Validates whether a modal of the given id exists\n   * in the DOM\n   * @param  {number} id  The id of the modal\n   * @return {boolean}\n   */\n\n\n  var validateModalPresence = function validateModalPresence(id) {\n    if (!document.getElementById(id)) {\n      console.warn(\"MicroModal: \\u2757Seems like you have missed %c'\".concat(id, \"'\"), 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'ID somewhere in your code. Refer example below to resolve it.');\n      console.warn(\"%cExample:\", 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', \"<div class=\\\"modal\\\" id=\\\"\".concat(id, \"\\\"></div>\"));\n      return false;\n    }\n  };\n  /**\n   * Validates if there are modal triggers present\n   * in the DOM\n   * @param  {array} triggers An array of data-triggers\n   * @return {boolean}\n   */\n\n\n  var validateTriggerPresence = function validateTriggerPresence(triggers) {\n    if (triggers.length <= 0) {\n      console.warn(\"MicroModal: \\u2757Please specify at least one %c'micromodal-trigger'\", 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'data attribute.');\n      console.warn(\"%cExample:\", 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', \"<a href=\\\"#\\\" data-micromodal-trigger=\\\"my-modal\\\"></a>\");\n      return false;\n    }\n  };\n  /**\n   * Checks if triggers and their corresponding modals\n   * are present in the DOM\n   * @param  {array} triggers   Array of DOM nodes which have data-triggers\n   * @param  {array} triggerMap Associative array of modals and their triggers\n   * @return {boolean}\n   */\n\n\n  var validateArgs = function validateArgs(triggers, triggerMap) {\n    validateTriggerPresence(triggers);\n    if (!triggerMap) return true;\n\n    for (var id in triggerMap) {\n      validateModalPresence(id);\n    }\n\n    return true;\n  };\n  /**\n   * Binds click handlers to all modal triggers\n   * @param  {object} config [description]\n   * @return void\n   */\n\n\n  var init = function init(config) {\n    // Create an config object with default openTrigger\n    var options = Object.assign({}, {\n      openTrigger: 'data-micromodal-trigger'\n    }, config); // Collects all the nodes with the trigger\n\n    var triggers = _toConsumableArray(document.querySelectorAll(\"[\".concat(options.openTrigger, \"]\"))); // Makes a mappings of modals with their trigger nodes\n\n\n    var triggerMap = generateTriggerMap(triggers, options.openTrigger); // Checks if modals and triggers exist in dom\n\n    if (options.debugMode === true && validateArgs(triggers, triggerMap) === false) return; // For every target modal creates a new instance\n\n    for (var key in triggerMap) {\n      var value = triggerMap[key];\n      options.targetModal = key;\n      options.triggers = _toConsumableArray(value);\n      activeModal = new Modal(options); // eslint-disable-line no-new\n    }\n  };\n  /**\n   * Shows a particular modal\n   * @param  {string} targetModal [The id of the modal to display]\n   * @param  {object} config [The configuration object to pass]\n   * @return {void}\n   */\n\n\n  var show = function show(targetModal, config) {\n    var options = config || {};\n    options.targetModal = targetModal; // Checks if modals and triggers exist in dom\n\n    if (options.debugMode === true && validateModalPresence(targetModal) === false) return; // clear events in case previous modal wasn't close\n\n    if (activeModal) activeModal.removeEventListeners(); // stores reference to active modal\n\n    activeModal = new Modal(options); // eslint-disable-line no-new\n\n    activeModal.showModal();\n  };\n  /**\n   * Closes the active modal\n   * @param  {string} targetModal [The id of the modal to close]\n   * @return {void}\n   */\n\n\n  var close = function close(targetModal) {\n    targetModal ? activeModal.closeModalById(targetModal) : activeModal.closeModal();\n  };\n\n  return {\n    init: init,\n    show: show,\n    close: close\n  };\n}();\nwindow.MicroModal = MicroModal;\n\nexport default MicroModal;\n","import { memory } from './types';\n\nconst B64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/** Encode an array of bytes in base64. */\nexport function base64_encode(data: null | undefined): undefined;\nexport function base64_encode(data: memory): string;\nexport function base64_encode(\n    data: memory | null | undefined\n): string | undefined {\n    // Twacked by Will Scullin to handle arrays of 'bytes'\n\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Bayron Guevara\n    // +   improved by: Thunder.m\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: utf8_encode\n    // *     example 1: base64_encode('Kevin van Zonneveld');\n    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    //if (typeof this.window['atob'] == 'function') {\n    //    return atob(data);\n    //}\n\n    let o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0,\n        enc = '';\n    const tmp_arr = [];\n\n    if (!data) {\n        return undefined;\n    }\n\n    do {\n        // pack three octets into four hexets\n        o1 = data[i++];\n        o2 = data[i++];\n        o3 = data[i++];\n\n        bits = (o1 << 16) | (o2 << 8) | o3;\n\n        h1 = (bits >> 18) & 0x3f;\n        h2 = (bits >> 12) & 0x3f;\n        h3 = (bits >> 6) & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] =\n            B64.charAt(h1) + B64.charAt(h2) + B64.charAt(h3) + B64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n\n    return enc;\n}\n\n/** Returns undefined if the input is null or undefined. */\nexport function base64_decode(data: null | undefined): undefined;\n/** Returns an array of bytes from the given base64-encoded string. */\nexport function base64_decode(data: string): memory;\n/** Returns an array of bytes from the given base64-encoded string. */\nexport function base64_decode(\n    data: string | null | undefined\n): memory | undefined {\n    // Twacked by Will Scullin to handle arrays of 'bytes'\n\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Thunder.m\n    // +      input by: Aman Gupta\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: utf8_decode\n    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n    // *     returns 1: 'Kevin van Zonneveld'\n\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    //if (typeof this.window['btoa'] == 'function') {\n    //    return btoa(data);\n    //}\n\n    let o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0;\n    const tmp_arr = [];\n\n    if (!data) {\n        return undefined;\n    }\n\n    do {\n        // unpack four hexets into three octets using index points in B64\n        h1 = B64.indexOf(data.charAt(i++));\n        h2 = B64.indexOf(data.charAt(i++));\n        h3 = B64.indexOf(data.charAt(i++));\n        h4 = B64.indexOf(data.charAt(i++));\n\n        bits = (h1 << 18) | (h2 << 12) | (h3 << 6) | h4;\n\n        o1 = (bits >> 16) & 0xff;\n        o2 = (bits >> 8) & 0xff;\n        o3 = bits & 0xff;\n\n        tmp_arr[ac++] = o1;\n        if (h3 !== 64) {\n            tmp_arr[ac++] = o2;\n        }\n        if (h4 !== 64) {\n            tmp_arr[ac++] = o3;\n        }\n    } while (i < data.length);\n\n    return new Uint8Array(tmp_arr);\n}\n\nconst DATA_URL_PREFIX = 'data:application/octet-stream;base64,';\n\nexport function base64_json_parse(json: string): unknown {\n    const reviver = (_key: string, value: unknown) => {\n        if (typeof value === 'string' && value.startsWith(DATA_URL_PREFIX)) {\n            return base64_decode(value.slice(DATA_URL_PREFIX.length));\n        }\n        return value;\n    };\n\n    return JSON.parse(json, reviver);\n}\n\nexport function base64_json_stringify(json: unknown) {\n    const replacer = (_key: string, value: unknown) => {\n        if (value instanceof Uint8Array) {\n            return DATA_URL_PREFIX + base64_encode(value);\n        }\n        return value;\n    };\n\n    return JSON.stringify(json, replacer);\n}\n","import Prefs from './prefs';\n\nexport const BOOLEAN_OPTION = 'BOOLEAN_OPTION';\nexport const SELECT_OPTION = 'SELECT_OPTION';\n\nexport interface Option {\n    name: string;\n    label: string;\n    type: string;\n    defaultVal: string | boolean;\n}\n\nexport interface BooleanOption extends Option {\n    type: typeof BOOLEAN_OPTION;\n    defaultVal: boolean;\n}\n\nexport interface SelectOption extends Option {\n    type: typeof SELECT_OPTION;\n    defaultVal: string;\n    values: Array<{ name: string; value: string }>;\n}\n\nexport interface OptionSection {\n    name: string;\n    options: Option[];\n}\n\nexport interface OptionHandler {\n    getOptions: () => OptionSection[];\n    setOption: (name: string, value: string | boolean) => void;\n}\n\nexport class Options {\n    private prefs: Prefs = new Prefs();\n    private options: Record<string, Option> = {};\n    private handlers: Record<string, OptionHandler> = {};\n    private sections: OptionSection[] = [];\n\n    addOptions(handler: OptionHandler) {\n        const sections = handler.getOptions();\n        for (const section of sections) {\n            const { options } = section;\n            for (const option of options) {\n                const { name } = option;\n                this.handlers[name] = handler;\n                this.options[name] = option;\n                const value = this.getOption(name);\n                if (value != null) {\n                    handler.setOption(name, value);\n                }\n            }\n            this.sections.push(section);\n        }\n    }\n\n    getOption(name: string): string | boolean | undefined {\n        const option = this.options[name];\n        if (option) {\n            const { name, defaultVal, type } = option;\n            const stringVal = String(defaultVal);\n            const prefVal = this.prefs.readPref(name, stringVal);\n            switch (type) {\n                case BOOLEAN_OPTION:\n                    return prefVal === 'true';\n                default:\n                    return prefVal;\n            }\n        }\n    }\n\n    setOption(name: string, value: string | boolean) {\n        if (name in this.options) {\n            const handler = this.handlers[name];\n            const option = this.options[name];\n            this.prefs.writePref(name, String(value));\n            switch (option.type) {\n                case BOOLEAN_OPTION:\n                    handler.setOption(name, Boolean(value));\n                    break;\n                default:\n                    handler.setOption(name, String(value));\n            }\n        }\n    }\n\n    getOptions() {\n        return this.options;\n    }\n\n    getSections() {\n        return this.sections;\n    }\n}\n","import { byte, memory } from './types';\n\n/*eslint no-console: 0*/\n\nconst hex_digits = '0123456789ABCDEF';\nconst bin_digits = '01';\n\n/** Returns a random byte. */\nexport function garbage(): byte {\n    return (Math.random() * 0x100) & 0xff;\n}\n\nexport const testables = {\n    garbage,\n};\n\n/**\n * Returns an array or Uint8Array of `size` bytes filled as if the computer\n * was just powered on.\n */\nexport function allocMem(size: number) {\n    const result = new Uint8Array(size);\n\n    for (let idx = 0; idx < size; idx++) {\n        result[idx] = idx & 0x02 ? 0x00 : 0xff;\n    }\n    // Borrowed from AppleWin (https://github.com/AppleWin/AppleWin)\n    for (let idx = 0; idx < size; idx += 0x200) {\n        result[idx + 0x28] = garbage();\n        result[idx + 0x29] = garbage();\n        result[idx + 0x68] = garbage();\n        result[idx + 0x69] = garbage();\n    }\n    return result;\n}\n\n/** Returns an array or Uint8Array of 256 * `pages` bytes. */\nexport function allocMemPages(pages: number): memory {\n    return allocMem(pages << 8);\n}\n\n/** Returns a new Uint8Array for the input array. */\nexport function bytify(ary: number[]): memory {\n    return new Uint8Array(ary);\n}\n\n/** Returns a new Uint8Array with the concatenated data from the inputs. */\nexport function concat(...arys: Array<byte[] | Uint8Array>) {\n    const result = new Uint8Array(arys.reduce((l, ary) => l + ary.length, 0));\n    let offset = 0;\n    for (let i = 0; i < arys.length; i++) {\n        result.set(arys[i], offset);\n        offset += arys[i].length;\n    }\n    return result;\n}\n\n/** Writes to the console. */\nexport function debug(...args: unknown[]): void {\n    console.log(...args);\n}\n\n/**\n * Returns a string of hex digits (all caps).\n * @param v the value to encode\n * @param n the number of nibbles. If `n` is missing, it is guessed from the value\n *     of `v`. If `v` < 256, it is assumed to be 2 nibbles, otherwise 4.\n */\nexport function toHex(v: number, n?: number) {\n    if (!n) {\n        n = v < 256 ? 2 : 4;\n    }\n    let result = '';\n    for (let idx = 0; idx < n; idx++) {\n        result = hex_digits[v & 0x0f] + result;\n        v >>= 4;\n    }\n    return result;\n}\n\n/**\n * Returns a string of 8 binary digits.\n * @param v the value to encode\n */\nexport function toBinary(v: byte) {\n    let result = '';\n    for (let idx = 0; idx < 8; idx++) {\n        result = bin_digits[v & 0x01] + result;\n        v >>= 1;\n    }\n    return result;\n}\n","import { BOOLEAN_OPTION, OptionHandler } from '../options';\nimport Apple2IO from '../apple2io';\nimport { debug } from '../util';\n\n/*\n * Audio Handling\n */\n\nconst QUANTUM_SIZE = 128;\nconst SAMPLE_SIZE = 1024;\nconst SAMPLE_RATE = 44000;\n\nexport const SOUND_ENABLED_OPTION = 'enable_sound';\n\ndeclare global {\n    interface Window {\n        webkitAudioContext: AudioContext;\n    }\n}\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nexport class Audio implements OptionHandler {\n    private sound = true;\n    private samples: number[][] = [];\n\n    private audioContext;\n    private audioNode;\n    private workletNode: AudioWorkletNode;\n    private started = false;\n\n    ready: Promise<void>;\n\n    constructor(io: Apple2IO) {\n        this.audioContext = new AudioContext({\n            sampleRate: SAMPLE_RATE,\n        });\n\n        if (window.AudioWorklet) {\n            const workletReady = this.audioContext.audioWorklet.addModule(\n                './dist/audio_worker.bundle.js'\n            );\n            this.ready = workletReady\n                .then(() => {\n                    this.workletNode = new AudioWorkletNode(\n                        this.audioContext,\n                        'audio_worker'\n                    );\n\n                    io.sampleRate(this.audioContext.sampleRate, QUANTUM_SIZE);\n                    io.addSampleListener((sample) => {\n                        if (\n                            this.sound &&\n                            this.audioContext.state === 'running'\n                        ) {\n                            this.workletNode.port.postMessage(sample);\n                        }\n                    });\n                    this.workletNode.connect(this.audioContext.destination);\n                })\n                .catch(console.error);\n        } else {\n            // TODO(flan): MDN says that createScriptProcessor is deprecated and\n            // replaced by AudioWorklet. FF and Chrome support AudioWorklet, but\n            // Safari does not (yet).\n            this.audioNode = this.audioContext.createScriptProcessor(\n                SAMPLE_SIZE,\n                1,\n                1\n            );\n\n            this.audioNode.onaudioprocess = (event) => {\n                const data = event.outputBuffer.getChannelData(0);\n                const sample = this.samples.shift();\n                let idx = 0;\n                let len = data.length;\n\n                if (sample) {\n                    len = Math.min(sample.length, len);\n                    for (; idx < len; idx++) {\n                        data[idx] = sample[idx];\n                    }\n                }\n\n                for (; idx < data.length; idx++) {\n                    data[idx] = 0.0;\n                }\n            };\n\n            this.audioNode.connect(this.audioContext.destination);\n            io.sampleRate(this.audioContext.sampleRate, SAMPLE_SIZE);\n            io.addSampleListener((sample) => {\n                if (this.sound && this.audioContext.state === 'running') {\n                    if (this.samples.length < 5) {\n                        this.samples.push(sample);\n                    }\n                }\n            });\n            this.ready = Promise.resolve();\n        }\n\n        window.addEventListener('keydown', this.autoStart);\n        if (window.ontouchstart !== undefined) {\n            window.addEventListener('touchstart', this.autoStart);\n        }\n        window.addEventListener('mousedown', this.autoStart);\n\n        debug('Sound initialized');\n    }\n\n    autoStart = () => {\n        if (this.audioContext && !this.started) {\n            this.samples = [];\n            this.audioContext\n                .resume()\n                .then(() => {\n                    this.started = true;\n                })\n                .catch((error) => {\n                    console.warn('audio not started', error);\n                });\n        }\n    };\n\n    start = () => {\n        if (this.audioContext) {\n            this.samples = [];\n            this.audioContext.resume().catch((error) => {\n                console.warn('audio not resumed', error);\n            });\n        }\n    };\n\n    isEnabled = () => {\n        return this.sound;\n    };\n\n    getOptions() {\n        return [\n            {\n                name: 'Audio',\n                options: [\n                    {\n                        name: SOUND_ENABLED_OPTION,\n                        label: 'Enabled',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: true,\n                    },\n                ],\n            },\n        ];\n    }\n\n    setOption = (name: string, value: boolean) => {\n        switch (name) {\n            case SOUND_ENABLED_OPTION:\n                this.sound = value;\n        }\n    };\n}\n","/**\n * Extracts the members of a constant array as a type. Used as:\n *\n * @example\n * const SOME_VALUES = ['a', 'b', 1, 2] as const;\n * type SomeValues = MemberOf<typeof SOME_VALUES>; // 'a' | 'b' | 1 | 2\n */\nexport type MemberOf<T extends ReadonlyArray<unknown>> =\n    T extends ReadonlyArray<infer E> ? E : never;\n\n/**\n * Recursively extracts all members of a constant array as a type. Used as:\n *\n * @example\n * const SOME_ARRAYS = [['a'],['b', 2], 3] as const;\n * type SomeArrayValues = DeepMemberOf<typeof SOME_ARRAYS>; // 'a' | 'b' | 2 | 3\n */\nexport type DeepMemberOf<T extends ReadonlyArray<unknown>> =\n    T extends ReadonlyArray<infer E>\n        ? E extends ReadonlyArray<unknown>\n            ? DeepMemberOf<E>\n            : E\n        : never;\n\n/**\n * Extracts the declared keys of a type by removing `string` and `number`.\n *\n * Cribbed from the interwebs:\n * https://github.com/microsoft/TypeScript/issues/25987#issuecomment-408339599\n */\nexport type KnownKeys<T> = {\n    [K in keyof T]: string extends K ? never : number extends K ? never : K;\n} extends { [_ in keyof T]: infer U }\n    ? U\n    : never;\n\n/**\n * Extracts the declared values of a constant object.\n */\nexport type KnownValues<T> = T extends {\n    [_ in keyof T]: infer U;\n}\n    ? U\n    : never;\n\n/**\n * Replacement for `includes` on constant types that is also a type assertion.\n *\n * @example\n * const SOME_VALUES = [1, 2, 'a'] as const;\n * let n: number = 1;\n * let r = includes(SOME_VALUES, n); // r === true, n is 1 | 2 | 'a'\n * n = 5;\n * r = includes(SOME_VALUES, n); // r === false, n is number\n */\nexport function includes<S extends T, T>(a: ReadonlyArray<S>, v: T): v is S {\n    return (a as ReadonlyArray<T>).includes(v);\n}\n\n/** A bit. */\nexport type bit = 0 | 1;\n\n/** A nibble. */\nexport type nibble =\n    | 0x0\n    | 0x1\n    | 0x2\n    | 0x3\n    | 0x4\n    | 0x5\n    | 0x6\n    | 0x7\n    | 0x8\n    | 0x9\n    | 0xa\n    | 0xb\n    | 0xc\n    | 0xd\n    | 0xe\n    | 0xf;\n\n/** A byte (0..255). This is not enforced by the compiler. */\nexport type byte = number;\n\n/** A word (0..65535). This is not enforced by the compiler. */\nexport type word = number;\n\n/** A raw region of memory. */\nexport type memory = Uint8Array;\n\n/** A raw region of memory. */\nexport type rom = ReadonlyUint8Array;\n\nexport interface Memory {\n    /** Read a byte. */\n    read(page: byte, offset: byte): byte;\n    /** Write a byte. */\n    write(page: byte, offset: byte, value: byte): void;\n}\n\n/** A mapped region of memory. */\nexport interface MemoryPages extends Memory {\n    /** Start page. */\n    start(): byte;\n    /** End page, inclusive. */\n    end(): byte;\n}\n\n/* An interface card */\nexport interface Card<StateT = unknown> extends Memory, Restorable<StateT> {\n    /* Reset the card */\n    reset?(): void;\n\n    /* Draw card to canvas */\n    blit?(): ImageData | undefined;\n\n    /* Process period events */\n    tick?(): void;\n\n    /* Read or Write an I/O switch */\n    ioSwitch(off: byte, val?: byte): byte | undefined;\n}\n\nexport type TapeData = Array<[duration: number, high: boolean]>;\n\nexport interface Restorable<T = unknown> {\n    getState(): T | Promise<T>;\n    setState(state: T): void;\n}\n\n// Read-only typed arrays for constants\nexport type TypedArrayMutableProperties =\n    | 'copyWithin'\n    | 'fill'\n    | 'reverse'\n    | 'set'\n    | 'sort';\nexport interface ReadonlyUint8Array\n    extends Omit<Uint8Array, TypedArrayMutableProperties> {\n    readonly [n: number]: number;\n}\n\n// Readonly RGB color value\nexport type Color = readonly [r: byte, g: byte, b: byte];\n","import type { byte, memory, MemberOf, word } from '../types';\nimport type { GamepadConfiguration } from '../ui/types';\nimport { InfoChunk } from './woz';\n\nexport const SUPPORTED_SECTORS = [13, 16] as const;\nexport type SupportedSectors = MemberOf<typeof SUPPORTED_SECTORS>;\n\nexport const DRIVE_NUMBERS = [1, 2] as const;\nexport type DriveNumber = MemberOf<typeof DRIVE_NUMBERS>;\n\n/**\n * Arguments for the disk format processors.\n */\nexport interface DiskOptions {\n    name: string;\n    side?: string | undefined;\n    volume: byte;\n    readOnly: boolean;\n    data?: memory[][];\n    rawData?: ArrayBuffer;\n    blockVolume?: boolean;\n}\n\n/**\n * JSON file entry format\n */\nexport interface DiskDescriptor {\n    name: string;\n    disk?: number;\n    filename: string;\n    e?: boolean;\n    category: string;\n}\n\n/**\n * JSON binary image (not used?)\n */\nexport interface JSONBinaryImage {\n    type: 'binary';\n    start: word;\n    length: word;\n    data: byte[];\n    gamepad?: GamepadConfiguration;\n}\n\n/**\n * Information about a disk image not directly related to the\n * disk contents. For example, the name or even a scan of the\n * disk label are \"metadata\", but the volume number is not.\n */\nexport interface DiskMetadata {\n    /** Displayed disk name */\n    name: string;\n    /** (Optional) Disk side (Front/Back, A/B) */\n    side?: string | undefined;\n}\n\n/**\n * Return value from disk format processors. Describes raw disk\n * data which the DiskII card can process.\n */\nexport interface Disk {\n    metadata: DiskMetadata;\n    readOnly: boolean;\n}\n\nexport const NO_DISK = 'empty';\nexport const ENCODING_NIBBLE = 'nibble';\nexport const ENCODING_BITSTREAM = 'bitstream';\nexport const ENCODING_BLOCK = 'block';\n\nexport interface FloppyDisk extends Disk {\n    encoding:\n        | typeof ENCODING_NIBBLE\n        | typeof ENCODING_BITSTREAM\n        | typeof NO_DISK;\n}\n\nexport interface NoFloppyDisk extends FloppyDisk {\n    encoding: typeof NO_DISK;\n}\n\nexport interface NibbleDisk extends FloppyDisk {\n    encoding: typeof ENCODING_NIBBLE;\n    format: Exclude<NibbleFormat, 'woz'>;\n    volume: byte;\n    tracks: memory[];\n}\n\nexport interface WozDisk extends FloppyDisk {\n    encoding: typeof ENCODING_BITSTREAM;\n    format: 'woz';\n    trackMap: number[];\n    rawTracks: Uint8Array[];\n    info: InfoChunk | undefined;\n}\n\nexport interface BlockDisk extends Disk {\n    encoding: typeof ENCODING_BLOCK;\n    format: BlockFormat;\n\n    blockCount(): Promise<number>;\n    read(block: number): Promise<Uint8Array>;\n    write(block: number, data: Uint8Array): Promise<void>;\n}\n\nexport class MemoryBlockDisk implements BlockDisk {\n    encoding: typeof ENCODING_BLOCK = ENCODING_BLOCK;\n\n    constructor(\n        readonly format: BlockFormat,\n        readonly metadata: DiskMetadata,\n        readonly readOnly = false,\n        private blocks: Uint8Array[]\n    ) {}\n\n    async blockCount(): Promise<number> {\n        return this.blocks.length;\n    }\n\n    async read(block: number): Promise<Uint8Array> {\n        return this.blocks[block];\n    }\n\n    async write(block: number, data: Uint8Array): Promise<void> {\n        this.blocks[block] = data;\n    }\n}\n\n/**\n * File types supported by floppy devices in nibble mode.\n */\nexport const NIBBLE_FORMATS = ['2mg', 'd13', 'do', 'dsk', 'po', 'nib'] as const;\n\n/**\n * File types supported by floppy devices in bitstream mode.\n */\nexport const BITSTREAM_FORMATS = ['woz'] as const;\n\n/**\n * All file types supported by floppy devices.\n */\nexport const FLOPPY_FORMATS = [\n    ...NIBBLE_FORMATS,\n    ...BITSTREAM_FORMATS,\n] as const;\n\n/**\n * File types supported by block devices.\n */\nexport const BLOCK_FORMATS = ['2mg', 'hdv', 'po'] as const;\n\n/**\n * All supported disk formats.\n */\nexport const DISK_FORMATS = [...FLOPPY_FORMATS, ...BLOCK_FORMATS] as const;\n\nexport type FloppyFormat = MemberOf<typeof FLOPPY_FORMATS>;\nexport type NibbleFormat = MemberOf<typeof NIBBLE_FORMATS>;\nexport type BitstreamFormat = 'woz';\nexport type BlockFormat = MemberOf<typeof BLOCK_FORMATS>;\nexport type DiskFormat = MemberOf<typeof DISK_FORMATS>;\n\n/** Type guard for nibble disk formats. */\nexport function isNibbleDiskFormat(f: DiskFormat): f is NibbleFormat {\n    return NIBBLE_FORMATS.includes(f as NibbleFormat);\n}\n\n/** Type guard for block disk formats. */\nexport function isBlockDiskFormat(f: DiskFormat): f is BlockFormat {\n    return BLOCK_FORMATS.includes(f as BlockFormat);\n}\n\nexport function isNoFloppyDisk(disk: Disk): disk is NoFloppyDisk {\n    return (disk as NoFloppyDisk)?.encoding === NO_DISK;\n}\n\n/** Type guard for NibbleDisks */\nexport function isNibbleDisk(disk: Disk): disk is NibbleDisk {\n    return (disk as NibbleDisk)?.encoding === ENCODING_NIBBLE;\n}\n\n/** Type guard for NibbleDisks */\nexport function isWozDisk(disk: Disk): disk is WozDisk {\n    return (disk as WozDisk)?.encoding === ENCODING_BITSTREAM;\n}\n\n/**\n * Base format for JSON defined disks\n */\n\nexport class JSONDiskBase {\n    type: DiskFormat;\n    name: string;\n    disk?: string;\n    category?: string;\n    volume?: byte;\n    readOnly?: boolean;\n    gamepad?: GamepadConfiguration;\n}\n\n/**\n * JSON Disk format with base64 encoded tracks with sectors\n */\n\nexport interface Base64JSONDisk extends JSONDiskBase {\n    type: Exclude<DiskFormat, 'nib'>;\n    encoding: 'base64';\n    data: string[][];\n}\n\n/**\n * JSON Disk format with base64 encoded nibblized tracks\n */\n\nexport interface Base64JSONNibbleDisk extends JSONDiskBase {\n    type: 'nib';\n    encoding: 'base64';\n    data: string[];\n}\n\n/**\n * JSON Disk format with byte array tracks\n */\n\nexport interface BinaryJSONDisk extends JSONDiskBase {\n    type: DiskFormat;\n    encoding: 'binary';\n    data: memory[][];\n}\n\n/**\n * General JSON Disk format\n */\n\nexport type JSONDisk = Base64JSONDisk | Base64JSONNibbleDisk | BinaryJSONDisk;\n\n/**\n * Process Disk message payloads for worker\n */\n\nexport const PROCESS_BINARY = 'PROCESS_BINARY';\nexport const PROCESS_JSON_DISK = 'PROCESS_JSON_DISK';\nexport const PROCESS_JSON = 'PROCESS_JSON';\n\n/** Binary disk file message */\nexport interface ProcessBinaryMessage {\n    type: typeof PROCESS_BINARY;\n    payload: {\n        driveNo: DriveNumber;\n        fmt: FloppyFormat;\n        options: DiskOptions;\n    };\n}\n\n/** Processed JSON file message (used for localStorage) */\nexport interface ProcessJsonDiskMessage {\n    type: typeof PROCESS_JSON_DISK;\n    payload: {\n        driveNo: DriveNumber;\n        jsonDisk: JSONDisk;\n    };\n}\n\n/** Raw JSON file message */\nexport interface ProcessJsonMessage {\n    type: typeof PROCESS_JSON;\n    payload: {\n        driveNo: DriveNumber;\n        json: string;\n    };\n}\n\nexport type FormatWorkerMessage =\n    | ProcessBinaryMessage\n    | ProcessJsonDiskMessage\n    | ProcessJsonMessage;\n\n/**\n * Format work result message type\n */\n\nexport const DISK_PROCESSED = 'DISK_PROCESSED';\n\nexport interface DiskProcessedResponse {\n    type: typeof DISK_PROCESSED;\n    payload: {\n        driveNo: DriveNumber;\n        disk: FloppyDisk | null;\n    };\n}\n\nexport type FormatWorkerResponse = DiskProcessedResponse;\n\nexport interface MassStorageData {\n    metadata: DiskMetadata;\n    ext: DiskFormat;\n    readOnly: boolean;\n    volume?: byte;\n    data: ArrayBuffer;\n}\n\n/**\n * Block device common interface\n */\nexport interface MassStorage<T> {\n    setBinary(\n        drive: number,\n        name: string,\n        ext: T,\n        data: ArrayBuffer\n    ): Promise<void>;\n    getBinary(drive: number, ext?: T): Promise<MassStorageData | null>;\n}\n\nexport interface BlockStorage extends MassStorage<BlockFormat> {\n    setBlockDisk(drive: number, blockDisk: BlockDisk): Promise<void>;\n    getBlockDisk(drive: number): Promise<BlockDisk | null>;\n}\n\nexport function isBlockStorage(\n    storage: MassStorage<unknown>\n): storage is BlockStorage {\n    return 'getBlockDisk' in storage;\n}\n","import type { KnownKeys } from '../types';\n\nexport const BUTTON = {\n    // Buttons\n    A: 0,\n    B: 1,\n    X: 2,\n    Y: 3,\n\n    // Triggers\n    L1: 4,\n    R1: 5,\n\n    // Analog stick buttons\n    L3: 6,\n    R3: 7,\n\n    // Special\n    START: 8,\n    SELECT: 9,\n    LOGO: 10,\n\n    // D pad\n    UP: 11,\n    DOWN: 12,\n    LEFT: 13,\n    RIGHT: 14,\n} as const;\n\nexport type ButtonType = KnownKeys<typeof BUTTON>;\n\n/**\n * A `GamepadConfiguration` maps buttons on the controller to Apple Paddle\n * buttons or keys on the keyboard. If the value is a number, it must be\n * 0 | 1 | 2 and will map to the corresponding paddle button. If the value\n * is a string, the _first_ character of the string is used as a key to\n * press on the keyboard.\n */\nexport type GamepadConfiguration = {\n    [K in ButtonType]?: 0 | 1 | 2 | string;\n};\n","import Apple2IO from '../apple2io';\nimport { BUTTON, ButtonType, GamepadConfiguration } from './types';\n\nexport let gamepad: Gamepad | null = null;\n\nconst DEFAULT_GAMEPAD: GamepadConfiguration = {\n    A: 0,\n    B: 1,\n    L1: 0,\n    R1: 1,\n    START: '\\x1B',\n} as const;\n\n/**\n * An array with 16 entries. For each entry _e_:\n *\n * *   if _e_ <= 0, then _-e_ is 0 | 1 | 2 and represents a joystick button;\n * *   if _e_ > 0, then _e_ is a key on the keyboard that is pressed;\n * *   if _e_ is undefined, nothing happens.\n */\nconst gamepadMap: Array<number | undefined> = [];\n/**\n * An array with 16 entries saying whether or not the given button is\n * currently pressed.\n */\nconst gamepadState: boolean[] = [];\nlet flipX = false;\nlet flipY = false;\n\nwindow.addEventListener('gamepadconnected', function (e: GamepadEvent) {\n    gamepad = e.gamepad;\n});\n\nexport function processGamepad(io: Apple2IO) {\n    // Always use the first gamepad\n    gamepad = navigator.getGamepads()[0];\n    if (!gamepad) {\n        return;\n    }\n    const x = (gamepad.axes[0] * 1.414 + 1) / 2.0;\n    const y = (gamepad.axes[1] * 1.414 + 1) / 2.0;\n    io.paddle(0, flipX ? 1.0 - x : x);\n    io.paddle(1, flipY ? 1.0 - y : y);\n    for (let idx = 0; idx < gamepad.buttons.length; idx++) {\n        const val = gamepadMap[idx];\n        if (val !== undefined) {\n            const old = gamepadState[idx];\n            const button = gamepad.buttons[idx];\n            let pressed: boolean;\n            if (typeof button === 'object') {\n                pressed = button.pressed;\n            } else {\n                pressed = button === 1.0;\n            }\n\n            if (pressed && !old) {\n                if (val <= 0) {\n                    io.buttonDown(-val as 0 | 1 | 2);\n                } else {\n                    io.keyDown(val);\n                }\n            } else if (!pressed && old) {\n                if (val <= 0) {\n                    io.buttonUp(-val as 0 | 1 | 2);\n                } else {\n                    io.keyUp();\n                }\n            }\n            gamepadState[idx] = pressed;\n        }\n    }\n}\n\nexport function configGamepad(configFlipX: boolean, configFlipY: boolean) {\n    flipX = configFlipX;\n    flipY = configFlipY;\n}\n\nexport function initGamepad(data?: GamepadConfiguration) {\n    // Clear map\n    for (let idx = 0; idx < 16; idx++) {\n        gamepadMap[idx] = undefined;\n    }\n    const map = data || DEFAULT_GAMEPAD;\n    for (const entry of Object.entries(map)) {\n        const key = entry[0] as ButtonType;\n        const val = entry[1] as number | string;\n        let mapVal;\n        if (typeof val === 'string') {\n            mapVal = val.charCodeAt(0);\n        } else {\n            mapVal = -val;\n        }\n        if (key in BUTTON) {\n            gamepadMap[BUTTON[key]] = mapVal;\n        } else {\n            gamepadMap[parseInt(key, 10)] = mapVal;\n        }\n    }\n}\n","import { byte, DeepMemberOf, KnownKeys } from '../types';\nimport Apple2IO from '../apple2io';\nimport { CPU6502 } from '@whscullin/cpu6502';\nimport { debug, toHex } from '../util';\n\n// keycode: [plain, cntl, shift]\nconst keymap = {\n    // Most of these won't happen\n    0x00: [0x00, 0x00, 0x00], //\n    0x01: [0x01, 0x01, 0x01], //\n    0x02: [0x02, 0x02, 0x02], //\n    0x03: [0x03, 0x03, 0x03], //\n    0x04: [0x04, 0x04, 0x04], //\n    0x05: [0x05, 0x05, 0x05], //\n    0x06: [0x06, 0x06, 0x06], //\n    0x07: [0x07, 0x07, 0x07], //\n    0x08: [0x7f, 0x7f, 0x7f], // BS/DELETE\n    0x09: [0x09, 0x09, 0x09], // TAB\n    0x0a: [0x0a, 0x0a, 0x0a], //\n    0x0b: [0x0b, 0x0b, 0x0b], //\n    0x0c: [0x0c, 0x0c, 0x0c], //\n    0x0d: [0x0d, 0x0d, 0x0d], // CR\n    0x0e: [0x0e, 0x0e, 0x0e], //\n    0x0f: [0x0f, 0x0f, 0x0f], //\n\n    0x10: [0xff, 0xff, 0xff], // SHIFT\n    0x11: [0xff, 0xff, 0xff], // CTRL\n    0x12: [0xff, 0xff, 0xff], // ALT/OPTION\n    0x13: [0x13, 0x13, 0x13], //\n    0x14: [0x14, 0x14, 0x14], //\n    0x15: [0x15, 0x15, 0x15], //\n    0x16: [0x16, 0x16, 0x16], //\n    0x17: [0x17, 0x17, 0x18], //\n    0x18: [0x18, 0x18, 0x18], //\n    0x19: [0x19, 0x19, 0x19], //\n    0x1a: [0x1a, 0x1a, 0x1a], //\n    0x1b: [0x1b, 0x1b, 0x1b], // ESC\n    0x1c: [0x1c, 0x1c, 0x1c], //\n    0x1d: [0x1d, 0x1d, 0x1d], //\n    0x1e: [0x1e, 0x1e, 0x1e], //\n    0x1f: [0x1f, 0x1f, 0x1f], //\n\n    // Most of these besides space won't happen\n    0x20: [0x20, 0x20, 0x20], //\n    0x21: [0x21, 0x21, 0x21], //\n    0x22: [0x22, 0x22, 0x22], //\n    0x23: [0x23, 0x23, 0x23], //\n    0x24: [0x24, 0x24, 0x24], //\n    0x25: [0x08, 0x08, 0x08], // <- left\n    0x26: [0x0b, 0x0b, 0x0b], // ^ up\n    0x27: [0x15, 0x15, 0x15], // -> right\n    0x28: [0x0a, 0x0a, 0x0a], // v down\n    0x29: [0x29, 0x29, 0x29], // )\n    0x2a: [0x2a, 0x2a, 0x2a], // *\n    0x2b: [0x2b, 0x2b, 0x2b], // +\n    0x2c: [0x2c, 0x2c, 0x3c], // , - <\n    0x2d: [0x2d, 0x2d, 0x5f], // - - _\n    0x2e: [0x2e, 0x2e, 0x3e], // . - >\n    0x2f: [0x2f, 0x2f, 0x3f], // / - ?\n\n    0x30: [0x30, 0x30, 0x29], // 0 - )\n    0x31: [0x31, 0x31, 0x21], // 1 - !\n    0x32: [0x32, 0x00, 0x40], // 2 - @\n    0x33: [0x33, 0x33, 0x23], // 3 - #\n    0x34: [0x34, 0x34, 0x24], // 4 - $\n    0x35: [0x35, 0x35, 0x25], // 5 - %\n    0x36: [0x36, 0x36, 0x5e], // 6 - ^\n    0x37: [0x37, 0x37, 0x26], // 7 - &\n    0x38: [0x38, 0x38, 0x2a], // 8 - *\n    0x39: [0x39, 0x39, 0x28], // 9 - (\n    0x3a: [0x3a, 0x3a, 0x3a], // :\n    0x3b: [0x3b, 0x3b, 0x3a], // ; - :\n    0x3c: [0x3c, 0x3c, 0x3c], // <\n    0x3d: [0x3d, 0x3d, 0x2b], // = - +\n    0x3e: [0x3e, 0x3e, 0x3e], // >\n    0x3f: [0x3f, 0x3f, 0x3f], // ?\n\n    // Alpha and control\n    0x40: [0x40, 0x00, 0x40], // @\n    0x41: [0x61, 0x01, 0x41], // A\n    0x42: [0x62, 0x02, 0x42], // B\n    0x43: [0x63, 0x03, 0x43], // C - BRK\n    0x44: [0x64, 0x04, 0x44], // D\n    0x45: [0x65, 0x05, 0x45], // E\n    0x46: [0x66, 0x06, 0x46], // F\n    0x47: [0x67, 0x07, 0x47], // G - BELL\n    0x48: [0x68, 0x08, 0x48], // H\n    0x49: [0x69, 0x09, 0x49], // I - TAB\n    0x4a: [0x6a, 0x0a, 0x4a], // J - NL\n    0x4b: [0x6b, 0x0b, 0x4b], // K - VT\n    0x4c: [0x6c, 0x0c, 0x4c], // L\n    0x4d: [0x6d, 0x0d, 0x4d], // M - CR\n    0x4e: [0x6e, 0x0e, 0x4e], // N\n    0x4f: [0x6f, 0x0f, 0x4f], // O\n\n    0x50: [0x70, 0x10, 0x50], // P\n    0x51: [0x71, 0x11, 0x51], // Q\n    0x52: [0x72, 0x12, 0x52], // R\n    0x53: [0x73, 0x13, 0x53], // S\n    0x54: [0x74, 0x14, 0x54], // T\n    0x55: [0x75, 0x15, 0x55], // U\n    0x56: [0x76, 0x16, 0x56], // V\n    0x57: [0x77, 0x17, 0x57], // W\n    0x58: [0x78, 0x18, 0x58], // X\n    0x59: [0x79, 0x19, 0x59], // Y\n    0x5a: [0x7a, 0x1a, 0x5a], // Z\n    0x5b: [0xff, 0xff, 0xff], // Left window\n    0x5c: [0xff, 0xff, 0xff], // Right window\n    0x5d: [0xff, 0xff, 0xff], // Select\n    0x5e: [0x5e, 0x1e, 0x5e], //\n    0x5f: [0x5f, 0x1f, 0x5f], // _\n\n    // Numeric pad\n    0x60: [0x30, 0x30, 0x30], // 0\n    0x61: [0x31, 0x31, 0x31], // 1\n    0x62: [0x32, 0x32, 0x32], // 2\n    0x63: [0x33, 0x33, 0x33], // 3\n    0x64: [0x34, 0x34, 0x34], // 4\n    0x65: [0x35, 0x35, 0x35], // 5\n    0x66: [0x36, 0x36, 0x36], // 6\n    0x67: [0x37, 0x37, 0x37], // 7\n    0x68: [0x38, 0x38, 0x38], // 8\n    0x69: [0x39, 0x39, 0x39], // 9\n\n    0x6a: [0x2a, 0x2a, 0x2a], // *\n    0x6b: [0x2b, 0x2b, 0x2b], // +\n    0x6d: [0x2d, 0x2d, 0x2d], // -\n    0x6e: [0x2e, 0x2e, 0x2e], // .\n    0x6f: [0x2f, 0x2f, 0x39], // /\n\n    // Stray keys\n    0xad: [0x2d, 0x2d, 0x5f], // - - _\n    0xba: [0x3b, 0x3b, 0x3a], // ; - :\n    0xbb: [0x3d, 0x3d, 0x2b], // = - +\n    0xbc: [0x2c, 0x2c, 0x3c], // , - <\n    0xbd: [0x2d, 0x2d, 0x5f], // - - _\n    0xbe: [0x2e, 0x2e, 0x3e], // . - >\n    0xbf: [0x2f, 0x2f, 0x3f], // / - ?\n    0xc0: [0x60, 0x60, 0x7e], // ` - ~\n    0xdb: [0x5b, 0x1b, 0x7b], // [ - {\n    0xdc: [0x5c, 0x1c, 0x7c], // \\ - |\n    0xdd: [0x5d, 0x1d, 0x7d], // ] - }\n    0xde: [0x27, 0x22, 0x22], // ' - '\n\n    0xff: [0xff, 0xff, 0xff], // No comma line\n} as const;\n\nfunction isKeyboardCode(code: number): code is KnownKeys<typeof keymap> {\n    return code in keymap;\n}\n\nconst uiKitMap = {\n    Dead: 0xff,\n    UIKeyInputLeftArrow: 0x08,\n    UIKeyInputRightArrow: 0x15,\n    UIKeyInputUpArrow: 0x0b,\n    UIKeyInputDownArrow: 0x0a,\n    UIKeyInputEscape: 0x1b,\n} as const;\n\nfunction isUiKitKey(k: string): k is KnownKeys<typeof uiKitMap> {\n    return k in uiKitMap;\n}\n\n// prettier-ignore\nexport const keys2 = [\n    [\n        ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', ':', '-', 'RESET'],\n        ['ESC', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'REPT', 'RETURN'],\n        ['CTRL', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ';', '&larr;', '&rarr;'],\n        ['SHIFT', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', ',', '.', '/', 'SHIFT'],\n        ['POWER', '&nbsp;']\n    ], [\n        ['!', '\"', '#', '$', '%', '&', '\\'', '(', ')', '0', '*', '=', 'RESET'],\n        ['ESC', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', '@', 'REPT', 'RETURN'],\n        ['CTRL', 'A', 'S', 'D', 'F', 'BELL', 'H', 'J', 'K', 'L', '+', '&larr;', '&rarr;'],\n        ['SHIFT', 'Z', 'X', 'C', 'V', 'B', '^', ']', '<', '>', '?', 'SHIFT'],\n        ['POWER', '&nbsp;']\n    ]\n] as const;\n\ntype Key2 = DeepMemberOf<typeof keys2>;\n\n// prettier-ignore\nexport const keys2e = [\n    [\n        ['ESC', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'DELETE'],\n        ['TAB', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '[', ']', '\\\\'],\n        ['CTRL', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ';', '\"', 'RETURN'],\n        ['SHIFT', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', ',', '.', '/', 'SHIFT'],\n        ['LOCK', '`', 'POW', 'OPEN_APPLE', '&nbsp;', 'CLOSED_APPLE', '&larr;', '&rarr;', '&darr;', '&uarr;']\n    ], [\n        ['ESC', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', 'DELETE'],\n        ['TAB', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '{', '}', '|'],\n        ['CTRL', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ':', '\\'', 'RETURN'],\n        ['SHIFT', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', '?', 'SHIFT'],\n        ['CAPS', '~', 'POW', 'OPEN_APPLE', '&nbsp;', 'CLOSED_APPLE', '&larr;', '&rarr;', '&darr;', '&uarr;']\n    ]\n] as const;\n\ntype Key2e = DeepMemberOf<typeof keys2e>;\n\n// prettier-ignore\nconst keyspravetz82 = [\n    [\n        ['!', '\"', '#', '', '%', '&', '\\'', '(', ')', '0', '*', '=', '', 'RST'],\n        ['', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '@', 'RPT', 'RETURN'],\n        ['', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', '+', '[', ']', '&darr;'],\n        ['', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', '?', '', '2'],\n        ['', '&nbsp;']\n    ], [\n        ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', ':', '-', '', 'RST'],\n        ['', '', '', '', '', '', '', '', '', '', '', '', 'RPT', 'RETURN'],\n        ['', '', '', '', '', '', '', '', '', '', ';', '', '', '&darr;'],\n        ['', '', '', '', '', '', '', '', ',', '.', '/', '', '2'],\n        ['', '&nbsp;']\n    ]\n] as const;\n\ntype KeyPravetz82 = DeepMemberOf<typeof keyspravetz82>;\n\ntype Key = Key2 | Key2e | KeyPravetz82;\n\ntype KeyFunction = (key: KeyboardEvent) => void;\n\nexport default class KeyBoard {\n    private kb: HTMLElement;\n    private keys;\n\n    private shifted = false;\n    private controlled = false;\n    private capslocked = true;\n\n    // Initially caps lock on physical keyboard is assumed to be off,\n    // but on emulated keyboard it is on.\n    private capslockKeyUsed = false;\n    private optioned = false;\n    private commanded = false;\n\n    private functions: Record<string, KeyFunction> = {};\n\n    constructor(\n        private cpu: CPU6502,\n        private io: Apple2IO,\n        private layout: string\n    ) {\n        switch (this.layout) {\n            case 'apple2e':\n                this.keys = keys2e;\n                break;\n            case 'pravetz82':\n                this.keys = keyspravetz82;\n                this.capslocked = false; // Pravetz 82 starts with CAPS LOCK off.\n                break;\n            default:\n                this.keys = keys2;\n                break;\n        }\n\n        window.addEventListener('keydown', this.keydown);\n        window.addEventListener('keyup', this.keyup);\n    }\n\n    setFunction(key: string, fn: KeyFunction) {\n        this.functions[key] = fn;\n    }\n\n    mapKeyEvent(evt: KeyboardEvent) {\n        const code = evt.keyCode;\n        let key: byte = 0xff;\n\n        if (isUiKitKey(evt.key)) {\n            key = uiKitMap[evt.key];\n        } else if (isKeyboardCode(code)) {\n            key = keymap[code][evt.shiftKey ? 2 : evt.ctrlKey ? 1 : 0];\n\n            if (code !== 20 && this.capslockKeyUsed) {\n                this.capslockKey(evt.getModifierState('CapsLock'));\n            }\n\n            if (this.capslocked && key >= 0x61 && key <= 0x7a) {\n                key -= 0x20;\n            }\n        } else {\n            debug('Unhandled key = ' + toHex(code));\n        }\n\n        if (key === 0x7f && evt.shiftKey && evt.ctrlKey) {\n            this.cpu.reset();\n            key = 0xff;\n        }\n\n        return key;\n    }\n\n    shiftKey(down: boolean) {\n        const shiftKeys = this.kb.querySelectorAll(\n            this.layout !== 'pravetz82' ? '.key-SHIFT' : '.key-'\n        );\n        this.shifted = down;\n        if (down) {\n            this.io.buttonUp(2);\n            shiftKeys.forEach((key) => {\n                key.classList.add('active');\n            });\n        } else {\n            this.io.buttonDown(2);\n            shiftKeys.forEach((key) => {\n                key.classList.remove('active');\n            });\n        }\n    }\n\n    controlKey(down: boolean) {\n        const ctrlKey = this.kb.querySelector(\n            this.layout !== 'pravetz82' ? '.key-CTRL' : '.key-'\n        );\n        this.controlled = down;\n        if (down) {\n            ctrlKey!.classList.add('active');\n        } else {\n            ctrlKey!.classList.remove('active');\n        }\n    }\n\n    commandKey(down: boolean) {\n        const commandKey = this.kb.querySelector('.key-OPEN_APPLE');\n        if (!commandKey) {\n            return;\n        }\n        this.commanded = down;\n        if (down) {\n            this.io.buttonDown(0);\n            commandKey.classList.add('active');\n        } else {\n            this.io.buttonUp(0);\n            commandKey.classList.remove('active');\n        }\n    }\n\n    optionKey(down: boolean) {\n        const optionKey = this.kb.querySelector('.key-CLOSED_APPLE');\n        if (!optionKey) {\n            return;\n        }\n        this.optioned = down;\n        if (down) {\n            this.io.buttonDown(1);\n            optionKey.classList.add('active');\n        } else {\n            this.io.buttonUp(1);\n            optionKey.classList.remove('active');\n        }\n    }\n\n    /**\n     * Sets the state of the Caps Lock key. It is very complicated.\n     * @param down if `true`, Caps Lock is pressed; if `false` Caps Lock is not pressed;\n     *     if `undefined`, Caps Lock is toggled and its \"used\" state is set to false;\n     *     if called with no arguments, the state is toggled _if_ it has been used before,\n     *     otherwise the used state is set to true.\n     */\n    capslockKey(down?: boolean | undefined) {\n        const capsLock = this.kb.querySelector(\n            this.layout !== 'pravetz82' ? '.key-LOCK' : '.key-2'\n        );\n\n        if (arguments.length === 0) {\n            if (this.capslockKeyUsed) {\n                this.capslocked = !this.capslocked;\n            } else {\n                this.capslockKeyUsed = true;\n            }\n        } else if (down === undefined) {\n            this.capslocked = !this.capslocked;\n            this.capslockKeyUsed = false;\n        } else {\n            this.capslocked = down;\n        }\n\n        if (this.capslocked) {\n            capsLock!.classList.add('active');\n        } else {\n            capsLock!.classList.remove('active');\n        }\n    }\n\n    reset(event: Event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.cpu.reset();\n    }\n\n    create(el: string) {\n        this.kb = document.querySelector(el)!;\n        this.kb.classList.add('layout-' + this.layout);\n        let x, y, row, key, label, label1, label2;\n\n        const buildLabel = (k: string) => {\n            const span = document.createElement('span');\n            span.innerHTML = k;\n            if (k.length > 1 && k.slice(0, 1) !== '&')\n                span.classList.add('small');\n            return span;\n        };\n\n        for (y = 0; y < 5; y++) {\n            row = document.createElement('div');\n            row.classList.add('row');\n            row.classList.add(`row${y}`);\n            this.kb.append(row);\n            for (x = 0; x < this.keys[0][y].length; x++) {\n                const key1 = this.keys[0][y][x];\n                const key2 = this.keys[1][y][x];\n\n                label = document.createElement('div');\n                label1 = buildLabel(key1);\n                label2 = buildLabel(key2);\n\n                key = document.createElement('div');\n                key.classList.add('key');\n                key.classList.add('key-' + key1.replace(/[&#;]/g, ''));\n\n                if (key1.length > 1) {\n                    if (key1 === 'LOCK') key.classList.add('v-center2');\n                    else key.classList.add('v-center');\n                }\n                if (key1 !== key2) {\n                    key.classList.add('key-' + key2.replace(/[&;]/g, ''));\n                    label.append(label2);\n                    label.append(document.createElement('br'));\n                }\n                if (key1 === 'LOCK') {\n                    key.classList.add('active');\n                }\n\n                label.append(label1);\n                key.append(label);\n                key.dataset.key1 = key1;\n                key.dataset.key2 = key2;\n\n                const mouseDown = this.genMouseDown(key, key1, key2);\n                const mouseUp = this.genMouseUp(key);\n                if (window.ontouchstart === undefined) {\n                    key.addEventListener('mousedown', mouseDown);\n                    key.addEventListener('mouseup', mouseUp);\n                    key.addEventListener('mouseleave', mouseUp);\n                } else {\n                    key.addEventListener('touchstart', mouseDown);\n                    key.addEventListener('touchend', mouseUp);\n                    key.addEventListener('touchleave', mouseUp);\n                }\n\n                row.append(key);\n            }\n        }\n    }\n\n    private genMouseDown(target: HTMLElement, key1: Key, key2: Key) {\n        return (ev: MouseEvent) => {\n            ev.preventDefault();\n            target.classList.add('pressed');\n\n            let key: string;\n            if (this.layout !== 'pravetz82') {\n                key = this.shifted ? key2 : key1;\n            } else {\n                // In Pravetz 82, the operation of the shift key is inverted.\n                //  The top row (cyrillic) is used by default and shift switches to using the bottow row (latin).\n                key = this.shifted ? key1 : key2;\n            }\n            switch (key) {\n                case 'BELL':\n                    key = 'G';\n                    break;\n                case 'RETURN':\n                    key = '\\r';\n                    break;\n                case 'TAB':\n                    key = '\\t';\n                    break;\n                case 'DELETE':\n                    key = '\\x7F';\n                    break;\n                case '&larr;':\n                    key = '\\x08';\n                    break;\n                case '&rarr;':\n                    key = '\\x15';\n                    break;\n                case '&darr;':\n                    if (this.layout !== 'pravetz82') {\n                        key = '\\x0A';\n                    } else {\n                        // On Pravetz 82 this key has no action.\n                    }\n                    break;\n                case '&uarr;':\n                    key = '\\x0B';\n                    break;\n                case '&nbsp;':\n                    key = ' ';\n                    break;\n                case 'ESC':\n                    key = '\\x1B';\n                    break;\n                default:\n                    break;\n            }\n\n            if (this.layout === 'pravetz82') {\n                // Pravetz 82 specific remapping.\n                //  Lower-case lattin letters are replaced with cyrillic capital letters.\n                switch (key) {\n                    // First row.\n                    case '':\n                        key = '^';\n                        break;\n                    case '':\n                        // FIXME: Which character should this map to?\n                        break;\n\n                    // Second row.\n                    case '': // Pravetz 82 ESC key in cyrillic.\n                        key = '\\x1B';\n                        break;\n                    case '':\n                        key = 'q';\n                        break;\n                    case '':\n                        key = 'w';\n                        break;\n                    case '':\n                        key = 'e';\n                        break;\n                    case '':\n                        key = 'r';\n                        break;\n                    case '':\n                        key = 't';\n                        break;\n                    case '':\n                        key = 'y';\n                        break;\n                    case '':\n                        key = 'u';\n                        break;\n                    case '':\n                        key = 'i';\n                        break;\n                    case '':\n                        key = 'o';\n                        break;\n                    case '':\n                        key = 'p';\n                        break;\n                    case '':\n                        key = '@';\n                        break;\n                    case '@':\n                        key = '`';\n                        break;\n\n                    // Third row.\n                    case '':\n                        key = 'a';\n                        break;\n                    case '':\n                        key = 's';\n                        break;\n                    case '':\n                        key = 'd';\n                        break;\n                    case '':\n                        key = 'f';\n                        break;\n                    case '':\n                        key = 'g';\n                        break;\n                    case '':\n                        key = 'h';\n                        break;\n                    case '':\n                        key = 'j';\n                        break;\n                    case '':\n                        key = 'k';\n                        break;\n                    case '':\n                        key = 'l';\n                        break;\n                    case '':\n                        key = '[';\n                        break;\n                    case '':\n                        key = ']';\n                        break;\n                    case '[':\n                        key = '{';\n                        break;\n                    case ']':\n                        key = '}';\n                        break;\n\n                    // Fourth row.\n                    case '':\n                        key = 'z';\n                        break;\n                    case '':\n                        key = 'x';\n                        break;\n                    case '':\n                        key = 'c';\n                        break;\n                    case '':\n                        key = 'v';\n                        break;\n                    case '':\n                        key = 'b';\n                        break;\n                    case '':\n                        key = 'n';\n                        break;\n                    case '':\n                        key = 'm';\n                        break;\n\n                    default:\n                        break;\n                }\n            }\n\n            if (key.length > 1) {\n                switch (key) {\n                    case 'SHIFT':\n                    case '': // Shift on Pravetz 82 switches to cyrillic.\n                        this.shiftKey(!this.shifted);\n                        break;\n                    case 'CTRL':\n                    case '': // Pravetz 82 CTRL key in cyrillic.\n                        this.controlKey(!this.controlled);\n                        break;\n                    case 'CAPS':\n                    case 'LOCK':\n                    case '2': // CAPS LOCK on Pravetz 82 switches between cyrillic and latin.\n                        this.capslockKey(undefined);\n                        break;\n                    case 'POW':\n                    case 'POWER':\n                    case '': // Pravetz 82 power key in cyrillic.\n                        if (window.confirm('Power Cycle?'))\n                            window.location.reload();\n                        break;\n                    case 'RESET':\n                    case 'RST':\n                        this.cpu.reset();\n                        break;\n                    case 'OPEN_APPLE':\n                        this.commandKey(!this.commanded);\n                        break;\n                    case 'CLOSED_APPLE':\n                        this.optionKey(!this.optioned);\n                        break;\n                    case 'RPT': // Pravetz 82 \"repeat\" key.\n                        // Do nothing.\n                        break;\n                    default:\n                        break;\n                }\n            } else {\n                if (this.controlled && key >= '@' && key <= '_') {\n                    this.io.keyDown(key.charCodeAt(0) - 0x40);\n                } else if (\n                    this.layout === 'apple2e' &&\n                    !this.shifted &&\n                    !this.capslocked &&\n                    key >= 'A' &&\n                    key <= 'Z'\n                ) {\n                    this.io.keyDown(key.charCodeAt(0) + 0x20);\n                } else if (\n                    this.layout === 'pravetz82' &&\n                    !this.shifted &&\n                    this.capslocked &&\n                    key >= 'a' &&\n                    key <= 'z'\n                ) {\n                    // CAPS LOCK on Pravetz 82 switches between cyrillic and latin.\n                    this.io.keyDown(key.charCodeAt(0) - 0x20);\n                } else {\n                    this.io.keyDown(key.charCodeAt(0));\n                }\n            }\n        };\n    }\n\n    private dialogOpen() {\n        return !!document.querySelector('.modal.is-open');\n    }\n\n    private genMouseUp(target: HTMLElement) {\n        return () => target.classList.remove('pressed');\n    }\n\n    private keydown = (evt: KeyboardEvent) => {\n        if (\n            !this.dialogOpen() &&\n            (!evt.metaKey || evt.ctrlKey || this.layout === 'apple2e')\n        ) {\n            evt.preventDefault();\n\n            const key = this.mapKeyEvent(evt);\n            if (key !== 0xff) {\n                this.io.keyDown(key);\n                return;\n            }\n        }\n\n        if (evt.key === 'Shift') {\n            this.shiftKey(true);\n        } else if (evt.key === 'CapsLock') {\n            this.capslockKey();\n        } else if (evt.key === 'Control') {\n            this.controlKey(true);\n        } else if (evt.key === 'Meta') {\n            // AKA Command\n            this.commandKey(true);\n        } else if (evt.key === 'Alt') {\n            if (evt.location === 1) {\n                this.commandKey(true);\n            } else {\n                this.optionKey(true);\n            }\n        } else {\n            if (evt.key in this.functions) {\n                this.functions[evt.key](evt);\n                evt.preventDefault();\n            }\n        }\n    };\n\n    private keyup = (evt: KeyboardEvent) => {\n        if (!this.dialogOpen()) {\n            this.io.keyUp();\n        }\n\n        if (evt.key === 'Shift') {\n            // Shift\n            this.shiftKey(false);\n        } else if (evt.key === 'Control') {\n            // Control\n            this.controlKey(false);\n        } else if (evt.key === 'Meta') {\n            // AKA Command\n            this.commandKey(false);\n        } else if (evt.key === 'Alt') {\n            // Alt\n            if (evt.location === 1) {\n                this.commandKey(false);\n            } else {\n                this.optionKey(false);\n            }\n        }\n    };\n}\n","import { TapeData } from '../types';\nimport Apple2IO from '../apple2io';\nimport { debug } from '../util';\n\nexport const TAPE_TYPES = ['wav', 'aiff', 'aif', 'mp3', 'm4a'] as const;\n\nexport default class Tape {\n    constructor(private readonly io: Apple2IO) {}\n\n    public doLoadLocalTape(file: File, done?: () => void) {\n        const kHz = this.io.getKHz();\n\n        // Audio Buffer Source\n        let context: AudioContext;\n        if (AudioContext) {\n            context = new AudioContext();\n        } else {\n            window.alert('Not supported by your browser');\n            done && done();\n            return;\n        }\n\n        const fileReader = new FileReader();\n        fileReader.onload = (ev: ProgressEvent) => {\n            const target: FileReader = ev.target as FileReader;\n            const result: ArrayBuffer = target.result as ArrayBuffer;\n            context.decodeAudioData(result).then(\n                (buffer) => {\n                    const buf: TapeData = [];\n                    const data = buffer.getChannelData(0);\n                    let datum = data[0];\n                    let old = datum > 0.0,\n                        current;\n                    let last = 0;\n                    let delta: number;\n                    debug(`Sample Count: ${data.length}`);\n                    debug(`Sample rate: ${buffer.sampleRate}`);\n                    for (let idx = 1; idx < data.length; idx++) {\n                        datum = data[idx];\n                        if (datum > 0.1 || datum < -0.1) {\n                            current = datum > 0.0;\n                            if (current !== old) {\n                                delta = idx - last;\n                                if (delta > 2000000) {\n                                    delta = 2000000;\n                                }\n                                let ival = (delta / buffer.sampleRate) * 1000;\n                                if (ival >= 0.55 && ival < 0.75) {\n                                    ival = 0.65; // Header\n                                } else if (ival >= 0.175 && ival < 0.225) {\n                                    ival = 0.2; // sync 1\n                                } else if (ival >= 0.225 && ival < 0.275) {\n                                    ival = 0.25; // 0 / sync 2\n                                } else if (ival >= 0.45 && ival < 0.55) {\n                                    ival = 0.5; // 1\n                                } else {\n                                    // debug(idx + ' ' + buf.length + ' ' + ival);\n                                }\n                                buf.push([ival * kHz, current]);\n                                old = current;\n                                last = idx;\n                            }\n                        }\n                    }\n                    this.io.setTape(buf);\n                    if (done) {\n                        done();\n                    }\n                },\n                (error: Error) => {\n                    window.alert(error.message);\n                }\n            );\n        };\n        fileReader.readAsArrayBuffer(file);\n    }\n}\n","import { byte } from 'js/types';\n\n/** Map from token to keyword */\nexport const TOKEN_TO_STRING: Record<byte, string> = {\n    0x80: 'END',\n    0x81: 'FOR',\n    0x82: 'NEXT',\n    0x83: 'DATA',\n    0x84: 'INPUT',\n    0x85: 'DEL',\n    0x86: 'DIM',\n    0x87: 'READ',\n    0x88: 'GR',\n    0x89: 'TEXT',\n    0x8a: 'PR#',\n    0x8b: 'IN#',\n    0x8c: 'CALL',\n    0x8d: 'PLOT',\n    0x8e: 'HLIN',\n    0x8f: 'VLIN',\n    0x90: 'HGR2',\n    0x91: 'HGR',\n    0x92: 'HCOLOR=',\n    0x93: 'HPLOT',\n    0x94: 'DRAW',\n    0x95: 'XDRAW',\n    0x96: 'HTAB',\n    0x97: 'HOME',\n    0x98: 'ROT=',\n    0x99: 'SCALE=',\n    0x9a: 'SHLOAD',\n    0x9b: 'TRACE',\n    0x9c: 'NOTRACE',\n    0x9d: 'NORMAL',\n    0x9e: 'INVERSE',\n    0x9f: 'FLASH',\n    0xa0: 'COLOR=',\n    0xa1: 'POP=',\n    0xa2: 'VTAB',\n    0xa3: 'HIMEM:',\n    0xa4: 'LOMEM:',\n    0xa5: 'ONERR',\n    0xa6: 'RESUME',\n    0xa7: 'RECALL',\n    0xa8: 'STORE',\n    0xa9: 'SPEED=',\n    0xaa: 'LET',\n    0xab: 'GOTO',\n    0xac: 'RUN',\n    0xad: 'IF',\n    0xae: 'RESTORE',\n    0xaf: '&',\n    0xb0: 'GOSUB',\n    0xb1: 'RETURN',\n    0xb2: 'REM',\n    0xb3: 'STOP',\n    0xb4: 'ON',\n    0xb5: 'WAIT',\n    0xb6: 'LOAD',\n    0xb7: 'SAVE',\n    0xb8: 'DEF',\n    0xb9: 'POKE',\n    0xba: 'PRINT',\n    0xbb: 'CONT',\n    0xbc: 'LIST',\n    0xbd: 'CLEAR',\n    0xbe: 'GET',\n    0xbf: 'NEW',\n    0xc0: 'TAB(',\n    0xc1: 'TO',\n    0xc2: 'FN',\n    0xc3: 'SPC(',\n    0xc4: 'THEN',\n    0xc5: 'AT',\n    0xc6: 'NOT',\n    0xc7: 'STEP',\n    0xc8: '+',\n    0xc9: '-',\n    0xca: '*',\n    0xcb: '/',\n    0xcc: '^',\n    0xcd: 'AND',\n    0xce: 'OR',\n    0xcf: '>',\n    0xd0: '=',\n    0xd1: '<',\n    0xd2: 'SGN',\n    0xd3: 'INT',\n    0xd4: 'ABS',\n    0xd5: 'USR',\n    0xd6: 'FRE',\n    0xd7: 'SCRN(',\n    0xd8: 'PDL',\n    0xd9: 'POS',\n    0xda: 'SQR',\n    0xdb: 'RND',\n    0xdc: 'LOG',\n    0xdd: 'EXP',\n    0xde: 'COS',\n    0xdf: 'SIN',\n    0xe0: 'TAN',\n    0xe1: 'ATN',\n    0xe2: 'PEEK',\n    0xe3: 'LEN',\n    0xe4: 'STR$',\n    0xe5: 'VAL',\n    0xe6: 'ASC',\n    0xe7: 'CHR$',\n    0xe8: 'LEFT$',\n    0xe9: 'RIGHT$',\n    0xea: 'MID$',\n};\n\n/** Map from keyword to token. */\nexport const STRING_TO_TOKEN: Record<string, byte> = {\n    END: 0x80,\n    FOR: 0x81,\n    NEXT: 0x82,\n    DATA: 0x83,\n    INPUT: 0x84,\n    DEL: 0x85,\n    DIM: 0x86,\n    READ: 0x87,\n    GR: 0x88,\n    TEXT: 0x89,\n    'PR#': 0x8a,\n    'IN#': 0x8b,\n    CALL: 0x8c,\n    PLOT: 0x8d,\n    HLIN: 0x8e,\n    VLIN: 0x8f,\n    HGR2: 0x90,\n    HGR: 0x91,\n    'HCOLOR=': 0x92,\n    HPLOT: 0x93,\n    DRAW: 0x94,\n    XDRAW: 0x95,\n    HTAB: 0x96,\n    HOME: 0x97,\n    'ROT=': 0x98,\n    'SCALE=': 0x99,\n    SHLOAD: 0x9a,\n    TRACE: 0x9b,\n    NOTRACE: 0x9c,\n    NORMAL: 0x9d,\n    INVERSE: 0x9e,\n    FLASH: 0x9f,\n    'COLOR=': 0xa0,\n    'POP=': 0xa1,\n    VTAB: 0xa2,\n    'HIMEM:': 0xa3,\n    'LOMEM:': 0xa4,\n    ONERR: 0xa5,\n    RESUME: 0xa6,\n    RECALL: 0xa7,\n    STORE: 0xa8,\n    'SPEED=': 0xa9,\n    LET: 0xaa,\n    GOTO: 0xab,\n    RUN: 0xac,\n    IF: 0xad,\n    RESTORE: 0xae,\n    '&': 0xaf,\n    GOSUB: 0xb0,\n    RETURN: 0xb1,\n    REM: 0xb2,\n    STOP: 0xb3,\n    ON: 0xb4,\n    WAIT: 0xb5,\n    LOAD: 0xb6,\n    SAVE: 0xb7,\n    DEF: 0xb8,\n    POKE: 0xb9,\n    PRINT: 0xba,\n    CONT: 0xbb,\n    LIST: 0xbc,\n    CLEAR: 0xbd,\n    GET: 0xbe,\n    NEW: 0xbf,\n    'TAB(': 0xc0,\n    TO: 0xc1,\n    FN: 0xc2,\n    'SPC(': 0xc3,\n    THEN: 0xc4,\n    AT: 0xc5,\n    NOT: 0xc6,\n    STEP: 0xc7,\n    '+': 0xc8,\n    '-': 0xc9,\n    '*': 0xca,\n    '/': 0xcb,\n    '^': 0xcc,\n    AND: 0xcd,\n    OR: 0xce,\n    '>': 0xcf,\n    '=': 0xd0,\n    '<': 0xd1,\n    SGN: 0xd2,\n    INT: 0xd3,\n    ABS: 0xd4,\n    USR: 0xd5,\n    FRE: 0xd6,\n    'SCRN(': 0xd7,\n    PDL: 0xd8,\n    POS: 0xd9,\n    SQR: 0xda,\n    RND: 0xdb,\n    LOG: 0xdc,\n    EXP: 0xdd,\n    COS: 0xde,\n    SIN: 0xdf,\n    TAN: 0xe0,\n    ATN: 0xe1,\n    PEEK: 0xe2,\n    LEN: 0xe3,\n    STR$: 0xe4,\n    VAL: 0xe5,\n    ASC: 0xe6,\n    CHR$: 0xe7,\n    LEFT$: 0xe8,\n    RIGHT$: 0xe9,\n    MID$: 0xea,\n};\n","/*\n * Zero page locations used by Applesoft. The names come from\n * the commented decompilation produced by the Merlin Pro\n * assembler, revision 4/27/84. There is evidence from\n * https://www.pagetable.com/?p=774 that the original Microsoft\n * BASIC source code used these names as well.\n */\n\n/** Start of program (word) */\nexport const TXTTAB = 0x67;\n/** Start of variables (word) */\nexport const VARTAB = 0x69;\n/** Start of arrays (word) */\nexport const ARYTAB = 0x6b;\n/** End of strings (word). (Strings are allocated down from HIMEM.) */\nexport const STREND = 0x6d;\n/** Current line */\nexport const CURLINE = 0x75;\n/** Floating Point accumulator (float) */\nexport const FAC = 0x9d;\n/** Floating Point arguments (float) */\nexport const ARG = 0xa5;\n/**\n * End of program (word). This is actually 1 or 2 bytes past the three\n * zero bytes that end the program.\n */\nexport const PRGEND = 0xaf;\n","import { byte, word, ReadonlyUint8Array, Memory } from '../types';\nimport { toHex } from 'js/util';\nimport { TOKEN_TO_STRING, STRING_TO_TOKEN } from './tokens';\nimport { TXTTAB, PRGEND } from './zeropage';\n\nconst LETTERS =\n    '                                ' +\n    ' !\"#$%&\\'()*+,-./0123456789:;<=>?' +\n    '@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_' +\n    '`abcdefghijklmnopqrstuvwxyz{|}~ ';\n\n/**\n * Resolves a token value to a token string or character.\n *\n * @param token\n * @returns string representing token\n */\nconst resolveToken = (token: byte) => {\n    let tokenString;\n    if (token >= 0x80 && token <= 0xea) {\n        tokenString = TOKEN_TO_STRING[token];\n    } else if (LETTERS[token] !== undefined) {\n        tokenString = LETTERS[token];\n    } else {\n        tokenString = `[${toHex(token)}]`;\n    }\n    return tokenString;\n};\n\ninterface ListOptions {\n    apple2: 'e' | 'plus';\n    columns: number; // usually 40 or 80\n}\n\nconst DEFAULT_LIST_OPTIONS: ListOptions = {\n    apple2: 'e',\n    columns: 40,\n};\n\ninterface DecompileOptions {\n    style: 'compact' | 'pretty';\n}\n\nconst DEFAULT_DECOMPILE_OPTIONS: DecompileOptions = {\n    style: 'pretty',\n};\n\nconst MAX_LINES = 32768;\n\nexport default class ApplesoftDecompiler {\n    /**\n     * Returns a decompiler for the program in the given memory.\n     *\n     * The memory is assumed to have set `TXTTAB` and `PRGEND` correctly.\n     */\n    static decompilerFromMemory(ram: Memory): ApplesoftDecompiler {\n        const program: byte[] = [];\n\n        const start =\n            ram.read(0x00, TXTTAB) + (ram.read(0x00, TXTTAB + 1) << 8);\n        const end = ram.read(0x00, PRGEND) + (ram.read(0x00, PRGEND + 1) << 8);\n        if (start >= 0xc000 || end >= 0xc000) {\n            throw new Error(\n                `Program memory ${toHex(start, 4)}-${toHex(\n                    end,\n                    4\n                )} out of range`\n            );\n        }\n        for (let addr = start; addr <= end; addr++) {\n            program.push(ram.read(addr >> 8, addr & 0xff));\n        }\n\n        return new ApplesoftDecompiler(new Uint8Array(program), start);\n    }\n\n    /**\n     * Constructs a decompiler for the given program data. The data is\n     * assumed to be a dump of memory beginning at `base`. If the data\n     * does not cover the whole program, attempting to decompile will\n     * fail.\n     *\n     * @param program The program bytes.\n     * @param base Address of start of program, or 0 to compute start\n     */\n    constructor(\n        private readonly program: ReadonlyUint8Array,\n        private readonly base: word = 0x801\n    ) {\n        if (this.base === 0) {\n            // Signals that we're loading a file from disk, and\n            // addresses are arbitrarily absolute, so we compute\n            // base by taking the next line address and adjusting it to\n            // the actual beginning of the next line.\n            const nextLine = this.wordAt(0);\n            // Start at beginning of first line\n            let nextLineIndex = 4;\n            // Find 0 at end of line\n            while (program[nextLineIndex]) {\n                nextLineIndex++;\n            }\n            // Move to beginning of next line\n            nextLineIndex++;\n            // Adjust base\n            this.base = nextLine - nextLineIndex;\n        }\n    }\n\n    /** Returns the 2-byte word at the given offset. */\n    private wordAt(offset: word): word {\n        return this.program[offset] + (this.program[offset + 1] << 8);\n    }\n\n    /**\n     * Iterates through the lines of the given program in the order of\n     * the linked list of lines, starting from the first line. This\n     * does _not_ mean that all lines in memory will\n     *\n     * @param from First line for which to call the callback.\n     * @param to Last line for which to call the callback.\n     * @param callback A function to call for each line. The first parameter\n     *     is the offset of the line number of the line; the tokens follow.\n     */\n    private forEachLine(\n        from: number,\n        to: number,\n        callback: (offset: word) => void\n    ): void {\n        let count = 0;\n        let offset = 0;\n        let nextLineAddr = this.wordAt(offset);\n        let nextLineNo = this.wordAt(offset + 2);\n        while (nextLineAddr !== 0 && nextLineNo < from) {\n            if (++count > MAX_LINES) {\n                throw new Error('Loop detected in listing');\n            }\n            offset = nextLineAddr;\n            nextLineAddr = this.wordAt(offset);\n            nextLineNo = this.wordAt(offset + 2);\n        }\n        while (nextLineAddr !== 0 && nextLineNo <= to) {\n            if (++count > MAX_LINES) {\n                throw new Error('Loop detected in listing');\n            }\n            callback(offset + 2);\n            offset = nextLineAddr - this.base;\n            nextLineAddr = this.wordAt(offset);\n            nextLineNo = this.wordAt(offset + 2);\n        }\n    }\n\n    /** Lists a single line like an Apple II. */\n    listLine(offset: word, options: ListOptions): string {\n        const lines: string[] = [];\n        let line = '';\n\n        const lineNo = this.wordAt(offset);\n        // The Apple //e prints a space before each line number to make\n        // it easier to edit the lines.  The change is at the subroutine\n        // called at D6F9: on the //e it is SPCLIN (F7AA), on the ][+ it\n        // is LINPRT (ED24).\n        if (options.apple2 === 'e') {\n            line += ' '; // D6F9: JSR SPCLIN\n        }\n        line += `${lineNo} `; // D6FC, always 1 space after line number\n        offset += 2;\n\n        // In the original ROM, the line length is checked immediately\n        // after the line number is printed. For simplicity, this method\n        // always assumes that there is space for one tokenwhich would\n        // have been the case on a realy Apple.\n        while (this.program[offset] !== 0) {\n            if (offset >= this.program.length) {\n                lines.unshift('Unterminated line: ');\n                break;\n            }\n            const token = this.program[offset];\n            if (token >= 0x80 && token <= 0xea) {\n                line += ' '; // D750, always put a space in front of token\n                line += resolveToken(token);\n                line += ' '; // D762, always put a trailing space\n            } else {\n                line += resolveToken(token);\n            }\n            offset++;\n\n            // The Apple //e and ][+ differ in how they choose to break\n            // long lines. In the ][+, D705 prints a newline if the\n            // current column (MON_CH, $24) is greater than or equal to\n            // 33. In the //e, control is passed to GETCH (F7B4), which\n            // uses column 33 in 40-column mode and column 73 in 80-column\n            // mode.\n            //\n            // The ][+ behaves more like a //e when there is an 80-column\n            // card active (programs wrap at column 73).  From what I can\n            // tell (using Virtual ]['s inspector), the 80-column card\n            // keeps MON_CH at zero until the actual column is >= 71, when\n            // it sets it to the actual cursor position - 40.  In the\n            // Videx Videoterm ROM, this fixup happens in BASOUT (CBCD) at\n            // CBE6 by getting the 80-column horizontal cursor position and\n            // subtracting 0x47 (71). If the result is less than zero, then\n            // 0x00 is stored in MON_CH, otherwise 31 is added back and the\n            // result is stored in MON_CH. (The manual is archived at\n            // http://www.apple-iigs.info/doc/fichiers/videoterm.pdf, among\n            // other places.)\n            //\n            // For out purposes, we're just going to use the number of\n            // columns - 7.\n            if (line.length >= options.columns - 7) {\n                line += '\\n';\n                lines.push(line);\n                line = '     ';\n            }\n        }\n        lines.push(line + '\\n');\n        return lines.join('');\n    }\n\n    /**\n     * Lists the program in the same format that an Apple II prints to the\n     * screen.\n     *\n     * This method also accepts a starting and ending line number. Like on\n     * an Apple II, this will print all of the lines between `from` and `to`\n     * (inclusive) regardless of the actual line numbers between them.\n     *\n     * To list a single line, pass the same number for both `from` and `to`.\n     *\n     * @param options The options for formatting the output.\n     * @param from The first line to print (default 0).\n     * @param to The last line to print (default end of program).\n     */\n    list(\n        options: Partial<ListOptions> = {},\n        from: number = 0,\n        to: number = 65536\n    ): string {\n        const allOptions = { ...DEFAULT_LIST_OPTIONS, ...options };\n\n        let result = '';\n        this.forEachLine(from, to, (offset) => {\n            result += this.listLine(offset, allOptions);\n        });\n        return result;\n    }\n\n    /**\n     * Returns a single line for the given compiled line in as little\n     * space as possible.\n     */\n    compactLine(offset: word): string {\n        let result = '';\n        let spaceIf: (nextToken: string) => boolean = () => false;\n\n        const lineNo = this.wordAt(offset);\n        result += lineNo;\n        spaceIf = (nextToken: string) => /^\\d/.test(nextToken);\n        offset += 2;\n\n        while (this.program[offset] !== 0) {\n            if (offset >= this.program.length) {\n                return 'Unterminated line: ' + result;\n            }\n            const token = this.program[offset];\n            let tokenString = resolveToken(token);\n            if (tokenString === 'PRINT') {\n                tokenString = '?';\n            }\n            if (spaceIf(tokenString)) {\n                result += ' ';\n            }\n\n            result += tokenString;\n\n            spaceIf = () => false;\n            if (token === STRING_TO_TOKEN['AT']) {\n                spaceIf = (nextToken) =>\n                    nextToken.toUpperCase().startsWith('N');\n            }\n\n            offset++;\n        }\n        return result;\n    }\n\n    /**\n     * Returns a single line for the compiled line, but with even spacing:\n     *   * space after line number (not before)\n     *   * space before and after colons (`:`)\n     *   * space around equality and assignment operators (`=`, `<=`, etc.)\n     *   * space after tokens, unless it looks like a function call\n     *   * space after commas, but not before\n     */\n    prettyLine(offset: word): string {\n        let result = '';\n        let inString = false;\n        let spaceIf: (char: byte) => boolean = () => false;\n\n        const lineNo = this.wordAt(offset);\n        result += `${lineNo} `;\n        offset += 2;\n\n        while (this.program[offset] !== 0) {\n            if (offset >= this.program.length) {\n                return 'Unterminated line: ' + result;\n            }\n            const token = this.program[offset];\n            const tokenString = resolveToken(token);\n            if (tokenString === '\"') {\n                inString = !inString;\n            }\n\n            if (spaceIf(token) || (!inString && tokenString === ':')) {\n                result += ' ';\n            }\n\n            result += tokenString;\n\n            if (!inString && tokenString === ':') {\n                spaceIf = () => true;\n            } else if (!inString && tokenString === ',') {\n                spaceIf = () => true;\n            } else if (token >= 0xcf && token <= 0xd1) {\n                // For '<', '=', '>', don't add a space between them.\n                spaceIf = (token: byte) => token < 0xcf || token > 0xd1;\n            } else if (token > 0x80 && token < 0xea) {\n                // By default, if a token is followed by an open paren, don't\n                // add a space.\n                spaceIf = (token: byte) => token !== 0x28;\n            } else {\n                // By default, if a literal is followed by a token, add a space.\n                spaceIf = (token: byte) => token >= 0x80 && token <= 0xea;\n            }\n\n            offset++;\n        }\n        return result;\n    }\n\n    /**\n     * Decompiles the program based on the given options.\n     */\n    decompile(\n        options: Partial<DecompileOptions> = {},\n        from: number = 0,\n        to: number = 65536\n    ): string {\n        const allOptions = { ...DEFAULT_DECOMPILE_OPTIONS, ...options };\n\n        const results: string[] = [];\n        this.forEachLine(from, to, (offset) => {\n            results.push(\n                allOptions.style === 'compact'\n                    ? this.compactLine(offset)\n                    : this.prettyLine(offset)\n            );\n        });\n        return results.join('\\n');\n    }\n}\n","import { byte, KnownValues, Memory, word } from '../types';\nimport { STRING_TO_TOKEN } from './tokens';\nimport { TXTTAB, PRGEND, VARTAB, ARYTAB, STREND } from './zeropage';\n\n/** Default address for program start */\nconst PROGRAM_START = 0x801;\n\n/** Parse states. Starts in `NORMAL`. */\nenum STATES {\n    /**\n     * Tries to tokenize the input. Transitions:\n     *   * `\"`: `STRING`\n     *   * `REM`: `COMMENT`\n     *   * `DATA`: `DATA`\n     */\n    NORMAL = 0,\n    /**\n     * Stores the input exactly. Tranistions:\n     *   * `\"`: `NORMAL`\n     */\n    STRING = 1,\n    /** Stores the input exactly up until the end of the line. No transitions. */\n    COMMENT = 2,\n    /**\n     * Stores the input exactly. Transitions:\n     *   * `:`: `NORMAL`\n     *   * `\"`: `DATA_QUOTE`\n     */\n    DATA = 3,\n    /**\n     * Stores the input exactly. Transitions:\n     *   * `\"`: `DATA`\n     */\n    DATA_QUOTE = 4,\n}\n\nfunction writeByte(mem: Memory, addr: word, val: byte) {\n    const page = addr >> 8;\n    const off = addr & 0xff;\n\n    return mem.write(page, off, val);\n}\n\nfunction writeWord(mem: Memory, addr: word, val: byte) {\n    const lsb = val & 0xff;\n    const msb = val >> 8;\n\n    writeByte(mem, addr, lsb);\n    writeByte(mem, addr + 1, msb);\n}\n\nclass LineBuffer implements IterableIterator<string> {\n    private prevChar: number = 0;\n    constructor(\n        private readonly line: string,\n        private curChar: number = 0\n    ) {}\n\n    [Symbol.iterator](): IterableIterator<string> {\n        return this;\n    }\n\n    clone(): LineBuffer {\n        return new LineBuffer(this.line, this.curChar);\n    }\n\n    next(): IteratorResult<string, string | undefined> {\n        if (this.atEnd()) {\n            return { done: true, value: undefined };\n        }\n        this.prevChar = this.curChar;\n        return { done: false, value: this.line[this.curChar++] };\n    }\n\n    /**\n     * Tries to match the input token at the current buffer location. If\n     * the token matches, the current buffer location is advanced passed\n     * the token and this method returns `true`. Otherwise, this method\n     * returns `false`.\n     *\n     * The input is assumed to be an all-uppercase string and the tokens\n     * in the buffer are uppercased before the comparison.\n     *\n     * @param token An all-uppercase string to match.\n     */\n    lookingAtToken(token: string): boolean {\n        const oldCurChar = this.curChar;\n        const oldPrevChar = this.prevChar;\n        let possibleToken = '';\n        for (const char of this) {\n            if (char === ' ') {\n                continue;\n            }\n            possibleToken += char;\n            if (possibleToken.length === token.length) {\n                break;\n            }\n        }\n        if (possibleToken.toUpperCase() === token) {\n            // Matched; set prevChar to before the match.\n            this.prevChar = oldCurChar;\n            return true;\n        }\n        // No match; restore state.\n        this.curChar = oldCurChar;\n        this.prevChar = oldPrevChar;\n        return false;\n    }\n\n    backup() {\n        this.curChar = this.prevChar;\n    }\n\n    peek(): string {\n        if (this.atEnd()) {\n            throw new RangeError(`Reading past the end of ${this.line}`);\n        }\n        return this.line[this.curChar];\n    }\n\n    atEnd(): boolean {\n        return this.curChar >= this.line.length;\n    }\n}\n\nexport default class ApplesoftCompiler {\n    private lines: Map<number, byte[]> = new Map();\n\n    /**\n     * Loads an Applesoft BASIC program into memory.\n     *\n     * @param mem Memory, including zero page, into which the program is\n     *     loaded.\n     * @param program A string with a BASIC program to compile (tokenize).\n     * @param programStart Optional start address of the program. Defaults to\n     *     standard Applesoft program address, 0x801.\n     */\n    static compileToMemory(\n        mem: Memory,\n        program: string,\n        programStart: word = PROGRAM_START\n    ) {\n        const compiler = new ApplesoftCompiler();\n        compiler.compile(program);\n        const compiledProgram: Uint8Array = compiler.program(programStart);\n\n        for (let i = 0; i < compiledProgram.byteLength; i++) {\n            writeByte(mem, programStart + i, compiledProgram[i]);\n        }\n        // Set zero page locations. Applesoft is weird because, when a line\n        // is inserted, PRGEND is copied to VARTAB in the beginning, but then\n        // VARTAB is manipulated to make space for the line, then PRGEND is\n        // set from VARTAB. There's also a bug in NEW at D657 where the carry\n        // flag is not cleared, so it can add 2 or 3. The upshot, though, is\n        // that PRGEND and VARTAB end up being 1 or 2 bytes past the end of\n        // the program. From my tests is the emulator, it's usually 1, so\n        // that's what we're going with here.\n        const prgend = programStart + compiledProgram.byteLength + 1;\n        writeWord(mem, TXTTAB, programStart);\n        writeWord(mem, PRGEND, prgend);\n        writeWord(mem, VARTAB, prgend);\n        writeWord(mem, ARYTAB, prgend);\n        writeWord(mem, STREND, prgend);\n    }\n\n    private readLineNumber(lineBuffer: LineBuffer): number {\n        let lineNoStr = '';\n\n        for (const character of lineBuffer) {\n            if (/\\d/.test(character)) {\n                lineNoStr += character;\n            } else {\n                lineBuffer.backup();\n                break;\n            }\n        }\n        if (lineNoStr.length === 0) {\n            throw new Error('Missing line number');\n        }\n\n        return parseInt(lineNoStr, 10);\n    }\n\n    private readToken(lineBuffer: LineBuffer): byte {\n        // Try to match a token\n        for (const possibleToken in STRING_TO_TOKEN) {\n            if (lineBuffer.lookingAtToken(possibleToken)) {\n                // NOTE(flan): This special token-preference\n                // logic is straight from the Applesoft BASIC\n                // code (D5BE-D5CA in the Apple //e ROM).\n\n                // Found a token\n                if (possibleToken === 'AT' && !lineBuffer.atEnd()) {\n                    const lookAhead = lineBuffer.peek();\n                    // ATN takes precedence over AT\n                    if (lookAhead === 'N') {\n                        lineBuffer.next();\n                        return STRING_TO_TOKEN['ATN'];\n                    }\n                    // TO takes precedence over AT\n                    if (lookAhead === 'O') {\n                        // Backup to before the token\n                        lineBuffer.backup();\n                        // and emit the 'A' (upper- or lower-case)\n                        return lineBuffer.next().value?.charCodeAt(0) ?? 0;\n                    }\n                }\n                return STRING_TO_TOKEN[possibleToken];\n            }\n        }\n\n        // If not a token, output the character upper-cased\n        return lineBuffer.next().value?.toUpperCase().charCodeAt(0) ?? 0;\n    }\n\n    private compileLine(line: string | null | undefined) {\n        const result: byte[] = [];\n        if (!line) {\n            return;\n        }\n\n        const lineBuffer = new LineBuffer(line);\n        let state: KnownValues<typeof STATES> = STATES.NORMAL;\n\n        const lineNumber = this.readLineNumber(lineBuffer);\n        if (lineNumber < 0 || lineNumber > 65535) {\n            throw new Error('Line number out of range');\n        }\n\n        // Read the rest of the line\n        for (const character of lineBuffer) {\n            const charCode = character.charCodeAt(0);\n            switch (state) {\n                case STATES.NORMAL:\n                    // Skip spaces\n                    if (character === ' ') {\n                        break;\n                    }\n\n                    // Transition to parsing a string\n                    if (character === '\"') {\n                        result.push(charCode);\n                        state = STATES.STRING;\n                        break;\n                    }\n\n                    // Shorthand for PRINT (D580 in Apple //e ROM)\n                    if (character === '?') {\n                        result.push(STRING_TO_TOKEN['PRINT']);\n                        break;\n                    }\n\n                    // Try to parse a token or character\n                    lineBuffer.backup();\n                    {\n                        const token = this.readToken(lineBuffer);\n                        if (token === STRING_TO_TOKEN['REM']) {\n                            state = STATES.COMMENT;\n                        }\n                        if (token === STRING_TO_TOKEN['DATA']) {\n                            state = STATES.DATA;\n                        }\n                        result.push(token);\n                    }\n                    break;\n                case STATES.COMMENT:\n                    result.push(character.charCodeAt(0));\n                    break;\n                case STATES.STRING:\n                    if (character === '\"') {\n                        state = STATES.NORMAL;\n                    }\n                    result.push(character.charCodeAt(0));\n                    break;\n                case STATES.DATA:\n                    if (character === ':') {\n                        state = STATES.NORMAL;\n                    }\n                    if (character === '\"') {\n                        state = STATES.DATA_QUOTE;\n                    }\n                    result.push(character.charCodeAt(0));\n                    break;\n                case STATES.DATA_QUOTE:\n                    if (character === '\"') {\n                        state = STATES.DATA;\n                    }\n                    result.push(character.charCodeAt(0));\n                    break;\n            }\n        }\n\n        this.lines.set(lineNumber, result);\n    }\n\n    compile(program: string) {\n        const lines = program.split(/[\\r\\n]+/g);\n\n        while (lines.length) {\n            const line = lines.shift();\n            this.compileLine(line);\n        }\n    }\n\n    /** Returns the compiled program at the given start address. */\n    program(programStart: word = PROGRAM_START): Uint8Array {\n        const result: byte[] = [];\n\n        // Lines can be inserted out of order, but they should be in order\n        // when tokenized.\n        const lineNumbers = [...this.lines.keys()].sort();\n\n        for (const lineNo of lineNumbers) {\n            const lineBytes = this.lines.get(lineNo) || [];\n            const nextLineAddr =\n                programStart + result.length + 4 + lineBytes.length + 1; // +1 for the zero at end of line\n            result.push(nextLineAddr & 0xff, nextLineAddr >> 8);\n            result.push(lineNo & 0xff, lineNo >> 8);\n            result.push(...lineBytes);\n            result.push(0x00);\n        }\n        result.push(0x00, 0x00);\n\n        return new Uint8Array(result);\n    }\n}\n","import { MemoryPages, Restorable } from './types';\n\nexport type bank = 0 | 1;\nexport type pageNo = 1 | 2;\n\nexport interface Region {\n    top: number;\n    bottom: number;\n    left: number;\n    right: number;\n}\n\nexport interface VideoModesState {\n    textMode: boolean;\n    mixedMode: boolean;\n    hiresMode: boolean;\n    pageMode: pageNo;\n    _80colMode: boolean;\n    altCharMode: boolean;\n    an3State: boolean;\n    flag: number;\n}\n\nexport interface VideoPage extends MemoryPages {\n    imageData: ImageData;\n    dirty: Region;\n\n    bank0(): MemoryPages;\n    bank1(): MemoryPages;\n\n    refresh: () => void;\n}\n\nexport interface LoresPage extends VideoPage {\n    getText: () => string;\n}\n\nexport interface HiresPage extends VideoPage {}\n\nexport interface VideoModes extends Restorable<VideoModesState> {\n    textMode: boolean;\n    mixedMode: boolean;\n    hiresMode: boolean;\n    pageMode: pageNo;\n    _80colMode: boolean;\n    altCharMode: boolean;\n    an3State: boolean;\n    doubleHiresMode: boolean;\n\n    flag: number;\n    monoMode: boolean;\n\n    context: CanvasRenderingContext2D;\n\n    page(pageNo: number): void;\n\n    blit(altData?: ImageData): boolean;\n\n    reset(): void;\n\n    setLoresPage(page: pageNo, lores: LoresPage): void;\n    getLoresPage(page: pageNo): LoresPage;\n    setHiresPage(page: pageNo, lores: HiresPage): void;\n    getHiresPage(page: pageNo): HiresPage;\n\n    _80col(on: boolean): void;\n    altChar(on: boolean): void;\n    an3(on: boolean): void;\n    doubleHires(on: boolean): void;\n    hires(on: boolean): void;\n    mixed(on: boolean): void;\n    text(on: boolean): void;\n\n    is80Col(): boolean;\n    isAltChar(): boolean;\n    isDoubleHires(): boolean;\n    isHires(): boolean;\n    isMixed(): boolean;\n    isPage2(): boolean;\n    isText(): boolean;\n\n    mono(on: boolean): void;\n    scanlines(on: boolean): void;\n\n    getText(): string;\n    getCanvasAsBlob(): Promise<Blob>;\n\n    ready: Promise<void>;\n\n    getState(): VideoModesState;\n}\n\nexport async function copyScreenToClipboard(vm: VideoModes) {\n    const text = vm.getText();\n    if (typeof ClipboardItem !== 'undefined') {\n        const data: Record<string, Blob> = {};\n        if (!vm.textMode) {\n            const blob = await vm.getCanvasAsBlob();\n            data[blob.type] = blob;\n        } else {\n            const htmlBlob = new Blob([`<pre>${text}</pre>`], {\n                type: 'text/html',\n            });\n            data[htmlBlob.type] = htmlBlob;\n\n            const textBlob = new Blob([text], {\n                type: 'text/plain',\n            });\n            data[textBlob.type] = textBlob;\n        }\n\n        await navigator.clipboard.write([new ClipboardItem(data)]);\n    } else {\n        await navigator.clipboard.writeText(text);\n    }\n}\n","import { VideoModes } from '../videomodes';\nimport { BOOLEAN_OPTION, OptionHandler } from '../options';\n\nexport const SCREEN_MONO = 'mono_screen';\nexport const SCREEN_FULL_PAGE = 'full_page';\nexport const SCREEN_SCANLINE = 'show_scanlines';\nexport const SCREEN_GL = 'gl_canvas';\n\ndeclare global {\n    interface Document {\n        webkitCancelFullScreen: () => void;\n        webkitIsFullScreen: boolean;\n    }\n    interface Element {\n        webkitRequestFullScreen: (options?: unknown) => void;\n    }\n}\nexport class Screen implements OptionHandler {\n    constructor(private vm: VideoModes) {}\n\n    enterFullScreen = () => {\n        const elem = document.getElementById('screen')!;\n        if (document.fullscreenEnabled) {\n            if (document.fullscreenElement) {\n                void document.exitFullscreen();\n            } else {\n                void elem.requestFullscreen();\n            }\n        } else if (elem.webkitRequestFullScreen) {\n            if (document.webkitIsFullScreen) {\n                document.webkitCancelFullScreen();\n            } else {\n                elem.webkitRequestFullScreen();\n            }\n        }\n    };\n\n    getOptions() {\n        return [\n            {\n                name: 'Screen',\n                options: [\n                    {\n                        name: SCREEN_MONO,\n                        label: 'Mono Screen',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: SCREEN_SCANLINE,\n                        label: 'Show Scanlines',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: SCREEN_FULL_PAGE,\n                        label: 'Full Page',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: SCREEN_GL,\n                        label: 'GL Renderer *',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: true,\n                    },\n                ],\n            },\n        ];\n    }\n\n    setOption(name: string, value: boolean) {\n        switch (name) {\n            case SCREEN_MONO:\n                this.vm.mono(value);\n                break;\n            case SCREEN_FULL_PAGE:\n                this.setFullPage(value);\n                break;\n            case SCREEN_SCANLINE:\n                this.vm.scanlines(value);\n                break;\n        }\n    }\n\n    private setFullPage(on: boolean) {\n        if (on) {\n            document.body.classList.add('full-page');\n        } else {\n            document.body.classList.remove('full-page');\n        }\n    }\n}\n","import Apple2IO from '../apple2io';\nimport { BOOLEAN_OPTION, OptionHandler } from '../options';\n\nconst JOYSTICK_DISABLE = 'disable_mouse';\nconst JOYSTICK_FLIP_X_AXIS = 'flip_x';\nconst JOYSTICK_FLIP_Y_AXIS = 'flip_y';\nconst JOYSTICK_SWAP_AXIS = 'swap_x_y';\n\nlet mouseMode = false;\n\nexport function enableMouseMode(on: boolean) {\n    mouseMode = on;\n}\n\nexport class JoyStick implements OptionHandler {\n    private disableMouseJoystick = false;\n    private flipX = false;\n    private flipY = false;\n    private swapXY = false;\n    private gamepad = false;\n\n    constructor(private io: Apple2IO) {\n        document.addEventListener('mousemove', this.mousemove);\n        document.querySelectorAll('canvas').forEach((canvas) => {\n            canvas.addEventListener('mousedown', (evt) => {\n                if (!this.gamepad && !mouseMode) {\n                    io.buttonDown(evt.which === 1 ? 0 : 1);\n                }\n                evt.preventDefault();\n            });\n            canvas.addEventListener('mouseup', (evt) => {\n                if (!this.gamepad && !mouseMode) {\n                    io.buttonUp(evt.which === 1 ? 0 : 1);\n                }\n            });\n            canvas.addEventListener('contextmenu', (evt) => {\n                evt.preventDefault();\n            });\n        });\n        window.addEventListener('gamepadconnected', (e: GamepadEvent) => {\n            this.gamepad = !!e.gamepad;\n        });\n    }\n\n    getOptions() {\n        return [\n            {\n                name: 'Joystick',\n                options: [\n                    {\n                        name: JOYSTICK_DISABLE,\n                        label: 'Disable Mouse Joystick',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: JOYSTICK_FLIP_X_AXIS,\n                        label: 'Flip X-Axis',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: JOYSTICK_FLIP_Y_AXIS,\n                        label: 'Flip Y-Axis',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                    {\n                        name: JOYSTICK_SWAP_AXIS,\n                        label: 'Swap Axis',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                ],\n            },\n        ];\n    }\n\n    setOption(name: string, value: boolean) {\n        switch (name) {\n            case JOYSTICK_DISABLE:\n                this.io.paddle(0, 0.5);\n                this.io.paddle(1, 0.5);\n                this.disableMouseJoystick = value;\n                break;\n            case JOYSTICK_FLIP_X_AXIS:\n            case JOYSTICK_FLIP_Y_AXIS:\n            case JOYSTICK_SWAP_AXIS:\n        }\n    }\n\n    private mousemove = (evt: MouseEvent) => {\n        if (this.gamepad || this.disableMouseJoystick || mouseMode) {\n            return;\n        }\n\n        const s = document.querySelector<HTMLDivElement>('canvas')!;\n        const offset = s.getBoundingClientRect();\n        let x = (evt.pageX - offset.left) / s.clientWidth;\n        let y = (evt.pageY - offset.top) / s.clientHeight;\n        const z = x;\n\n        if (this.swapXY) {\n            x = y;\n            y = z;\n        }\n\n        this.io.paddle(0, this.flipX ? 1 - x : x);\n        this.io.paddle(1, this.flipY ? 1 - y : y);\n    };\n}\n","import { BOOLEAN_OPTION, SELECT_OPTION, OptionHandler } from '../options';\nimport Apple2IO from '../apple2io';\n\nexport const SYSTEM_TYPE_APPLE2E = 'computer_type2e';\nexport const SYSTEM_TYPE_APPLE2 = 'computer_type2';\nexport const SYSTEM_CPU_ACCELERATED = 'accelerator_toggle';\n\nexport class System implements OptionHandler {\n    constructor(\n        private io: Apple2IO,\n        private e: boolean\n    ) {}\n\n    getOptions() {\n        return [\n            {\n                name: 'Type',\n                options: this.e\n                    ? [\n                          {\n                              name: SYSTEM_TYPE_APPLE2E,\n                              label: ' *',\n                              type: SELECT_OPTION,\n                              defaultVal: 'apple2enh',\n                              values: [\n                                  {\n                                      value: 'apple2enh',\n                                      name: 'Enhanced Apple //e',\n                                  },\n                                  {\n                                      value: 'apple2e',\n                                      name: 'Apple //e',\n                                  },\n                                  {\n                                      value: 'apple2rm',\n                                      name: 'Enhanced Apple //e (Reactive Micro)',\n                                  },\n                                  {\n                                      value: 'apple2ex',\n                                      name: 'Apple //e Extended Debugging',\n                                  },\n                              ],\n                          },\n                      ]\n                    : [\n                          {\n                              name: SYSTEM_TYPE_APPLE2,\n                              label: ' *',\n                              type: SELECT_OPTION,\n                              defaultVal: 'apple2plus',\n                              values: [\n                                  {\n                                      value: 'apple2plus',\n                                      name: 'Apple ][+',\n                                  },\n                                  {\n                                      value: 'apple2',\n                                      name: 'Autostart Apple ][',\n                                  },\n                                  {\n                                      value: 'apple213',\n                                      name: '13 Sector Apple ][',\n                                  },\n                                  {\n                                      value: 'original',\n                                      name: 'Apple ][',\n                                  },\n                                  {\n                                      value: 'apple2j',\n                                      name: 'Apple ][j+',\n                                  },\n                                  {\n                                      value: 'apple2lc',\n                                      name: 'Apple ][+ (lowercase font)',\n                                  },\n                                  {\n                                      value: 'apple2pig',\n                                      name: 'Apple ][+ (pig font)',\n                                  },\n                                  {\n                                      value: 'pravetz82',\n                                      name: 'Pravetz 82',\n                                  },\n                              ],\n                          },\n                      ],\n            },\n            {\n                name: 'CPU',\n                options: [\n                    {\n                        name: SYSTEM_CPU_ACCELERATED,\n                        label: 'Accelerated',\n                        type: BOOLEAN_OPTION,\n                        defaultVal: false,\n                    },\n                ],\n            },\n        ];\n    }\n\n    setOption(name: string, value: boolean) {\n        switch (name) {\n            case SYSTEM_CPU_ACCELERATED:\n                {\n                    const kHz = value ? 4092 : 1023;\n                    this.io.updateKHz(kHz);\n                }\n                break;\n        }\n    }\n}\n","import { bit, byte, memory } from '../types';\nimport { base64_decode, base64_encode } from '../base64';\nimport { bytify, debug, toHex } from '../util';\nimport {\n    NibbleDisk,\n    ENCODING_NIBBLE,\n    JSONDisk,\n    isNibbleDiskFormat,\n    SupportedSectors,\n} from './types';\n\n/**\n * DOS 3.3 Physical sector order (index is physical sector, value is DOS sector).\n */\n// prettier-ignore\nexport const DO = [\n    0x0, 0x7, 0xe, 0x6, 0xd, 0x5, 0xc, 0x4,\n    0xb, 0x3, 0xa, 0x2, 0x9, 0x1, 0x8, 0xf,\n] as const;\n\n/**\n * DOS 3.3 Logical sector order (index is DOS sector, value is physical sector).\n */\n// prettier-ignore\nexport const _DO = [\n    0x0, 0xd, 0xb, 0x9, 0x7, 0x5, 0x3, 0x1,\n    0xe, 0xc, 0xa, 0x8, 0x6, 0x4, 0x2, 0xf,\n] as const;\n\n/**\n * ProDOS Physical sector order (index is physical sector, value is ProDOS sector).\n */\n// prettier-ignore\nexport const PO = [\n    0x0, 0x8, 0x1, 0x9, 0x2, 0xa, 0x3, 0xb,\n    0x4, 0xc, 0x5, 0xd, 0x6, 0xe, 0x7, 0xf,\n] as const;\n\n/**\n * ProDOS Logical sector order (index is ProDOS sector, value is physical sector).\n */\n// prettier-ignore\nexport const _PO = [\n    0x0, 0x2, 0x4, 0x6, 0x8, 0xa, 0xc, 0xe,\n    0x1, 0x3, 0x5, 0x7, 0x9, 0xb, 0xd, 0xf,\n] as const;\n\n/**\n * DOS 13-sector disk physical sector order (index is disk sector, value is\n * physical sector).\n */\nexport const D13O = [\n    0x0, 0xa, 0x7, 0x4, 0x1, 0xb, 0x8, 0x5, 0x2, 0xc, 0x9, 0x6, 0x3,\n] as const;\n\nexport const _D13O = [\n    0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xa, 0xb, 0xc,\n] as const;\n\n// prettier-ignore\nconst TRANS53 = [\n    0xab, 0xad, 0xae, 0xaf, 0xb5, 0xb6, 0xb7, 0xba,\n    0xbb, 0xbd, 0xbe, 0xbf, 0xd6, 0xd7, 0xda, 0xdb,\n    0xdd, 0xde, 0xdf, 0xea, 0xeb, 0xed, 0xee, 0xef,\n    0xf5, 0xf6, 0xf7, 0xfa, 0xfb, 0xfd, 0xfe, 0xff\n] as const;\n\n// prettier-ignore\nexport const DETRANS53 = [\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // A0\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x03, // A8\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x05, 0x06, // B0\n    0x00, 0x00, 0x07, 0x08, 0x00, 0x09, 0x0A, 0x0B, // B8\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // C0\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // C8\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0D, // D0\n    0x00, 0x00, 0x0E, 0x0F, 0x00, 0x10, 0x11, 0x12, // D8\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // E0\n    0x00, 0x00, 0x13, 0x14, 0x00, 0x15, 0x16, 0x17, // E8\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x19, 0x1A, // F0\n    0x00, 0x00, 0x1B, 0x1C, 0x00, 0x1D, 0x1E, 0x1F, // F8\n] as const;\n\n// prettier-ignore\nconst TRANS62 = [\n    0x96, 0x97, 0x9a, 0x9b, 0x9d, 0x9e, 0x9f, 0xa6,\n    0xa7, 0xab, 0xac, 0xad, 0xae, 0xaf, 0xb2, 0xb3,\n    0xb4, 0xb5, 0xb6, 0xb7, 0xb9, 0xba, 0xbb, 0xbc,\n    0xbd, 0xbe, 0xbf, 0xcb, 0xcd, 0xce, 0xcf, 0xd3,\n    0xd6, 0xd7, 0xd9, 0xda, 0xdb, 0xdc, 0xdd, 0xde,\n    0xdf, 0xe5, 0xe6, 0xe7, 0xe9, 0xea, 0xeb, 0xec,\n    0xed, 0xee, 0xef, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6,\n    0xf7, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff\n] as const;\n\n// prettier-ignore\nexport const DETRANS62 = [\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,\n    0x00, 0x00, 0x02, 0x03, 0x00, 0x04, 0x05, 0x06,\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x08,\n    0x00, 0x00, 0x00, 0x09, 0x0A, 0x0B, 0x0C, 0x0D,\n    0x00, 0x00, 0x0E, 0x0F, 0x10, 0x11, 0x12, 0x13,\n    0x00, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1A,\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x1B, 0x00, 0x1C, 0x1D, 0x1E,\n    0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x20, 0x21,\n    0x00, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28,\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x29, 0x2A, 0x2B,\n    0x00, 0x2C, 0x2D, 0x2E, 0x2F, 0x30, 0x31, 0x32,\n    0x00, 0x00, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38,\n    0x00, 0x39, 0x3A, 0x3B, 0x3C, 0x3D, 0x3E, 0x3F\n] as const;\n\n/**\n * Converts a byte into its 4x4 encoded representation\n *\n * @param val byte to encode.\n * @returns A two byte array of representing the 4x4 encoding.\n */\nexport function fourXfour(val: byte): [xx: byte, yy: byte] {\n    let xx = val & 0xaa;\n    let yy = val & 0x55;\n\n    xx >>= 1;\n    xx |= 0xaa;\n    yy |= 0xaa;\n\n    return [xx, yy];\n}\n\n/**\n * Converts 2 4x4 encoded bytes into a byte value\n *\n * @param xx First encoded byte.\n * @param yy Second encoded byte.\n * @returns The decoded value.\n */\nexport function defourXfour(xx: byte, yy: byte): byte {\n    return ((xx << 1) | 0x01) & yy;\n}\n\n/**\n * Converts a raw sector into a nibblized representation to be combined into a\n * nibblized 16 sector track.\n *\n * @param volume volume number\n * @param track track number\n * @param sector sector number\n * @param data sector data\n * @returns a nibblized representation of the sector data\n */\nexport function explodeSector16(\n    volume: byte,\n    track: byte,\n    sector: byte,\n    data: memory\n): byte[] {\n    let buf = [];\n    let gap;\n\n    /*\n     * Gap 1/3 (40/0x28 bytes)\n     */\n\n    if (sector === 0)\n        // Gap 1\n        gap = 0x80;\n    else {\n        // Gap 3\n        gap = track === 0 ? 0x28 : 0x26;\n    }\n\n    for (let idx = 0; idx < gap; idx++) {\n        buf.push(0xff);\n    }\n\n    /*\n     * Address Field\n     */\n\n    const checksum = volume ^ track ^ sector;\n    buf = buf.concat([0xd5, 0xaa, 0x96]); // Address Prolog D5 AA 96\n    buf = buf.concat(fourXfour(volume));\n    buf = buf.concat(fourXfour(track));\n    buf = buf.concat(fourXfour(sector));\n    buf = buf.concat(fourXfour(checksum));\n    buf = buf.concat([0xde, 0xaa, 0xeb]); // Epilog DE AA EB\n\n    /*\n     * Gap 2 (5 bytes)\n     */\n\n    for (let idx = 0; idx < 0x05; idx++) {\n        buf.push(0xff);\n    }\n\n    /*\n     * Data Field\n     */\n\n    buf = buf.concat([0xd5, 0xaa, 0xad]); // Data Prolog D5 AA AD\n\n    const nibbles: byte[] = [];\n    const ptr2 = 0;\n    const ptr6 = 0x56;\n\n    for (let idx = 0; idx < 0x156; idx++) {\n        nibbles[idx] = 0;\n    }\n\n    let idx2 = 0x55;\n    for (let idx6 = 0x101; idx6 >= 0; idx6--) {\n        let val6 = data[idx6 % 0x100];\n        let val2: byte = nibbles[ptr2 + idx2];\n\n        val2 = (val2 << 1) | (val6 & 1);\n        val6 >>= 1;\n        val2 = (val2 << 1) | (val6 & 1);\n        val6 >>= 1;\n\n        nibbles[ptr6 + idx6] = val6;\n        nibbles[ptr2 + idx2] = val2;\n\n        if (--idx2 < 0) idx2 = 0x55;\n    }\n\n    let last = 0;\n    for (let idx = 0; idx < 0x156; idx++) {\n        const val = nibbles[idx];\n        buf.push(TRANS62[last ^ val]);\n        last = val;\n    }\n    buf.push(TRANS62[last]);\n\n    buf = buf.concat([0xde, 0xaa, 0xeb]); // Epilog DE AA EB\n\n    /*\n     * Gap 3\n     */\n\n    buf.push(0xff);\n\n    return buf;\n}\n\n/**\n * Converts a raw sector into a nibblized representation to be combined into\n * a nibblized 13 sector track.\n *\n * @param volume volume number\n * @param track track number\n * @param sector sector number\n * @param data sector data\n * @returns a nibblized representation of the sector data\n */\nexport function explodeSector13(\n    volume: byte,\n    track: byte,\n    sector: byte,\n    data: memory\n): byte[] {\n    let buf = [];\n    let gap;\n\n    /*\n     * Gap 1/3 (40/0x28 bytes)\n     */\n\n    if (sector === 0)\n        // Gap 1\n        gap = 0x80;\n    else {\n        // Gap 3\n        gap = track === 0 ? 0x28 : 0x26;\n    }\n\n    for (let idx = 0; idx < gap; idx++) {\n        buf.push(0xff);\n    }\n\n    /*\n     * Address Field\n     */\n\n    const checksum = volume ^ track ^ sector;\n    buf = buf.concat([0xd5, 0xaa, 0xb5]); // Address Prolog D5 AA B5\n    buf = buf.concat(fourXfour(volume));\n    buf = buf.concat(fourXfour(track));\n    buf = buf.concat(fourXfour(sector));\n    buf = buf.concat(fourXfour(checksum));\n    buf = buf.concat([0xde, 0xaa, 0xeb]); // Epilog DE AA EB\n\n    /*\n     * Gap 2 (5 bytes)\n     */\n\n    for (let idx = 0; idx < 0x05; idx++) {\n        buf.push(0xff);\n    }\n\n    /*\n     * Data Field\n     */\n\n    buf = buf.concat([0xd5, 0xaa, 0xad]); // Data Prolog D5 AA AD\n\n    const nibbles = [];\n\n    let jdx = 0;\n    for (let idx = 0x32; idx >= 0; idx--) {\n        const a5 = data[jdx] >> 3;\n        const a3 = data[jdx] & 0x07;\n        jdx++;\n        const b5 = data[jdx] >> 3;\n        const b3 = data[jdx] & 0x07;\n        jdx++;\n        const c5 = data[jdx] >> 3;\n        const c3 = data[jdx] & 0x07;\n        jdx++;\n        const d5 = data[jdx] >> 3;\n        const d3 = data[jdx] & 0x07;\n        jdx++;\n        const e5 = data[jdx] >> 3;\n        const e3 = data[jdx] & 0x07;\n        jdx++;\n        nibbles[idx + 0x00] = a5;\n        nibbles[idx + 0x33] = b5;\n        nibbles[idx + 0x66] = c5;\n        nibbles[idx + 0x99] = d5;\n        nibbles[idx + 0xcc] = e5;\n        nibbles[idx + 0x100] =\n            (a3 << 2) | ((d3 & 0x4) >> 1) | ((e3 & 0x4) >> 2);\n        nibbles[idx + 0x133] = (b3 << 2) | (d3 & 0x2) | ((e3 & 0x2) >> 1);\n        nibbles[idx + 0x166] = (c3 << 2) | ((d3 & 0x1) << 1) | (e3 & 0x1);\n    }\n    nibbles[0xff] = data[jdx] >> 3;\n    nibbles[0x199] = data[jdx] & 0x07;\n\n    let last = 0;\n    for (let idx = 0x199; idx >= 0x100; idx--) {\n        const val = nibbles[idx];\n        buf.push(TRANS53[last ^ val]);\n        last = val;\n    }\n    for (let idx = 0x0; idx < 0x100; idx++) {\n        const val = nibbles[idx];\n        buf.push(TRANS53[last ^ val]);\n        last = val;\n    }\n    buf.push(TRANS53[last]);\n\n    buf = buf.concat([0xde, 0xaa, 0xeb]); // Epilog DE AA EB\n\n    /*\n     * Gap 3\n     */\n\n    buf.push(0xff);\n\n    return buf;\n}\n\nexport interface TrackNibble {\n    track: byte;\n    sector: byte;\n    nibble: byte;\n    sectors: SupportedSectors;\n}\n\nenum LookingFor {\n    START_OF_FIELD_MARKER_FIRST_NIBBLE,\n    START_OF_FIELD_MARKER_SECOND_NIBBLE,\n    FIELD_TYPE_MARKER,\n    ADDRESS_FIELD,\n    ADDRESS_FIELD_13,\n    DATA_FIELD_6AND2,\n    DATA_FIELD_5AND3,\n}\n\nexport class FindSectorError extends Error {\n    constructor(track: byte, sector: byte, e: unknown) {\n        super(\n            `Error finding track ${track} (${toHex(\n                track\n            )}), sector ${sector} (${toHex(sector)}): ` +\n                (e instanceof Error ? `${e.message}` : `${String(e)}`)\n        );\n    }\n}\n\n/**\n * Finds a sector of data from a nibblized disk. The sector given should be the\n * \"physical\" sector number, meaning the one that appears in the address field.\n * The first sector with the right sector number and data whose checksum matches\n * is returned. This means that for a dual-boot disk (DOS 3.2 and DOS 3.3),\n * whichever sector is found first wins.\n *\n * @param disk Nibble disk\n * @param track track number to read\n * @param sector sector number to read\n * @returns the track, sector, nibble offset, and detected sectors\n */\nexport function findSector(\n    disk: NibbleDisk,\n    track: byte,\n    sector: byte\n): TrackNibble {\n    const cur = disk.tracks[track];\n    let sectors: SupportedSectors = 16;\n    let state = LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n    let idx = 0;\n    let retry = 0;\n\n    function _readNext() {\n        const result = cur[idx++];\n        if (idx >= cur.length) {\n            idx = 0;\n            retry++;\n        }\n        return result;\n    }\n    function _skipBytes(count: number) {\n        idx += count;\n        if (idx >= cur.length) {\n            idx %= cur.length;\n            retry++;\n        }\n    }\n    let t = 0,\n        s = 0,\n        v = 0,\n        checkSum;\n    while (retry < 4) {\n        let val: byte;\n        switch (state) {\n            case LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE:\n                val = _readNext();\n                state =\n                    val === 0xd5\n                        ? LookingFor.START_OF_FIELD_MARKER_SECOND_NIBBLE\n                        : LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                break;\n            case LookingFor.START_OF_FIELD_MARKER_SECOND_NIBBLE:\n                val = _readNext();\n                state =\n                    val === 0xaa\n                        ? LookingFor.FIELD_TYPE_MARKER\n                        : LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                break;\n            case LookingFor.FIELD_TYPE_MARKER:\n                val = _readNext();\n                switch (val) {\n                    case 0x96:\n                        state = LookingFor.ADDRESS_FIELD;\n                        sectors = 16;\n                        break;\n                    case 0xb5:\n                        state = LookingFor.ADDRESS_FIELD;\n                        sectors = 13;\n                        break;\n                    case 0xad:\n                        state =\n                            sectors === 16\n                                ? LookingFor.DATA_FIELD_6AND2\n                                : LookingFor.DATA_FIELD_5AND3;\n                        break;\n                    default:\n                        state = LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                }\n                break;\n            case LookingFor.ADDRESS_FIELD:\n                v = defourXfour(_readNext(), _readNext()); // Volume\n                t = defourXfour(_readNext(), _readNext()); // Track\n                s = defourXfour(_readNext(), _readNext()); // Sector\n                checkSum = defourXfour(_readNext(), _readNext());\n                if (checkSum !== (v ^ t ^ s)) {\n                    debug(\n                        'Invalid header checksum:',\n                        toHex(v),\n                        toHex(t),\n                        toHex(s),\n                        toHex(checkSum)\n                    );\n                }\n                _skipBytes(3); // Skip footer\n                state = 0;\n                break;\n            case LookingFor.DATA_FIELD_6AND2:\n                if (s === sector && t === track) {\n                    // Save start of data\n                    const nibble = idx;\n\n                    // Do checksum on data\n                    let last = 0;\n                    for (let jdx = 0; jdx < 0x156; jdx++) {\n                        last = DETRANS62[_readNext() - 0x80] ^ last;\n                    }\n                    const checkSum = DETRANS62[_readNext() - 0x80] ^ last;\n                    // Validate checksum before returning\n                    if (!checkSum) {\n                        return { track, sector, nibble, sectors };\n                    } else {\n                        debug(\n                            'Invalid data checksum:',\n                            toHex(last),\n                            toHex(track),\n                            toHex(sector),\n                            toHex(checkSum)\n                        );\n                    }\n                    _skipBytes(3); // Skip footer\n                } else _skipBytes(0x159); // Skip data, checksum and footer\n                state = LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                break;\n            case LookingFor.DATA_FIELD_5AND3:\n                if (s === sector && t === track) {\n                    // Save start of data\n                    const nibble = idx;\n\n                    // Do checksum on data\n                    let last = 0;\n                    for (let jdx = 0; jdx < 0x19a; jdx++) {\n                        last = DETRANS53[_readNext() - 0xa0] ^ last;\n                    }\n                    const checkSum = DETRANS53[_readNext() - 0xa0] ^ last;\n                    // Validate checksum before returning\n                    if (!checkSum) {\n                        return { track, sector, nibble, sectors };\n                    } else {\n                        debug(\n                            'Invalid data checksum:',\n                            toHex(last),\n                            toHex(track),\n                            toHex(sector),\n                            toHex(checkSum)\n                        );\n                    }\n                    _skipBytes(3); // Skip footer\n                } else {\n                    _skipBytes(0x19a); // Skip data, checksum and footer\n                }\n                state = LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                break;\n            default:\n                state = LookingFor.START_OF_FIELD_MARKER_FIRST_NIBBLE;\n                break;\n        }\n    }\n    throw new FindSectorError(track, sector, `too many retries (${retry})`);\n}\n\nexport class InvalidChecksum extends Error {\n    constructor(expected: byte, received: byte) {\n        super(`Expected: ${toHex(expected)}, received: ${toHex(received)}`);\n    }\n}\n\nexport class ReadSectorError extends Error {\n    constructor(track: byte, sector: byte, e: unknown) {\n        super(\n            `Error reading track ${track} (${toHex(\n                track\n            )}), sector ${sector} (${toHex(sector)}): ` +\n                (e instanceof Error ? `${e.message}` : `${String(e)}`)\n        );\n    }\n}\n\n/**\n * Reads a sector of data from a nibblized disk. The sector given should be the\n * \"physical\" sector number, meaning the one that appears in the address field.\n * Like `findSector`, the first sector with the right sector number and data\n * whose checksum matches is returned. This means that for a dual-boot disk\n * (DOS 3.2 and DOS 3.3), whichever sector is found first wins.\n *\n * This does not work for WOZ disks.\n *\n * If the given track and sector combination is not found, a `ReadSectorError`\n * will be thrown.\n *\n * @param disk Nibble disk\n * @param track track number to read\n * @param sector sector number to read\n * @returns An array of sector data bytes.\n */\nexport function readSector(\n    disk: NibbleDisk,\n    track: byte,\n    sector: byte\n): Uint8Array {\n    const trackNibble = findSector(disk, track, sector);\n    const { nibble, sectors } = trackNibble;\n    const cur = disk.tracks[track];\n\n    let idx = nibble;\n    const _readNext = () => {\n        const result = cur[idx++];\n        if (idx >= cur.length) {\n            idx = 0;\n        }\n        return result;\n    };\n\n    try {\n        return sectors === 13\n            ? readSector13(_readNext)\n            : readSector16(_readNext);\n    } catch (e: unknown) {\n        throw new ReadSectorError(track, sector, e);\n    }\n}\n\nfunction readSector16(_readNext: () => byte): Uint8Array {\n    const data = new Uint8Array(256);\n    const data2 = [];\n    let last: byte = 0;\n    let val;\n\n    for (let jdx = 0x55; jdx >= 0; jdx--) {\n        val = DETRANS62[_readNext() - 0x80] ^ last;\n        data2[jdx] = val;\n        last = val;\n    }\n    for (let jdx = 0; jdx < 0x100; jdx++) {\n        val = DETRANS62[_readNext() - 0x80] ^ last;\n        data[jdx] = val;\n        last = val;\n    }\n    const checkSum = DETRANS62[_readNext() - 0x80] ^ last;\n    if (checkSum) {\n        throw new InvalidChecksum(last, checkSum ^ last);\n    }\n    for (let kdx = 0, jdx = 0x55; kdx < 0x100; kdx++) {\n        data[kdx] <<= 1;\n        if ((data2[jdx] & 0x01) !== 0) {\n            data[kdx] |= 0x01;\n        }\n        data2[jdx] >>= 1;\n\n        data[kdx] <<= 1;\n        if ((data2[jdx] & 0x01) !== 0) {\n            data[kdx] |= 0x01;\n        }\n        data2[jdx] >>= 1;\n\n        if (--jdx < 0) jdx = 0x55;\n    }\n    return data;\n}\n\nfunction readSector13(_readNext: () => byte) {\n    const data = new Uint8Array(256);\n    let val: byte;\n    let last: byte = 0;\n\n    // special low 3-bits of 0xFF\n    val = DETRANS53[_readNext() - 0xa0] ^ last;\n    last = val;\n    data[0xff] = val & 0b111;\n\n    // expect 0x99 nibbles of packed lower 3-bits in reverse order\n    for (let i = 0x98; i >= 0x00; i--) {\n        val = DETRANS53[_readNext() - 0xa0] ^ last;\n        last = val;\n        const off = Math.floor(i / 0x33) + 5 * (0x32 - (i % 0x33));\n        const dOff = 3 + 5 * (0x32 - (i % 0x33));\n        const eOff = 4 + 5 * (0x32 - (i % 0x33));\n        const bit = 2 - Math.floor(i / 0x33);\n        data[off] = (val & 0b11100) >> 2;\n        data[dOff] ^= ((val & 0b00010) >> 1) << bit;\n        data[eOff] ^= (val & 0b1) << bit;\n    }\n\n    // expect 0xFE nibbles of upper 5-bits\n    for (let i = 0; i < 0xff; i++) {\n        val = DETRANS53[_readNext() - 0xa0] ^ last;\n        last = val;\n        const off = Math.floor(i / 0x33) + 5 * (0x32 - (i % 0x33));\n        data[off] ^= val << 3;\n    }\n\n    // and the last special nibble for 0xFF\n    val = DETRANS53[_readNext() - 0xa0] ^ last;\n    last = val;\n    data[0xff] ^= val << 3;\n\n    const checkSum = DETRANS53[_readNext() - 0xa0] ^ last;\n    if (checkSum) {\n        throw new InvalidChecksum(last, checkSum ^ last);\n    }\n    return data;\n}\n\n/**\n * Reads a sector of data from a nibblized disk\n *\n * TODO(flan): Does not work on WOZ disks\n *\n * @param disk Nibble disk\n * @param track track number to read\n * @param sector sector number to read\n * @returns An array of sector data bytes.\n */\nexport function writeSector(\n    disk: NibbleDisk,\n    track: byte,\n    sector: byte,\n    _data: Uint8Array\n): boolean {\n    const trackNibble = findSector(disk, track, sector);\n    if (!trackNibble) {\n        return false;\n    }\n\n    // Todo\n\n    return true;\n}\n\n/**\n * Convert a nibblized disk into a JSON string for storage.\n *\n * @param disk Nibblized disk\n * @param pretty Whether to format the output string\n * @returns A JSON string representing the disk\n */\nexport function jsonEncode(disk: NibbleDisk, pretty: boolean): string {\n    // For 'nib', tracks are encoded as strings. For all other formats,\n    // tracks are arrays of sectors which are encoded as strings.\n    const data: string[] | string[][] = [];\n    let format = 'dsk';\n    for (let t = 0; t < disk.tracks.length; t++) {\n        data[t] = [];\n        if (disk.format === 'nib') {\n            format = 'nib';\n            data[t] = base64_encode(disk.tracks[t]);\n        } else {\n            for (let s = 0; s < 0x10; s++) {\n                const _sector = disk.format === 'po' ? _PO[s] : _DO[s];\n                (data[t] as string[])[s] = base64_encode(\n                    readSector(disk, t, _sector)\n                );\n            }\n        }\n    }\n    return JSON.stringify(\n        {\n            type: format,\n            encoding: 'base64',\n            volume: disk.volume,\n            data: data,\n            readOnly: disk.readOnly,\n        },\n        undefined,\n        pretty ? '    ' : undefined\n    );\n}\n\n/**\n * Convert a JSON string into a nibblized disk.\n *\n * @param data JSON string representing a disk image, created by [jsonEncode].\n * @returns A nibblized disk\n */\n\nexport function jsonDecode(data: string): NibbleDisk {\n    const tracks: memory[] = [];\n    const json = JSON.parse(data) as JSONDisk;\n    const v = json.volume || 254;\n    const readOnly = json.readOnly || false;\n    for (let t = 0; t < json.data.length; t++) {\n        let track: byte[] = [];\n        for (let s = 0; s < json.data[t].length; s++) {\n            const _s = json.type === 'po' ? PO[s] : DO[s];\n            const sector: string = json.data[t][_s] as string;\n            const d = base64_decode(sector);\n            track = track.concat(explodeSector16(v, t, s, d));\n        }\n        tracks[t] = bytify(track);\n    }\n    if (!isNibbleDiskFormat(json.type)) {\n        throw new Error(`JSON disks of type ${json.type} are not supported`);\n    }\n    const disk: NibbleDisk = {\n        volume: v,\n        format: json.type,\n        encoding: ENCODING_NIBBLE,\n        metadata: { name: json.name },\n        tracks,\n        readOnly,\n    };\n\n    return disk;\n}\n\n/**\n * Debugging method that displays the logical sector ordering of a nibblized disk\n *\n * @param disk\n */\n\nexport function analyseDisk(disk: NibbleDisk) {\n    for (let track = 0; track < disk.tracks.length; track++) {\n        let outStr = `${toHex(track)}: `;\n        let val,\n            state = 0;\n        let idx = 0;\n        const cur = disk.tracks[track];\n\n        const _readNext = () => {\n            const result = cur[idx++];\n            return result;\n        };\n\n        const _skipBytes = (count: number) => {\n            idx += count;\n        };\n\n        let t = 0,\n            s = 0,\n            v = 0,\n            checkSum;\n        while (idx < cur.length) {\n            switch (state) {\n                case 0:\n                    val = _readNext();\n                    state = val === 0xd5 ? 1 : 0;\n                    break;\n                case 1:\n                    val = _readNext();\n                    state = val === 0xaa ? 2 : 0;\n                    break;\n                case 2:\n                    val = _readNext();\n                    state = val === 0x96 ? 3 : val === 0xad ? 4 : 0;\n                    break;\n                case 3: // Address\n                    v = defourXfour(_readNext(), _readNext()); // Volume\n                    t = defourXfour(_readNext(), _readNext());\n                    s = defourXfour(_readNext(), _readNext());\n                    checkSum = defourXfour(_readNext(), _readNext());\n                    if (checkSum !== (v ^ t ^ s)) {\n                        debug(\n                            'Invalid header checksum:',\n                            toHex(v),\n                            toHex(t),\n                            toHex(s),\n                            toHex(checkSum)\n                        );\n                    } else {\n                        outStr += toHex(s, 1);\n                    }\n                    _skipBytes(3); // Skip footer\n                    state = 0;\n                    break;\n                case 4: // Valid header\n                    _skipBytes(0x159); // Skip data, checksum and footer\n                    state = 0;\n                    break;\n                default:\n                    break;\n            }\n        }\n        debug(outStr);\n    }\n}\n\n/**\n * Debugging utility to convert a bitstream into a nibble. Does not wrap.\n *\n * @param bits Bitstream containing nibbles\n * @param offset Offset into bitstream to start nibblizing\n * @returns nibble, the next nibble in the bitstream,\n *      and offset, the end of that nibble in the bitstream\n */\n\nexport function grabNibble(bits: bit[], offset: number) {\n    let nibble = 0;\n    let waitForOne = true;\n\n    while (offset < bits.length) {\n        const bit = bits[offset];\n        if (bit) {\n            nibble = (nibble << 1) | 0x01;\n            waitForOne = false;\n        } else {\n            if (!waitForOne) {\n                nibble = nibble << 1;\n            }\n        }\n        if (nibble & 0x80) {\n            // nibble complete return it\n            break;\n        }\n        offset += 1;\n    }\n\n    return {\n        nibble: nibble,\n        offset: offset,\n    };\n}\n","import { explodeSector16, DO } from './format_utils';\nimport { bytify } from '../util';\nimport { byte } from '../types';\nimport { NibbleDisk, DiskOptions, ENCODING_NIBBLE } from './types';\n\n/**\n * Returns a `Disk` object from DOS-ordered image data.\n * @param options the disk image and options\n * @returns A nibblized disk\n */\nexport default function createDiskFromDOS(options: DiskOptions): NibbleDisk {\n    const { data, name, side, rawData, volume, readOnly } = options;\n    const disk: NibbleDisk = {\n        format: 'dsk',\n        encoding: ENCODING_NIBBLE,\n        metadata: { name, side },\n        volume,\n        readOnly,\n        tracks: [],\n    };\n\n    for (let t = 0; t < 35; t++) {\n        let track: byte[] = [];\n        for (let physical_sector = 0; physical_sector < 16; physical_sector++) {\n            const dos_sector = DO[physical_sector];\n            let sector: Uint8Array;\n            if (rawData) {\n                const off = (16 * t + dos_sector) * 256;\n                sector = new Uint8Array(rawData.slice(off, off + 256));\n            } else if (data) {\n                sector = new Uint8Array(data[t][dos_sector]);\n            } else {\n                throw new Error('Requires data or rawData');\n            }\n            track = track.concat(\n                explodeSector16(volume, t, physical_sector, sector)\n            );\n        }\n        disk.tracks[t] = bytify(track);\n    }\n    return disk;\n}\n","import { NibbleDisk, DiskOptions, ENCODING_NIBBLE } from './types';\nimport { memory } from '../types';\n\n/**\n * Returns a `Disk` object from raw nibble image data.\n * @param options the disk image and options\n * @returns A nibblized disk\n */\nexport default function createDiskFromNibble(options: DiskOptions): NibbleDisk {\n    const { data, name, side, rawData, volume, readOnly } = options;\n    const disk: NibbleDisk = {\n        format: 'nib',\n        encoding: ENCODING_NIBBLE,\n        metadata: { name, side },\n        volume: volume || 254,\n        readOnly: readOnly || false,\n        tracks: [],\n    };\n\n    for (let t = 0; t < 35; t++) {\n        let track: memory;\n        if (rawData) {\n            const off = t * 0x1a00;\n            track = new Uint8Array(rawData.slice(off, off + 0x1a00));\n        } else if (data) {\n            track = data[t][0];\n        } else {\n            throw new Error('Requires data or rawData');\n        }\n        disk.tracks[t] = track;\n    }\n\n    return disk;\n}\n","import { byte } from 'js/types';\n\nexport const BLOCK_SIZE = 512;\n\nexport const STORAGE_TYPES = {\n    DELETED: 0x0,\n    SEEDLING: 0x1,\n    SAPLING: 0x2,\n    TREE: 0x3,\n    PASCAL: 0x4,\n    EXTENDED: 0x5,\n    DIRECTORY: 0xd,\n    SUBDIRECTORY_HEADER: 0xe,\n    VDH_HEADER: 0xf,\n} as const;\n\nexport const ACCESS_TYPES = {\n    DELETE: 0x80,\n    RENAME: 0x40,\n    BACKUP: 0x20,\n    WRITE: 0x02,\n    READ: 0x01,\n    ALL: 0xe3,\n} as const;\n\nexport const FILE_TYPES: Record<byte, string> = {\n    0x00: 'UNK', // Typeless file (SOS and ProDOS)\n    0x01: 'BAD', // Bad block file\n    0x02: 'PDC', // Pascal code file\n    0x03: 'PTX', // Pascal text file\n    0x04: 'TXT', // ASCII text file (SOS and ProDOS)\n    0x05: 'PDA', // Pascal data file\n    0x06: 'BIN', // General binary file (SOS and ProDOS)\n    0x07: 'FNT', // Font file\n    0x08: 'FOT', // Graphics screen file\n    0x09: 'BA3', // Business BASIC program file\n    0x0a: 'DA3', // Business BASIC data file\n    0x0b: 'WPF', // Word Processor file\n    0x0c: 'SOS', // SOS system file\n    0x0f: 'DIR', // Directory file (SOS and ProDOS)\n    0x10: 'RPD', // RPS data file\n    0x11: 'RPI', // RPS index file\n    0x12: 'AFD', // AppleFile discard file\n    0x13: 'AFM', // AppleFile model file\n    0x14: 'ARF', // AppleFile report format file\n    0x15: 'SCL', // Screen Library file\n    0x19: 'ADB', // AppleWorks Data Base file\n    0x1a: 'AWP', // AppleWorks Word Processor file\n    0x1b: 'ASP', // AppleWorks Spreadsheet file\n    0xef: 'PAR', // Pascal area\n    0xf0: 'CMD', // ProDOS CI added command file\n    0xfa: 'INT', // Integer BASIC program file\n    0xfb: 'IVR', // Integer BASIC variable file\n    0xfc: 'BAS', // Applesoft program file\n    0xfd: 'VAR', // Applesoft variables file\n    0xfe: 'REL', // Relocatable code file (EDASM)\n    0xff: 'SYS', // ProDOS system file\n} as const;\n","import { explodeSector16, PO } from './format_utils';\nimport { bytify } from '../util';\nimport type { byte } from '../types';\nimport {\n    NibbleDisk,\n    DiskOptions,\n    ENCODING_NIBBLE,\n    BlockDisk,\n    FloppyDisk,\n    MemoryBlockDisk,\n} from './types';\nimport { BLOCK_SIZE } from './prodos/constants';\n\n/**\n * Returns a `Disk` object from ProDOS-ordered image data.\n * @param options the disk image and options\n * @returns A nibblized disk\n */\nexport default function createDiskFromProDOS(\n    options: DiskOptions\n): BlockDisk | FloppyDisk {\n    const { data, name, side, rawData, volume, readOnly } = options;\n    let disk: BlockDisk | NibbleDisk;\n    if (rawData && rawData.byteLength > 140 * 1025) {\n        const blocks: Uint8Array[] = [];\n        for (\n            let offset = 0;\n            offset < rawData.byteLength;\n            offset += BLOCK_SIZE\n        ) {\n            blocks.push(\n                new Uint8Array(rawData.slice(offset, offset + BLOCK_SIZE))\n            );\n        }\n        disk = new MemoryBlockDisk(\n            'po',\n            { name, side },\n            readOnly || false,\n            blocks\n        );\n    } else {\n        disk = {\n            format: 'po',\n            encoding: ENCODING_NIBBLE,\n            metadata: { name, side },\n            volume: volume || 254,\n            tracks: [],\n            readOnly: readOnly || false,\n        } as NibbleDisk;\n\n        for (let physical_track = 0; physical_track < 35; physical_track++) {\n            let track: byte[] = [];\n            for (\n                let physical_sector = 0;\n                physical_sector < 16;\n                physical_sector++\n            ) {\n                const prodos_sector = PO[physical_sector];\n                let sector;\n                if (rawData) {\n                    const off = (16 * physical_track + prodos_sector) * 256;\n                    sector = new Uint8Array(rawData.slice(off, off + 256));\n                } else if (data) {\n                    sector = data[physical_track][prodos_sector];\n                } else {\n                    throw new Error('Requires data or rawData');\n                }\n                track = track.concat(\n                    explodeSector16(\n                        volume,\n                        physical_track,\n                        physical_sector,\n                        sector\n                    )\n                );\n            }\n            disk.tracks[physical_track] = bytify(track);\n        }\n    }\n\n    return disk;\n}\n","import DOS from './do';\nimport Nibble from './nib';\nimport ProDOS from './po';\nimport { BlockDisk, DiskOptions } from './types';\n\nimport { byte, ReadonlyUint8Array } from 'js/types';\n\n/**\n * Offsets in bytes to the various header fields. All number fields are\n * in little-endian order (least significant byte first). These values\n * come from the spec at:\n *\n * https://apple2.org.za/gswv/a2zine/Docs/DiskImage_2MG_Info.txt\n */\nconst OFFSETS = {\n    /** File signature ('2IMG', 4 bytes) */\n    SIGNATURE: 0x00,\n    /** Creator ID (4 bytes) */\n    CREATOR: 0x04,\n    /** Header length (2 bytes) */\n    HEADER_LENGTH: 0x08,\n    /** Version number (2 bytes). (Version of what? Format? Image?). */\n    VERSION: 0x0a,\n    /** Image format ID (4 bytes) */\n    FORMAT: 0x0c,\n    /** Flags and DOS 3.3 volume number */\n    FLAGS: 0x10,\n    /**\n     * Number of ProDOS blocks (4 bytes). ProDOS blocks are 512 bytes each.\n     * This field must be zero if the image format is not 0x01 (ProDOS).\n     * (ASIMOV2 always fills in this field.)\n     */\n    BLOCKS: 0x14,\n    /**\n     * Disk data start in bytes from the beginning of the image file\n     * (4 bytes).\n     */\n    DATA_OFFSET: 0x18,\n    /**\n     * Length of disk data in bytes (4 bytes). (143,360 bytes for 5.25\"\n     * floppies; 512  blocks for ProDOS volumes.)\n     */\n    DATA_LENGTH: 0x1c,\n    /**\n     * Comment start in bytes from the beginning of the image file (4 bytes).\n     * Must be zero if there is no comment. The comment must come after the\n     * disk data and before the creator data. The comment should be \"raw text\"\n     * with no terminating null. By \"raw text\", we assume UTF-8.\n     */\n    COMMENT: 0x20,\n    /**\n     * Comment length in bytes (4 bytes). Must be zero if there is no comment.\n     */\n    COMMENT_LENGTH: 0x24,\n    /**\n     * Optional creator data start in bytes from the beginning of the image\n     * file (4 bytes). Must be zero if there is no creator data.\n     */\n    CREATOR_DATA: 0x28,\n    /**\n     * Creator data length in bytes (4 bytes). Must be zero if there is no\n     * creator data.\n     */\n    CREATOR_DATA_LENGTH: 0x2c,\n    /** Padding (16 bytes). Must be zero. */\n    PADDING: 0x30,\n} as const;\n\nconst FLAGS = {\n    READ_ONLY: 0x80000000,\n    VOLUME_VALID: 0x00000100,\n    VOLUME_MASK: 0x000000ff,\n} as const;\n\nexport enum FORMAT {\n    DOS = 0,\n    ProDOS = 1,\n    NIB = 2,\n}\n\nexport interface HeaderData {\n    bytes: number;\n    creator: string;\n    format: FORMAT;\n    offset: number;\n    readOnly: boolean;\n    volume: byte;\n    comment?: string;\n    creatorData?: ReadonlyUint8Array;\n}\n\nexport function read2MGHeader(rawData: ArrayBuffer): HeaderData {\n    const prefix = new DataView(rawData);\n    const decoder = new TextDecoder('ascii');\n    const signature = decoder.decode(\n        rawData.slice(OFFSETS.SIGNATURE, OFFSETS.SIGNATURE + 4)\n    );\n    if (signature !== '2IMG') {\n        throw new Error(`Unrecognized 2mg signature: ${signature}`);\n    }\n    const creator = decoder.decode(\n        rawData.slice(OFFSETS.CREATOR, OFFSETS.CREATOR + 4)\n    );\n    const headerLength = prefix.getInt16(OFFSETS.HEADER_LENGTH, true);\n    if (headerLength !== 64) {\n        throw new Error(\n            `2mg header length is incorrect ${headerLength} !== 64`\n        );\n    }\n    const format = prefix.getInt32(OFFSETS.FORMAT, true) as FORMAT;\n    const flags = prefix.getInt32(OFFSETS.FLAGS, true);\n    const blocks = prefix.getInt32(OFFSETS.BLOCKS, true);\n    const offset = prefix.getInt32(OFFSETS.DATA_OFFSET, true);\n    const bytes = prefix.getInt32(OFFSETS.DATA_LENGTH, true);\n    const commentOffset = prefix.getInt32(OFFSETS.COMMENT, true);\n    const commentLength = prefix.getInt32(OFFSETS.COMMENT_LENGTH, true);\n    const creatorDataOffset = prefix.getInt32(OFFSETS.CREATOR_DATA, true);\n    const creatorDataLength = prefix.getInt32(\n        OFFSETS.CREATOR_DATA_LENGTH,\n        true\n    );\n\n    // Though the spec says that it should be zero if the format is not\n    // ProDOS, we don't check that since we know that it is violated.\n    // However we do check that it's correct if the image _is_ ProDOS.\n    if (format === FORMAT.ProDOS && blocks * 512 !== bytes) {\n        throw new Error(\n            `2mg blocks does not match disk data length: ${blocks} * 512 !== ${bytes}`\n        );\n    }\n    if (offset < headerLength) {\n        throw new Error(\n            `2mg data offset is less than header length: ${offset} < ${headerLength}`\n        );\n    }\n    if (offset + bytes > prefix.byteLength) {\n        throw new Error(\n            `2mg data extends beyond disk image: ${offset} + ${bytes} > ${prefix.byteLength}`\n        );\n    }\n    const dataEnd = offset + bytes;\n    if (commentOffset && commentOffset < dataEnd) {\n        throw new Error(\n            `2mg comment is before the end of the disk data: ${commentOffset} < ${offset} + ${bytes}`\n        );\n    }\n    const commentEnd = commentOffset ? commentOffset + commentLength : dataEnd;\n    if (commentEnd > prefix.byteLength) {\n        throw new Error(\n            `2mg comment extends beyond disk image: ${commentEnd} > ${prefix.byteLength}`\n        );\n    }\n    if (creatorDataOffset && creatorDataOffset < commentEnd) {\n        throw new Error(\n            `2mg creator data is before the end of the comment: ${creatorDataOffset} < ${commentEnd}`\n        );\n    }\n    const creatorDataEnd = creatorDataOffset\n        ? creatorDataOffset + creatorDataLength\n        : commentEnd;\n    if (creatorDataEnd > prefix.byteLength) {\n        throw new Error(\n            `2mg creator data extends beyond disk image: ${creatorDataEnd} > ${prefix.byteLength}`\n        );\n    }\n\n    const extras: { comment?: string; creatorData?: ReadonlyUint8Array } = {};\n    if (commentOffset) {\n        extras.comment = new TextDecoder('utf-8').decode(\n            new Uint8Array(rawData, commentOffset, commentLength)\n        );\n    }\n    if (creatorDataOffset) {\n        extras.creatorData = new Uint8Array(\n            rawData,\n            creatorDataOffset,\n            creatorDataLength\n        );\n    }\n\n    const readOnly = (flags & FLAGS.READ_ONLY) !== 0;\n    let volume = format === FORMAT.DOS ? 254 : 0;\n    if (flags & FLAGS.VOLUME_VALID) {\n        volume = flags & FLAGS.VOLUME_MASK;\n    }\n\n    return {\n        bytes,\n        creator,\n        format,\n        offset,\n        readOnly,\n        volume,\n        ...extras,\n    };\n}\n\n/**\n * Creates the prefix and suffix parts of a 2mg file. Will use\n * default header values if headerData is null.\n *\n * Currently only supports blocks disks but should be adaptable\n * for nibble formats.\n *\n * @param headerData 2mg header data\n * @param blocks The number of blocks in a block volume\n * @returns 2mg prefix and suffix for creating a 2mg disk image\n */\n\nexport const create2MGFragments = (\n    headerData: HeaderData | null,\n    { blocks }: { blocks: number }\n) => {\n    if (!headerData) {\n        headerData = {\n            bytes: blocks * 512,\n            creator: 'A2JS',\n            format: FORMAT.ProDOS,\n            offset: 64,\n            readOnly: false,\n            volume: 0,\n        };\n    }\n    if (headerData.format !== FORMAT.ProDOS) {\n        throw new Error('Nibble formats not supported yet');\n    }\n    if (headerData.bytes !== blocks * 512) {\n        throw new Error('Byte count does not match block count');\n    }\n    const prefix = new Uint8Array(64);\n    const prefixView = new DataView(prefix.buffer);\n\n    const volumeFlags = headerData.volume\n        ? headerData.volume | FLAGS.VOLUME_VALID\n        : 0;\n    const readOnlyFlag = headerData.readOnly ? FLAGS.READ_ONLY : 0;\n    const flags = volumeFlags | readOnlyFlag;\n    const prefixLength = prefix.length;\n    const dataLength = blocks * 512;\n\n    let commentOffset = 0;\n    let commentLength = 0;\n    let commentData = new Uint8Array(0);\n    if (headerData.comment) {\n        commentData = new TextEncoder().encode(headerData.comment);\n        commentOffset = prefixLength + dataLength;\n        commentLength = commentData.length;\n    }\n    let creatorDataOffset = 0;\n    let creatorDataLength = 0;\n    let creatorData = new Uint8Array(0);\n    if (headerData.creatorData) {\n        creatorData = new Uint8Array(headerData.creatorData);\n        creatorDataOffset = prefixLength + dataLength + commentLength;\n        creatorDataLength = headerData.creatorData.length;\n    }\n\n    const encoder = new TextEncoder();\n\n    prefix.set(encoder.encode('2IMG'), OFFSETS.SIGNATURE);\n    prefix.set(encoder.encode(headerData.creator.slice(0, 4)), OFFSETS.CREATOR);\n    prefixView.setInt32(OFFSETS.HEADER_LENGTH, 64, true);\n    prefixView.setInt16(OFFSETS.VERSION, 1, true);\n    prefixView.setInt32(OFFSETS.FORMAT, headerData.format, true);\n    prefixView.setInt32(OFFSETS.FLAGS, flags, true);\n    prefixView.setInt32(OFFSETS.BLOCKS, blocks, true);\n    prefixView.setInt32(OFFSETS.DATA_OFFSET, prefixLength, true);\n    prefixView.setInt32(OFFSETS.DATA_LENGTH, dataLength, true);\n    prefixView.setInt32(OFFSETS.COMMENT, commentOffset, true);\n    prefixView.setInt32(OFFSETS.COMMENT_LENGTH, commentLength, true);\n    prefixView.setInt32(OFFSETS.CREATOR_DATA, creatorDataOffset, true);\n    prefixView.setInt32(OFFSETS.CREATOR_DATA_LENGTH, creatorDataLength, true);\n\n    const suffix = new Uint8Array(commentLength + creatorDataLength);\n    suffix.set(commentData);\n    suffix.set(creatorData, commentLength);\n\n    return { prefix, suffix };\n};\n\n/**\n * Creates a 2MG image from stored 2MG header data and a block disk. Will use\n * default header values if headerData is null.\n *\n * @param headerData 2MG style header data\n * @param blocks Prodos volume blocks\n * @returns 2MS\n */\n\nexport const create2MGFromBlockDisk = async (\n    headerData: HeaderData | null,\n    disk: BlockDisk\n): Promise<ArrayBuffer> => {\n    const blockCount = await disk.blockCount();\n    const { prefix, suffix } = create2MGFragments(headerData, {\n        blocks: blockCount,\n    });\n\n    const imageLength = prefix.length + blockCount * 512 + suffix.length;\n    const byteArray = new Uint8Array(imageLength);\n    byteArray.set(prefix);\n    for (let idx = 0; idx < blockCount; idx++) {\n        const block = await disk.read(idx);\n        byteArray.set(block, prefix.length + idx * 512);\n    }\n    byteArray.set(suffix, prefix.length + blockCount * 512);\n\n    return byteArray.buffer;\n};\n\n/**\n * Returns a `Disk` object from a 2mg image.\n * @param options the disk image and options\n */\nexport default function createDiskFrom2MG(options: DiskOptions) {\n    let { rawData } = options;\n    let disk;\n\n    if (!rawData) {\n        throw new Error('Requires rawData');\n    }\n\n    const { bytes, format, offset, readOnly, volume } = read2MGHeader(rawData);\n    rawData = rawData.slice(offset, offset + bytes);\n    options = { ...options, rawData, readOnly, volume };\n\n    // Check image format.\n    // Sure, it's really 64 bits. But only 2 are actually used.\n    switch (format) {\n        case FORMAT.ProDOS: // PO\n            disk = ProDOS(options);\n            break;\n        case FORMAT.NIB: // NIB\n            disk = Nibble(options);\n            break;\n        case FORMAT.DOS: // dsk\n        default: // Something hinky, assume 'dsk'\n            disk = DOS(options);\n            break;\n    }\n\n    return disk;\n}\n","import { HeaderData, read2MGHeader } from 'js/formats/2mg';\nimport {\n    BlockDisk,\n    BlockFormat,\n    DiskMetadata,\n    ENCODING_BLOCK,\n} from 'js/formats/types';\n\nclass Deferred<T> {\n    promise: Promise<T>;\n    resolve: (value: T) => void;\n    reject: (error: Error) => void;\n\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n\nexport class HttpBlockDisk implements BlockDisk {\n    encoding: typeof ENCODING_BLOCK = ENCODING_BLOCK;\n    format: BlockFormat = 'po';\n    metadata: DiskMetadata;\n    readOnly: boolean = false;\n    headerData: HeaderData | null = null;\n\n    blocks: Uint8Array[] = [];\n    fetchMap: Deferred<boolean>[] = [];\n\n    constructor(\n        name: string,\n        private contentLength: number,\n        private url: string\n    ) {\n        this.metadata = { name };\n    }\n\n    private async getHeaderData(): Promise<HeaderData | null> {\n        if (this.format === '2mg') {\n            if (!this.headerData) {\n                const header = await fetch(this.url, {\n                    headers: { range: 'bytes=0-63' },\n                });\n                const headerBody = await header.arrayBuffer();\n                this.headerData = read2MGHeader(headerBody);\n            }\n            return this.headerData;\n        }\n        return null;\n    }\n\n    async blockCount(): Promise<number> {\n        const headerData = await this.getHeaderData();\n        if (headerData) {\n            return headerData.bytes >> 9;\n        } else {\n            return this.contentLength >> 9;\n        }\n    }\n\n    async read(blockNumber: number): Promise<Uint8Array> {\n        const blockShift = 6;\n        if (!this.blocks[blockNumber]) {\n            const fetchBlock = blockNumber >> blockShift;\n            const deferred = this.fetchMap[fetchBlock];\n            if (deferred !== undefined) {\n                await deferred.promise;\n            } else {\n                const deferred = new Deferred<boolean>();\n                this.fetchMap[fetchBlock] = deferred;\n                const headerData = await this.getHeaderData();\n                const headerSize = headerData?.offset ?? 0;\n                const start = 512 * (fetchBlock << blockShift) + headerSize;\n                const end = start + (512 << blockShift) - 1;\n                const response = await fetch(this.url, {\n                    headers: { range: `bytes=${start}-${end}` },\n                });\n                if (!response.ok) {\n                    const error = new Error(\n                        `Error loading: ${response.statusText}`\n                    );\n                    deferred.reject(error);\n                    throw error;\n                }\n                if (!response.body) {\n                    const error = new Error('Error loading: no body');\n                    deferred.reject(error);\n                    throw error;\n                }\n                const buffer = await response.arrayBuffer();\n                const startBlock = fetchBlock << blockShift;\n                const endBlock = startBlock + (1 << blockShift);\n                let startOffset = 0;\n                for (let idx = startBlock; idx < endBlock; idx++) {\n                    const endOffset = startOffset + 512;\n                    this.blocks[idx] = new Uint8Array(\n                        buffer.slice(startOffset, endOffset)\n                    );\n                    startOffset += 512;\n                }\n                deferred.resolve(true);\n            }\n        }\n        return this.blocks[blockNumber];\n    }\n\n    async write(blockNumber: number, block: Uint8Array) {\n        this.blocks[blockNumber] = block;\n    }\n}\n","import MicroModal from 'micromodal';\n\nimport { base64_json_parse, base64_json_stringify } from '../base64';\nimport { Audio, SOUND_ENABLED_OPTION } from './audio';\nimport DriveLights from './drive_lights';\nimport { includes, word } from '../types';\nimport {\n    BLOCK_FORMATS,\n    DISK_FORMATS,\n    DiskDescriptor,\n    DriveNumber,\n    DRIVE_NUMBERS,\n    MassStorage,\n    JSONBinaryImage,\n    JSONDisk,\n    BlockFormat,\n    FLOPPY_FORMATS,\n    isBlockStorage,\n} from '../formats/types';\nimport { initGamepad } from './gamepad';\nimport KeyBoard from './keyboard';\nimport Tape, { TAPE_TYPES } from './tape';\n\nimport ApplesoftDecompiler from '../applesoft/decompiler';\nimport ApplesoftCompiler from '../applesoft/compiler';\nimport { TXTTAB } from 'js/applesoft/zeropage';\n\nimport { debug } from '../util';\nimport { Apple2, Stats, State as Apple2State } from '../apple2';\nimport DiskII from '../cards/disk2';\nimport { CPU6502 } from '@whscullin/cpu6502';\nimport { copyScreenToClipboard, VideoModes } from '../videomodes';\nimport Apple2IO from '../apple2io';\nimport Printer from './printer';\n\nimport { OptionsModal } from './options_modal';\nimport { Screen, SCREEN_FULL_PAGE } from './screen';\nimport { JoyStick } from './joystick';\nimport { System } from './system';\nimport { Options } from '../options';\nimport { HttpBlockDisk } from 'js/formats/http_block_disk';\n\nlet paused = false;\n\nlet startTime = Date.now();\nlet lastCycles = 0;\nlet lastFrames = 0;\nlet lastRenderedFrames = 0;\n\nlet hashtag = document.location.hash;\nlet oldHashFiles: string[] = [];\n\nconst options = new Options();\nconst optionsModal = new OptionsModal(options);\n\ntype DiskCollection = {\n    [name: string]: DiskDescriptor[];\n};\n\nconst CIDERPRESS_EXTENSION = /#([0-9a-f]{2})([0-9a-f]{4})$/i;\nconst BIN_TYPES = ['bin'];\n\nconst KNOWN_FILE_TYPES = [\n    ...DISK_FORMATS,\n    ...TAPE_TYPES,\n    ...BIN_TYPES,\n] as readonly string[];\n\nconst disk_categories: DiskCollection = { 'Local Saves': [] };\nconst disk_sets: DiskCollection = {};\n// Disk names\nconst disk_cur_name: string[] = [];\n// Disk categories\nconst disk_cur_cat: string[] = [];\n\nlet _apple2: Apple2;\nlet cpu: CPU6502;\nlet stats: Stats;\nlet vm: VideoModes;\nlet tape: Tape;\nlet _disk2: DiskII;\nlet _massStorage: MassStorage<BlockFormat>;\nlet _printer: Printer;\nlet audio: Audio;\nlet screen: Screen;\nlet joystick: JoyStick;\nlet system: System;\nlet keyboard: KeyBoard;\nlet io: Apple2IO;\nlet driveNo: DriveNumber = 1;\nlet _e: boolean;\n\nlet ready: Promise<[void, void]>;\n\nexport const driveLights = new DriveLights();\n\nexport function dumpApplesoftProgram() {\n    const decompiler = ApplesoftDecompiler.decompilerFromMemory(cpu);\n    debug(decompiler.list({ apple2: _e ? 'e' : 'plus' }));\n}\n\nexport function compileApplesoftProgram(program: string) {\n    const start = cpu.read(TXTTAB) + (cpu.read(TXTTAB + 1) << 8);\n    ApplesoftCompiler.compileToMemory(cpu, program, start);\n    dumpApplesoftProgram();\n}\n\nexport function openLoad(driveString: string, event: MouseEvent) {\n    driveNo = parseInt(driveString, 10) as DriveNumber;\n    if (event.metaKey && includes(DRIVE_NUMBERS, driveNo)) {\n        openLoadHTTP();\n    } else {\n        if (disk_cur_cat[driveNo]) {\n            const element =\n                document.querySelector<HTMLSelectElement>('#category_select')!;\n            element.value = disk_cur_cat[driveNo];\n            selectCategory();\n        }\n        MicroModal.show('load-modal');\n    }\n}\n\nexport function openSave(driveString: string, event: MouseEvent) {\n    _disk2\n        .getBinary(driveNo)\n        .then((storageData) => {\n            const driveNo = parseInt(driveString, 10) as DriveNumber;\n\n            const mimeType = 'application/octet-stream';\n\n            const a =\n                document.querySelector<HTMLAnchorElement>('#local_save_link')!;\n\n            if (!storageData) {\n                alert(`No data from drive ${driveNo}`);\n                return;\n            }\n\n            const { data } = storageData;\n            const blob = new Blob([data], { type: mimeType });\n            a.href = window.URL.createObjectURL(blob);\n            a.download = driveLights.label(driveNo) + '.dsk';\n\n            if (event.metaKey) {\n                dumpDisk(driveNo);\n            } else {\n                const saveName =\n                    document.querySelector<HTMLInputElement>('#save_name')!;\n                saveName.value = driveLights.label(driveNo);\n                MicroModal.show('save-modal');\n            }\n        })\n        .catch((error) => console.error(error));\n}\n\nexport function openAlert(msg: string) {\n    const el = document.querySelector<HTMLDivElement>('#alert-modal .message')!;\n    el.innerText = msg;\n    MicroModal.show('alert-modal');\n}\n\n/********************************************************************\n *\n * Drag and Drop\n */\n\nexport function handleDragOver(_driveNo: number, event: DragEvent) {\n    event.preventDefault();\n    event.dataTransfer!.dropEffect = 'copy';\n}\n\nexport function handleDragEnd(_driveNo: number, event: DragEvent) {\n    const dt = event.dataTransfer!;\n    if (dt.items) {\n        for (let i = 0; i < dt.items.length; i++) {\n            dt.items.remove(i);\n        }\n    } else {\n        dt.clearData();\n    }\n}\n\nexport function handleDrop(driveNo: number, event: DragEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (driveNo < 1) {\n        if (!_disk2.getMetadata(1)) {\n            driveNo = 1;\n        } else if (!_disk2.getMetadata(2)) {\n            driveNo = 2;\n        } else {\n            driveNo = 1;\n        }\n    }\n    const dt = event.dataTransfer!;\n    if (dt.files.length === 1) {\n        const runOnLoad = event.shiftKey;\n        doLoadLocal(driveNo as DriveNumber, dt.files[0], { runOnLoad });\n    } else if (dt.files.length === 2) {\n        doLoadLocal(1, dt.files[0]);\n        doLoadLocal(2, dt.files[1]);\n    } else {\n        for (let idx = 0; idx < dt.items.length; idx++) {\n            if (dt.items[idx].type === 'text/uri-list') {\n                dt.items[idx].getAsString(function (url) {\n                    const parts = hup().split('|');\n                    parts[driveNo - 1] = url;\n                    document.location.hash = parts.join('|');\n                });\n            }\n        }\n    }\n}\n\nfunction loadingStart() {\n    const meter = document.querySelector<HTMLDivElement>(\n        '#loading-modal .meter'\n    )!;\n    meter.style.display = 'none';\n    MicroModal.show('loading-modal');\n}\n\nfunction loadingProgress(current: number, total: number) {\n    if (total) {\n        const meter = document.querySelector<HTMLDivElement>(\n            '#loading-modal .meter'\n        )!;\n        const progress = document.querySelector<HTMLDivElement>(\n            '#loading-modal .progress'\n        )!;\n        meter.style.display = 'block';\n        progress.style.width = `${(current / total) * meter.clientWidth}px`;\n    }\n}\n\nfunction loadingStop() {\n    MicroModal.close('loading-modal');\n\n    if (!paused) {\n        ready\n            .then(() => {\n                _apple2.run();\n            })\n            .catch(console.error);\n    }\n}\n\nexport function loadAjax(driveNo: DriveNumber, url: string) {\n    loadingStart();\n\n    fetch(url)\n        .then(function (response: Response) {\n            if (response.ok) {\n                return response.json();\n            } else {\n                throw new Error('Error loading: ' + response.statusText);\n            }\n        })\n        .then(function (data: JSONDisk | JSONBinaryImage) {\n            if (data.type === 'binary') {\n                loadBinary(data);\n            } else if (includes(DISK_FORMATS, data.type)) {\n                loadDisk(driveNo, data);\n            }\n            initGamepad(data.gamepad);\n            loadingStop();\n        })\n        .catch(function (error: Error) {\n            loadingStop();\n            openAlert(error.message);\n            console.error(error);\n        });\n}\n\nexport function doLoad(event: MouseEvent | KeyboardEvent) {\n    MicroModal.close('load-modal');\n    const select = document.querySelector<HTMLSelectElement>('#disk_select')!;\n    const urls = select.value;\n    let url;\n    if (urls && urls.length) {\n        if (typeof urls === 'string') {\n            url = urls;\n        } else {\n            url = urls[0];\n        }\n    }\n\n    const localFile = document.querySelector<HTMLInputElement>('#local_file')!;\n    const files = localFile.files;\n    if (files && files.length === 1) {\n        const runOnLoad = event.shiftKey;\n        doLoadLocal(driveNo, files[0], { runOnLoad });\n    } else if (url) {\n        let filename;\n        MicroModal.close('load-modal');\n        if (url.slice(0, 6) === 'local:') {\n            filename = url.slice(6);\n            if (filename === '__manage') {\n                openManage();\n            } else {\n                loadLocalStorage(driveNo, filename);\n            }\n        } else {\n            const r1 = /json\\/disks\\/(.*).json$/.exec(url);\n            if (r1) {\n                filename = r1[1];\n            } else {\n                filename = url;\n            }\n            const parts = hup().split('|');\n            parts[driveNo - 1] = filename;\n            document.location.hash = parts.join('|');\n        }\n    }\n}\n\nexport function doSave() {\n    const saveName = document.querySelector<HTMLInputElement>('#save_name')!;\n    const name = saveName.value;\n    saveLocalStorage(driveNo, name);\n    MicroModal.close('save-modal');\n    window.setTimeout(() => openAlert('Saved'), 0);\n}\n\nexport function doDelete(name: string) {\n    if (window.confirm('Delete ' + name + '?')) {\n        deleteLocalStorage(name);\n    }\n}\n\ninterface LoadOptions {\n    address?: word;\n    runOnLoad?: boolean;\n}\n\nfunction doLoadLocal(\n    driveNo: DriveNumber,\n    file: File,\n    options: Partial<LoadOptions> = {}\n) {\n    const parts = file.name.split('.');\n    const ext = parts[parts.length - 1].toLowerCase();\n    const matches = file.name.match(CIDERPRESS_EXTENSION);\n    let type, aux;\n    if (matches && matches.length === 3) {\n        [, type, aux] = matches;\n    }\n    if (includes(DISK_FORMATS, ext)) {\n        doLoadLocalDisk(driveNo, file);\n    } else if (includes(TAPE_TYPES, ext)) {\n        tape.doLoadLocalTape(file);\n    } else if (BIN_TYPES.includes(ext) || type === '06' || options.address) {\n        const auxAddress =\n            aux !== undefined ? { address: parseInt(aux, 16) } : {};\n        doLoadBinary(file, { ...options, ...auxAddress });\n    } else {\n        const addressInput = document.querySelector<HTMLInputElement>(\n            '#local_file_address'\n        );\n        const addressStr = addressInput?.value;\n        if (addressStr) {\n            const address = parseInt(addressStr, 16);\n            if (isNaN(address)) {\n                openAlert('Invalid address: ' + addressStr);\n                return;\n            }\n            doLoadBinary(file, { address, ...options });\n        } else {\n            openAlert('Unknown file type: ' + ext);\n        }\n    }\n}\n\nfunction doLoadBinary(file: File, options: LoadOptions) {\n    loadingStart();\n\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const result = this.result as ArrayBuffer;\n        let { address } = options;\n        address = address ?? 0x2000;\n        const bytes = new Uint8Array(result);\n        for (let idx = 0; idx < result.byteLength; idx++) {\n            cpu.write(address >> 8, address & 0xff, bytes[idx]);\n            address++;\n        }\n        if (options.runOnLoad) {\n            cpu.reset();\n            cpu.setPC(address);\n        }\n        loadingStop();\n    };\n    fileReader.readAsArrayBuffer(file);\n}\n\nfunction doLoadLocalDisk(driveNo: DriveNumber, file: File) {\n    loadingStart();\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const result = this.result as ArrayBuffer;\n        const parts = file.name.split('.');\n        const ext = parts.pop()!.toLowerCase();\n        const name = parts.join('.');\n\n        // Remove any json file reference\n        const files = hup().split('|');\n        files[driveNo - 1] = '';\n        document.location.hash = files.join('|');\n\n        if (includes(DISK_FORMATS, ext)) {\n            if (result.byteLength >= 800 * 1024) {\n                if (includes(BLOCK_FORMATS, ext)) {\n                    _massStorage\n                        .setBinary(driveNo, name, ext, result)\n                        .then(() => initGamepad())\n                        .catch((error) => {\n                            console.error(error);\n                            openAlert(`Unable to load ${name}`);\n                        });\n                } else {\n                    openAlert(`Unable to load ${name}`);\n                }\n            } else {\n                if (includes(FLOPPY_FORMATS, ext)) {\n                    _disk2\n                        .setBinary(driveNo, name, ext, result)\n                        .then(() => initGamepad())\n                        .catch((error) => {\n                            console.error(error);\n                            openAlert(`Unable to load ${name}`);\n                        });\n                } else {\n                    openAlert(`Unable to load ${name}`);\n                }\n            }\n        }\n        loadingStop();\n    };\n    fileReader.readAsArrayBuffer(file);\n}\n\nfunction defaultLoadHttp(url: string, name: string, ext: string) {\n    fetch(url)\n        .then(function (response) {\n            if (response.ok) {\n                const reader = response.body!.getReader();\n                let received = 0;\n                const chunks: Uint8Array[] = [];\n                const contentLength = parseInt(\n                    response.headers.get('content-length')!,\n                    10\n                );\n\n                return reader\n                    .read()\n                    .then(function readChunk(result): Promise<ArrayBufferLike> {\n                        if (result.done) {\n                            const data = new Uint8Array(received);\n                            let offset = 0;\n                            for (let idx = 0; idx < chunks.length; idx++) {\n                                data.set(chunks[idx], offset);\n                                offset += chunks[idx].length;\n                            }\n                            return Promise.resolve(data.buffer);\n                        }\n\n                        received += result.value.length;\n                        if (contentLength) {\n                            loadingProgress(received, contentLength);\n                        }\n                        chunks.push(result.value);\n\n                        return reader.read().then(readChunk);\n                    });\n            } else {\n                throw new Error('Error loading: ' + response.statusText);\n            }\n        })\n        .then(function (data) {\n            if (includes(DISK_FORMATS, ext)) {\n                if (data.byteLength >= 800 * 1024) {\n                    if (includes(BLOCK_FORMATS, ext)) {\n                        _massStorage\n                            .setBinary(driveNo, name, ext, data)\n                            .then(() => initGamepad())\n                            .catch((error) => {\n                                console.error(error);\n                                openAlert(`Unable to load ${name}`);\n                            });\n                    }\n                } else {\n                    if (includes(FLOPPY_FORMATS, ext)) {\n                        _disk2\n                            .setBinary(driveNo, name, ext, data)\n                            .then(() => initGamepad())\n                            .catch((error) => {\n                                console.error(error);\n                                openAlert(`Unable to load ${name}`);\n                            });\n                    }\n                }\n            } else {\n                throw new Error(`Extension ${ext} not recognized.`);\n            }\n            loadingStop();\n        })\n        .catch((error: Error) => {\n            loadingStop();\n            openAlert(error.message);\n            console.error(error);\n        });\n}\n\nexport function doLoadHTTP(driveNo: DriveNumber, url?: string) {\n    if (!url) {\n        MicroModal.close('http-modal');\n    }\n\n    loadingStart();\n    const input = document.querySelector<HTMLInputElement>('#http_url')!;\n    url = url || input.value;\n    if (url) {\n        const urlParts = url.split('/');\n        const file = urlParts.pop()!;\n        const fileParts = file.split('.');\n        const ext = fileParts.pop()!.toLowerCase();\n        const name = decodeURIComponent(fileParts.join('.'));\n        fetch(url, { method: 'HEAD' })\n            .then((head) => {\n                const contentLength = parseInt(\n                    head.headers.get('content-length') || '0',\n                    10\n                );\n                const hasByteRange =\n                    head.headers.get('accept-ranges') === 'bytes';\n                if (\n                    hasByteRange &&\n                    includes(BLOCK_FORMATS, ext) &&\n                    contentLength >= 800 * 1024 &&\n                    isBlockStorage(_massStorage)\n                ) {\n                    _massStorage\n                        .setBlockDisk(\n                            driveNo,\n                            new HttpBlockDisk(name, contentLength, url)\n                        )\n                        .catch((error: Error) => {\n                            openAlert(error.message);\n                            console.error(error);\n                        });\n                    loadingStop();\n                } else {\n                    defaultLoadHttp(url, name, ext);\n                }\n            })\n            .catch((error: Error) => {\n                console.warn('HEAD failed', error);\n                defaultLoadHttp(url, name, ext);\n            });\n    }\n}\n\nfunction openLoadHTTP() {\n    MicroModal.show('http-modal');\n}\n\nfunction openManage() {\n    MicroModal.show('manage-modal');\n}\n\nlet showStats = 0;\n\nexport function updateKHz() {\n    const now = Date.now();\n    const ms = now - startTime;\n    const cycles = cpu.getCycles();\n    let delta;\n    let fps;\n    let khz;\n\n    const kHzElement = document.querySelector<HTMLDivElement>('#khz')!;\n    switch (showStats) {\n        case 0: {\n            delta = cycles - lastCycles;\n            khz = Math.trunc(delta / ms);\n            kHzElement.innerText = `${khz} kHz`;\n            break;\n        }\n        case 1: {\n            delta = stats.renderedFrames - lastRenderedFrames;\n            fps = Math.trunc(delta / (ms / 1000));\n            kHzElement.innerText = `${fps} rps`;\n            break;\n        }\n        default: {\n            delta = stats.frames - lastFrames;\n            fps = Math.trunc(delta / (ms / 1000));\n            kHzElement.innerText = `${fps} fps`;\n        }\n    }\n\n    startTime = now;\n    lastCycles = cycles;\n    lastRenderedFrames = stats.renderedFrames;\n    lastFrames = stats.frames;\n}\n\nexport function toggleShowFPS() {\n    showStats = ++showStats % 3;\n}\n\nexport function toggleSound() {\n    const on = !audio.isEnabled();\n    options.setOption(SOUND_ENABLED_OPTION, on);\n    updateSoundButton(on);\n}\n\nfunction initSoundToggle() {\n    updateSoundButton(audio.isEnabled());\n}\n\nfunction updateSoundButton(on: boolean) {\n    const label = document.querySelector<HTMLDivElement>('#toggle-sound i')!;\n    if (on) {\n        label.classList.remove('fa-volume-off');\n        label.classList.add('fa-volume-up');\n    } else {\n        label.classList.remove('fa-volume-up');\n        label.classList.add('fa-volume-off');\n    }\n}\n\nfunction dumpDisk(driveNo: DriveNumber) {\n    const wind = window.open('', '_blank')!;\n    wind.document.title = driveLights.label(driveNo);\n    wind.document.write('<pre>');\n    wind.document.write(_disk2.getJSON(driveNo, true));\n    wind.document.write('</pre>');\n    wind.document.close();\n}\n\nexport function reset() {\n    _apple2.reset();\n}\n\nfunction loadBinary(bin: JSONBinaryImage) {\n    const maxLen = Math.min(bin.length, 0x10000 - bin.start);\n    for (let idx = 0; idx < maxLen; idx++) {\n        const pos = bin.start + idx;\n        cpu.write(pos, bin.data[idx]);\n    }\n    cpu.reset();\n    cpu.setPC(bin.start);\n}\n\nexport function selectCategory() {\n    const diskSelect =\n        document.querySelector<HTMLSelectElement>('#disk_select')!;\n    const categorySelect =\n        document.querySelector<HTMLSelectElement>('#category_select')!;\n    diskSelect.innerHTML = '';\n    const cat = disk_categories[categorySelect.value];\n    if (cat) {\n        for (let idx = 0; idx < cat.length; idx++) {\n            const file = cat[idx];\n            let name = file.name;\n            if (file.disk) {\n                name += ` - ${file.disk}`;\n            }\n            const option = document.createElement('option');\n            option.value = file.filename;\n            option.innerText = name;\n            diskSelect.append(option);\n            if (disk_cur_name[driveNo] === name) {\n                option.selected = true;\n            }\n        }\n    }\n}\n\nexport function selectDisk() {\n    const localFile = document.querySelector<HTMLInputElement>('#local_file')!;\n    localFile.value = '';\n}\n\nexport function clickDisk(event: MouseEvent | KeyboardEvent) {\n    doLoad(event);\n}\n\n/** Called to load disks from the local catalog. */\nfunction loadDisk(driveNo: DriveNumber, disk: JSONDisk) {\n    let name = disk.name;\n    const category = disk.category!; // all disks in the local catalog have a category\n\n    if (disk.disk) {\n        name += ' - ' + disk.disk;\n    }\n\n    disk_cur_cat[driveNo] = category;\n    disk_cur_name[driveNo] = name;\n\n    _disk2.setDisk(driveNo, disk);\n    initGamepad(disk.gamepad);\n}\n\n/*\n *  LocalStorage Disk Storage\n */\n\nfunction updateLocalStorage() {\n    const diskIndex = JSON.parse(\n        window.localStorage.getItem('diskIndex') || '{}'\n    ) as LocalDiskIndex;\n    const names = Object.keys(diskIndex);\n\n    const cat: DiskDescriptor[] = (disk_categories['Local Saves'] = []);\n    const contentDiv = document.querySelector<HTMLDivElement>(\n        '#manage-modal-content'\n    )!;\n    contentDiv.innerHTML = '';\n\n    names.forEach(function (name) {\n        cat.push({\n            category: 'Local Saves',\n            name: name,\n            filename: 'local:' + name,\n        });\n        contentDiv.innerHTML =\n            '<span class=\"local_save\">' +\n            name +\n            ' <a href=\"#\" onclick=\"Apple2.doDelete(\\'' +\n            name +\n            '\\')\">Delete</a><br /></span>';\n    });\n    cat.push({\n        category: 'Local Saves',\n        name: 'Manage Saves...',\n        filename: 'local:__manage',\n    });\n}\n\ntype LocalDiskIndex = {\n    [name: string]: string;\n};\n\nfunction saveLocalStorage(driveNo: DriveNumber, name: string) {\n    const diskIndex = JSON.parse(\n        window.localStorage.getItem('diskIndex') || '{}'\n    ) as LocalDiskIndex;\n\n    const json = _disk2.getJSON(driveNo);\n    diskIndex[name] = json;\n\n    window.localStorage.setItem('diskIndex', JSON.stringify(diskIndex));\n\n    driveLights.label(driveNo, name);\n    driveLights.dirty(driveNo, false);\n    updateLocalStorage();\n}\n\nfunction deleteLocalStorage(name: string) {\n    const diskIndex = JSON.parse(\n        window.localStorage.getItem('diskIndex') || '{}'\n    ) as LocalDiskIndex;\n    if (diskIndex[name]) {\n        delete diskIndex[name];\n        openAlert('Deleted');\n    }\n    window.localStorage.setItem('diskIndex', JSON.stringify(diskIndex));\n    updateLocalStorage();\n}\n\nfunction loadLocalStorage(driveNo: DriveNumber, name: string) {\n    const diskIndex = JSON.parse(\n        window.localStorage.getItem('diskIndex') || '{}'\n    ) as LocalDiskIndex;\n    if (diskIndex[name]) {\n        _disk2.setJSON(driveNo, diskIndex[name]);\n        driveLights.label(driveNo, name);\n        driveLights.dirty(driveNo, false);\n    }\n}\n\nif (window.localStorage !== undefined) {\n    const nodes = document.querySelectorAll<HTMLElement>('.disksave');\n    nodes.forEach(function (el) {\n        el.style.display = 'inline-block';\n    });\n}\n\nconst categorySelect =\n    document.querySelector<HTMLSelectElement>('#category_select')!;\n\ndeclare global {\n    interface Window {\n        disk_index: DiskDescriptor[];\n    }\n}\n\nfunction buildDiskIndex() {\n    let oldCat = '';\n    let option;\n    for (let idx = 0; idx < window.disk_index.length; idx++) {\n        const file = window.disk_index[idx];\n        const cat = file.category;\n        const name = file.name;\n        const disk = file.disk;\n        if (file.e && !_e) {\n            continue;\n        }\n        if (cat !== oldCat) {\n            option = document.createElement('option');\n            option.value = cat;\n            option.innerText = cat;\n            categorySelect.append(option);\n\n            disk_categories[cat] = [];\n            oldCat = cat;\n        }\n        disk_categories[cat].push(file);\n        if (disk) {\n            if (!disk_sets[name]) {\n                disk_sets[name] = [];\n            }\n            disk_sets[name].push(file);\n        }\n    }\n    option = document.createElement('option');\n    option.innerText = 'Local Saves';\n    categorySelect.append(option);\n\n    updateLocalStorage();\n}\n\n/**\n * Processes the URL fragment. It is expected to be of the form:\n * `disk1|disk2` where each disk is the name of a local image OR\n * a URL.\n */\nfunction processHash(hash: string) {\n    const files = hash.split('|');\n    for (let idx = 0; idx < Math.min(2, files.length); idx++) {\n        const drive = idx + 1;\n        if (!includes(DRIVE_NUMBERS, drive)) {\n            break;\n        }\n        const file = files[idx];\n        if (file === oldHashFiles[idx]) {\n            continue;\n        }\n        if (file.indexOf('://') > 0) {\n            const parts = file.split('.');\n            const ext = parts[parts.length - 1].toLowerCase();\n            if (ext === 'json') {\n                loadAjax(drive, file);\n            } else {\n                doLoadHTTP(drive, file);\n            }\n        } else if (file) {\n            loadAjax(drive, 'json/disks/' + file + '.json');\n        }\n    }\n    oldHashFiles = files;\n}\n\nexport function updateUI() {\n    if (document.location.hash !== hashtag) {\n        hashtag = document.location.hash;\n        const hash = hup();\n        if (hash) {\n            processHash(hash);\n        }\n    }\n}\n\nexport function pauseRun() {\n    const label = document.querySelector<HTMLElement>('#pause-run i')!;\n    if (paused) {\n        ready\n            .then(() => {\n                _apple2.run();\n            })\n            .catch(console.error);\n        label.classList.remove('fa-play');\n        label.classList.add('fa-pause');\n    } else {\n        _apple2.stop();\n        label.classList.remove('fa-pause');\n        label.classList.add('fa-play');\n    }\n    paused = !paused;\n}\n\nexport function openOptions() {\n    optionsModal.openModal();\n}\n\nexport function copy() {\n    void copyScreenToClipboard(vm);\n}\n\nexport function paste() {\n    const asyncPaste = async function () {\n        const text = await navigator.clipboard.readText();\n        io.setKeyBuffer(text);\n    };\n    void asyncPaste();\n}\n\nexport function openPrinterModal() {\n    const mimeType = 'application/octet-stream';\n    const data = _printer.getRawOutput();\n    const a = document.querySelector<HTMLAnchorElement>('#raw_printer_output')!;\n\n    const blob = new Blob([data], { type: mimeType });\n    a.href = window.URL.createObjectURL(blob);\n    a.download = 'raw_printer_output.bin';\n    MicroModal.show('printer-modal');\n}\n\nexport function clearPrinterPaper() {\n    _printer.clear();\n}\n\nexport function exitFullScreen() {\n    options.setOption(SCREEN_FULL_PAGE, false);\n}\n\ndeclare global {\n    interface Window {\n        clipboardData?: DataTransfer;\n    }\n    interface Event {\n        clipboardData?: DataTransfer;\n    }\n    interface Navigator {\n        standalone?: boolean;\n    }\n}\n\n/**\n * Returns the value of a query parameter or the empty string if it does not\n * exist.\n * @param name the parameter name. Note that `name` must not have any RegExp\n *     meta-characters except '[' and ']' or it will fail.\n */\n\nfunction gup(name: string) {\n    const params = new URLSearchParams(window.location.search);\n    return params.get(name);\n}\n\n/** Returns the URL fragment. */\nfunction hup() {\n    const regex = new RegExp('#(.*)');\n    const hash = decodeURIComponent(window.location.hash);\n    const results = regex.exec(hash);\n    if (!results) return '';\n    else return results[1];\n}\n\nfunction onLoaded(\n    apple2: Apple2,\n    disk2: DiskII,\n    massStorage: MassStorage<BlockFormat>,\n    printer: Printer,\n    e: boolean,\n    keyboardLayout: string\n) {\n    _apple2 = apple2;\n    cpu = _apple2.getCPU();\n    io = _apple2.getIO();\n    stats = apple2.getStats();\n    vm = apple2.getVideoModes();\n    tape = new Tape(io);\n    _disk2 = disk2;\n    _massStorage = massStorage;\n    _printer = printer;\n    _e = e;\n\n    system = new System(io, e);\n    options.addOptions(system);\n\n    joystick = new JoyStick(io);\n    options.addOptions(joystick);\n\n    screen = new Screen(vm);\n    options.addOptions(screen);\n\n    audio = new Audio(io);\n    options.addOptions(audio);\n    initSoundToggle();\n\n    ready = Promise.all([audio.ready, apple2.ready]);\n\n    MicroModal.init();\n\n    keyboard = new KeyBoard(cpu, io, keyboardLayout);\n    keyboard.create('#keyboard');\n    keyboard.setFunction('F1', () => cpu.reset());\n    keyboard.setFunction('F2', (event) => {\n        if (event.shiftKey) {\n            // Full window, but not full screen\n            options.setOption(\n                SCREEN_FULL_PAGE,\n                !options.getOption(SCREEN_FULL_PAGE)\n            );\n        } else {\n            screen.enterFullScreen();\n        }\n    });\n    keyboard.setFunction('F3', () => io.keyDown(0x1b)); // Escape\n    keyboard.setFunction('F4', optionsModal.openModal);\n    keyboard.setFunction('F6', () => {\n        window.localStorage.setItem(\n            'state',\n            base64_json_stringify(_apple2.getState())\n        );\n    });\n    keyboard.setFunction('F9', () => {\n        const localState = window.localStorage.getItem('state');\n        if (localState) {\n            _apple2.setState(base64_json_parse(localState) as Apple2State);\n        }\n    });\n\n    buildDiskIndex();\n\n    /*\n     * Input Handling\n     */\n\n    const screenElement = document.querySelector('#screen')!;\n\n    const doPaste = (event: Event) => {\n        const paste = (event.clipboardData || window.clipboardData)!.getData(\n            'text'\n        );\n        io.setKeyBuffer(paste);\n        event.preventDefault();\n    };\n\n    const doCopy = (event: Event) => {\n        event.preventDefault();\n        void copyScreenToClipboard(vm);\n    };\n\n    window.addEventListener('paste', (event: Event) => {\n        if (\n            document.activeElement &&\n            document.activeElement !== document.body\n        ) {\n            return;\n        }\n        doPaste(event);\n    });\n\n    window.addEventListener('copy', (event: Event) => {\n        if (\n            document.activeElement &&\n            document.activeElement !== document.body\n        ) {\n            return;\n        }\n        doCopy(event);\n    });\n\n    screenElement.addEventListener('copy', (event: Event) => {\n        doCopy(event);\n    });\n\n    screenElement.addEventListener('paste', (event: Event) => {\n        doPaste(event);\n    });\n\n    if (navigator.standalone) {\n        document.body.classList.add('standalone');\n    }\n\n    cpu.reset();\n    setInterval(updateKHz, 1000);\n    initGamepad();\n\n    // Check for disks in hashtag\n\n    const hash = gup('disk') || hup();\n    if (hash) {\n        _apple2.stop();\n        processHash(hash);\n    } else {\n        ready\n            .then(() => {\n                _apple2.run();\n            })\n            .catch(console.error);\n    }\n\n    document\n        .querySelector<HTMLInputElement>('#local_file')\n        ?.addEventListener('change', (event: Event) => {\n            const target = event.target as HTMLInputElement;\n            const address = document.querySelector<HTMLInputElement>(\n                '#local_file_address_input'\n            )!;\n            const parts = target.value.split('.');\n            const ext = parts[parts.length - 1];\n\n            if (KNOWN_FILE_TYPES.includes(ext)) {\n                address.style.display = 'none';\n            } else {\n                address.style.display = 'inline-block';\n            }\n        });\n}\n\nexport function initUI(\n    apple2: Apple2,\n    disk2: DiskII,\n    massStorage: MassStorage<BlockFormat>,\n    printer: Printer,\n    e: boolean,\n    keyboardLayout: string\n) {\n    window.addEventListener('load', () => {\n        onLoaded(apple2, disk2, massStorage, printer, e, keyboardLayout);\n    });\n}\n","import MicroModal from 'micromodal';\nimport {\n    BOOLEAN_OPTION,\n    SELECT_OPTION,\n    Options,\n    SelectOption,\n} from '../options';\n\nexport class OptionsModal {\n    constructor(private options: Options) {}\n\n    openModal = () => {\n        const content = document.querySelector('#options-modal-content');\n        if (content) {\n            content.innerHTML = '';\n            for (const section of this.options.getSections()) {\n                const { name, options } = section;\n\n                // Section header\n                const header = document.createElement('h3');\n                header.textContent = name;\n                content.appendChild(header);\n\n                // Preferences\n                const list = document.createElement('ul');\n                for (const option of options) {\n                    const { name, label, type } = option;\n                    const onChange = (\n                        evt: InputEvent & { target: HTMLInputElement }\n                    ) => {\n                        const { target } = evt;\n                        switch (type) {\n                            case BOOLEAN_OPTION:\n                                this.options.setOption(name, target.checked);\n                                break;\n                            default:\n                                this.options.setOption(name, target.value);\n                        }\n                    };\n\n                    const listItem = document.createElement('li');\n\n                    let element: HTMLElement;\n                    switch (type) {\n                        case BOOLEAN_OPTION:\n                            {\n                                const inputElement =\n                                    document.createElement('input');\n                                const checked = this.options.getOption(\n                                    name\n                                ) as boolean;\n                                inputElement.setAttribute('type', 'checkbox');\n                                inputElement.checked = checked;\n                                element = inputElement;\n                            }\n                            break;\n                        case SELECT_OPTION:\n                            {\n                                const selectOption = option as SelectOption;\n                                const selectElement =\n                                    document.createElement('select');\n                                const selected = this.options.getOption(\n                                    name\n                                ) as string;\n                                for (const value of selectOption.values) {\n                                    const optionElement =\n                                        document.createElement('option');\n                                    optionElement.value = value.value;\n                                    optionElement.textContent = value.name;\n                                    optionElement.selected =\n                                        value.value === selected;\n                                    selectElement.appendChild(optionElement);\n                                }\n                                element = selectElement;\n                            }\n                            break;\n                        default: {\n                            const inputElement =\n                                document.createElement('input');\n                            const value = this.options.getOption(\n                                name\n                            ) as string;\n                            inputElement.value = value;\n                            element = inputElement;\n                        }\n                    }\n                    element.id = name;\n                    element.addEventListener('change', onChange);\n                    listItem.appendChild(element);\n                    const labelElement = document.createElement('label');\n\n                    labelElement.textContent = label;\n                    labelElement.setAttribute('for', name);\n                    listItem.appendChild(labelElement);\n\n                    list.appendChild(listItem);\n                }\n                content.appendChild(list);\n            }\n            const reloadElement = document.createElement('i');\n            reloadElement.textContent = '* Reload page to take effect';\n            content.append(reloadElement);\n        } else {\n            console.error('Cannot find target div#options-modal-content');\n        }\n        MicroModal.show('options-modal');\n    };\n}\n","import { Callbacks } from '../cards/disk2';\nimport type { DriveNumber } from '../formats/types';\n\nexport default class DriveLights implements Callbacks {\n    public driveLight(driveNo: DriveNumber, on: boolean) {\n        const disk = document.querySelector<HTMLElement>(`#disk${driveNo}`);\n        if (disk) {\n            disk.style.backgroundImage = on\n                ? 'url(css/red-on-16.png)'\n                : 'url(css/red-off-16.png)';\n        }\n    }\n\n    public dirty(_driveNo: DriveNumber, _dirty: boolean) {\n        // document.querySelector('#disksave' + drive).disabled = !dirty;\n    }\n\n    public label(driveNo: DriveNumber, label?: string, side?: string) {\n        const labelElement = document.querySelector<HTMLElement>(\n            `#disk-label${driveNo}`\n        );\n        let labelText = '';\n        if (labelElement) {\n            labelText = labelElement.innerText;\n            if (label) {\n                labelText = `${label || ''} ${side ? `- ${side}` : ''}`;\n                labelElement.innerText = labelText;\n            }\n        }\n        return labelText;\n    }\n}\n","import { byte } from '../types';\n\n/**\n * Printer UI. The \"paper\" is bound to the element selected by the input.\n *\n * Every line that is output to the printer is added as a <div> to the paper.\n * The high bit of all characters is stripped and only visible characters are\n * added to the output. The following characters receive special treatment:\n *\n * *   `EOT` (ASCII 4): deletes last character\n * *   `HT` (ASCII 9): replaced with 8 spaces\n * *   `LF` (ASCII 10): silently removed\n * *   `CR` (ASCII 13): a newline and carriage return\n */\nexport default class Printer {\n    private paper: HTMLElement;\n    private _lineBuffer = '';\n    private _line: HTMLElement;\n    private _rawLen = 0;\n    private _raw = new Uint8Array(1024);\n\n    /**\n     * Creates a new printer bound to the given element.\n     * @param {string} el The selector of the element on which to bind the \"paper\".\n     */\n    constructor(el: string) {\n        this.paper = document.querySelector(el)!;\n        this.newLine();\n    }\n\n    private newLine() {\n        this._line = document.createElement('div');\n        this._line.classList.add('line');\n        this._line.innerText = this._lineBuffer;\n        this.paper.append(this._line);\n        this._lineBuffer = '';\n    }\n\n    putChar(val: byte) {\n        const ascii = val & 0x7f;\n        const visible = val >= 0x20;\n        const c = String.fromCharCode(ascii);\n\n        if (c === '\\r') {\n            this.newLine();\n        } else if (c === '\\n') {\n            // eat for now\n        } else if (c === '\\t') {\n            // possibly not right due to tab stops\n            this._lineBuffer += '        ';\n        } else if (ascii === 0x04) {\n            this._lineBuffer = this._lineBuffer.slice(0, -1);\n        } else if (visible) {\n            this._lineBuffer += c;\n        }\n        this._line.innerText = this._lineBuffer;\n        this._raw[this._rawLen] = val;\n        this._rawLen++;\n        if (this._rawLen > this._raw.length) {\n            const newRaw = new Uint8Array(this._raw.length * 2);\n            newRaw.set(this._raw);\n            this._raw = newRaw;\n        }\n    }\n\n    clear() {\n        this._lineBuffer = '';\n        this.paper.innerHTML = '';\n        this.newLine();\n        this._raw = new Uint8Array(1024);\n        this._rawLen = 0;\n    }\n\n    hasPrintout() {\n        return this.paper.innerText.length > 0;\n    }\n\n    getRawOutput() {\n        return this._raw.slice(0, this._rawLen);\n    }\n}\n","import { debug, toHex } from '../util';\nimport { bit, byte, word } from '../types';\nimport { grabNibble } from './format_utils';\nimport { DiskOptions, ENCODING_BITSTREAM, WozDisk } from './types';\n\nconst WOZ_HEADER_START = 0;\nconst WOZ_HEADER_SIZE = 12;\n\nconst WOZ1_SIGNATURE = 0x315a4f57;\nconst WOZ2_SIGNATURE = 0x325a4f57;\nconst WOZ_INTEGRITY_CHECK = 0x0a0d0aff;\n\n/**\n * Converts a range of bytes from a DataView into an ASCII string\n *\n * @param data DataView containing string\n * @param start start index of string\n * @param end end index of string\n * @returns ASCII string\n */\nfunction stringFromBytes(data: DataView, start: number, end: number): string {\n    const byteArray = new Uint8Array(\n        data.buffer.slice(data.byteOffset + start, data.byteOffset + end)\n    );\n    return String.fromCharCode(...byteArray);\n}\n\nexport class InfoChunk {\n    version: byte;\n\n    // Version 1\n    diskType: byte;\n    writeProtected: byte;\n    synchronized: byte;\n    cleaned: byte;\n    creator: string;\n\n    // Version 2\n    sides: byte = 0;\n    bootSector: byte = 0;\n    bitTiming: byte = 0;\n    compatibleHardware: word = 0;\n    requiredRAM: word = 0;\n    largestTrack: word = 0;\n\n    constructor(data: DataView) {\n        this.version = data.getUint8(0);\n        this.diskType = data.getUint8(1);\n        this.writeProtected = data.getUint8(2);\n        this.synchronized = data.getUint8(3);\n        this.cleaned = data.getUint8(4);\n        this.creator = stringFromBytes(data, 5, 37);\n\n        if (this.version > 1) {\n            this.sides = data.getUint8(37);\n            this.bootSector = data.getUint8(38);\n            this.bitTiming = data.getUint8(39);\n            this.compatibleHardware = data.getUint16(40, true);\n            this.requiredRAM = data.getUint16(42, true);\n            this.largestTrack = data.getUint16(44, true);\n        }\n    }\n}\n\nexport class TMapChunk {\n    trackMap: byte[];\n\n    constructor(data: DataView) {\n        this.trackMap = [];\n\n        for (let idx = 0; idx < 160; idx++) {\n            this.trackMap.push(data.getUint8(idx));\n        }\n    }\n}\n\nconst WOZ_TRACK_SIZE = 6656;\nconst WOZ_TRACK_INFO_BITS = 6648;\n\nexport class TrksChunk {\n    rawTracks: Uint8Array[];\n    tracks: Uint8Array[];\n}\n\nexport class TrksChunk1 extends TrksChunk {\n    constructor(data: DataView) {\n        super();\n\n        this.rawTracks = [];\n        this.tracks = [];\n\n        for (\n            let trackNo = 0, idx = 0;\n            idx < data.byteLength;\n            idx += WOZ_TRACK_SIZE, trackNo++\n        ) {\n            let track = [];\n            const rawTrack: bit[] = [];\n            const slice = data.buffer.slice(\n                data.byteOffset + idx,\n                data.byteOffset + idx + WOZ_TRACK_SIZE\n            );\n            const trackData = new Uint8Array(slice);\n            const trackInfo = new DataView(slice);\n            const trackBitCount = trackInfo.getUint16(\n                WOZ_TRACK_INFO_BITS,\n                true\n            );\n            for (let jdx = 0; jdx < trackBitCount; jdx++) {\n                const byteIndex = jdx >> 3;\n                const bitIndex = 7 - (jdx & 0x07);\n                rawTrack[jdx] =\n                    (trackData[byteIndex] >> bitIndex) & 0x01 ? 1 : 0;\n            }\n\n            track = [];\n            let offset = 0;\n            while (offset < rawTrack.length) {\n                const result = grabNibble(rawTrack, offset);\n                if (!result.nibble) {\n                    break;\n                }\n                track.push(result.nibble);\n                offset = result.offset + 1;\n            }\n\n            this.tracks[trackNo] = new Uint8Array(track);\n            this.rawTracks[trackNo] = new Uint8Array(rawTrack);\n        }\n    }\n}\n\nexport interface Trk {\n    startBlock: word;\n    blockCount: word;\n    bitCount: number;\n}\n\nexport class TrksChunk2 extends TrksChunk {\n    trks: Trk[];\n\n    constructor(data: DataView) {\n        super();\n\n        let trackNo;\n        this.trks = [];\n        for (trackNo = 0; trackNo < 160; trackNo++) {\n            const startBlock = data.getUint16(trackNo * 8, true);\n            const blockCount = data.getUint16(trackNo * 8 + 2, true);\n            const bitCount = data.getUint32(trackNo * 8 + 4, true);\n            if (bitCount === 0) {\n                break;\n            }\n            this.trks.push({\n                startBlock: startBlock,\n                blockCount: blockCount,\n                bitCount: bitCount,\n            });\n        }\n        this.tracks = [];\n        this.rawTracks = [];\n\n        const bits = data.buffer;\n        for (trackNo = 0; trackNo < this.trks.length; trackNo++) {\n            const trk = this.trks[trackNo];\n\n            let track = [];\n            const rawTrack: bit[] = [];\n            const start = trk.startBlock * 512;\n            const end = start + trk.blockCount * 512;\n            const slice = bits.slice(start, end);\n            const trackData = new Uint8Array(slice);\n            if (trackNo === 0) {\n                // debug(`First bytes: ${toHex(trackData[0])} ${toHex(trackData[1])} ${toHex(trackData[2])} ${toHex(trackData[3])}`);\n            }\n            for (let jdx = 0; jdx < trk.bitCount; jdx++) {\n                const byteIndex = jdx >> 3;\n                const bitIndex = 7 - (jdx & 0x07);\n                rawTrack[jdx] =\n                    (trackData[byteIndex] >> bitIndex) & 0x01 ? 1 : 0;\n            }\n\n            track = [];\n            let offset = 0;\n            while (offset < rawTrack.length) {\n                const result = grabNibble(rawTrack, offset);\n                if (!result.nibble) {\n                    break;\n                }\n                track.push(result.nibble);\n                offset = result.offset + 1;\n            }\n\n            this.tracks[trackNo] = new Uint8Array(track);\n            this.rawTracks[trackNo] = new Uint8Array(rawTrack);\n        }\n    }\n}\n\nexport class MetaChunk {\n    values: Record<string, string>;\n\n    constructor(data: DataView) {\n        const infoStr = stringFromBytes(data, 0, data.byteLength);\n        const parts = infoStr.split('\\n');\n        this.values = parts.reduce(function (\n            acc: Record<string, string>,\n            part\n        ) {\n            const subParts = part.split('\\t');\n            acc[subParts[0]] = subParts[1];\n            return acc;\n        }, {});\n    }\n}\n\ninterface Chunks {\n    [key: string]: unknown;\n    info?: InfoChunk;\n    tmap?: TMapChunk;\n    trks?: TrksChunk;\n    meta?: MetaChunk;\n}\n\n/**\n * Returns a `Disk` object from Woz image data.\n * @param options the disk image and options\n * @returns A bitstream disk\n */\nexport default function createDiskFromWoz(options: DiskOptions): WozDisk {\n    const { rawData } = options;\n    if (!rawData) {\n        throw new Error('Requires rawData');\n    }\n    const dv = new DataView(rawData, 0);\n    let dvOffset = 0;\n    let wozVersion;\n    const chunks: Chunks = {};\n\n    function readHeader() {\n        const wozSignature = dv.getUint32(WOZ_HEADER_START + 0, true);\n\n        switch (wozSignature) {\n            case WOZ1_SIGNATURE:\n                wozVersion = 1;\n                break;\n            case WOZ2_SIGNATURE:\n                wozVersion = 2;\n                break;\n            default:\n                return false;\n        }\n\n        if (dv.getUint32(WOZ_HEADER_START + 4, true) !== WOZ_INTEGRITY_CHECK) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function readChunk() {\n        if (dvOffset >= dv.byteLength) {\n            return null;\n        }\n\n        const type = dv.getUint32(dvOffset, true);\n        const size = dv.getUint32(dvOffset + 4, true);\n        const data = new DataView(dv.buffer, dvOffset + 8, size);\n        dvOffset += size + 8;\n\n        return {\n            type: type,\n            size: size,\n            data: data,\n        };\n    }\n\n    if (readHeader()) {\n        dvOffset = WOZ_HEADER_SIZE;\n        let chunk = readChunk();\n        while (chunk) {\n            switch (chunk.type) {\n                case 0x4f464e49: // INFO\n                    chunks.info = new InfoChunk(chunk.data);\n                    break;\n                case 0x50414d54: // TMAP\n                    chunks.tmap = new TMapChunk(chunk.data);\n                    break;\n                case 0x534b5254: // TRKS\n                    if (wozVersion === 1) {\n                        chunks.trks = new TrksChunk1(chunk.data);\n                    } else {\n                        chunks.trks = new TrksChunk2(chunk.data);\n                    }\n                    break;\n                case 0x4154454d: // META\n                    chunks.meta = new MetaChunk(chunk.data);\n                    break;\n                case 0x54495257: // WRIT\n                    // Ignore\n                    break;\n                default:\n                    debug('Unsupported chunk', toHex(chunk.type, 8));\n            }\n            chunk = readChunk();\n        }\n    } else {\n        debug('Invalid woz header');\n    }\n\n    // debug(chunks);\n\n    const { meta, tmap, trks, info } = chunks;\n\n    const disk: WozDisk = {\n        encoding: ENCODING_BITSTREAM,\n        format: 'woz',\n        trackMap: tmap?.trackMap || [],\n        rawTracks: trks?.rawTracks || [],\n        readOnly: true, //chunks.info.writeProtected === 1;\n        metadata: {\n            name: meta?.values['title'] || options.name,\n            side: meta?.values['side_name'] || meta?.values['side'],\n        },\n        info,\n    };\n\n    return disk;\n}\n","import { includes, memory } from '../types';\nimport { base64_decode } from '../base64';\nimport {\n    BitstreamFormat,\n    DiskOptions,\n    FloppyDisk,\n    FloppyFormat,\n    JSONDisk,\n    NibbleDisk,\n    NibbleFormat,\n    NIBBLE_FORMATS,\n    WozDisk,\n} from './types';\nimport createDiskFrom2MG from './2mg';\nimport createDiskFromD13 from './d13';\nimport createDiskFromDOS from './do';\nimport createDiskFromProDOS from './po';\nimport createDiskFromWoz from './woz';\nimport createDiskFromNibble from './nib';\n\n/** Creates a `NibbleDisk` from the given format and options. */\nexport function createDisk(\n    fmt: NibbleFormat,\n    options: DiskOptions\n): NibbleDisk | null;\n/** Creates a `WozDisk` from the given format and options. */\nexport function createDisk(\n    fmt: BitstreamFormat,\n    options: DiskOptions\n): WozDisk | null;\n/** Creates a `FloppyDisk` (either a `NibbleDisk` or a `WozDisk`) from the given format and options. */\nexport function createDisk(\n    fmt: FloppyFormat,\n    options: DiskOptions\n): FloppyDisk | null;\nexport function createDisk(\n    fmt: FloppyFormat,\n    options: DiskOptions\n): FloppyDisk | null {\n    let disk: FloppyDisk | null = null;\n\n    switch (fmt) {\n        case '2mg':\n            disk = createDiskFrom2MG(options) as FloppyDisk;\n            break;\n        case 'd13':\n            disk = createDiskFromD13(options);\n            break;\n        case 'do':\n        case 'dsk':\n            disk = createDiskFromDOS(options);\n            break;\n        case 'nib':\n            disk = createDiskFromNibble(options);\n            break;\n        case 'po':\n            disk = createDiskFromProDOS(options) as FloppyDisk;\n            break;\n        case 'woz':\n            disk = createDiskFromWoz(options);\n            break;\n    }\n\n    return disk;\n}\n\n/** Creates a NibbleDisk from JSON */\nexport function createDiskFromJsonDisk(disk: JSONDisk): NibbleDisk | null {\n    const fmt = disk.type;\n    const readOnly = disk.readOnly;\n    const name = disk.name;\n    const side = disk.disk;\n\n    if (includes(NIBBLE_FORMATS, fmt)) {\n        let trackData: memory[][];\n        if (disk.encoding === 'base64') {\n            trackData = [];\n            for (let t = 0; t < disk.data.length; t++) {\n                trackData[t] = [];\n                if (disk.type === 'nib') {\n                    trackData[t][0] = base64_decode(disk.data[t]);\n                } else {\n                    for (let s = 0; s < disk.data[t].length; s++) {\n                        trackData[t][s] = base64_decode(disk.data[t][s]);\n                    }\n                }\n            }\n        } else {\n            trackData = disk.data;\n        }\n\n        const volume = disk.volume || 0xfe;\n\n        const options = {\n            volume,\n            readOnly,\n            name,\n            side,\n            data: trackData,\n        } as DiskOptions;\n\n        return createDisk(fmt, options);\n    } else {\n        return null;\n    }\n}\n","import { explodeSector13, D13O } from './format_utils';\nimport { NibbleDisk, DiskOptions, ENCODING_NIBBLE } from './types';\n\n/**\n * Returns a `Disk` object from DOS 3.2-ordered image data.\n * @param options the disk image and options\n * @returns A nibblized disk\n */\nexport default function createDiskFromDOS13(options: DiskOptions) {\n    const { data, name, side, rawData, volume, readOnly } = options;\n    const disk: NibbleDisk = {\n        format: 'd13',\n        encoding: ENCODING_NIBBLE,\n        metadata: { name, side },\n        volume,\n        readOnly,\n        tracks: [],\n    };\n\n    if (!data && !rawData) {\n        throw new Error('data or rawData required');\n    }\n\n    /*\n     * DOS 13-sector disks have the physical sectors skewed on the track. The skew\n     * between physical sectors is 10 (A), resulting in the following physical order:\n     *\n     *   0 A 7 4 1 B 8 5 2 C 9 6 3\n     *\n     * Note that because physical sector == logical sector, this works slightly\n     * differently from the DOS and ProDOS nibblizers.\n     */\n\n    for (let t = 0; t < 35; t++) {\n        let track: number[] = [];\n        for (let disk_sector = 0; disk_sector < 13; disk_sector++) {\n            const physical_sector = D13O[disk_sector];\n            let sector: Uint8Array;\n            if (rawData) {\n                const off = (13 * t + physical_sector) * 256;\n                sector = new Uint8Array(rawData.slice(off, off + 256));\n            } else if (data) {\n                sector = data[t][physical_sector];\n            } else {\n                throw new Error('Requires data or rawData');\n            }\n            track = track.concat(\n                explodeSector13(volume, t, physical_sector, sector)\n            );\n        }\n        disk.tracks.push(new Uint8Array(track));\n    }\n\n    return disk;\n}\n","import { ReadonlyUint8Array } from '../../types';\n\nexport const BOOTSTRAP_ROM_16 = new Uint8Array([\n    0xa2,0x20,0xa0,0x00,0xa2,0x03,0x86,0x3c,\n    0x8a,0x0a,0x24,0x3c,0xf0,0x10,0x05,0x3c,\n    0x49,0xff,0x29,0x7e,0xb0,0x08,0x4a,0xd0,\n    0xfb,0x98,0x9d,0x56,0x03,0xc8,0xe8,0x10,\n    0xe5,0x20,0x58,0xff,0xba,0xbd,0x00,0x01,\n    0x0a,0x0a,0x0a,0x0a,0x85,0x2b,0xaa,0xbd,\n    0x8e,0xc0,0xbd,0x8c,0xc0,0xbd,0x8a,0xc0,\n    0xbd,0x89,0xc0,0xa0,0x50,0xbd,0x80,0xc0,\n    0x98,0x29,0x03,0x0a,0x05,0x2b,0xaa,0xbd,\n    0x81,0xc0,0xa9,0x56,0x20,0xa8,0xfc,0x88,\n    0x10,0xeb,0x85,0x26,0x85,0x3d,0x85,0x41,\n    0xa9,0x08,0x85,0x27,0x18,0x08,0xbd,0x8c,\n    0xc0,0x10,0xfb,0x49,0xd5,0xd0,0xf7,0xbd,\n    0x8c,0xc0,0x10,0xfb,0xc9,0xaa,0xd0,0xf3,\n    0xea,0xbd,0x8c,0xc0,0x10,0xfb,0xc9,0x96,\n    0xf0,0x09,0x28,0x90,0xdf,0x49,0xad,0xf0,\n    0x25,0xd0,0xd9,0xa0,0x03,0x85,0x40,0xbd,\n    0x8c,0xc0,0x10,0xfb,0x2a,0x85,0x3c,0xbd,\n    0x8c,0xc0,0x10,0xfb,0x25,0x3c,0x88,0xd0,\n    0xec,0x28,0xc5,0x3d,0xd0,0xbe,0xa5,0x40,\n    0xc5,0x41,0xd0,0xb8,0xb0,0xb7,0xa0,0x56,\n    0x84,0x3c,0xbc,0x8c,0xc0,0x10,0xfb,0x59,\n    0xd6,0x02,0xa4,0x3c,0x88,0x99,0x00,0x03,\n    0xd0,0xee,0x84,0x3c,0xbc,0x8c,0xc0,0x10,\n    0xfb,0x59,0xd6,0x02,0xa4,0x3c,0x91,0x26,\n    0xc8,0xd0,0xef,0xbc,0x8c,0xc0,0x10,0xfb,\n    0x59,0xd6,0x02,0xd0,0x87,0xa0,0x00,0xa2,\n    0x56,0xca,0x30,0xfb,0xb1,0x26,0x5e,0x00,\n    0x03,0x2a,0x5e,0x00,0x03,0x2a,0x91,0x26,\n    0xc8,0xd0,0xee,0xe6,0x27,0xe6,0x3d,0xa5,\n    0x3d,0xcd,0x00,0x08,0xa6,0x2b,0x90,0xdb,\n    0x4c,0x01,0x08,0x00,0x00,0x00,0x00,0x00\n]) as ReadonlyUint8Array;\n\nexport const BOOTSTRAP_ROM_13 = new Uint8Array([\n    0xa2,0x20,0xa0,0x00,0xa9,0x03,0x85,0x3c,\n    0x18,0x88,0x98,0x24,0x3c,0xf0,0xf5,0x26,\n    0x3c,0x90,0xf8,0xc0,0xd5,0xf0,0xed,0xca,\n    0x8a,0x99,0x00,0x08,0xd0,0xe6,0x20,0x58,\n    0xff,0xba,0xbd,0x00,0x01,0x48,0x0a,0x0a,\n    0x0a,0x0a,0x85,0x2b,0xaa,0xa9,0xd0,0x48,\n    0xbd,0x8e,0xc0,0xbd,0x8c,0xc0,0xbd,0x8a,\n    0xc0,0xbd,0x89,0xc0,0xa0,0x50,0xbd,0x80,\n    0xc0,0x98,0x29,0x03,0x0a,0x05,0x2b,0xaa,\n    0xbd,0x81,0xc0,0xa9,0x56,0x20,0xa8,0xfc,\n    0x88,0x10,0xeb,0xa9,0x03,0x85,0x27,0xa9,\n    0x00,0x85,0x26,0x85,0x3d,0x18,0x08,0xbd,\n    0x8c,0xc0,0x10,0xfb,0x49,0xd5,0xd0,0xf7,\n    0xbd,0x8c,0xc0,0x10,0xfb,0xc9,0xaa,0xd0,\n    0xf3,0xea,0xbd,0x8c,0xc0,0x10,0xfb,0xc9,\n    0xb5,0xf0,0x09,0x28,0x90,0xdf,0x49,0xad,\n    0xf0,0x1f,0xd0,0xd9,0xa0,0x03,0x84,0x2a,\n    0xbd,0x8c,0xc0,0x10,0xfb,0x2a,0x85,0x3c,\n    0xbd,0x8c,0xc0,0x10,0xfb,0x25,0x3c,0x88,\n    0xd0,0xee,0x28,0xc5,0x3d,0xd0,0xbe,0xb0,\n    0xbd,0xa0,0x9a,0x84,0x3c,0xbc,0x8c,0xc0,\n    0x10,0xfb,0x59,0x00,0x08,0xa4,0x3c,0x88,\n    0x99,0x00,0x08,0xd0,0xee,0x84,0x3c,0xbc,\n    0x8c,0xc0,0x10,0xfb,0x59,0x00,0x08,0xa4,\n    0x3c,0x91,0x26,0xc8,0xd0,0xef,0xbc,0x8c,\n    0xc0,0x10,0xfb,0x59,0x00,0x08,0xd0,0x8d,\n    0x60,0xa8,0xa2,0x00,0xb9,0x00,0x08,0x4a,\n    0x3e,0xcc,0x03,0x4a,0x3e,0x99,0x03,0x85,\n    0x3c,0xb1,0x26,0x0a,0x0a,0x0a,0x05,0x3c,\n    0x91,0x26,0xc8,0xe8,0xe0,0x33,0xd0,0xe4,\n    0xc6,0x2a,0xd0,0xde,0xcc,0x00,0x03,0xd0,\n    0x03,0x4c,0x01,0x03,0x4c,0x2d,0xff,0xff\n]) as ReadonlyUint8Array;\n","import { DiskDriver, Drive, DriverState } from './types';\n\n/** Returned state for an empty drive. */\nexport interface EmptyDriverState extends DriverState {}\n\n/**\n * Driver for empty drives. This implementation does nothing except keep\n * the head clamped between tracks 0 and 34.\n */\nexport class EmptyDriver implements DiskDriver {\n    constructor(private readonly drive: Drive) {}\n\n    tick(): void {\n        // do nothing\n    }\n\n    onQ6Low(): void {\n        // do nothing\n    }\n\n    onQ6High(_readMode: boolean): void {\n        // do nothing\n    }\n\n    onDriveOn(): void {\n        // do nothing\n    }\n\n    onDriveOff(): void {\n        // do nothing\n    }\n\n    clampTrack(): void {\n        // For empty drives, the emulator clamps the track to 0 to 34,\n        // but real Disk II drives can seek past track 34 by at least a\n        // half track, usually a full track. Some 3rd party drives can\n        // seek to track 39.\n        if (this.drive.track < 0) {\n            this.drive.track = 0;\n        }\n        if (this.drive.track > 34) {\n            this.drive.track = 34;\n        }\n    }\n\n    getState() {\n        return {};\n    }\n\n    setState(_state: EmptyDriverState): void {\n        // do nothing\n    }\n}\n","import { DriveNumber, NibbleDisk, WozDisk } from '../../formats/types';\nimport { ControllerState, DiskDriver, Drive, DriverState } from './types';\n\n/**\n * Common logic for both `NibbleDiskDriver` and `WozDiskDriver`.\n */\nexport abstract class BaseDiskDriver implements DiskDriver {\n    constructor(\n        protected readonly driveNo: DriveNumber,\n        protected readonly drive: Drive,\n        protected readonly disk: NibbleDisk | WozDisk,\n        protected readonly controller: ControllerState\n    ) {}\n\n    /** Called frequently to ensure the disk is spinning. */\n    abstract tick(): void;\n\n    /** Called when Q6 is set LOW. */\n    abstract onQ6Low(): void;\n\n    /** Called when Q6 is set HIGH. */\n    abstract onQ6High(readMode: boolean): void;\n\n    /**\n     * Called when drive is turned on. This is guaranteed to be called\n     * only when the associated drive is toggled from off to on. This\n     * is also guaranteed to be called when a new disk is inserted when\n     * the drive is already on.\n     */\n    abstract onDriveOn(): void;\n\n    /**\n     * Called when drive is turned off. This is guaranteed to be called\n     * only when the associated drive is toggled from on to off.\n     */\n    abstract onDriveOff(): void;\n\n    debug(..._args: unknown[]) {\n        // debug(...args);\n    }\n\n    /**\n     * Called every time the head moves to clamp the track to a valid\n     * range.\n     */\n    abstract clampTrack(): void;\n\n    /** Returns `true` if the controller is on and this drive is selected. */\n    isOn(): boolean {\n        return this.controller.on && this.controller.driveNo === this.driveNo;\n    }\n\n    /** Returns `true` if the drive's write protect switch is enabled. */\n    isWriteProtected(): boolean {\n        return this.drive.readOnly;\n    }\n\n    /** Returns the current state of the driver as a serializable object. */\n    abstract getState(): DriverState;\n\n    /** Sets the state of the driver from the given `state`. */\n    abstract setState(state: DriverState): void;\n}\n","import { DriveNumber, NibbleDisk } from '../../formats/types';\nimport { BaseDiskDriver } from './BaseDiskDriver';\nimport { ControllerState, Drive, DriverState } from './types';\n\ninterface NibbleDiskDriverState extends DriverState {\n    skip: number;\n    nibbleCount: number;\n}\n\nexport class NibbleDiskDriver extends BaseDiskDriver {\n    /**\n     * When `1`, the next nibble will be available for read; when `0`,\n     * the card is pretending to wait for data to be shifted in by the\n     * sequencer.\n     */\n    private skip: number = 0;\n    /** Number of nibbles reads since the drive was turned on. */\n    private nibbleCount: number = 0;\n\n    constructor(\n        driveNo: DriveNumber,\n        drive: Drive,\n        readonly disk: NibbleDisk,\n        controller: ControllerState,\n        private readonly onDirty: () => void\n    ) {\n        super(driveNo, drive, disk, controller);\n    }\n\n    tick(): void {\n        // do nothing\n    }\n\n    onQ6Low(): void {\n        const drive = this.drive;\n        const disk = this.disk;\n        if (this.isOn() && (this.skip || this.controller.q7)) {\n            const track = disk.tracks[drive.track >> 2];\n            if (track && track.length) {\n                if (drive.head >= track.length) {\n                    drive.head = 0;\n                }\n\n                if (this.controller.q7) {\n                    const writeProtected = disk.readOnly;\n                    if (!writeProtected) {\n                        track[drive.head] = this.controller.bus;\n                        drive.dirty = true;\n                        this.onDirty();\n                    }\n                } else {\n                    this.controller.latch = track[drive.head];\n                    this.nibbleCount++;\n                }\n\n                ++drive.head;\n            }\n        } else {\n            this.controller.latch = 0;\n        }\n        this.skip = ++this.skip % 2;\n    }\n\n    onQ6High(readMode: boolean): void {\n        const drive = this.drive;\n        if (readMode && !this.controller.q7) {\n            const writeProtected = drive.readOnly;\n            if (writeProtected) {\n                this.controller.latch = 0xff;\n                this.debug('Setting readOnly');\n            } else {\n                this.controller.latch >>= 1;\n                this.debug('Clearing readOnly');\n            }\n        }\n    }\n\n    onDriveOn(): void {\n        this.nibbleCount = 0;\n    }\n\n    onDriveOff(): void {\n        this.debug('nibbles read', this.nibbleCount);\n    }\n\n    clampTrack(): void {\n        // For NibbleDisks, the emulator clamps the track to the available\n        // range.\n        if (this.drive.track < 0) {\n            this.drive.track = 0;\n        }\n        const lastTrack = 35 * 4 - 1;\n        if (this.drive.track > lastTrack) {\n            this.drive.track = lastTrack;\n        }\n    }\n\n    getState(): NibbleDiskDriverState {\n        const { skip, nibbleCount } = this;\n        return { skip, nibbleCount };\n    }\n\n    setState(state: NibbleDiskDriverState) {\n        this.skip = state.skip;\n        this.nibbleCount = state.nibbleCount;\n    }\n}\n","import Apple2IO from '../../apple2io';\nimport { DriveNumber, WozDisk } from '../../formats/types';\nimport { toHex } from '../../util';\nimport { SEQUENCER_ROM } from '../disk2';\nimport { BaseDiskDriver } from './BaseDiskDriver';\nimport {\n    ControllerState,\n    Drive,\n    DriverState,\n    LssClockCycle,\n    LssState,\n} from './types';\n\ninterface WozDiskDriverState extends DriverState {\n    clock: LssClockCycle;\n    state: LssState;\n    lastCycles: number;\n    zeros: number;\n}\n\nexport class WozDiskDriver extends BaseDiskDriver {\n    /** Logic state sequencer clock cycle. */\n    private clock: LssClockCycle;\n    /** Logic state sequencer state. */\n    private state: LssState;\n    /** Current CPU cycle count. */\n    private lastCycles: number = 0;\n    /**\n     * Number of zeros read in a row. The Disk ][ can only read two zeros in a\n     * row reliably; above that and the drive starts reporting garbage.  See\n     * \"Freaking Out Like a MC3470\" in the WOZ spec.\n     */\n    private zeros = 0;\n\n    constructor(\n        driveNo: DriveNumber,\n        drive: Drive,\n        readonly disk: WozDisk,\n        controller: ControllerState,\n        private readonly onDirty: () => void,\n        private readonly io: Apple2IO\n    ) {\n        super(driveNo, drive, disk, controller);\n\n        // From the example in UtA2e, p. 9-29, col. 1, para. 1., this is\n        // essentially the start of the sequencer loop and produces\n        // correctly synced nibbles immediately.  Starting at state 0\n        // would introduce a spurrious 1 in the latch at the beginning,\n        // which requires reading several more sync bytes to sync up.\n        this.state = 2;\n        this.clock = 0;\n    }\n\n    onDriveOn(): void {\n        this.lastCycles = this.io.cycles();\n    }\n\n    onDriveOff(): void {\n        // nothing\n    }\n\n    /**\n     * Spin the disk under the read/write head for WOZ images.\n     *\n     * This implementation emulates every clock cycle of the 2 MHz\n     * sequencer since the last time it was called in order to\n     * determine the current state. Because this is called on\n     * every access to the softswitches, the data in the latch\n     * will be correct on every read.\n     *\n     * The emulation of the disk makes a few simplifying assumptions:\n     *\n     * *   The motor turns on instantly.\n     * *   The head moves tracks instantly.\n     * *   The length (in bits) of each track of the WOZ image\n     *     represents one full rotation of the disk and that each\n     *     bit is evenly spaced.\n     * *   Writing will not change the track length. This means\n     *     that short tracks stay short.\n     * *   The read head picks up the next bit when the sequencer\n     *     clock === 4.\n     * *   Head position X on track T is equivalent to head position\n     *     X on track T. (This is not the recommendation in the WOZ\n     *     spec.)\n     * *   Unspecified tracks contain a single zero bit. (A very\n     *     short track, indeed!)\n     * *   Two zero bits are sufficient to cause the MC3470 to freak\n     *     out. When freaking out, it returns 0 and 1 with equal\n     *     probability.\n     * *   Any softswitch changes happen before `moveHead`. This is\n     *     important because it means that if the clock is ever\n     *     advanced more than one cycle between calls, the\n     *     softswitch changes will appear to happen at the very\n     *     beginning, not just before the last cycle.\n     */\n    private moveHead() {\n        // TODO(flan): Short-circuit if the drive is not on.\n        const cycles = this.io.cycles();\n\n        // Spin the disk the number of elapsed cycles since last call\n        let workCycles = (cycles - this.lastCycles) * 2;\n        this.lastCycles = cycles;\n\n        const drive = this.drive;\n        const disk = this.disk;\n        const controller = this.controller;\n\n        // TODO(flan): Improve unformatted track behavior. The WOZ\n        // documentation suggests using an empty track of 6400 bytes\n        // (51,200 bits).\n        const track = disk.rawTracks[disk.trackMap[drive.track]] || [0];\n\n        while (workCycles-- > 0) {\n            let pulse: number = 0;\n            if (this.clock === 4) {\n                pulse = track[drive.head];\n                if (!pulse) {\n                    // More than 2 zeros can not be read reliably.\n                    // TODO(flan): Revisit with the new MC3470\n                    // suggested 4-bit window behavior.\n                    if (++this.zeros > 2) {\n                        const r = Math.random();\n                        pulse = r >= 0.5 ? 1 : 0;\n                    }\n                } else {\n                    this.zeros = 0;\n                }\n            }\n\n            let idx = 0;\n            idx |= pulse ? 0x00 : 0x01;\n            idx |= controller.latch & 0x80 ? 0x02 : 0x00;\n            idx |= controller.q6 ? 0x04 : 0x00;\n            idx |= controller.q7 ? 0x08 : 0x00;\n            idx |= this.state << 4;\n\n            const command = SEQUENCER_ROM[controller.sectors][idx];\n\n            this.debug(\n                `clock: ${this.clock} state: ${toHex(\n                    this.state\n                )} pulse: ${pulse} command: ${toHex(command)} q6: ${\n                    controller.q6\n                } latch: ${toHex(controller.latch)}`\n            );\n\n            switch (command & 0xf) {\n                case 0x0: // CLR\n                    controller.latch = 0;\n                    break;\n                case 0x8: // NOP\n                    break;\n                case 0x9: // SL0\n                    controller.latch = (controller.latch << 1) & 0xff;\n                    break;\n                case 0xa: // SR\n                    controller.latch >>= 1;\n                    if (this.isWriteProtected()) {\n                        controller.latch |= 0x80;\n                    }\n                    break;\n                case 0xb: // LD\n                    controller.latch = controller.bus;\n                    this.debug('Loading', toHex(controller.latch), 'from bus');\n                    break;\n                case 0xd: // SL1\n                    controller.latch = ((controller.latch << 1) | 0x01) & 0xff;\n                    break;\n                default:\n                    this.debug(`unknown command: ${toHex(command & 0xf)}`);\n            }\n            this.state = ((command >> 4) & 0xf) as LssState;\n\n            if (this.clock === 4) {\n                if (this.isOn()) {\n                    if (controller.q7) {\n                        // TODO(flan): This assumes that writes are happening in\n                        // a \"friendly\" way, namely where the track was originally\n                        // written. To do this correctly, the virtual head should\n                        // actually keep track of the current quarter track plus\n                        // the one on each side. Then, when writing, it should\n                        // check that all three are actually the same rawTrack. If\n                        // they aren't, then the trackMap has to be updated as\n                        // well.\n                        track[drive.head] = this.state & 0x8 ? 0x01 : 0x00;\n                        this.debug('Wrote', this.state & 0x8 ? 0x01 : 0x00);\n                        drive.dirty = true;\n                        this.onDirty();\n                    }\n\n                    if (++drive.head >= track.length) {\n                        drive.head = 0;\n                    }\n                }\n            }\n\n            if (++this.clock > 7) {\n                this.clock = 0;\n            }\n        }\n    }\n\n    tick(): void {\n        this.moveHead();\n    }\n\n    onQ6High(_readMode: boolean): void {\n        // nothing?\n    }\n\n    onQ6Low(): void {\n        // nothing?\n    }\n\n    clampTrack(): void {\n        // For NibbleDisks, the emulator clamps the track to the available\n        // range.\n        if (this.drive.track < 0) {\n            this.drive.track = 0;\n        }\n        const lastTrack = this.disk.trackMap.length - 1;\n        if (this.drive.track > lastTrack) {\n            this.drive.track = lastTrack;\n        }\n    }\n\n    getState(): WozDiskDriverState {\n        const { clock, state, lastCycles, zeros } = this;\n        return { clock, state, lastCycles, zeros };\n    }\n\n    setState(state: WozDiskDriverState) {\n        this.clock = state.clock;\n        this.state = state.state;\n        this.lastCycles = state.lastCycles;\n        this.zeros = state.zeros;\n    }\n}\n","import { base64_encode } from '../base64';\nimport type { byte, Card, ReadonlyUint8Array } from '../types';\n\nimport {\n    DISK_PROCESSED,\n    DriveNumber,\n    DRIVE_NUMBERS,\n    FloppyDisk,\n    FloppyFormat,\n    FormatWorkerMessage,\n    FormatWorkerResponse,\n    isNibbleDisk,\n    isNoFloppyDisk,\n    isWozDisk,\n    JSONDisk,\n    MassStorage,\n    MassStorageData,\n    NibbleDisk,\n    NibbleFormat,\n    NO_DISK,\n    PROCESS_BINARY,\n    PROCESS_JSON,\n    PROCESS_JSON_DISK,\n    SupportedSectors,\n    WozDisk,\n} from '../formats/types';\n\nimport { createDisk, createDiskFromJsonDisk } from '../formats/create_disk';\n\nimport {\n    jsonDecode,\n    jsonEncode,\n    readSector,\n    _D13O,\n    _DO,\n    _PO,\n} from '../formats/format_utils';\n\nimport Apple2IO from '../apple2io';\n\nimport { BOOTSTRAP_ROM_13, BOOTSTRAP_ROM_16 } from '../roms/cards/disk2';\n\nimport { EmptyDriver } from './drivers/EmptyDriver';\nimport { NibbleDiskDriver } from './drivers/NibbleDiskDriver';\nimport {\n    ControllerState,\n    DiskDriver,\n    Drive,\n    DriverState,\n    Phase,\n} from './drivers/types';\nimport { WozDiskDriver } from './drivers/WozDiskDriver';\n\n/** Softswitch locations */\nconst LOC = {\n    // Disk II Controller Commands\n    // See Understanding the Apple IIe, Table 9.1\n    PHASE0OFF: 0x80, // Q0L: Phase 0 OFF\n    PHASE0ON: 0x81, // Q0H: Phase 0 ON\n    PHASE1OFF: 0x82, // Q1L: Phase 1 OFF\n    PHASE1ON: 0x83, // Q1H: Phase 1 ON\n    PHASE2OFF: 0x84, // Q2L: Phase 2 OFF\n    PHASE2ON: 0x85, // Q2H: Phase 2 ON\n    PHASE3OFF: 0x86, // Q3L: Phase 3 OFF\n    PHASE3ON: 0x87, // Q3H: Phase 3 ON\n\n    DRIVEOFF: 0x88, // Q4L: Drives OFF\n    DRIVEON: 0x89, // Q4H: Selected drive ON\n    DRIVE1: 0x8a, // Q5L: Select drive 1\n    DRIVE2: 0x8b, // Q5H: Select drive 2\n    DRIVEREAD: 0x8c, // Q6L: Shift while writing; read data\n    DRIVEWRITE: 0x8d, // Q6H: Load while writing; read write protect\n    DRIVEREADMODE: 0x8e, // Q7L: Read\n    DRIVEWRITEMODE: 0x8f, // Q7H: Write\n} as const;\n\n/** Logic state sequencer ROM */\n// See Understanding the Apple IIe, Table 9.3 Logic State Sequencer Commands\n//       CODE  OPERATION              BEFORE    AFTER\n// 0     CLR                          XXXXXXXX  00000000\n// 8     NOP                          ABCDEFGH  ABCDEFGH\n// 9     SL0                          ABCDEFGH  BCDEFGH0\n// A     SR   (write protected)       ABCDEFGH  11111111\n//            (not write protected)   ABCDEFGH  0ABCDEFG\n// B     LOAD                         XXXXXXXX  YYYYYYYY\n// D     SL1                          ABCDEFGH  BCDEFGH1\n\n// prettier-ignore\nconst SEQUENCER_ROM_13 = [\n    // See Understanding the Apple IIe, Figure 9.10 The DOS 3.2 Logic State Sequencer\n    // Note that the column order here is NOT the same as in Figure 9.10 for Q7 H (Write).\n    //\n    //                Q7 L (Read)                                     Q7 H (Write)\n    //    Q6 L (Shift)            Q6 H (Load)             Q6 L (Shift)             Q6 H (Load)\n    //  QA L        QA H        QA L        QA H        QA L        QA H        QA L        QA H\n    // 1     0     1     0     1     0     1     0     1     0     1     0     1     0     1     0\n    0xD8, 0x18, 0x18, 0x08, 0x0A, 0x0A, 0x0A, 0x0A, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, // 0\n    0xD8, 0x2D, 0x28, 0x28, 0x0A, 0x0A, 0x0A, 0x0A, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, // 1\n    0xD8, 0x38, 0x38, 0x38, 0x0A, 0x0A, 0x0A, 0x0A, 0x39, 0x39, 0x39, 0x39, 0x3B, 0x3B, 0x3B, 0x3B, // 2\n    0xD8, 0x48, 0xD8, 0x48, 0x0A, 0x0A, 0x0A, 0x0A, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, // 3\n    0xD8, 0x58, 0xD8, 0x58, 0x0A, 0x0A, 0x0A, 0x0A, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, // 4\n    0xD8, 0x68, 0xD8, 0x68, 0x0A, 0x0A, 0x0A, 0x0A, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, // 5\n    0xD8, 0x78, 0xD8, 0x78, 0x0A, 0x0A, 0x0A, 0x0A, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, // 6\n    0xD8, 0x88, 0xD8, 0x88, 0x0A, 0x0A, 0x0A, 0x0A, 0x08, 0x08, 0x88, 0x88, 0x08, 0x08, 0x88, 0x88, // 7\n    0xD8, 0x98, 0xD8, 0x98, 0x0A, 0x0A, 0x0A, 0x0A, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, // 8\n    0xD8, 0x09, 0xD8, 0xA8, 0x0A, 0x0A, 0x0A, 0x0A, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, // 9\n    0xCD, 0xBD, 0xD8, 0xB8, 0x0A, 0x0A, 0x0A, 0x0A, 0xB9, 0xB9, 0xB9, 0xB9, 0xBB, 0xBB, 0xBB, 0xBB, // A\n    0xD9, 0x39, 0xD8, 0xC8, 0x0A, 0x0A, 0x0A, 0x0A, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, // B\n    0xD9, 0xD9, 0xD8, 0xA0, 0x0A, 0x0A, 0x0A, 0x0A, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, // C\n    0x1D, 0x0D, 0xE8, 0xE8, 0x0A, 0x0A, 0x0A, 0x0A, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, // D\n    0xFD, 0xFD, 0xF8, 0xF8, 0x0A, 0x0A, 0x0A, 0x0A, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, // E\n    0xDD, 0x4D, 0xE0, 0xE0, 0x0A, 0x0A, 0x0A, 0x0A, 0x88, 0x88, 0x08, 0x08, 0x88, 0x88, 0x08, 0x08  // F\n] as const;\n\n// prettier-ignore\nconst SEQUENCER_ROM_16 = [\n    // See Understanding the Apple IIe, Figure 9.11 The DOS 3.3 Logic State Sequencer\n    // Note that the column order here is NOT the same as in Figure 9.11 for Q7 H (Write).\n    //\n    //                Q7 L (Read)                                     Q7 H (Write)\n    //    Q6 L (Shift)            Q6 H (Load)             Q6 L (Shift)             Q6 H (Load)\n    //  QA L        QA H        QA L        QA H        QA L        QA H        QA L        QA H\n    // 1     0     1     0     1     0     1     0     1     0     1     0     1     0     1     0\n    0x18, 0x18, 0x18, 0x18, 0x0A, 0x0A, 0x0A, 0x0A, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, // 0\n    0x2D, 0x2D, 0x38, 0x38, 0x0A, 0x0A, 0x0A, 0x0A, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, // 1\n    0xD8, 0x38, 0x08, 0x28, 0x0A, 0x0A, 0x0A, 0x0A, 0x39, 0x39, 0x39, 0x39, 0x3B, 0x3B, 0x3B, 0x3B, // 2\n    0xD8, 0x48, 0x48, 0x48, 0x0A, 0x0A, 0x0A, 0x0A, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, // 3\n    0xD8, 0x58, 0xD8, 0x58, 0x0A, 0x0A, 0x0A, 0x0A, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, 0x58, // 4\n    0xD8, 0x68, 0xD8, 0x68, 0x0A, 0x0A, 0x0A, 0x0A, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, 0x68, // 5\n    0xD8, 0x78, 0xD8, 0x78, 0x0A, 0x0A, 0x0A, 0x0A, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, 0x78, // 6\n    0xD8, 0x88, 0xD8, 0x88, 0x0A, 0x0A, 0x0A, 0x0A, 0x08, 0x08, 0x88, 0x88, 0x08, 0x08, 0x88, 0x88, // 7\n    0xD8, 0x98, 0xD8, 0x98, 0x0A, 0x0A, 0x0A, 0x0A, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, 0x98, // 8\n    0xD8, 0x29, 0xD8, 0xA8, 0x0A, 0x0A, 0x0A, 0x0A, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, // 9\n    0xCD, 0xBD, 0xD8, 0xB8, 0x0A, 0x0A, 0x0A, 0x0A, 0xB9, 0xB9, 0xB9, 0xB9, 0xBB, 0xBB, 0xBB, 0xBB, // A\n    0xD9, 0x59, 0xD8, 0xC8, 0x0A, 0x0A, 0x0A, 0x0A, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, 0xC8, // B\n    0xD9, 0xD9, 0xD8, 0xA0, 0x0A, 0x0A, 0x0A, 0x0A, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, // C\n    0xD8, 0x08, 0xE8, 0xE8, 0x0A, 0x0A, 0x0A, 0x0A, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, // D\n    0xFD, 0xFD, 0xF8, 0xF8, 0x0A, 0x0A, 0x0A, 0x0A, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, // E\n    0xDD, 0x4D, 0xE0, 0xE0, 0x0A, 0x0A, 0x0A, 0x0A, 0x88, 0x88, 0x08, 0x08, 0x88, 0x88, 0x08, 0x08  // F\n] as const;\n\n/** Contents of the P6 sequencer ROM. */\nexport const SEQUENCER_ROM: Record<SupportedSectors, ReadonlyArray<byte>> = {\n    13: SEQUENCER_ROM_13,\n    16: SEQUENCER_ROM_16,\n} as const;\n\n/** Contents of the P5 ROM at 0xCnXX. */\nconst BOOTSTRAP_ROM: Record<SupportedSectors, ReadonlyUint8Array> = {\n    13: BOOTSTRAP_ROM_13,\n    16: BOOTSTRAP_ROM_16,\n} as const;\n\n/**\n * How far the head moves, in quarter tracks, when in phase X and phase Y is\n * activated. For example, if in phase 0 (top row), turning on phase 3 would\n * step backwards a quarter track while turning on phase 2 would step forwards\n * a half track.\n *\n * Note that this emulation is highly simplified as it only takes into account\n * the order that coils are powered on and ignores when they are powered off.\n * The actual hardware allows for multiple coils to be powered at the same time\n * providing different levels of torque on the head arm. Along with that, the\n * RWTS uses a complex delay system to drive the coils faster based on expected\n * head momentum.\n *\n * Examining the https://computerhistory.org/blog/apple-ii-dos-source-code/,\n * one finds the SEEK routine on line 4831 of `appdos31.lst`. It uses `ONTABLE`\n * and `OFFTABLE` (each 12 bytes) to know exactly how many microseconds to\n * power on/off each coil as the head accelerates. At the end, the final coil\n * is left powered on 9.5 milliseconds to ensure the head has settled.\n *\n * https://embeddedmicro.weebly.com/apple-2iie.html shows traces of the boot\n * seek (which is slightly different) and a regular seek.\n */\nconst PHASE_DELTA = [\n    [0, 1, 2, -1],\n    [-1, 0, 1, 2],\n    [-2, -1, 0, 1],\n    [1, -2, -1, 0],\n] as const;\n\n/** Callbacks triggered by events of the drive or controller. */\nexport interface Callbacks {\n    /** Called when a drive turns on or off. */\n    driveLight: (driveNo: DriveNumber, on: boolean) => void;\n    /**\n     * Called when a disk has been written to. For performance and integrity,\n     * this is only called when the drive stops spinning or is removed from\n     * the drive.\n     */\n    dirty: (driveNo: DriveNumber, dirty: boolean) => void;\n    /** Called when a disk is inserted or removed from the drive. */\n    label: (driveNo: DriveNumber, name?: string, side?: string) => void;\n}\n\ninterface DriveState {\n    disk: FloppyDisk;\n    driver: DriverState;\n    readOnly: boolean;\n    track: byte;\n    head: byte;\n    phase: Phase;\n    dirty: boolean;\n}\n\n/** State of the controller for saving/restoring. */\ninterface State {\n    drives: DriveState[];\n    controllerState: ControllerState;\n}\n\nfunction getDiskState(disk: FloppyDisk): FloppyDisk {\n    if (isNoFloppyDisk(disk)) {\n        const { encoding, metadata, readOnly } = disk;\n        return {\n            encoding,\n            metadata: { ...metadata },\n            readOnly,\n        };\n    }\n    if (isNibbleDisk(disk)) {\n        const { format, encoding, metadata, readOnly, volume, tracks } = disk;\n        const result: NibbleDisk = {\n            format,\n            encoding,\n            volume,\n            tracks: [],\n            readOnly,\n            metadata: { ...metadata },\n        };\n        for (let idx = 0; idx < tracks.length; idx++) {\n            result.tracks.push(new Uint8Array(tracks[idx]));\n        }\n        return result;\n    }\n\n    if (isWozDisk(disk)) {\n        const { format, encoding, metadata, readOnly, trackMap, rawTracks } =\n            disk;\n        const result: WozDisk = {\n            format,\n            encoding,\n            readOnly,\n            trackMap: [],\n            rawTracks: [],\n            metadata: { ...metadata },\n            info: disk.info,\n        };\n        result.trackMap = [...trackMap];\n        for (let idx = 0; idx < rawTracks.length; idx++) {\n            result.rawTracks.push(new Uint8Array(rawTracks[idx]));\n        }\n        return result;\n    }\n\n    throw new Error('Unknown drive state');\n}\n\n/**\n * Emulates the 16-sector and 13-sector versions of the Disk ][ drive and controller.\n */\nexport default class DiskII implements Card<State>, MassStorage<NibbleFormat> {\n    private drives: Record<DriveNumber, Drive> = {\n        1: {\n            // Drive 1\n            track: 0,\n            head: 0,\n            phase: 0,\n            readOnly: false,\n            dirty: false,\n        },\n        2: {\n            // Drive 2\n            track: 0,\n            head: 0,\n            phase: 0,\n            readOnly: false,\n            dirty: false,\n        },\n    };\n\n    private disks: Record<DriveNumber, FloppyDisk> = {\n        1: {\n            encoding: NO_DISK,\n            readOnly: false,\n            metadata: { name: 'Disk 1' },\n        },\n        2: {\n            encoding: NO_DISK,\n            readOnly: false,\n            metadata: { name: 'Disk 2' },\n        },\n    };\n\n    private driver: Record<DriveNumber, DiskDriver> = {\n        1: new EmptyDriver(this.drives[1]),\n        2: new EmptyDriver(this.drives[2]),\n    };\n\n    private state: ControllerState;\n\n    /** Drive off timeout id or null. */\n    private offTimeout: number | null = null;\n    /** Current drive object. Must only be set by `updateActiveDrive()`. */\n    private curDrive: Drive;\n    /** Current driver object. Must only be set by `updateAcivetDrive()`. */\n    private curDriver: DiskDriver;\n\n    private worker: Worker;\n\n    /** Builds a new Disk ][ card. */\n    constructor(\n        private io: Apple2IO,\n        private callbacks: Callbacks,\n        private sectors: SupportedSectors = 16\n    ) {\n        this.debug('Disk ][');\n\n        this.state = {\n            sectors,\n            bus: 0,\n            latch: 0,\n            driveNo: 1,\n            on: false,\n            q6: false,\n            q7: false,\n            clock: 0,\n            // From the example in UtA2e, p. 9-29, col. 1, para. 1., this is\n            // essentially the start of the sequencer loop and produces\n            // correctly synced nibbles immediately.  Starting at state 0\n            // would introduce a spurrious 1 in the latch at the beginning,\n            // which requires reading several more sync bytes to sync up.\n            state: 2,\n        };\n\n        this.updateActiveDrive();\n\n        this.initWorker();\n    }\n\n    /** Updates the active drive based on the controller state. */\n    private updateActiveDrive() {\n        this.curDrive = this.drives[this.state.driveNo];\n        this.curDriver = this.driver[this.state.driveNo];\n    }\n\n    private debug(..._args: unknown[]) {\n        // debug(..._args);\n    }\n\n    public head(): number {\n        return this.curDrive.head;\n    }\n\n    /**\n     * Sets whether the head positioning stepper motor coil for the given\n     * phase is on or off. Normally, the motor must be stepped two phases\n     * per track. Half tracks can be written by stepping only once; quarter\n     * tracks by activating two neighboring coils at once.\n     */\n    private setPhase(phase: Phase, on: boolean) {\n        // According to Sather, UtA2e, p. 9-12, Drive On/Off and Drive\n        // Select:\n        //     Turning a drive on ($C089,X) [...]:\n        //       1. [...]\n        //       5. [...] enables head positioning [...]\n        //\n        // Therefore do nothing if no drive is on.\n        if (!this.state.on) {\n            this.debug(`ignoring phase ${phase}${on ? ' on' : ' off'}`);\n            return;\n        }\n\n        this.debug(`phase ${phase}${on ? ' on' : ' off'}`);\n        if (on) {\n            this.curDrive.track += PHASE_DELTA[this.curDrive.phase][phase] * 2;\n            this.curDrive.phase = phase;\n        }\n\n        this.curDriver.clampTrack();\n\n        // debug(\n        //     'Drive', _drive, 'track', toHex(_cur.track >> 2) + '.' + (_cur.track & 0x3),\n        //     '(' + toHex(_cur.track) + ')',\n        //     '[' + phase + ':' + (on ? 'on' : 'off') + ']');\n    }\n\n    private access(off: byte, val?: byte) {\n        const state = this.state;\n        let result = 0;\n        const readMode = val === undefined;\n\n        switch (off & 0x8f) {\n            case LOC.PHASE0OFF: // 0x00\n                this.setPhase(0, false);\n                break;\n            case LOC.PHASE0ON: // 0x01\n                this.setPhase(0, true);\n                break;\n            case LOC.PHASE1OFF: // 0x02\n                this.setPhase(1, false);\n                break;\n            case LOC.PHASE1ON: // 0x03\n                this.setPhase(1, true);\n                break;\n            case LOC.PHASE2OFF: // 0x04\n                this.setPhase(2, false);\n                break;\n            case LOC.PHASE2ON: // 0x05\n                this.setPhase(2, true);\n                break;\n            case LOC.PHASE3OFF: // 0x06\n                this.setPhase(3, false);\n                break;\n            case LOC.PHASE3ON: // 0x07\n                this.setPhase(3, true);\n                break;\n\n            case LOC.DRIVEOFF: // 0x08\n                if (!this.offTimeout) {\n                    if (state.on) {\n                        // TODO(flan): This is fragile because it relies on\n                        // wall-clock time instead of emulator time.\n                        this.offTimeout = window.setTimeout(() => {\n                            this.debug('Drive Off');\n                            state.on = false;\n                            this.callbacks.driveLight(state.driveNo, false);\n                            this.curDriver.onDriveOff();\n                        }, 1000);\n                    }\n                }\n                break;\n            case LOC.DRIVEON: // 0x09\n                if (this.offTimeout) {\n                    // TODO(flan): Fragilesee above\n                    window.clearTimeout(this.offTimeout);\n                    this.offTimeout = null;\n                }\n                if (!state.on) {\n                    this.debug('Drive On');\n                    state.on = true;\n                    this.callbacks.driveLight(state.driveNo, true);\n                    this.curDriver.onDriveOn();\n                }\n                break;\n\n            case LOC.DRIVE1: // 0x0a\n                this.debug('Disk 1');\n                state.driveNo = 1;\n                this.updateActiveDrive();\n                if (state.on) {\n                    this.callbacks.driveLight(2, false);\n                    this.callbacks.driveLight(1, true);\n                }\n                break;\n            case LOC.DRIVE2: // 0x0b\n                this.debug('Disk 2');\n                state.driveNo = 2;\n                this.updateActiveDrive();\n                if (state.on) {\n                    this.callbacks.driveLight(1, false);\n                    this.callbacks.driveLight(2, true);\n                }\n                break;\n\n            case LOC.DRIVEREAD: // 0x0c (Q6L) Shift\n                state.q6 = false;\n                this.curDriver.onQ6Low();\n                break;\n\n            case LOC.DRIVEWRITE: // 0x0d (Q6H) LOAD\n                state.q6 = true;\n                this.curDriver.onQ6High(readMode);\n                break;\n\n            case LOC.DRIVEREADMODE: // 0x0e (Q7L)\n                this.debug('Read Mode');\n                state.q7 = false;\n                break;\n            case LOC.DRIVEWRITEMODE: // 0x0f (Q7H)\n                this.debug('Write Mode');\n                state.q7 = true;\n                break;\n\n            default:\n                break;\n        }\n\n        this.tick();\n\n        if (readMode) {\n            // According to UtAIIe, p. 9-13 to 9-14, any even address can be\n            // used to read the data register onto the CPU bus, although some\n            // also cause conflicts with the disk controller commands.\n            if ((off & 0x01) === 0) {\n                result = state.latch;\n            } else {\n                result = 0;\n            }\n        } else {\n            // It's not explicitly stated, but writes to any address set the\n            // data register.\n            state.bus = val;\n        }\n\n        return result;\n    }\n\n    private updateDirty(driveNo: DriveNumber, dirty: boolean) {\n        this.drives[driveNo].dirty = dirty;\n        if (this.callbacks.dirty) {\n            this.callbacks.dirty(driveNo, dirty);\n        }\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        return this.access(off, val);\n    }\n\n    read(_page: byte, off: byte) {\n        return BOOTSTRAP_ROM[this.sectors][off];\n    }\n\n    write() {\n        // not writable\n    }\n\n    reset() {\n        const state = this.state;\n        if (state.on) {\n            this.callbacks.driveLight(state.driveNo, false);\n            state.q7 = false;\n            state.on = false;\n            state.driveNo = 1;\n        }\n        this.updateActiveDrive();\n    }\n\n    tick() {\n        this.curDriver.tick();\n    }\n\n    private getDriveState(driveNo: DriveNumber): DriveState {\n        const curDrive = this.drives[driveNo];\n        const curDisk = this.disks[driveNo];\n        const curDriver = this.driver[driveNo];\n        const { readOnly, track, head, phase, dirty } = curDrive;\n        return {\n            disk: getDiskState(curDisk),\n            driver: curDriver.getState(),\n            readOnly,\n            track,\n            head,\n            phase,\n            dirty,\n        };\n    }\n\n    getState(): State {\n        const result = {\n            drives: [] as DriveState[],\n            controllerState: { ...this.state },\n        };\n        result.drives[1] = this.getDriveState(1);\n        result.drives[2] = this.getDriveState(2);\n\n        return result;\n    }\n\n    private setDriveState(driveNo: DriveNumber, state: DriveState) {\n        const { track, head, phase, readOnly, dirty } = state;\n        this.drives[driveNo] = {\n            track,\n            head,\n            phase,\n            readOnly,\n            dirty,\n        };\n        const disk = getDiskState(state.disk);\n        this.setDiskInternal(driveNo, disk);\n        this.driver[driveNo].setState(state.driver);\n    }\n\n    setState(state: State) {\n        this.state = { ...state.controllerState };\n        for (const d of DRIVE_NUMBERS) {\n            this.setDriveState(d, state.drives[d]);\n            const { name, side } = state.drives[d].disk.metadata;\n            const { dirty } = state.drives[d];\n            this.callbacks.label(d, name, side);\n            this.callbacks.driveLight(d, this.state.on);\n            this.callbacks.dirty(d, dirty);\n        }\n        this.updateActiveDrive();\n    }\n\n    getMetadata(driveNo: DriveNumber) {\n        const { track, head, phase, readOnly, dirty } = this.drives[driveNo];\n        return {\n            track,\n            head,\n            phase,\n            readOnly,\n            dirty,\n        };\n    }\n\n    /** Reads the given track and physical sector. */\n    rwts(driveNo: DriveNumber, track: byte, sector: byte) {\n        const curDisk = this.disks[driveNo];\n        if (!isNibbleDisk(curDisk)) {\n            throw new Error(\"Can't read WOZ disks\");\n        }\n        return readSector(curDisk, track, sector);\n    }\n\n    /** Sets the data for `drive` from `disk`, which is expected to be JSON. */\n    // TODO(flan): This implementation is not very safe.\n    setDisk(driveNo: DriveNumber, jsonDisk: JSONDisk) {\n        if (this.worker) {\n            const message: FormatWorkerMessage = {\n                type: PROCESS_JSON_DISK,\n                payload: {\n                    driveNo: driveNo,\n                    jsonDisk,\n                },\n            };\n            this.worker.postMessage(message);\n            return true;\n        } else {\n            const disk = createDiskFromJsonDisk(jsonDisk);\n            if (disk) {\n                this.insertDisk(driveNo, disk);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    getJSON(driveNo: DriveNumber, pretty: boolean = false) {\n        const curDisk = this.disks[driveNo];\n        if (!isNibbleDisk(curDisk)) {\n            throw new Error(\"Can't save WOZ disks to JSON\");\n        }\n        return jsonEncode(curDisk, pretty);\n    }\n\n    setJSON(driveNo: DriveNumber, json: string) {\n        if (this.worker) {\n            const message: FormatWorkerMessage = {\n                type: PROCESS_JSON,\n                payload: {\n                    driveNo: driveNo,\n                    json,\n                },\n            };\n            this.worker.postMessage(message);\n        } else {\n            const disk = jsonDecode(json);\n            this.insertDisk(driveNo, disk);\n        }\n        return true;\n    }\n\n    async setBinary(\n        driveNo: DriveNumber,\n        name: string,\n        fmt: FloppyFormat,\n        rawData: ArrayBuffer\n    ): Promise<void> {\n        const readOnly = false;\n        const volume = 254;\n        const options = {\n            name,\n            rawData,\n            readOnly,\n            volume,\n        };\n\n        if (this.worker) {\n            const message: FormatWorkerMessage = {\n                type: PROCESS_BINARY,\n                payload: {\n                    driveNo: driveNo,\n                    fmt,\n                    options,\n                },\n            };\n            this.worker.postMessage(message);\n            return;\n        } else {\n            const disk = createDisk(fmt, options);\n            if (disk) {\n                this.insertDisk(driveNo, disk);\n                return;\n            }\n        }\n        throw new Error('Unable to load disk');\n    }\n\n    initWorker() {\n        if (!window.Worker) {\n            return;\n        }\n\n        try {\n            this.worker = new Worker('dist/format_worker.bundle.js');\n\n            this.worker.addEventListener(\n                'message',\n                (message: MessageEvent<FormatWorkerResponse>) => {\n                    const { data } = message;\n                    switch (data.type) {\n                        case DISK_PROCESSED:\n                            {\n                                const { driveNo: drive, disk } = data.payload;\n                                if (disk) {\n                                    this.insertDisk(drive, disk);\n                                }\n                            }\n                            break;\n                    }\n                }\n            );\n        } catch (e: unknown) {\n            console.error(e);\n        }\n    }\n\n    private setDiskInternal(driveNo: DriveNumber, disk: FloppyDisk) {\n        this.disks[driveNo] = disk;\n        if (isNoFloppyDisk(disk)) {\n            this.driver[driveNo] = new EmptyDriver(this.drives[driveNo]);\n        } else if (isNibbleDisk(disk)) {\n            this.driver[driveNo] = new NibbleDiskDriver(\n                driveNo,\n                this.drives[driveNo],\n                disk,\n                this.state,\n                () => this.updateDirty(driveNo, true)\n            );\n        } else if (isWozDisk(disk)) {\n            this.driver[driveNo] = new WozDiskDriver(\n                driveNo,\n                this.drives[driveNo],\n                disk,\n                this.state,\n                () => this.updateDirty(driveNo, true),\n                this.io\n            );\n        } else {\n            throw new Error(`Unknown disk format ${disk.encoding}`);\n        }\n        this.updateActiveDrive();\n    }\n\n    private insertDisk(driveNo: DriveNumber, disk: FloppyDisk) {\n        this.setDiskInternal(driveNo, disk);\n        this.drives[driveNo].head = 0;\n        const { name, side } = disk.metadata;\n        this.updateDirty(driveNo, this.drives[driveNo].dirty);\n        this.callbacks.label(driveNo, name, side);\n    }\n\n    /**\n     * Returns the binary image of the non-WOZ disk in the given drive.\n     * For WOZ disks, this method returns `null`. If the `ext` parameter\n     * is supplied, the returned data will match that format or an error\n     * will be thrown. If the `ext` parameter is not supplied, the\n     * original image format for the disk in the drive will be used. If\n     * the current data on the disk is no longer readable in that format,\n     * an error will be thrown. Using `ext == 'nib'` will always return\n     * an image.\n     */\n    async getBinary(\n        driveNo: DriveNumber,\n        ext?: Exclude<NibbleFormat, 'woz'>\n    ): Promise<MassStorageData | null> {\n        const curDisk = this.disks[driveNo];\n        if (!isNibbleDisk(curDisk)) {\n            return null;\n        }\n        const { format, readOnly, tracks, volume } = curDisk;\n        const { name } = curDisk.metadata;\n        const len =\n            format === 'nib'\n                ? tracks.reduce((acc, track) => acc + track.length, 0)\n                : this.sectors * tracks.length * 256;\n        const data = new Uint8Array(len);\n\n        ext = ext ?? format;\n        let idx = 0;\n        for (let t = 0; t < tracks.length; t++) {\n            if (ext === 'nib') {\n                data.set(tracks[t], idx);\n                idx += tracks[t].length;\n            } else {\n                let maxSector: SupportedSectors;\n                let sectorMap: typeof _PO | typeof _DO | typeof _D13O;\n                if (ext === 'd13') {\n                    maxSector = 13;\n                    sectorMap = _D13O;\n                } else {\n                    maxSector = 16;\n                    sectorMap = format === 'po' ? _PO : _DO;\n                }\n\n                for (let s = 0; s < maxSector; s++) {\n                    const _s = sectorMap[s];\n                    const sector = readSector(\n                        { ...curDisk, format: ext },\n                        t,\n                        _s\n                    );\n                    data.set(sector, idx);\n                    idx += sector.length;\n                }\n            }\n        }\n\n        return {\n            ext,\n            metadata: { name },\n            data: data.buffer,\n            readOnly,\n            volume,\n        };\n    }\n\n    // TODO(flan): Does not work with WOZ or D13 disks\n    getBase64(driveNo: DriveNumber) {\n        const curDisk = this.disks[driveNo];\n        if (!isNibbleDisk(curDisk)) {\n            return null;\n        }\n        const data: string[][] | string[] = [];\n        for (let t = 0; t < curDisk.tracks.length; t++) {\n            if (isNibbleDisk(curDisk)) {\n                data[t] = base64_encode(curDisk.tracks[t]);\n            } else {\n                const track: string[] = [];\n                for (let s = 0; s < 0x10; s++) {\n                    track[s] = base64_encode(readSector(curDisk, t, s));\n                }\n                data[t] = track;\n            }\n        }\n        return data;\n    }\n}\n","import { byte, memory, Memory, Restorable } from './types';\nimport { allocMemPages } from './util';\n\nexport interface RAMState {\n    /** Copy of contents. */\n    mem: memory;\n}\n\n/**\n * Represents RAM from the start page `sp` to end page `ep`. The memory\n * is addressed by `page` and `offset`.\n */\nexport default class RAM implements Memory, Restorable<RAMState> {\n    private start_page: byte;\n    private end_page: byte;\n    private mem: memory;\n\n    constructor(sp: byte, ep: byte) {\n        this.start_page = sp;\n        this.end_page = ep;\n\n        this.mem = allocMemPages(ep - sp + 1);\n    }\n\n    public start(): byte {\n        return this.start_page;\n    }\n\n    public end(): byte {\n        return this.end_page;\n    }\n\n    public read(page: byte, offset: byte) {\n        return this.mem[((page - this.start_page) << 8) | offset];\n    }\n\n    public write(page: byte, offset: byte, val: byte) {\n        this.mem[((page - this.start_page) << 8) | offset] = val;\n    }\n\n    public getState(): RAMState {\n        return {\n            mem: new Uint8Array(this.mem),\n        };\n    }\n\n    public setState(state: RAMState) {\n        this.mem = new Uint8Array(state.mem);\n    }\n\n    public getBuffer(start: byte, end: byte): memory {\n        return this.mem.subarray(\n            start << (8 - this.start_page),\n            end << (8 - this.start_page)\n        );\n    }\n}\n","import RAM, { RAMState } from '../ram';\n// import { debug } from '../util';\nimport { Card, Memory, byte, Restorable } from '../types';\n\nexport interface LanguageCardState {\n    bank1: RAMState;\n    bank2: RAMState;\n    ram: RAMState;\n\n    readbsr: boolean;\n    writebsr: boolean;\n    bsr2: boolean;\n    prewrite: boolean;\n}\n\nexport default class LanguageCard\n    implements Card, Restorable<LanguageCardState>\n{\n    private bank1: RAM;\n    private bank2: RAM;\n    private ram: RAM;\n\n    private _readbsr = false;\n    private _writebsr = false;\n    private _bsr2 = false;\n    private _prewrite = false;\n\n    private read1: Memory;\n    private read2: Memory;\n\n    private write1: Memory;\n    private write2: Memory;\n\n    constructor(private rom: Memory) {\n        // debug('Language card');\n\n        this.bank1 = new RAM(0xd0, 0xdf);\n        this.bank2 = new RAM(0xd0, 0xdf);\n        this.ram = new RAM(0xe0, 0xff);\n\n        this.write1 = this.rom;\n        this.write2 = this.rom;\n\n        this.read1 = this.rom;\n        this.read2 = this.rom;\n    }\n\n    private debug(..._args: unknown[]) {\n        // debug.apply(null, args);\n    }\n\n    private updateBanks() {\n        if (this._readbsr) {\n            this.read1 = this._bsr2 ? this.bank2 : this.bank1;\n            this.read2 = this.ram;\n        } else {\n            this.read1 = this.rom;\n            this.read2 = this.rom;\n        }\n\n        if (this._writebsr) {\n            this.write1 = this._bsr2 ? this.bank2 : this.bank1;\n            this.write2 = this.ram;\n        } else {\n            this.write1 = this.rom;\n            this.write2 = this.rom;\n        }\n    }\n\n    // Bank 2\n    // READBSR2: 0x80\n    // WRITEBSR2: 0x81\n    // OFFBSR2: 0x82\n    // READWRBSR2: 0x83\n\n    // Bank 1\n    // READBSR1: 0x88\n    // WRITEBSR1: 0x89\n    // OFFBSR1: 0x8a\n    // READWRBSR1: 0x8b\n\n    private access(off: byte, val?: byte) {\n        const readMode = val === undefined;\n        const result = readMode ? 0 : undefined;\n\n        const writeSwitch = off & 0x01;\n        const offSwitch = off & 0x02;\n        const bank1Switch = off & 0x08;\n\n        let bankStr;\n        let rwStr;\n\n        if (writeSwitch) {\n            // 0xC081, 0xC083\n            if (readMode) {\n                if (this._prewrite) {\n                    this._writebsr = true;\n                }\n            }\n            this._prewrite = readMode;\n\n            if (offSwitch) {\n                // $C083, $C08B\n                this._readbsr = true;\n                rwStr = 'Read/Write';\n            } else {\n                // $C081, $C089\n                this._readbsr = false;\n                rwStr = 'Write';\n            }\n        } else {\n            // $C080, $C082, $C088, $C08A\n            this._writebsr = false;\n            this._prewrite = false;\n\n            if (offSwitch) {\n                // $C082, $C08A\n                this._readbsr = false;\n                rwStr = 'Off';\n            } else {\n                // $C080, $C088\n                this._readbsr = true;\n                rwStr = 'Read';\n            }\n        }\n\n        if (bank1Switch) {\n            // C08[8-C]\n            this._bsr2 = false;\n            bankStr = 'Bank 1';\n        } else {\n            // C08[0-3]\n            this._bsr2 = true;\n            bankStr = 'Bank 2';\n        }\n\n        this.debug(bankStr, rwStr);\n        this.updateBanks();\n\n        return result;\n    }\n\n    start() {\n        return 0xd0;\n    }\n\n    end() {\n        return 0xff;\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        return this.access(off, val);\n    }\n\n    read(page: byte, off: byte): byte {\n        let result: number = 0;\n        if (page < 0xe0) {\n            result = this.read1.read(page, off);\n        } else {\n            result = this.read2.read(page, off);\n        }\n        return result;\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        if (page < 0xe0) {\n            this.write1.write(page, off, val);\n        } else {\n            this.write2.write(page, off, val);\n        }\n    }\n\n    public get bsr2() {\n        return this._bsr2;\n    }\n\n    public get readbsr() {\n        return this._readbsr;\n    }\n\n    public get writebsr() {\n        return this._writebsr;\n    }\n\n    getState() {\n        return {\n            readbsr: this.readbsr,\n            writebsr: this.writebsr,\n            bsr2: this.bsr2,\n            prewrite: this._prewrite,\n            ram: this.ram.getState(),\n            bank1: this.bank1.getState(),\n            bank2: this.bank2.getState(),\n        };\n    }\n\n    setState(state: LanguageCardState) {\n        this._readbsr = state.readbsr;\n        this._writebsr = state.writebsr;\n        this._bsr2 = state.bsr2;\n        this._prewrite = state.prewrite;\n        this.ram.setState(state.ram);\n        this.bank1.setState(state.bank1);\n        this.bank2.setState(state.bank2);\n        this.updateBanks();\n    }\n}\n","import { ReadonlyUint8Array } from '../../types';\n\nexport const rom = new Uint8Array([\n    0x18,0xb0,0x38,0x48,0x8a,0x48,0x98,0x48,\n    0x08,0x78,0x20,0x58,0xff,0xba,0x68,0x68,\n    0x68,0x68,0xa8,0xca,0x9a,0x68,0x28,0xaa,\n    0x90,0x38,0xbd,0xb8,0x05,0x10,0x19,0x98,\n    0x29,0x7f,0x49,0x30,0xc9,0x0a,0x90,0x3b,\n    0xc9,0x78,0xb0,0x29,0x49,0x3d,0xf0,0x21,\n    0x98,0x29,0x9f,0x9d,0x38,0x06,0x90,0x7e,\n    0xbd,0xb8,0x06,0x30,0x14,0xa5,0x24,0xdd,\n    0x38,0x07,0xb0,0x0d,0xc9,0x11,0xb0,0x09,\n    0x09,0xf0,0x3d,0x38,0x07,0x65,0x24,0x85,\n    0x24,0x4a,0x38,0xb0,0x6d,0x18,0x6a,0x3d,\n    0xb8,0x06,0x90,0x02,0x49,0x81,0x9d,0xb8,\n    0x06,0xd0,0x53,0xa0,0x0a,0x7d,0x38,0x05,\n    0x88,0xd0,0xfa,0x9d,0xb8,0x04,0x9d,0x38,\n    0x05,0x38,0xb0,0x43,0xc5,0x24,0x90,0x3a,\n    0x68,0xa8,0x68,0xaa,0x68,0x4c,0xf0,0xfd,\n    0x90,0xfe,0xb0,0xfe,0x99,0x80,0xc0,0x90,\n    0x37,0x49,0x07,0xa8,0x49,0x0a,0x0a,0xd0,\n    0x06,0xb8,0x85,0x24,0x9d,0x38,0x07,0xbd,\n    0xb8,0x06,0x4a,0x70,0x02,0xb0,0x23,0x0a,\n    0x0a,0xa9,0x27,0xb0,0xcf,0xbd,0x38,0x07,\n    0xfd,0xb8,0x04,0xc9,0xf8,0x90,0x03,0x69,\n    0x27,0xac,0xa9,0x00,0x85,0x24,0x18,0x7e,\n    0xb8,0x05,0x68,0xa8,0x68,0xaa,0x68,0x60,\n    0x90,0x27,0xb0,0x00,0x10,0x11,0xa9,0x89,\n    0x9d,0x38,0x06,0x9d,0xb8,0x06,0xa9,0x28,\n    0x9d,0xb8,0x04,0xa9,0x02,0x85,0x36,0x98,\n    0x5d,0x38,0x06,0x0a,0xf0,0x90,0x5e,0xb8,\n    0x05,0x98,0x48,0x8a,0x0a,0x0a,0x0a,0x0a,\n    0xa8,0xbd,0x38,0x07,0xc5,0x24,0x68,0xb0,\n    0x05,0x48,0x29,0x80,0x09,0x20,0x2c,0x58,\n    0xff,0xf0,0x03,0xfe,0x38,0x07,0x70,0x84\n]) as ReadonlyUint8Array;\n","import { debug } from '../util';\nimport { Card, Restorable, byte } from '../types';\nimport { rom } from '../roms/cards/parallel';\n\nconst LOC = {\n    IOREG: 0x80,\n} as const;\n\nexport interface ParallelState {}\nexport interface ParallelOptions {\n    putChar: (val: byte) => void;\n}\n\nexport default class Parallel implements Card, Restorable<ParallelState> {\n    constructor(private cbs: ParallelOptions) {\n        debug('Parallel card');\n    }\n\n    private access(off: byte, val?: byte) {\n        switch (off & 0x8f) {\n            case LOC.IOREG:\n                if (this.cbs.putChar && val) {\n                    this.cbs.putChar(val);\n                }\n                break;\n            default:\n                debug('Parallel card unknown softswitch', off);\n        }\n        return 0;\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        return this.access(off, val);\n    }\n\n    read(_page: byte, off: byte) {\n        return rom[off];\n    }\n\n    write() {\n        // not writable\n    }\n\n    getState() {\n        return {};\n    }\n\n    setState(_state: ParallelState) {\n        // can't set the state\n    }\n}\n","import { ReadonlyUint8Array } from '../../types';\n\nexport const rom = new Uint8Array([\n    0x43,0x4f,0x50,0x59,0x52,0x49,0x47,0x48,\n    0x54,0x20,0x28,0x43,0x29,0x20,0x31,0x39,\n    0x38,0x36,0x2d,0x38,0x39,0x20,0x41,0x50,\n    0x50,0x4c,0x49,0x45,0x44,0x20,0x45,0x4e,\n    0x47,0x49,0x4e,0x45,0x45,0x52,0x49,0x4e,\n    0x47,0x00,0x42,0x4f,0x42,0x20,0x53,0x41,\n    0x4e,0x44,0x45,0x52,0x2d,0x43,0x45,0x44,\n    0x45,0x52,0x4c,0x4f,0x46,0x00,0x4d,0x49,\n    0x43,0x48,0x41,0x45,0x4c,0x20,0x57,0x49,\n    0x4c,0x4b,0x53,0x00,0x53,0x54,0x45,0x56,\n    0x45,0x4e,0x20,0x4d,0x41,0x4c,0x45,0x43,\n    0x48,0x45,0x4b,0x00,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc1,0x4c,0x9b,0xc1,\n    0x20,0x16,0xc1,0x4c,0x9f,0xc1,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc1,0xae,0xff,0xcf,0x0e,0x9f,0xc0,\n    0xa2,0x98,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc1,0xc5,0x39,0x08,\n    0x20,0x16,0xc1,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc1,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc1,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc1,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x10,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc1,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0x9f,\n    0xc0,0xa2,0x98,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0x9f,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc1,0x4c,0x00,0xc8,0x20,0x28,0xc1,0x4c,\n    0xe8,0xcb,0xc9,0x10,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc1,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc2,0x4c,0x9b,0xc2,\n    0x20,0x16,0xc2,0x4c,0x9f,0xc2,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc2,0xae,0xff,0xcf,0x0e,0xaf,0xc0,\n    0xa2,0xa8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc2,0xc5,0x39,0x08,\n    0x20,0x16,0xc2,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc2,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc2,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc2,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x20,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc2,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xaf,\n    0xc0,0xa2,0xa8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xaf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc2,0x4c,0x00,0xc8,0x20,0x28,0xc2,0x4c,\n    0xe8,0xcb,0xc9,0x20,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc2,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc3,0x4c,0x9b,0xc3,\n    0x20,0x16,0xc3,0x4c,0x9f,0xc3,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc3,0xae,0xff,0xcf,0x0e,0xbf,0xc0,\n    0xa2,0xb8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc3,0xc5,0x39,0x08,\n    0x20,0x16,0xc3,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc3,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc3,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc3,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x30,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc3,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xbf,\n    0xc0,0xa2,0xb8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xbf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc3,0x4c,0x00,0xc8,0x20,0x28,0xc3,0x4c,\n    0xe8,0xcb,0xc9,0x30,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc3,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc4,0x4c,0x9b,0xc4,\n    0x20,0x16,0xc4,0x4c,0x9f,0xc4,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc4,0xae,0xff,0xcf,0x0e,0xcf,0xc0,\n    0xa2,0xc8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc4,0xc5,0x39,0x08,\n    0x20,0x16,0xc4,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc4,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc4,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc4,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x40,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc4,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xcf,\n    0xc0,0xa2,0xc8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xcf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc4,0x4c,0x00,0xc8,0x20,0x28,0xc4,0x4c,\n    0xe8,0xcb,0xc9,0x40,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc4,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc5,0x4c,0x9b,0xc5,\n    0x20,0x16,0xc5,0x4c,0x9f,0xc5,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc5,0xae,0xff,0xcf,0x0e,0xdf,0xc0,\n    0xa2,0xd8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc5,0xc5,0x39,0x08,\n    0x20,0x16,0xc5,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc5,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc5,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc5,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x50,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc5,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xdf,\n    0xc0,0xa2,0xd8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xdf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc5,0x4c,0x00,0xc8,0x20,0x28,0xc5,0x4c,\n    0xe8,0xcb,0xc9,0x50,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc5,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc6,0x4c,0x9b,0xc6,\n    0x20,0x16,0xc6,0x4c,0x9f,0xc6,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc6,0xae,0xff,0xcf,0x0e,0xef,0xc0,\n    0xa2,0xe8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc6,0xc5,0x39,0x08,\n    0x20,0x16,0xc6,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc6,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc6,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc6,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x60,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc6,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xef,\n    0xc0,0xa2,0xe8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xef,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc6,0x4c,0x00,0xc8,0x20,0x28,0xc6,0x4c,\n    0xe8,0xcb,0xc9,0x60,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc6,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc7,0x4c,0x9b,0xc7,\n    0x20,0x16,0xc7,0x4c,0x9f,0xc7,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc7,0xae,0xff,0xcf,0x0e,0xff,0xc0,\n    0xa2,0xf8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc7,0xc5,0x39,0x08,\n    0x20,0x16,0xc7,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc7,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc7,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc7,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x70,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc7,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xff,\n    0xc0,0xa2,0xf8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xff,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc7,0x4c,0x00,0xc8,0x20,0x28,0xc7,0x4c,\n    0xe8,0xcb,0xc9,0x70,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc7,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0x20,0x99,0xcd,0xa2,0x09,0xb5,0x42,0x48,\n    0xca,0x10,0xfa,0xba,0xbd,0x0c,0x01,0x85,\n    0x46,0xbd,0x0b,0x01,0x85,0x45,0xa0,0x03,\n    0xb1,0x45,0x99,0x41,0x00,0xfe,0x0b,0x01,\n    0xd0,0x03,0xfe,0x0c,0x01,0x88,0xd0,0xf0,\n    0x8c,0xf8,0x04,0x8c,0x78,0x05,0x8c,0xf8,\n    0x05,0xaa,0xc9,0x0a,0xb0,0x28,0xbd,0x87,\n    0xc8,0xd1,0x43,0xd0,0x24,0xa0,0x08,0xb1,\n    0x43,0x99,0x43,0x00,0x88,0xd0,0xf8,0x4a,\n    0xd0,0x11,0xae,0x78,0x07,0xa4,0x42,0xa9,\n    0xc8,0x48,0xb9,0x7d,0xc8,0x48,0x46,0x44,\n    0xa5,0x47,0x60,0xa9,0x11,0x2c,0xa9,0x01,\n    0x2c,0xa9,0x04,0x8d,0xf8,0x04,0xa2,0x00,\n    0x68,0x95,0x42,0xe8,0xe0,0x0a,0x90,0xf8,\n    0xac,0xf8,0x05,0xae,0x78,0x05,0xad,0xf8,\n    0x04,0xd0,0x01,0x18,0x60,0xca,0xa3,0xb5,\n    0x90,0x9c,0x90,0x93,0x93,0x98,0x96,0x03,\n    0x03,0x03,0x01,0x03,0x01,0x01,0x01,0x04,\n    0x04,0x4c,0x66,0xc8,0x4c,0x5e,0xc8,0xb0,\n    0x2c,0xb0,0x18,0x90,0xf7,0xf0,0xf2,0xa9,\n    0x21,0x4c,0x63,0xc8,0x90,0xee,0x20,0x0c,\n    0xc9,0xb0,0x1d,0xad,0x13,0xc0,0x06,0x4b,\n    0x0a,0x66,0x4b,0x4c,0x23,0xc9,0x90,0xdc,\n    0x20,0x0c,0xc9,0xb0,0x0b,0xad,0x14,0xc0,\n    0x06,0x4b,0x0a,0x66,0x4b,0x4c,0x82,0xc9,\n    0x4c,0x7d,0xc9,0xb0,0x13,0xd0,0xd0,0xa0,\n    0x08,0x8c,0x78,0x05,0x88,0x91,0x45,0xd0,\n    0xfb,0xa9,0x01,0x91,0x45,0x4c,0x66,0xc8,\n    0xf0,0x07,0xa0,0x19,0xc9,0x03,0xd0,0xb7,\n    0x2c,0xa0,0x04,0x8c,0x78,0x05,0x88,0xb9,\n    0xc6,0xc9,0xc0,0x02,0xd0,0x0e,0xae,0xf8,\n    0x07,0xbd,0xb8,0x05,0x4a,0x91,0x45,0x88,\n    0xbd,0x38,0x06,0x6a,0x91,0x45,0x88,0x10,\n    0xe6,0x4c,0x66,0xc8,0x0a,0x85,0x4a,0xa5,\n    0x48,0x2a,0xb0,0x0e,0x85,0x4b,0xa5,0x49,\n    0xc9,0x01,0xb0,0x06,0x85,0x47,0xa9,0x02,\n    0x85,0x48,0x60,0x20,0x64,0xc9,0xb0,0x55,\n    0x2c,0x14,0xc0,0x08,0x0a,0x90,0x03,0x8d,\n    0x05,0xc0,0xa5,0x48,0x8d,0xf8,0x05,0xf0,\n    0x0e,0xbd,0xfb,0xbf,0x91,0x45,0xc8,0xd0,\n    0xf8,0xe6,0x46,0xc6,0x48,0xd0,0xf2,0xa5,\n    0x47,0xf0,0x0d,0x8d,0x78,0x05,0xbd,0xfb,\n    0xbf,0x91,0x45,0xc8,0xc4,0x47,0xd0,0xf6,\n    0x8d,0x04,0xc0,0x28,0x10,0x03,0x8d,0x05,\n    0xc0,0x4c,0x66,0xc8,0xa5,0x49,0x9d,0xf8,\n    0xbf,0xa5,0x4a,0x9d,0xf9,0xbf,0xa5,0x4b,\n    0x29,0x7f,0x9d,0xfa,0xbf,0x20,0x9d,0xca,\n    0xa0,0x00,0xa5,0x4b,0x60,0xa9,0x2d,0x4c,\n    0x63,0xc8,0x20,0x64,0xc9,0xb0,0xf6,0x2c,\n    0x13,0xc0,0x08,0x8d,0x02,0xc0,0x0a,0x90,\n    0x03,0x8d,0x03,0xc0,0xa5,0x48,0x8d,0xf8,\n    0x05,0xf0,0x0e,0xb1,0x45,0x9d,0xfb,0xbf,\n    0xc8,0xd0,0xf8,0xe6,0x46,0xc6,0x48,0xd0,\n    0xf2,0xa5,0x47,0x8d,0x78,0x05,0xf0,0x0a,\n    0xb1,0x45,0x9d,0xfb,0xbf,0xc8,0xc4,0x47,\n    0xd0,0xf6,0x8d,0x02,0xc0,0x28,0x10,0x03,\n    0x8d,0x03,0xc0,0x4c,0x66,0xc8,0xf8,0x00,\n    0x00,0x00,0x07,0x52,0x41,0x4d,0x43,0x41,\n    0x52,0x44,0x20,0x20,0x20,0x20,0x20,0x20,\n    0x20,0x20,0x20,0x00,0x00,0x00,0x00,0xac,\n    0xf8,0x07,0x20,0x8e,0xca,0xbd,0xfb,0xbf,\n    0xc9,0xae,0xd0,0x45,0x5d,0xfb,0xbf,0xc9,\n    0x5a,0xd0,0x3e,0xbd,0xfb,0xbf,0x99,0x38,\n    0x04,0x49,0x5a,0xdd,0xfb,0xbf,0xd0,0x31,\n    0xbd,0xfb,0xbf,0x99,0xb8,0x03,0xb9,0x38,\n    0x04,0x9d,0xf8,0xbf,0xbd,0xfb,0xbf,0x99,\n    0xb8,0x04,0xbd,0xfb,0xbf,0x99,0x38,0x05,\n    0xbd,0xfb,0xbf,0x99,0xb8,0x05,0xbd,0xfb,\n    0xbf,0x99,0x38,0x06,0xbd,0xfb,0xbf,0x99,\n    0xb8,0x06,0xbd,0xfb,0xbf,0x99,0x38,0x07,\n    0x60,0xb9,0xb8,0x06,0x59,0x38,0x07,0xc9,\n    0x5a,0xf0,0x38,0x20,0x8e,0xca,0xa9,0x04,\n    0x9d,0xf9,0xbf,0xbd,0xfb,0xbf,0x5d,0xfb,\n    0xbf,0x5d,0xfb,0xbf,0x5d,0xfb,0xbf,0xa2,\n    0x4c,0xc9,0x03,0xf0,0x0c,0xa2,0x00,0xc9,\n    0x06,0xf0,0x06,0xa2,0x33,0xc9,0xbe,0xd0,\n    0x09,0x8a,0x99,0xb8,0x06,0x49,0x5a,0x99,\n    0x38,0x07,0x20,0x00,0xcb,0xac,0xf8,0x07,\n    0x99,0xb8,0x03,0xb9,0xb8,0x03,0x0a,0x99,\n    0xb8,0x05,0xa9,0x00,0x99,0x38,0x06,0x99,\n    0x38,0x05,0x99,0xb8,0x04,0xa9,0x01,0x99,\n    0x38,0x04,0x60,0xae,0x78,0x07,0xa9,0x00,\n    0x9d,0xf8,0xbf,0x9d,0xf9,0xbf,0x9d,0xfa,\n    0xbf,0x60,0x20,0x8e,0xca,0xac,0xf8,0x07,\n    0xb9,0xb8,0x03,0xc9,0x09,0xbd,0xfa,0xbf,\n    0xb0,0x02,0x29,0x0f,0x48,0xd0,0x1e,0xb9,\n    0x38,0x04,0xc9,0x08,0xd0,0x17,0xbd,0xf9,\n    0xbf,0xc9,0x02,0xb0,0x10,0x09,0xfe,0x9d,\n    0xf9,0xbf,0xb9,0xb8,0x03,0xe9,0x00,0x2a,\n    0x9d,0xfa,0xbf,0x68,0x60,0xbd,0xf9,0xbf,\n    0xd9,0x38,0x06,0x68,0x48,0xf9,0xb8,0x05,\n    0xb0,0xf1,0xbd,0xf9,0xbf,0x79,0x38,0x05,\n    0x9d,0xf9,0xbf,0x68,0x79,0xb8,0x04,0x9d,\n    0xfa,0xbf,0x60,0xa0,0x00,0xbd,0xfb,0xbf,\n    0x99,0x00,0x08,0xc8,0xd0,0xf7,0xbd,0xfb,\n    0xbf,0x99,0x00,0x09,0xc8,0xd0,0xf7,0x60,\n    0x20,0x8b,0xca,0xa8,0xdd,0xfa,0xbf,0xd0,\n    0x02,0xa0,0x02,0x19,0x95,0xcb,0x85,0x3f,\n    0x85,0x3e,0x9d,0xfa,0xbf,0xbd,0xfb,0xbf,\n    0xde,0xf8,0xbf,0x48,0xa5,0x3f,0x9d,0xfb,\n    0xbf,0xde,0xf8,0xbf,0x39,0x95,0xcb,0xf0,\n    0x14,0xa5,0x3f,0x38,0xf9,0x98,0xcb,0x4c,\n    0x0e,0xcb,0x18,0xa5,0x3f,0x79,0x98,0xcb,\n    0x85,0x3f,0x9d,0xfa,0xbf,0xbd,0xfb,0xbf,\n    0xc5,0x3f,0xd0,0x3f,0x49,0xff,0xde,0xf8,\n    0xbf,0x9d,0xfb,0xbf,0xde,0xf8,0xbf,0xdd,\n    0xfb,0xbf,0xd0,0x2f,0xde,0xf8,0xbf,0xa5,\n    0x3f,0x39,0x95,0xcb,0xd9,0x95,0xcb,0xd0,\n    0xd1,0xa5,0x3e,0x9d,0xfa,0xbf,0x68,0x9d,\n    0xfb,0xbf,0xde,0xf8,0xbf,0x18,0xa5,0x3e,\n    0x79,0x98,0xcb,0x85,0x3e,0x39,0x95,0xcb,\n    0xd0,0xe7,0xa5,0x3f,0x88,0x10,0x8c,0x4a,\n    0x69,0x02,0x60,0xde,0xf8,0xbf,0x38,0xa5,\n    0x3f,0xf0,0xd6,0xf9,0x98,0xcb,0x85,0x3f,\n    0x4c,0x61,0xcb,0xea,0xea,0x0c,0x30,0xc0,\n    0x04,0x10,0x40,0xa2,0x04,0xa0,0x00,0xa9,\n    0x00,0x48,0x38,0xa5,0x3e,0xfd,0xde,0xcb,\n    0x48,0xa5,0x3f,0xfd,0xe3,0xcb,0x90,0x0a,\n    0x85,0x3f,0x68,0x85,0x3e,0x68,0x69,0x00,\n    0xd0,0xe7,0x68,0x68,0xd0,0x08,0x88,0x10,\n    0x05,0x8a,0xf0,0x02,0xa9,0x10,0xc8,0x49,\n    0xb0,0x20,0xed,0xfd,0xca,0x10,0xd0,0xa9,\n    0xcb,0x4c,0xed,0xfd,0x08,0x08,0x20,0x38,\n    0x50,0x68,0x80,0x98,0xb0,0xc8,0x04,0x28,\n    0x90,0xa0,0x40,0x00,0x00,0x01,0x0f,0x9c,\n    0xa4,0x42,0xc8,0xf0,0x6b,0x20,0x99,0xcd,\n    0xa0,0x2b,0xb0,0x18,0xa0,0x28,0xa5,0x43,\n    0x30,0x12,0xa4,0x42,0xf0,0x11,0x88,0xf0,\n    0x1e,0x88,0xf0,0x39,0x88,0xf0,0x14,0xa0,\n    0x01,0x2c,0xa0,0x27,0x98,0x38,0x60,0xac,\n    0xf8,0x07,0x20,0xe4,0xcf,0xac,0x78,0x04,\n    0xae,0xf8,0x04,0xa9,0x00,0x18,0x60,0x20,\n    0x58,0xcc,0xb0,0xe6,0xa0,0x00,0xbd,0xfb,\n    0xbf,0x91,0x44,0xc8,0xd0,0xf8,0xe6,0x45,\n    0xbd,0xfb,0xbf,0x91,0x44,0xc8,0xd0,0xf8,\n    0xc6,0x45,0x98,0x18,0x60,0x20,0x58,0xcc,\n    0xb0,0xc8,0xa0,0x00,0xb1,0x44,0x9d,0xfb,\n    0xbf,0xc8,0xd0,0xf8,0xe6,0x45,0xb1,0x44,\n    0x9d,0xfb,0xbf,0xc8,0xd0,0xf8,0xf0,0xe0,\n    0xa9,0x00,0x9d,0xf8,0xbf,0xa5,0x46,0x0a,\n    0x9d,0xf9,0xbf,0xa5,0x47,0x2a,0xb0,0x06,\n    0x9d,0xfa,0xbf,0x20,0x9d,0xca,0x60,0x20,\n    0x56,0xcd,0xa0,0x10,0xb0,0x6a,0x20,0xfb,\n    0xcc,0xa0,0x02,0xb1,0x48,0x85,0x3e,0x49,\n    0x01,0xf0,0x05,0x90,0x58,0x20,0x16,0xcd,\n    0xa0,0x0e,0xa9,0xfe,0x91,0x48,0xa0,0x04,\n    0x84,0x3f,0xb1,0x48,0xdd,0x35,0xcd,0xb0,\n    0x44,0x4a,0x66,0x3f,0x4a,0x66,0x3f,0x4a,\n    0x66,0x3f,0xe0,0x01,0xf0,0x03,0x4a,0x66,\n    0x3f,0x48,0xc8,0xb1,0x48,0xdd,0x37,0xcd,\n    0xb0,0x2b,0x05,0x3f,0x48,0x20,0x8b,0xca,\n    0x68,0x9d,0xf9,0xbf,0x68,0x9d,0xfa,0xbf,\n    0x20,0x9d,0xca,0xb0,0x18,0xa0,0x08,0xb1,\n    0x48,0x85,0x3e,0xc8,0xb1,0x48,0x85,0x3f,\n    0xa0,0x0c,0xb1,0x48,0xa8,0xf0,0x1d,0x88,\n    0xf0,0x12,0x88,0xf0,0x05,0x38,0xa0,0x80,\n    0xd0,0x13,0xb1,0x3e,0x9d,0xfb,0xbf,0xc8,\n    0xd0,0xf8,0xf0,0x08,0xbd,0xfb,0xbf,0x91,\n    0x3e,0xc8,0xd0,0xf8,0x18,0x98,0xa0,0x0d,\n    0x91,0x48,0x60,0xac,0xf8,0x07,0xa2,0x03,\n    0xb9,0x38,0x06,0xdd,0x31,0xcd,0xb9,0xb8,\n    0x05,0xfd,0x2d,0xcd,0xb0,0x04,0xca,0x10,\n    0xef,0x60,0x8a,0x4a,0xaa,0x60,0x18,0xac,\n    0xf8,0x07,0xb9,0x38,0x05,0x7d,0x3b,0xcd,\n    0x99,0x38,0x05,0xb9,0xb8,0x04,0x7d,0x39,\n    0xcd,0x99,0xb8,0x04,0x60,0x02,0x04,0x06,\n    0x0c,0x30,0x60,0x40,0x80,0x23,0x32,0x10,\n    0x20,0x02,0x06,0x30,0x40,0xac,0xf8,0x07,\n    0x20,0xe4,0xcf,0xc9,0x10,0xb0,0x05,0xad,\n    0x78,0x04,0xf0,0x09,0xb9,0x38,0x07,0x49,\n    0x5a,0xd9,0xb8,0x06,0x38,0x60,0x20,0x3d,\n    0xcd,0x90,0x3c,0xd0,0x06,0xc9,0x33,0xd0,\n    0x36,0x18,0x60,0xa9,0x33,0x99,0xb8,0x06,\n    0x20,0xfb,0xcc,0x30,0x2a,0x90,0x22,0xb9,\n    0x38,0x05,0x48,0xb9,0xb8,0x04,0x48,0x8e,\n    0xf8,0x04,0x20,0x16,0xcd,0xbc,0xe2,0xcf,\n    0x20,0xfb,0xcd,0xae,0xf8,0x04,0xac,0xf8,\n    0x07,0x68,0x99,0xb8,0x04,0x68,0x99,0x38,\n    0x05,0xbc,0xe2,0xcf,0x4c,0xc1,0xcd,0x38,\n    0x60,0x20,0x3d,0xcd,0x90,0x12,0xd0,0x12,\n    0xc9,0xcd,0xd0,0x02,0x18,0x60,0x20,0xec,\n    0xcd,0xd0,0x05,0xd9,0xb8,0x06,0xf0,0xf4,\n    0x38,0x60,0x20,0xec,0xcd,0xd0,0xf9,0x99,\n    0xb8,0x06,0xa0,0x00,0x0a,0xd0,0x02,0xa0,\n    0x87,0x20,0xfb,0xcd,0x20,0x8e,0xca,0xac,\n    0xf8,0x07,0xb9,0x38,0x04,0xc9,0x01,0xf0,\n    0x11,0x18,0x69,0x04,0x9d,0xf8,0xbf,0xb9,\n    0xb8,0x06,0x9d,0xfb,0xbf,0x49,0x5a,0x9d,\n    0xfb,0xbf,0xb9,0xb8,0x06,0x49,0x5a,0x99,\n    0x38,0x07,0x18,0x60,0xad,0x00,0xbf,0xf0,\n    0x02,0xc9,0x4c,0x60,0xae,0x78,0x07,0x20,\n    0x67,0xce,0xc8,0xb9,0x30,0xcf,0xd0,0xf4,\n    0x60,0x29,0x0f,0x9d,0xfb,0xbf,0xa9,0x00,\n    0x9d,0xfb,0xbf,0x60,0x98,0x48,0xad,0xf8,\n    0x04,0xc9,0x01,0xad,0x78,0x04,0xe9,0x00,\n    0x4a,0x4a,0x4a,0x4a,0xa8,0xa9,0xff,0x85,\n    0x3e,0xa9,0x03,0x4a,0x66,0x3e,0x88,0x10,\n    0xfa,0x9d,0xfb,0xbf,0xa5,0x3e,0x9d,0xfb,\n    0xbf,0x68,0xa8,0x60,0x20,0x53,0xce,0xa9,\n    0x01,0x48,0x20,0x06,0xce,0xa9,0x11,0x9d,\n    0xfb,0xbf,0x68,0x48,0x9d,0xfb,0xbf,0x20,\n    0x53,0xce,0x68,0x18,0x69,0x01,0xc9,0x1f,\n    0x90,0xe7,0x60,0xa9,0x00,0x2c,0xa9,0xff,\n    0x9d,0xfb,0xbf,0xdd,0xf8,0xbf,0xd0,0xf8,\n    0x6a,0x90,0x03,0x9d,0xfb,0xbf,0x60,0xc9,\n    0x40,0xb0,0x23,0xc9,0x30,0xb0,0x3e,0xc9,\n    0x20,0xb0,0x8e,0xc9,0x10,0xb0,0x95,0xc9,\n    0x04,0xf0,0x4a,0xb0,0x08,0xc9,0x02,0x90,\n    0x58,0xf0,0xd0,0xb0,0xd1,0xc9,0x06,0x90,\n    0x49,0xf0,0xa9,0x4c,0xf4,0xce,0x48,0x29,\n    0x3f,0xf0,0x18,0x68,0x48,0x29,0xc0,0x0a,\n    0xf0,0x08,0xa9,0xff,0xb0,0x04,0xc8,0xb9,\n    0x30,0xcf,0x9d,0xfb,0xbf,0x68,0x38,0xe9,\n    0x01,0xd0,0xe3,0x68,0x60,0x29,0x0f,0x48,\n    0xa9,0xff,0x9d,0xfb,0xbf,0x9d,0xfb,0xbf,\n    0x20,0x06,0xce,0x9d,0xfb,0xbf,0x68,0x38,\n    0xe9,0x01,0xd0,0xeb,0x60,0xad,0xf8,0x04,\n    0x9d,0xfb,0xbf,0xad,0x78,0x04,0x9d,0xfb,\n    0xbf,0x60,0xad,0xf8,0x07,0x49,0xf0,0xd0,\n    0xf5,0xa9,0x00,0x9d,0xf8,0xbf,0xc8,0xb9,\n    0x30,0xcf,0x9d,0xf9,0xbf,0xc8,0xb9,0x30,\n    0xcf,0x9d,0xfa,0xbf,0x98,0x48,0x20,0x9d,\n    0xca,0x68,0xa8,0x60,0x98,0x48,0xac,0x78,\n    0x04,0xf0,0x0d,0xea,0x98,0x48,0xa0,0x20,\n    0x20,0x27,0xcf,0x68,0xa8,0x88,0xd0,0xf4,\n    0xad,0xf8,0x04,0x48,0x4a,0x4a,0x4a,0xf0,\n    0x04,0xa8,0x20,0x27,0xcf,0x68,0x29,0x07,\n    0xa8,0xa9,0x00,0x38,0x6a,0x88,0x10,0xfb,\n    0x0a,0x9d,0xfb,0xbf,0x68,0xa8,0x60,0xa9,\n    0xff,0x9d,0xfb,0xbf,0x88,0xd0,0xfa,0x60,\n    0x01,0x00,0x00,0x02,0x02,0x01,0x02,0x00,\n    0x02,0x02,0x20,0x23,0x44,0xf4,0x52,0x41,\n    0x4d,0x05,0x99,0x43,0xc3,0x27,0x0d,0x20,\n    0x26,0x04,0x02,0x02,0x22,0x24,0x02,0x02,\n    0x23,0x25,0x02,0x02,0x24,0x20,0x02,0x02,\n    0x07,0x02,0x02,0x01,0x0c,0x00,0x10,0x00,\n    0x01,0x00,0x00,0x02,0x01,0x04,0x00,0x44,\n    0x02,0x0f,0x20,0x93,0x01,0x10,0x01,0x47,\n    0x33,0x11,0x0f,0x04,0x00,0x00,0xfe,0xa0,\n    0x41,0x7a,0x88,0x48,0x11,0x01,0x00,0x00,\n    0x23,0x10,0x00,0x01,0x88,0x3f,0x84,0x3f,\n    0x32,0x02,0x06,0x00,0x01,0x00,0x00,0x02,\n    0x01,0x04,0x00,0x44,0x02,0x0f,0x20,0x93,\n    0x01,0x20,0x02,0x47,0x33,0x11,0x1f,0x04,\n    0x00,0x00,0xfe,0xa0,0x41,0x7a,0x88,0x48,\n    0x11,0x01,0x00,0x00,0x32,0x20,0x00,0x01,\n    0x84,0xc8,0xf8,0x84,0x03,0x06,0x00,0x01,\n    0x00,0x00,0x02,0x02,0x01,0x02,0x00,0x02,\n    0x02,0x82,0x41,0x06,0x83,0x44,0x04,0x52,\n    0x41,0x4d,0x05,0x83,0x04,0x02,0x02,0x02,\n    0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,\n    0x02,0x00,0x44,0xae,0xf4,0x08,0x52,0x02,\n    0x02,0x00,0x30,0x5c,0xb9,0xb8,0x05,0x4a,\n    0x8d,0x78,0x04,0xb9,0x38,0x06,0x6a,0x8d,\n    0xf8,0x04,0x60,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0x43,0x4f,0x50,0x59,0x52,0x49,0x47,0x48,\n    0x54,0x20,0x28,0x43,0x29,0x20,0x31,0x39,\n    0x38,0x36,0x2d,0x38,0x39,0x20,0x41,0x50,\n    0x50,0x4c,0x49,0x45,0x44,0x20,0x45,0x4e,\n    0x47,0x49,0x4e,0x45,0x45,0x52,0x49,0x4e,\n    0x47,0x00,0x42,0x4f,0x42,0x20,0x53,0x41,\n    0x4e,0x44,0x45,0x52,0x2d,0x43,0x45,0x44,\n    0x45,0x52,0x4c,0x4f,0x46,0x00,0x4d,0x49,\n    0x43,0x48,0x41,0x45,0x4c,0x20,0x57,0x49,\n    0x4c,0x4b,0x53,0x00,0x53,0x54,0x45,0x56,\n    0x45,0x4e,0x20,0x4d,0x41,0x4c,0x45,0x43,\n    0x48,0x45,0x4b,0x00,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xae,0xae,0xae,0xae,0xae,0xae,0xae,0xae,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc1,0x4c,0x9b,0xc1,\n    0x20,0x16,0xc1,0x4c,0x9f,0xc1,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc1,0xae,0xff,0xcf,0x0e,0x9f,0xc0,\n    0xa2,0x98,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc1,0xc5,0x39,0x08,\n    0x20,0x16,0xc1,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc1,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc1,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc1,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x10,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc1,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0x9f,\n    0xc0,0xa2,0x98,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0x9f,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc1,0x4c,0x00,0xc8,0x20,0x28,0xc1,0x4c,\n    0xe8,0xcb,0xc9,0x10,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc1,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc2,0x4c,0x9b,0xc2,\n    0x20,0x16,0xc2,0x4c,0x9f,0xc2,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc2,0xae,0xff,0xcf,0x0e,0xaf,0xc0,\n    0xa2,0xa8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc2,0xc5,0x39,0x08,\n    0x20,0x16,0xc2,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc2,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc2,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc2,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x20,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc2,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xaf,\n    0xc0,0xa2,0xa8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xaf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc2,0x4c,0x00,0xc8,0x20,0x28,0xc2,0x4c,\n    0xe8,0xcb,0xc9,0x20,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc2,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc3,0x4c,0x9b,0xc3,\n    0x20,0x16,0xc3,0x4c,0x9f,0xc3,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc3,0xae,0xff,0xcf,0x0e,0xbf,0xc0,\n    0xa2,0xb8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc3,0xc5,0x39,0x08,\n    0x20,0x16,0xc3,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc3,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc3,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc3,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x30,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc3,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xbf,\n    0xc0,0xa2,0xb8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xbf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc3,0x4c,0x00,0xc8,0x20,0x28,0xc3,0x4c,\n    0xe8,0xcb,0xc9,0x30,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc3,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc4,0x4c,0x9b,0xc4,\n    0x20,0x16,0xc4,0x4c,0x9f,0xc4,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc4,0xae,0xff,0xcf,0x0e,0xcf,0xc0,\n    0xa2,0xc8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc4,0xc5,0x39,0x08,\n    0x20,0x16,0xc4,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc4,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc4,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc4,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x40,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc4,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xcf,\n    0xc0,0xa2,0xc8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xcf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc4,0x4c,0x00,0xc8,0x20,0x28,0xc4,0x4c,\n    0xe8,0xcb,0xc9,0x40,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc4,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc5,0x4c,0x9b,0xc5,\n    0x20,0x16,0xc5,0x4c,0x9f,0xc5,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc5,0xae,0xff,0xcf,0x0e,0xdf,0xc0,\n    0xa2,0xd8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc5,0xc5,0x39,0x08,\n    0x20,0x16,0xc5,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc5,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc5,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc5,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x50,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc5,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xdf,\n    0xc0,0xa2,0xd8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xdf,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc5,0x4c,0x00,0xc8,0x20,0x28,0xc5,0x4c,\n    0xe8,0xcb,0xc9,0x50,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc5,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc6,0x4c,0x9b,0xc6,\n    0x20,0x16,0xc6,0x4c,0x9f,0xc6,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc6,0xae,0xff,0xcf,0x0e,0xef,0xc0,\n    0xa2,0xe8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc6,0xc5,0x39,0x08,\n    0x20,0x16,0xc6,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc6,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc6,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc6,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x60,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc6,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xef,\n    0xc0,0xa2,0xe8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xef,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc6,0x4c,0x00,0xc8,0x20,0x28,0xc6,0x4c,\n    0xe8,0xcb,0xc9,0x60,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc6,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0xc9,0x20,0xc9,0x00,0xc9,0x03,0xc9,0x00,\n    0xb0,0x31,0x20,0x16,0xc7,0x4c,0x9b,0xc7,\n    0x20,0x16,0xc7,0x4c,0x9f,0xc7,0x8d,0x0c,\n    0xc0,0x8d,0x00,0xc0,0x8d,0x0e,0xc0,0x20,\n    0x2f,0xfb,0x20,0x93,0xfe,0x20,0x89,0xfe,\n    0xa0,0xc7,0xae,0xff,0xcf,0x0e,0xff,0xc0,\n    0xa2,0xf8,0x8c,0xf8,0x07,0x8e,0x78,0x07,\n    0x4c,0xdf,0xc9,0xa9,0xc7,0xc5,0x39,0x08,\n    0x20,0x16,0xc7,0x28,0xd0,0x1a,0x20,0xec,\n    0xcd,0xf0,0x15,0xa9,0x20,0x8d,0x12,0xbd,\n    0xa9,0xea,0x8d,0x13,0xbd,0x8c,0x14,0xbd,\n    0xa2,0x00,0xa9,0x8d,0x8d,0x00,0x02,0x60,\n    0xa5,0x00,0xd0,0x0a,0xc4,0x01,0xd0,0x06,\n    0x20,0x7b,0xc7,0x4c,0xba,0xfa,0xb9,0x38,\n    0x04,0xc9,0x01,0xd0,0x2a,0x20,0x7b,0xc7,\n    0x18,0x90,0x24,0x20,0x9a,0xca,0x20,0xeb,\n    0xca,0xa0,0xc7,0xad,0x01,0x08,0xf0,0x12,\n    0xb9,0x38,0x07,0x49,0x5a,0xd9,0xb8,0x06,\n    0xd0,0x08,0x8d,0x00,0xbf,0xa2,0x70,0x4c,\n    0x01,0x08,0x60,0xa0,0x03,0xd0,0x02,0xa0,\n    0x05,0xa2,0x03,0xb9,0xd5,0xc7,0x95,0x42,\n    0x88,0xca,0x10,0xf7,0x08,0x78,0x8e,0xff,\n    0xc0,0xa2,0xf8,0xa0,0x00,0x84,0x3e,0xa9,\n    0x0a,0x85,0x3f,0xb1,0x42,0x91,0x3e,0xc8,\n    0xd0,0x04,0xe6,0x3f,0xe6,0x43,0xc4,0x44,\n    0xa5,0x43,0xe5,0x45,0x90,0xed,0x0e,0xff,\n    0xc0,0x28,0x4c,0x00,0x0a,0x00,0xc8,0x26,\n    0xcb,0xf4,0xcf,0xb8,0x50,0x06,0x20,0x28,\n    0xc7,0x4c,0x00,0xc8,0x20,0x28,0xc7,0x4c,\n    0xe8,0xcb,0xc9,0x70,0xf0,0x04,0xaa,0xa0,\n    0x0f,0x60,0x68,0x68,0x20,0x28,0xc7,0x4c,\n    0x6f,0xcc,0xae,0x01,0x00,0x00,0x4f,0xdb,\n    0x8e,0x2b,0x0d,0x20,0x58,0xfc,0xa0,0x00,\n    0x20,0x7d,0x0c,0x20,0x00,0xcb,0x8d,0x2a,\n    0x0d,0xa0,0x00,0x8c,0x2f,0x0d,0x0a,0x90,\n    0x02,0x88,0x98,0x84,0x3e,0x85,0x3f,0x20,\n    0x9b,0xcb,0xa0,0x21,0x20,0x7d,0x0c,0x20,\n    0x8b,0xca,0x9d,0xfb,0xbf,0xa9,0x04,0x9d,\n    0xf9,0xbf,0xa9,0xff,0x9d,0xfb,0xbf,0xac,\n    0xf8,0x07,0x99,0xb8,0x06,0xa9,0x00,0x85,\n    0x24,0xa0,0x27,0x20,0x7d,0x0c,0xad,0x2f,\n    0x0d,0x20,0xda,0xfd,0xa0,0x2c,0x20,0x7d,\n    0x0c,0xa5,0x24,0x18,0x65,0x28,0x8d,0xe5,\n    0x0a,0xa9,0x00,0x65,0x29,0x8d,0xe6,0x0a,\n    0xa0,0x08,0x88,0x88,0x8c,0x29,0x0d,0x20,\n    0xe4,0x0a,0x20,0xe8,0x0a,0xb0,0x11,0xac,\n    0x29,0x0d,0xd0,0xee,0xee,0x2f,0x0d,0xad,\n    0x00,0xc0,0x10,0xc1,0x8d,0x10,0xc0,0x60,\n    0x98,0x48,0xa0,0x35,0x20,0x7d,0x0c,0xa9,\n    0x08,0x38,0xed,0x29,0x0d,0x4a,0xa8,0x09,\n    0xb0,0x20,0xed,0xfd,0xc0,0x03,0xb0,0x02,\n    0x68,0x60,0xa0,0x42,0x20,0x7d,0x0c,0xae,\n    0x78,0x07,0xbd,0xf8,0xbf,0xde,0xf8,0xbf,\n    0x29,0x7f,0xd0,0x0d,0xbd,0xf9,0xbf,0xde,\n    0xf9,0xbf,0x29,0x7f,0xd0,0x03,0xde,0xfa,\n    0xbf,0xbd,0xfa,0xbf,0xac,0x2a,0x0d,0xc0,\n    0x09,0xb0,0x02,0x29,0x0f,0x20,0xda,0xfd,\n    0xbd,0xf9,0xbf,0x20,0xda,0xfd,0xbd,0xf8,\n    0xbf,0x20,0xda,0xfd,0xa9,0xad,0x20,0xed,\n    0xfd,0x68,0x5d,0xfb,0xbf,0x20,0xda,0xfd,\n    0x20,0x8e,0xfd,0x60,0xee,0x00,0x04,0x60,\n    0xb9,0xf5,0x0a,0x48,0xb9,0xf4,0x0a,0x48,\n    0xae,0x2b,0x0d,0x60,0xe3,0x0b,0x80,0x0b,\n    0x1d,0x0b,0xfb,0x0a,0xa0,0x00,0x98,0x20,\n    0x0a,0x0d,0x5d,0xfa,0xbf,0x29,0x0f,0xd0,\n    0x13,0x98,0xdd,0xf9,0xbf,0xd0,0x0d,0xdd,\n    0xf8,0xbf,0xd0,0x08,0x20,0xe4,0x0a,0xc8,\n    0xd0,0xe4,0x18,0x60,0x38,0x60,0xa9,0x00,\n    0xa0,0xf0,0x20,0x0a,0x0d,0xad,0x28,0x0d,\n    0x20,0x6b,0x0b,0x8d,0x28,0x0d,0xad,0x27,\n    0x0d,0x20,0x6b,0x0b,0x8d,0x27,0x0d,0x20,\n    0x13,0x0d,0xee,0x28,0x0d,0xd0,0x0c,0xee,\n    0x27,0x0d,0xd0,0x07,0xee,0x26,0x0d,0xd0,\n    0x02,0x18,0x60,0x20,0xe4,0x0a,0xbd,0xfb,\n    0xbf,0xbd,0xfa,0xbf,0x4d,0x26,0x0d,0xd0,\n    0x10,0xbd,0xf9,0xbf,0xcd,0x27,0x0d,0xd0,\n    0x08,0xbd,0xf8,0xbf,0xcd,0x28,0x0d,0xf0,\n    0xbc,0x38,0x60,0xc9,0x10,0x90,0x06,0xc9,\n    0x70,0xb0,0x03,0xa9,0x70,0x60,0xc9,0x90,\n    0x90,0xfb,0xc9,0xf0,0xb0,0xf7,0xa9,0xf0,\n    0x60,0xad,0x2a,0x0d,0xf0,0x0e,0xa9,0x00,\n    0x8d,0x30,0x0d,0x20,0x96,0x0b,0x20,0x96,\n    0x0b,0x20,0x96,0x0b,0x18,0x60,0x20,0x8e,\n    0xca,0xa8,0x98,0x9d,0xfb,0xbf,0x20,0xbe,\n    0x0b,0xd0,0xf7,0x20,0xe4,0x0a,0x98,0x20,\n    0x0a,0x0d,0x98,0xdd,0xfb,0xbf,0xd0,0x0a,\n    0x20,0xbe,0x0b,0xd0,0xf5,0x38,0x6e,0x30,\n    0x0d,0x60,0x68,0x68,0x38,0x60,0x2c,0x30,\n    0x0d,0x10,0x18,0xee,0x26,0x0d,0xfe,0xfa,\n    0xbf,0xad,0x26,0x0d,0x4a,0xcd,0x2a,0x0d,\n    0x90,0x09,0xa0,0x00,0x60,0xee,0x27,0x0d,\n    0xfe,0xf9,0xbf,0xee,0x28,0x0d,0xc8,0x60,\n    0x00,0x55,0xaa,0xff,0xad,0x2a,0x0d,0xf0,\n    0x13,0xa0,0x03,0xb9,0xe0,0x0b,0x8d,0x2c,\n    0x0d,0x20,0xfe,0x0b,0x20,0x2e,0x0c,0xb0,\n    0x04,0x88,0x10,0xef,0x18,0x60,0x20,0x6d,\n    0x0c,0x20,0x0a,0x0c,0xce,0x2d,0x0d,0xd0,\n    0xf8,0x60,0x98,0x48,0xad,0x2c,0x0d,0xa0,\n    0x00,0x8c,0x2e,0x0d,0x9d,0xfb,0xbf,0x9d,\n    0xfb,0xbf,0x9d,0xfb,0xbf,0x9d,0xfb,0xbf,\n    0xc8,0xd0,0xf1,0x20,0xe4,0x0a,0xee,0x2e,\n    0x0d,0xd0,0xe9,0x68,0xa8,0x60,0x20,0x6d,\n    0x0c,0x20,0x3c,0x0c,0xb0,0x05,0xce,0x2d,\n    0x0d,0xd0,0xf6,0x60,0x98,0x48,0xad,0x2c,\n    0x0d,0xa0,0x00,0x8c,0x2e,0x0d,0xdd,0xfb,\n    0xbf,0xd0,0x1e,0xdd,0xfb,0xbf,0xd0,0x19,\n    0xdd,0xfb,0xbf,0xd0,0x14,0xdd,0xfb,0xbf,\n    0xd0,0x0f,0xc8,0xd0,0xe9,0x20,0xe4,0x0a,\n    0xee,0x2e,0x0d,0xd0,0xe1,0x68,0xa8,0x18,\n    0x60,0xa8,0x68,0x38,0x60,0xad,0x2a,0x0d,\n    0x4a,0x8d,0x2d,0x0d,0x4c,0x8e,0xca,0x08,\n    0x20,0xed,0xfd,0x28,0x24,0x18,0x20,0x8f,\n    0x0c,0xbd,0xa1,0x0c,0xd0,0xf1,0x20,0x8f,\n    0x0c,0xbd,0xb0,0x0c,0xd0,0xe9,0x60,0xb9,\n    0xc0,0x0c,0xb0,0x07,0x4a,0x4a,0x4a,0x4a,\n    0xaa,0x38,0x60,0xc8,0x29,0x0f,0xaa,0x18,\n    0x60,0x00,0x8d,0xd2,0xc1,0xcd,0xae,0xd4,\n    0xc9,0xd3,0xa0,0xc7,0xcf,0xcc,0xc4,0xc5,\n    0xce,0x00,0xc2,0xc3,0xc6,0xc8,0xd0,0xd9,\n    0xda,0xcd,0xd1,0xd5,0xd6,0xb1,0xb4,0xba,\n    0x30,0x60,0x6c,0x7e,0xd9,0xef,0xa7,0xfe,\n    0xe2,0x7f,0xa9,0x23,0x40,0x43,0x03,0x6b,\n    0x29,0x6e,0x86,0x90,0xc0,0xd5,0x0e,0x11,\n    0x4e,0x4b,0x20,0x79,0x87,0x08,0xe0,0xf9,\n    0x01,0x90,0x20,0x76,0xe8,0x11,0x01,0x06,\n    0x38,0x80,0xf9,0x01,0x99,0x99,0x6e,0x86,\n    0x7f,0xa9,0x55,0x50,0x19,0x11,0x03,0x32,\n    0xd9,0x04,0x37,0xc0,0xb2,0xe5,0x97,0xd0,\n    0xf9,0x01,0x99,0x93,0xdd,0x2e,0x88,0x0f,\n    0x90,0x19,0x8d,0x28,0x0d,0x8d,0x27,0x0d,\n    0x8c,0x26,0x0d,0xad,0x28,0x0d,0x9d,0xf8,\n    0xbf,0xad,0x27,0x0d,0x9d,0xf9,0xbf,0xad,\n    0x26,0x0d,0x9d,0xfa,0xbf,0x60,0x20,0x8b,\n    0xca,0xbd,0xfb,0xbf,0xc9,0xae,0xd0,0x11,\n    0x5d,0xfb,0xbf,0xc9,0x5a,0xd0,0x0a,0xbd,\n    0xfb,0xbf,0x5d,0xfb,0xbf,0xc9,0x5a,0xf0,\n    0x50,0xac,0xf8,0x07,0xb9,0xb8,0x06,0x59,\n    0x38,0x07,0xc9,0x5a,0xd0,0x17,0x20,0x58,\n    0xfc,0xa0,0x88,0x20,0x8e,0x0c,0xa9,0xbf,\n    0x20,0xed,0xfd,0x20,0x97,0x0e,0xc9,0xd9,\n    0xf0,0x03,0x4c,0x06,0x0e,0x20,0x8b,0xca,\n    0xa0,0xaa,0x20,0xfb,0xcd,0x20,0x8b,0xca,\n    0xa9,0x04,0x9d,0xf8,0xbf,0xac,0xf8,0x07,\n    0xb9,0xb8,0x03,0x48,0x9d,0xfb,0xbf,0xa9,\n    0x0a,0x9d,0xf8,0xbf,0x68,0x0a,0x38,0xe9,\n    0x01,0x9d,0xfb,0xbf,0xa9,0xfc,0x9d,0xfb,\n    0xbf,0x20,0x8e,0xca,0x20,0xeb,0xca,0xad,\n    0x02,0x08,0x8d,0x01,0x09,0x20,0x58,0xfc,\n    0x4e,0x00,0x09,0xa9,0x00,0x85,0x24,0x85,\n    0x25,0xa0,0x00,0x20,0x8e,0x0c,0xad,0xf8,\n    0x07,0x49,0x70,0x20,0xed,0xfd,0x20,0x8e,\n    0xfd,0x20,0x8e,0xfd,0xa0,0x00,0x20,0x03,\n    0x0c,0xc8,0xc0,0x09,0x90,0xf8,0xa0,0x14,\n    0x20,0x8e,0x0c,0xa0,0x59,0x2c,0x00,0x09,\n    0x10,0x02,0xa0,0x27,0x20,0x8e,0x0c,0x20,\n    0x42,0xfc,0x20,0x97,0x0e,0xc9,0xb1,0x90,\n    0x14,0xc9,0xba,0xb0,0x10,0xe9,0xb0,0x20,\n    0x81,0x0c,0x8d,0x01,0x09,0x2c,0x00,0x09,\n    0x30,0xb1,0x4c,0xf6,0x0d,0x8d,0x02,0x09,\n    0xa0,0x06,0x2c,0x00,0x09,0x10,0x02,0xa0,\n    0xfd,0xc8,0xc8,0xc8,0xb9,0xf7,0x0a,0xf0,\n    0x0e,0xcd,0x02,0x09,0xd0,0xf3,0xb9,0xf9,\n    0x0a,0x48,0xb9,0xf8,0x0a,0x48,0x60,0x20,\n    0xe2,0xfb,0x4c,0x7d,0x0a,0xce,0x50,0x0b,\n    0xc3,0xf4,0x0b,0xd3,0x70,0x0b,0x8d,0x15,\n    0x0b,0x88,0x38,0x0b,0x8b,0x38,0x0b,0x8a,\n    0x48,0x0b,0x95,0x48,0x0b,0x9b,0x2a,0x0b,\n    0xd2,0x23,0x0b,0x00,0x2c,0x00,0x09,0x30,\n    0x03,0x4c,0xf6,0x0d,0x20,0xe8,0x0d,0x4c,\n    0x7a,0x0a,0x38,0x6e,0x00,0x09,0x4c,0x7d,\n    0x0a,0x2c,0x00,0x09,0x10,0x03,0x4c,0x00,\n    0x0a,0x20,0xd7,0x0d,0x4c,0x36,0x0e,0xad,\n    0x01,0x09,0x38,0xe9,0x18,0xc9,0xe0,0xb0,\n    0x03,0x8d,0x01,0x09,0x4c,0x7d,0x0a,0xad,\n    0x01,0x09,0x18,0x69,0x18,0x90,0xee,0xa0,\n    0x76,0x20,0x8e,0x0c,0xa2,0x10,0x20,0x4f,\n    0x0e,0xb0,0x11,0xa2,0x00,0xac,0x01,0x09,\n    0xbd,0x08,0x09,0x99,0x08,0x08,0xc8,0xe8,\n    0xe0,0x10,0x90,0xf4,0x4c,0x7d,0x0a,0x20,\n    0x43,0x0e,0xf0,0x74,0x98,0x18,0x69,0x18,\n    0xa8,0xc0,0xe0,0xb0,0x6b,0x20,0x46,0x0e,\n    0xf0,0x66,0xa0,0x7f,0x20,0x8e,0x0c,0xa2,\n    0x06,0x20,0x4f,0x0e,0x20,0xa1,0x0e,0x0e,\n    0x04,0x09,0x2e,0x05,0x09,0x0e,0x04,0x09,\n    0x2e,0x05,0x09,0x18,0xac,0x01,0x09,0xb9,\n    0x03,0x08,0x79,0x1b,0x08,0x8d,0x06,0x09,\n    0xb9,0x02,0x08,0x79,0x1a,0x08,0x8d,0x07,\n    0x09,0x38,0xad,0x06,0x09,0xed,0x04,0x09,\n    0x48,0xad,0x07,0x09,0xed,0x05,0x09,0x90,\n    0x23,0x99,0x1a,0x08,0x68,0x99,0x1b,0x08,\n    0x18,0xad,0x04,0x09,0x99,0x03,0x08,0x79,\n    0x01,0x08,0x99,0x19,0x08,0xad,0x05,0x09,\n    0x99,0x02,0x08,0x79,0x00,0x08,0x99,0x18,\n    0x08,0x4c,0x7d,0x0a,0x68,0xa0,0xd5,0x2c,\n    0xa0,0xc9,0x20,0x8e,0x0c,0x20,0x0c,0xfd,\n    0x4c,0x7d,0x0a,0x20,0x43,0x0e,0xd0,0x06,\n    0xae,0x01,0x09,0xfe,0x05,0x08,0x4c,0x7d,\n    0x0a,0x98,0x48,0x20,0x81,0x0c,0x48,0xa2,\n    0xff,0xcd,0x01,0x09,0xd0,0x02,0xa2,0x3f,\n    0x86,0x32,0x20,0x79,0x0c,0x98,0x18,0x69,\n    0xb1,0x20,0xed,0xfd,0x20,0x79,0x0c,0x68,\n    0x48,0xa8,0xa2,0x10,0xb9,0x08,0x08,0xd0,\n    0x02,0xa9,0xa0,0x20,0xed,0xfd,0xc8,0xca,\n    0xd0,0xf2,0x20,0x79,0x0c,0x68,0x48,0xa8,\n    0xb9,0x02,0x08,0x85,0x3f,0xb9,0x03,0x08,\n    0x85,0x3e,0x20,0x9b,0xcb,0xa9,0xff,0x85,\n    0x32,0x20,0x79,0x0c,0x68,0xa8,0xb9,0x05,\n    0x08,0x49,0x5a,0xd9,0x04,0x08,0xf0,0x02,\n    0xa9,0x01,0xa0,0x04,0xd9,0x6f,0x0c,0xf0,\n    0x03,0x88,0xd0,0xf8,0xb9,0x74,0x0c,0xa8,\n    0x20,0x8e,0x0c,0x68,0xa8,0x60,0x4c,0x00,\n    0x33,0xcd,0xdf,0xe9,0xf5,0xe4,0xef,0xa9,\n    0xa0,0x20,0xed,0xfd,0x4c,0xed,0xfd,0x8d,\n    0x02,0x09,0x0a,0x6d,0x02,0x09,0x0a,0x0a,\n    0x0a,0x69,0x08,0x60,0x18,0x20,0xac,0x0c,\n    0xbd,0xbe,0x0c,0xd0,0x09,0x20,0xac,0x0c,\n    0xbd,0xcd,0x0c,0xd0,0x01,0x60,0x08,0x30,\n    0x03,0x20,0x79,0x0c,0x20,0xed,0xfd,0x28,\n    0xd0,0xe3,0xb9,0xdd,0x0c,0xb0,0x07,0x4a,\n    0x4a,0x4a,0x4a,0xaa,0x38,0x60,0xc8,0x29,\n    0x0f,0xaa,0x18,0x60,0x00,0x8d,0x01,0xc7,\n    0xcc,0xc9,0xd4,0xc3,0xc8,0xa0,0xd2,0xc5,\n    0xc1,0xd3,0xcf,0xce,0x00,0xc6,0xd0,0xd5,\n    0xc4,0xcd,0xad,0xb1,0xb9,0xbd,0xc2,0xd1,\n    0xd7,0xda,0xd9,0x1a,0xc0,0x60,0x2c,0x76,\n    0xea,0x90,0x3c,0xa6,0x56,0x5e,0xfd,0x22,\n    0x29,0x9d,0x4e,0x69,0x0a,0x90,0x19,0x10,\n    0x4d,0xb9,0xca,0xae,0x0d,0xd9,0xea,0x90,\n    0x80,0x70,0x99,0x6e,0x9d,0xb4,0xb7,0x61,\n    0x10,0x19,0xf0,0xaf,0xc0,0x6b,0x97,0x8c,\n    0xf3,0xb2,0x29,0xab,0x60,0xa5,0xfd,0x6c,\n    0x44,0x97,0x8c,0xf3,0xbd,0x1d,0x0a,0xd5,\n    0x0e,0xb9,0x78,0xcf,0x3b,0x22,0x9b,0xd7,\n    0x0a,0x02,0xea,0x3b,0x69,0x78,0xcf,0x3b,\n    0xd1,0x70,0xa7,0x4b,0xca,0x90,0x3c,0xa6,\n    0x56,0x5e,0xf0,0x19,0xab,0x60,0xa0,0xbe,\n    0xe6,0x96,0x8b,0x90,0x3c,0xa6,0x56,0x5e,\n    0xf2,0x9a,0x0a,0xab,0x7e,0xf0,0x25,0x30,\n    0x4a,0xb1,0xbd,0x70,0xa0,0xc0,0x45,0x60,\n    0x19,0x11,0xfb,0x0d,0x9f,0xc0,0x6b,0x90,\n    0xa9,0x01,0x11,0xfb,0x0d,0x9d,0x50,0xeb,\n    0x90,0xa9,0x01,0x10,0xdc,0xaf,0x5f,0x30,\n    0x79,0x5f,0xd6,0xc4,0x45,0xf3,0x90,0x3c,\n    0xa6,0x56,0x5e,0xfd,0x90,0x5b,0xd6,0xae,\n    0x0f,0xd1,0x68,0xb9,0x05,0x5a,0xb7,0x6e,\n    0xa0,0xf0,0x79,0x3e,0x9c,0x8b,0xc0,0x50,\n    0x19,0x11,0x7c,0xff,0xe6,0x90,0xbe,0xe6,\n    0x96,0x8c,0x69,0x03,0xca,0x65,0x65,0xef,\n    0x10,0xbe,0xe6,0x90,0x2a,0xe0,0x69,0xd4,\n    0xe6,0x90,0xa9,0x01,0x11,0x7c,0xff,0xe6,\n    0x97,0x8c,0xf3,0xb9,0xd5,0x0e,0xb0,0x19,\n    0x11,0xd5,0x0e,0xb9,0x6e,0xe9,0x4c,0xa3,\n    0xb0,0x19,0x74,0xbc,0xa9,0x10,0x19,0x05,\n    0xed,0x99,0x91,0x01,0x03,0xae,0x05,0xed,\n    0x10,0x19,0x70,0x30,0x70,0x69,0x91,0x01,\n    0x03,0xcd,0x7c,0x41,0x01,0xad,0x01,0x09,\n    0x8d,0x02,0x08,0x49,0x5a,0x8d,0x03,0x08,\n    0x20,0xe8,0x0d,0x4c,0xdf,0xc9,0x20,0x8b,\n    0xca,0xa8,0xb9,0x00,0x08,0x9d,0xfb,0xbf,\n    0xc8,0xd0,0xf7,0x60,0x20,0xd7,0x0d,0x20,\n    0x43,0x0e,0xd0,0x0b,0xb9,0x02,0x08,0x19,\n    0x03,0x08,0xf0,0x03,0x20,0x27,0x0e,0xa0,\n    0xae,0x20,0x8e,0x0c,0xa2,0x01,0x20,0x4f,\n    0x0e,0xb0,0x21,0xad,0x08,0x09,0xc9,0xb1,\n    0x90,0xf2,0xc9,0xb8,0xb0,0xee,0x69,0x10,\n    0xa8,0xa9,0x00,0xf0,0x08,0xae,0x78,0x07,\n    0xac,0xf8,0x07,0xa9,0x7b,0x84,0x01,0x85,\n    0x00,0x6c,0x00,0x00,0xa2,0x02,0xa9,0x00,\n    0x9d,0x00,0x08,0xca,0x10,0xfa,0x6c,0xfc,\n    0xff,0xac,0x01,0x09,0xb9,0x04,0x08,0x59,\n    0x05,0x08,0xc9,0x5a,0x60,0x8e,0x03,0x09,\n    0xa9,0xa0,0x9d,0x08,0x09,0xca,0x10,0xfa,\n    0xe8,0x20,0x97,0x0e,0xc9,0x88,0xf0,0x22,\n    0xc9,0x8d,0xf0,0x1c,0xc9,0x9b,0xf0,0x19,\n    0xc9,0xa0,0xb0,0x06,0x20,0xe2,0xfb,0x4c,\n    0x5b,0x0e,0xec,0x03,0x09,0xb0,0xf5,0x9d,\n    0x08,0x09,0x20,0xed,0xfd,0xe8,0xd0,0xd9,\n    0x18,0x60,0x8a,0xf0,0xd4,0xca,0xc6,0x24,\n    0xa9,0xa0,0x9d,0x08,0x09,0x20,0xed,0xfd,\n    0xc6,0x24,0x4c,0x5b,0x0e,0x20,0x0c,0xfd,\n    0xc9,0xe0,0x90,0x02,0x29,0xdf,0x60,0xa9,\n    0x00,0xa8,0xaa,0x8d,0x04,0x09,0x8e,0x05,\n    0x09,0xa9,0x0a,0x8d,0x02,0x09,0xa2,0x00,\n    0xb9,0x08,0x09,0x49,0xb0,0xc9,0x0a,0x90,\n    0x01,0x60,0x6d,0x04,0x09,0x48,0x8a,0x6d,\n    0x05,0x09,0xaa,0x68,0xce,0x02,0x09,0xd0,\n    0xf1,0xc8,0xd0,0xd7,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff\n]) as ReadonlyUint8Array;\n","import { allocMem, debug } from '../util';\nimport { Card, Restorable, byte, memory } from '../types';\nimport { rom } from '../roms/cards/ramfactor';\n\nconst LOC = {\n    // Disk II Stuff\n    RAMLO: 0x80,\n    RAMMID: 0x81,\n    RAMHI: 0x82,\n    RAMDATA: 0x83,\n    _RAMLO: 0x84,\n    _RAMMID: 0x85,\n    _RAMHI: 0x86,\n    _RAMDATA: 0x87,\n    BANK: 0x8f,\n} as const;\n\nexport class RAMFactorState {\n    loc: number;\n    firmware: byte;\n    mem: memory;\n}\n\nexport default class RAMFactor implements Card, Restorable<RAMFactorState> {\n    private mem: memory;\n\n    private firmware = 0;\n    private ramlo = 0;\n    private rammid = 0;\n    private ramhi = 0;\n\n    private loc = 0;\n\n    constructor(size: number) {\n        debug('RAMFactor card');\n\n        this.mem = allocMem(size);\n        for (let off = 0; off < size; off++) {\n            this.mem[off] = 0;\n        }\n    }\n\n    private sethi(val: byte) {\n        this.ramhi = val & 0xff;\n    }\n\n    private setmid(val: byte) {\n        if ((this.rammid & 0x80) !== 0 && (val & 0x80) === 0) {\n            this.sethi(this.ramhi + 1);\n        }\n        this.rammid = val & 0xff;\n    }\n\n    private setlo(val: byte) {\n        if ((this.ramlo & 0x80) !== 0 && (val & 0x80) === 0) {\n            this.setmid(this.rammid + 1);\n        }\n        this.ramlo = val & 0xff;\n    }\n\n    private access(off: byte, val: byte) {\n        let result = 0;\n        switch (off & 0x8f) {\n            case LOC.RAMLO:\n            case LOC._RAMLO:\n                if (val !== undefined) {\n                    this.setlo(val);\n                } else {\n                    result = this.ramlo;\n                }\n                break;\n            case LOC.RAMMID:\n            case LOC._RAMMID:\n                if (val !== undefined) {\n                    this.setmid(val);\n                } else {\n                    result = this.rammid;\n                }\n                break;\n            case LOC.RAMHI:\n            case LOC._RAMHI:\n                if (val !== undefined) {\n                    this.sethi(val);\n                } else {\n                    result = this.ramhi;\n                    result |= 0xf0;\n                }\n                break;\n            case LOC.RAMDATA:\n            case LOC._RAMDATA:\n                if (val !== undefined) {\n                    this.mem[this.loc % this.mem.length] = val;\n                } else {\n                    result = this.mem[this.loc % this.mem.length];\n                }\n                this.setlo(this.ramlo + 1);\n                break;\n            case LOC.BANK:\n                if (val !== undefined) {\n                    this.firmware = val & 0x01;\n                } else {\n                    result = this.firmware;\n                }\n                break;\n            default:\n                break;\n        }\n        this.loc = (this.ramhi << 16) | (this.rammid << 8) | this.ramlo;\n\n        /*\n        if (val === undefined) {\n            debug(\"Read: \" + toHex(result) + \" from \" + toHex(off) + \" (loc = \" + _loc + \")\");\n        } else {\n            debug(\"Wrote: \" + toHex(val) + \" to \" + toHex(off) + \" (loc = \" + _loc + \")\");\n        }\n        */\n\n        return result;\n    }\n\n    ioSwitch(off: byte, val: byte) {\n        return this.access(off, val);\n    }\n\n    read(page: byte, off: byte) {\n        return rom[(this.firmware << 12) | ((page - 0xc0) << 8) | off];\n    }\n\n    write() {\n        // not writable\n    }\n\n    reset() {\n        this.firmware = 0;\n    }\n\n    getState() {\n        return {\n            loc: this.loc,\n            firmware: this.firmware,\n            mem: new Uint8Array(this.mem),\n        };\n    }\n\n    setState(state: RAMFactorState) {\n        this.loc = state.loc;\n        this.firmware = state.firmware;\n        this.mem = new Uint8Array(state.mem);\n\n        this.ramhi = (this.loc >> 16) & 0xff;\n        this.rammid = (this.loc >> 8) & 0xff;\n        this.ramlo = this.loc & 0xff;\n    }\n}\n","import { ReadonlyUint8Array } from '../../types';\n\n/*\n    $Cn01=$20\n    $Cn03=$00\n    $Cn05=$03\n    $Cn07=$00 Smartport / $3C Disk controller\n*/\n\nexport const rom = new Uint8Array([\n    0xa2,0x20,0xa2,0x00,0xa2,0x03,0xa2,0x00,\n    0x20,0x58,0xff,0xba,0xbd,0x00,0x01,0x8d,\n    0xf8,0x07,0x0a,0x0a,0x0a,0x0a,0xa8,0xb9,\n    0x80,0xc0,0x4a,0xb0,0x11,0xa5,0x00,0xd0,\n    0x0a,0xa5,0x01,0xcd,0xf8,0x07,0xd0,0x03,\n    0x4c,0xba,0xfa,0x4c,0x00,0xe0,0xa2,0x01,\n    0x86,0x42,0xca,0x86,0x46,0x86,0x47,0x86,\n    0x44,0xa2,0x08,0x86,0x45,0xad,0xf8,0x07,\n    0x48,0x48,0xa9,0x47,0x48,0xb8,0x50,0x0b,\n    0x68,0x0a,0x0a,0x0a,0x0a,0xaa,0x4c,0x01,\n    0x08,0x00,0x00,0x4c,0x59,0xc7,0x4c,0x59,\n    0xc7,0xa5,0x00,0x48,0xa9,0x60,0x85,0x00,\n    0x20,0x00,0x00,0xba,0xbd,0x00,0x01,0x0a,\n    0x0a,0x0a,0x0a,0xaa,0x68,0x85,0x00,0xbd,\n    0x81,0xc0,0x30,0xfb,0x48,0xbd,0x82,0xc0,\n    0x48,0xbd,0x83,0xc0,0x48,0xbd,0x84,0xc0,\n    0x6a,0x7a,0xfa,0x68,0x60,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0xd7,0x53,\n]) as ReadonlyUint8Array;\n","/*eslint no-console: 0*/\nconst hex_digits = '0123456789ABCDEF';\nconst bin_digits = '01';\n/** Returns a random byte. */\nexport function garbage() {\n    return (Math.random() * 0x100) & 0xff;\n}\nexport const testables = {\n    garbage,\n};\n/**\n * Returns an array or Uint8Array of `size` bytes filled as if the computer\n * was just powered on.\n */\nexport function allocMem(size) {\n    const result = new Uint8Array(size);\n    for (let idx = 0; idx < size; idx++) {\n        result[idx] = idx & 0x02 ? 0x00 : 0xff;\n    }\n    // Borrowed from AppleWin (https://github.com/AppleWin/AppleWin)\n    for (let idx = 0; idx < size; idx += 0x200) {\n        result[idx + 0x28] = garbage();\n        result[idx + 0x29] = garbage();\n        result[idx + 0x68] = garbage();\n        result[idx + 0x69] = garbage();\n    }\n    return result;\n}\n/** Returns an array or Uint8Array of 256 * `pages` bytes. */\nexport function allocMemPages(pages) {\n    return allocMem(pages << 8);\n}\n/** Returns a new Uint8Array for the input array. */\nexport function bytify(ary) {\n    return new Uint8Array(ary);\n}\n/** Returns a new Uint8Array with the concatenated data from the inputs. */\nexport function concat(...arys) {\n    const result = new Uint8Array(arys.reduce((l, ary) => l + ary.length, 0));\n    let offset = 0;\n    for (let i = 0; i < arys.length; i++) {\n        result.set(arys[i], offset);\n        offset += arys[i].length;\n    }\n    return result;\n}\n/** Writes to the console. */\nexport function debug(...args) {\n    console.log(...args);\n}\n/**\n * Returns a string of hex digits (all caps).\n * @param v the value to encode\n * @param n the number of nibbles. If `n` is missing, it is guessed from the value\n *     of `v`. If `v` < 256, it is assumed to be 2 nibbles, otherwise 4.\n */\nexport function toHex(v, n) {\n    if (!n) {\n        n = v < 256 ? 2 : 4;\n    }\n    let result = '';\n    for (let idx = 0; idx < n; idx++) {\n        result = hex_digits[v & 0x0f] + result;\n        v >>= 4;\n    }\n    return result;\n}\n/**\n * Returns a string of 8 binary digits.\n * @param v the value to encode\n */\nexport function toBinary(v) {\n    let result = '';\n    for (let idx = 0; idx < 8; idx++) {\n        result = bin_digits[v & 0x01] + result;\n        v >>= 1;\n    }\n    return result;\n}\n//# sourceMappingURL=util.js.map","import { toHex } from './util';\n/** Identifier for a NMOS 6502 CPU */\nexport const FLAVOR_6502 = '6502';\n/** Identifier for a Rockwell 65C02 CPU */\nexport const FLAVOR_ROCKWELL_65C02 = 'rockwell65c02';\n/** Identifier for a WDC 65C02 CPU */\nexport const FLAVOR_WDC_65C02 = 'wdc65c02';\n/** Array of valid 65C02 flavors*/\nexport const FLAVORS_65C02 = [FLAVOR_ROCKWELL_65C02, FLAVOR_WDC_65C02];\n/** Array of all valid CPU flavors */\nexport const FLAVORS = [FLAVOR_6502, ...FLAVORS_65C02];\n/** Addressing mode name to instruction size mapping. */\nexport const sizes = {\n    accumulator: 1,\n    implied: 1,\n    immediate: 2,\n    absolute: 3,\n    zeroPage: 2,\n    relative: 2,\n    absoluteX: 3,\n    absoluteY: 3,\n    zeroPageX: 2,\n    zeroPageY: 2,\n    absoluteIndirect: 3,\n    zeroPageXIndirect: 2,\n    zeroPageIndirectY: 2,\n    /* 65c02 */\n    zeroPageIndirect: 2,\n    absoluteXIndirect: 3,\n    zeroPage_relative: 3,\n};\n/** Flags to status byte mask. */\nexport const flags = {\n    N: 0x80,\n    V: 0x40,\n    X: 0x20,\n    B: 0x10,\n    D: 0x08,\n    I: 0x04,\n    Z: 0x02,\n    C: 0x01, // Carry\n};\n/** CPU-referenced memory locations. */\nconst loc = {\n    STACK: 0x100,\n    NMI: 0xfffa,\n    RESET: 0xfffc,\n    BRK: 0xfffe,\n};\nfunction isResettablePageHandler(pageHandler) {\n    return pageHandler.reset !== undefined;\n}\nconst BLANK_PAGE = {\n    read: function () {\n        return 0;\n    },\n    write: function () {\n        /* not writable */\n    },\n};\nexport class CPU6502 {\n    /**\n     * Constructor for all versions.\n     *\n     * @param flavor One of several supported CPU flavors, either\n     * `FLAVOR_6502` (the default), the original MOS 6502;\n     * `FLAVOR_ROCKWELL_65C02`, a Rockwell manufactured 65C02;\n     * or `FLAVOR_WDC_65C02`, a WDC manufactured 65C02.\n     */\n    constructor({ flavor } = {}) {\n        /**\n         * Registers\n         */\n        /** Program counter */\n        this.pc = 0;\n        /** Status register */\n        this.sr = flags.X;\n        /** Accumulator */\n        this.ar = 0;\n        /** X index */\n        this.xr = 0;\n        /** Y index */\n        this.yr = 0;\n        /** Stack pointer */\n        this.sp = 0xff;\n        /** Last accessed memory address */\n        this.addr = 0;\n        /** Filled array of memory handlers by address page */\n        this.memPages = new Array(0x100);\n        /** Callbacks invoked on reset signal */\n        this.resetHandlers = [];\n        /** Elapsed cycles */\n        this.cycles = 0;\n        /** Command being fetched signal */\n        this.sync = false;\n        /** Processor is in WAI mode */\n        this.wait = false;\n        /** Processor is in STP mode */\n        this.stop = false;\n        /*\n         * Implied function\n         */\n        this.implied = () => {\n            this.readByte(this.pc);\n        };\n        /*\n         * Read functions\n         */\n        // #$00\n        this.readImmediate = () => {\n            return this.readBytePC();\n        };\n        // $0000\n        this.readAbsolute = () => {\n            return this.readByte(this.readWordPC());\n        };\n        // $00\n        this.readZeroPage = () => {\n            return this.readByte(this.readBytePC());\n        };\n        // $0000,X\n        this.readAbsoluteX = () => {\n            const addr = this.readWordPC();\n            const pc = this.addr;\n            const addrIdx = (addr + this.xr) & 0xffff;\n            this.workCycleIndexedRead(pc, addr, addrIdx);\n            return this.readByte(addrIdx);\n        };\n        // $0000,Y\n        this.readAbsoluteY = () => {\n            const addr = this.readWordPC();\n            const pc = this.addr;\n            const addrIdx = (addr + this.yr) & 0xffff;\n            this.workCycleIndexedRead(pc, addr, addrIdx);\n            return this.readByte(addrIdx);\n        };\n        // $00,X\n        this.readZeroPageX = () => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            return this.readByte((zpAddr + this.xr) & 0xff);\n        };\n        // $00,Y\n        this.readZeroPageY = () => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            return this.readByte((zpAddr + this.yr) & 0xff);\n        };\n        // ($00,X)\n        this.readZeroPageXIndirect = () => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            const addr = this.readZPWord((zpAddr + this.xr) & 0xff);\n            return this.readByte(addr);\n        };\n        // ($00),Y\n        this.readZeroPageIndirectY = () => {\n            const zpAddr = this.readBytePC();\n            const pc = this.addr;\n            const addr = this.readZPWord(zpAddr);\n            const addrIdx = (addr + this.yr) & 0xffff;\n            this.workCycleIndexedRead(pc, addr, addrIdx);\n            return this.readByte(addrIdx);\n        };\n        // ($00) (65C02)\n        this.readZeroPageIndirect = () => {\n            return this.readByte(this.readZPWord(this.readBytePC()));\n        };\n        /*\n         * Write Functions\n         */\n        // $0000\n        this.writeAbsolute = (val) => {\n            this.writeByte(this.readWordPC(), val);\n        };\n        // $00\n        this.writeZeroPage = (val) => {\n            this.writeByte(this.readBytePC(), val);\n        };\n        // $0000,X\n        this.writeAbsoluteX = (val) => {\n            const addr = this.readWordPC();\n            const pc = this.addr;\n            const addrIdx = (addr + this.xr) & 0xffff;\n            this.workCycleIndexedWrite(pc, addr, addrIdx);\n            this.writeByte(addrIdx, val);\n        };\n        // $0000,Y\n        this.writeAbsoluteY = (val) => {\n            const addr = this.readWordPC();\n            const pc = this.addr;\n            const addrIdx = (addr + this.yr) & 0xffff;\n            this.workCycleIndexedWrite(pc, addr, addrIdx);\n            this.writeByte(addrIdx, val);\n        };\n        // $00,X\n        this.writeZeroPageX = (val) => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            this.writeByte((zpAddr + this.xr) & 0xff, val);\n        };\n        // $00,Y\n        this.writeZeroPageY = (val) => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            this.writeByte((zpAddr + this.yr) & 0xff, val);\n        };\n        // ($00,X)\n        this.writeZeroPageXIndirect = (val) => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            const addr = this.readZPWord((zpAddr + this.xr) & 0xff);\n            this.writeByte(addr, val);\n        };\n        // ($00),Y\n        this.writeZeroPageIndirectY = (val) => {\n            const zpAddr = this.readBytePC();\n            const pc = this.addr;\n            const addr = this.readZPWord(zpAddr);\n            const addrIdx = (addr + this.yr) & 0xffff;\n            this.workCycleIndexedWrite(pc, addr, addrIdx);\n            this.writeByte(addrIdx, val);\n        };\n        // ($00) (65C02)\n        this.writeZeroPageIndirect = (val) => {\n            this.writeByte(this.readZPWord(this.readBytePC()), val);\n        };\n        // $00\n        this.readAddrZeroPage = () => {\n            return this.readBytePC();\n        };\n        // $00,X\n        this.readAddrZeroPageX = () => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            return (zpAddr + this.xr) & 0xff;\n        };\n        // $0000 (65C02)\n        this.readAddrAbsolute = () => {\n            return this.readWordPC();\n        };\n        // ($0000) (6502)\n        this.readAddrAbsoluteIndirectBug = () => {\n            const addr = this.readWordPC();\n            const page = addr & 0xff00;\n            const off = addr & 0x00ff;\n            const lsb = this.readByte(addr);\n            const msb = this.readByte(page | ((off + 0x01) & 0xff));\n            return (msb << 8) | lsb;\n        };\n        // ($0000) (65C02)\n        this.readAddrAbsoluteIndirect = () => {\n            const addr = this.readWord(this.readWordPC());\n            this.readByte(this.addr);\n            return addr;\n        };\n        // $0000,X\n        this.readAddrAbsoluteX = (opts) => {\n            let addr = this.readWordPC();\n            const page = addr & 0xff00;\n            addr = (addr + this.xr) & 0xffff;\n            if (this.is65C02) {\n                if (opts === null || opts === void 0 ? void 0 : opts.inc) {\n                    this.readByte(this.addr);\n                }\n                else {\n                    const newPage = addr & 0xff00;\n                    if (page !== newPage) {\n                        this.readByte(this.addr);\n                    }\n                }\n            }\n            else {\n                const off = addr & 0x00ff;\n                this.readByte(page | off);\n            }\n            return addr;\n        };\n        // $0000,Y (NMOS 6502)\n        this.readAddrAbsoluteY = () => {\n            let addr = this.readWordPC();\n            const page = addr & 0xff00;\n            addr = (addr + this.yr) & 0xffff;\n            const off = addr & 0x00ff;\n            this.readByte(page | off);\n            return addr;\n        };\n        // ($00,X) (NMOS 6502)\n        this.readAddrZeroPageXIndirect = () => {\n            const zpAddr = this.readBytePC();\n            this.readByte(zpAddr);\n            return this.readZPWord((zpAddr + this.xr) & 0xff);\n        };\n        // ($00),Y (NMOS 6502)\n        this.readAddrZeroPageIndirectY = () => {\n            const zpAddr = this.readBytePC();\n            const addr = this.readZPWord(zpAddr);\n            const addrIdx = (addr + this.yr) & 0xffff;\n            const oldPage = addr & 0xff00;\n            const off = addrIdx & 0xff;\n            this.readByte(oldPage | off);\n            return addrIdx;\n        };\n        // $(0000,X) (65C02)\n        this.readAddrAbsoluteXIndirect = () => {\n            const lsb = this.readBytePC();\n            const pc = this.addr;\n            const msb = this.readBytePC();\n            const addr = (((msb << 8) | lsb) + this.xr) & 0xffff;\n            this.readByte(pc);\n            return this.readWord(addr);\n        };\n        // 5C, DC, FC NOP (65C02)\n        this.readNop = () => {\n            this.readWordPC();\n            this.readByte(this.addr);\n        };\n        // NOP (65C02)\n        this.readNopImplied = () => {\n            // Op is 1 cycle\n        };\n        /* Break */\n        this.brk = (readFn) => {\n            readFn();\n            this.pushWord(this.pc);\n            this.pushByte(this.sr | flags.B);\n            if (this.is65C02) {\n                this.setFlag(flags.D, false);\n            }\n            this.setFlag(flags.I, true);\n            this.pc = this.readWord(loc.BRK);\n        };\n        /* Stop (65C02) */\n        this.stp = () => {\n            this.stop = true;\n            this.readByte(this.pc);\n            this.readByte(this.pc);\n        };\n        /* Wait (65C02) */\n        this.wai = () => {\n            this.wait = true;\n            this.readByte(this.pc);\n            this.readByte(this.pc);\n        };\n        /* Load Accumulator */\n        this.lda = (readFn) => {\n            this.ar = this.testNZ(readFn());\n        };\n        /* Load X Register */\n        this.ldx = (readFn) => {\n            this.xr = this.testNZ(readFn());\n        };\n        /* Load Y Register */\n        this.ldy = (readFn) => {\n            this.yr = this.testNZ(readFn());\n        };\n        /* Store Accumulator */\n        this.sta = (writeFn) => {\n            writeFn(this.ar);\n        };\n        /* Store X Register */\n        this.stx = (writeFn) => {\n            writeFn(this.xr);\n        };\n        /* Store Y Register */\n        this.sty = (writeFn) => {\n            writeFn(this.yr);\n        };\n        /* Store Zero */\n        this.stz = (writeFn) => {\n            writeFn(0);\n        };\n        /* Add with Carry */\n        this.adc = (readFn) => {\n            this.ar = this.add(this.ar, readFn(), /* sub= */ false);\n        };\n        /* Subtract with Carry */\n        this.sbc = (readFn) => {\n            this.ar = this.add(this.ar, readFn() ^ 0xff, /* sub= */ true);\n        };\n        /* Increment Memory */\n        this.incA = () => {\n            this.readByte(this.pc);\n            this.ar = this.increment(this.ar);\n        };\n        this.inc = (readAddrFn) => {\n            const addr = readAddrFn({ inc: true });\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.increment(oldVal);\n            this.writeByte(addr, val);\n        };\n        /* Increment X */\n        this.inx = () => {\n            this.readByte(this.pc);\n            this.xr = this.increment(this.xr);\n        };\n        /* Increment Y */\n        this.iny = () => {\n            this.readByte(this.pc);\n            this.yr = this.increment(this.yr);\n        };\n        /* Decrement Memory */\n        this.decA = () => {\n            this.readByte(this.pc);\n            this.ar = this.decrement(this.ar);\n        };\n        this.dec = (readAddrFn) => {\n            const addr = readAddrFn({ inc: true });\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.decrement(oldVal);\n            this.writeByte(addr, val);\n        };\n        /* Decrement X */\n        this.dex = () => {\n            this.readByte(this.pc);\n            this.xr = this.decrement(this.xr);\n        };\n        /* Decrement Y */\n        this.dey = () => {\n            this.readByte(this.pc);\n            this.yr = this.decrement(this.yr);\n        };\n        this.shiftLeft = (val) => {\n            this.setFlag(flags.C, !!(val & 0x80));\n            return this.testNZ((val << 1) & 0xff);\n        };\n        /* Arithmetic Shift Left */\n        this.aslA = () => {\n            this.readByte(this.pc);\n            this.ar = this.shiftLeft(this.ar);\n        };\n        this.asl = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.shiftLeft(oldVal);\n            this.writeByte(addr, val);\n        };\n        this.shiftRight = (val) => {\n            this.setFlag(flags.C, !!(val & 0x01));\n            return this.testNZ(val >> 1);\n        };\n        /* Logical Shift Right */\n        this.lsrA = () => {\n            this.readByte(this.pc);\n            this.ar = this.shiftRight(this.ar);\n        };\n        this.lsr = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.shiftRight(oldVal);\n            this.writeByte(addr, val);\n        };\n        this.rotateLeft = (val) => {\n            const c = this.sr & flags.C;\n            this.setFlag(flags.C, !!(val & 0x80));\n            return this.testNZ(((val << 1) | (c ? 0x01 : 0x00)) & 0xff);\n        };\n        /* Rotate Left */\n        this.rolA = () => {\n            this.readByte(this.pc);\n            this.ar = this.rotateLeft(this.ar);\n        };\n        this.rol = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.rotateLeft(oldVal);\n            this.writeByte(addr, val);\n        };\n        /* Rotate Right */\n        this.rorA = () => {\n            this.readByte(this.pc);\n            this.ar = this.rotateRight(this.ar);\n        };\n        this.ror = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.rotateRight(oldVal);\n            this.writeByte(addr, val);\n        };\n        /* Logical And Accumulator */\n        this.and = (readFn) => {\n            this.ar = this.testNZ(this.ar & readFn());\n        };\n        /* Logical Or Accumulator */\n        this.ora = (readFn) => {\n            this.ar = this.testNZ(this.ar | readFn());\n        };\n        /* Logical Exclusive Or Accumulator */\n        this.eor = (readFn) => {\n            this.ar = this.testNZ(this.ar ^ readFn());\n        };\n        /* Reset Bit */\n        this.rmb = (b) => {\n            const bit = (0x1 << b) ^ 0xff;\n            const addr = this.readBytePC();\n            let val = this.readByte(addr);\n            this.readByte(addr);\n            val &= bit;\n            this.writeByte(addr, val);\n        };\n        /* Set Bit */\n        this.smb = (b) => {\n            const bit = 0x1 << b;\n            const addr = this.readBytePC();\n            let val = this.readByte(addr);\n            this.readByte(addr);\n            val |= bit;\n            this.writeByte(addr, val);\n        };\n        /* Test and Reset Bits */\n        this.trb = (readAddrFn) => {\n            const addr = readAddrFn();\n            const val = this.readByte(addr);\n            this.testZ(val & this.ar);\n            this.readByte(addr);\n            this.writeByte(addr, val & ~this.ar);\n        };\n        /* Test and Set Bits */\n        this.tsb = (readAddrFn) => {\n            const addr = readAddrFn();\n            const val = this.readByte(addr);\n            this.testZ(val & this.ar);\n            this.readByte(addr);\n            this.writeByte(addr, val | this.ar);\n        };\n        /* Bit */\n        this.bit = (readFn) => {\n            const val = readFn();\n            this.setFlag(flags.Z, (val & this.ar) === 0);\n            this.setFlag(flags.N, !!(val & 0x80));\n            this.setFlag(flags.V, !!(val & 0x40));\n        };\n        /* Bit Immediate*/\n        this.bitI = (readFn) => {\n            const val = readFn();\n            this.setFlag(flags.Z, (val & this.ar) === 0);\n        };\n        this.cmp = (readFn) => {\n            this.compare(this.ar, readFn());\n        };\n        this.cpx = (readFn) => {\n            this.compare(this.xr, readFn());\n        };\n        this.cpy = (readFn) => {\n            this.compare(this.yr, readFn());\n        };\n        /* Branches */\n        this.brs = (f) => {\n            const off = this.readBytePC(); // changes pc\n            if ((f & this.sr) !== 0) {\n                this.readByte(this.pc);\n                const oldPage = this.pc & 0xff00;\n                this.pc += off > 127 ? off - 256 : off;\n                this.pc &= 0xffff;\n                const newPage = this.pc & 0xff00;\n                const newOff = this.pc & 0xff;\n                if (newPage !== oldPage)\n                    this.readByte(oldPage | newOff);\n            }\n        };\n        this.brc = (f) => {\n            const off = this.readBytePC(); // changes pc\n            if ((f & this.sr) === 0) {\n                this.readByte(this.pc);\n                const oldPage = this.pc & 0xff00;\n                this.pc += off > 127 ? off - 256 : off;\n                this.pc &= 0xffff;\n                const newPage = this.pc & 0xff00;\n                const newOff = this.pc & 0xff;\n                if (newPage !== oldPage)\n                    this.readByte(oldPage | newOff);\n            }\n        };\n        /* WDC 65C02 branches */\n        this.bbr = (b) => {\n            const zpAddr = this.readBytePC();\n            const val = this.readByte(zpAddr);\n            this.writeByte(zpAddr, val);\n            const off = this.readBytePC(); // changes pc\n            const oldPc = this.pc;\n            const oldPage = oldPc & 0xff00;\n            let newPC = this.pc + (off > 127 ? off - 256 : off);\n            newPC &= 0xffff;\n            const newOff = newPC & 0xff;\n            this.readByte(oldPage | newOff);\n            if (((1 << b) & val) === 0) {\n                this.pc = newPC;\n            }\n        };\n        this.bbs = (b) => {\n            const zpAddr = this.readBytePC();\n            const val = this.readByte(zpAddr);\n            this.writeByte(zpAddr, val);\n            const off = this.readBytePC(); // changes pc\n            const oldPc = this.pc;\n            const oldPage = oldPc & 0xff00;\n            let newPC = this.pc + (off > 127 ? off - 256 : off);\n            newPC &= 0xffff;\n            const newOff = newPC & 0xff;\n            this.readByte(oldPage | newOff);\n            if (((1 << b) & val) !== 0) {\n                this.pc = newPC;\n            }\n        };\n        /* Transfers and stack */\n        this.tax = () => {\n            this.readByte(this.pc);\n            this.testNZ((this.xr = this.ar));\n        };\n        this.txa = () => {\n            this.readByte(this.pc);\n            this.testNZ((this.ar = this.xr));\n        };\n        this.tay = () => {\n            this.readByte(this.pc);\n            this.testNZ((this.yr = this.ar));\n        };\n        this.tya = () => {\n            this.readByte(this.pc);\n            this.testNZ((this.ar = this.yr));\n        };\n        this.tsx = () => {\n            this.readByte(this.pc);\n            this.testNZ((this.xr = this.sp));\n        };\n        this.txs = () => {\n            this.readByte(this.pc);\n            this.sp = this.xr;\n        };\n        this.pha = () => {\n            this.readByte(this.pc);\n            this.pushByte(this.ar);\n        };\n        this.pla = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            this.testNZ((this.ar = this.pullByte()));\n        };\n        this.phx = () => {\n            this.readByte(this.pc);\n            this.pushByte(this.xr);\n        };\n        this.plx = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            this.testNZ((this.xr = this.pullByte()));\n        };\n        this.phy = () => {\n            this.readByte(this.pc);\n            this.pushByte(this.yr);\n        };\n        this.ply = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            this.testNZ((this.yr = this.pullByte()));\n        };\n        this.php = () => {\n            this.readByte(this.pc);\n            this.pushByte(this.sr | flags.B);\n        };\n        this.plp = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            this.sr = (this.pullByte() & ~flags.B) | flags.X;\n        };\n        /* Jump */\n        this.jmp = (readAddrFn) => {\n            this.pc = readAddrFn();\n        };\n        /* Jump Subroutine */\n        this.jsr = () => {\n            const lsb = this.readBytePC();\n            this.readByte(0x0100 | this.sp);\n            this.pushWord(this.pc);\n            const msb = this.readBytePC();\n            this.pc = ((msb << 8) | lsb) & 0xffff;\n        };\n        /* Return from Subroutine */\n        this.rts = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            const addr = this.pullWordRaw();\n            this.readByte(addr);\n            this.pc = (addr + 1) & 0xffff;\n        };\n        /* Return from Interrupt */\n        this.rti = () => {\n            this.readByte(this.pc);\n            this.readByte(0x0100 | this.sp);\n            this.sr = (this.pullByte() & ~flags.B) | flags.X;\n            this.pc = this.pullWordRaw();\n        };\n        /* Set and Clear */\n        this.set = (flag) => {\n            this.readByte(this.pc);\n            this.sr |= flag;\n        };\n        this.clr = (flag) => {\n            this.readByte(this.pc);\n            this.sr &= ~flag;\n        };\n        /* No-Op */\n        this.nop = (readFn) => {\n            readFn();\n        };\n        /* NMOS 6502 Illegal opcodes */\n        /* ASO = ASL + ORA */\n        this.aso = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.shiftLeft(oldVal);\n            this.writeByte(addr, val);\n            this.ar |= val;\n            this.testNZ(this.ar);\n        };\n        /* RLA = ROL + AND */\n        this.rla = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.rotateLeft(oldVal);\n            this.writeByte(addr, val);\n            this.ar &= val;\n            this.testNZ(this.ar);\n        };\n        /* LSE = LSR + EOR */\n        this.lse = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.shiftRight(oldVal);\n            this.writeByte(addr, val);\n            this.ar ^= val;\n            this.testNZ(this.ar);\n        };\n        /* RRA = ROR + ADC */\n        this.rra = (readAddrFn) => {\n            const addr = readAddrFn();\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.rotateRight(oldVal);\n            this.writeByte(addr, val);\n            this.ar = this.add(this.ar, val, false);\n        };\n        /* AXS = Store A & X */\n        this.axs = (writeFn) => {\n            writeFn(this.ar & this.xr);\n        };\n        /* LAX = Load A & X */\n        this.lax = (readFn) => {\n            const val = readFn();\n            this.ar = val;\n            this.xr = val;\n            this.testNZ(val);\n        };\n        /* DCM = DEC + CMP */\n        this.dcm = (readAddrFn) => {\n            const addr = readAddrFn({ inc: true });\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.decrement(oldVal);\n            this.writeByte(addr, val);\n            this.compare(this.ar, val);\n        };\n        /* INS = INC + SBC */\n        this.ins = (readAddrFn) => {\n            const addr = readAddrFn({ inc: true });\n            const oldVal = this.readByte(addr);\n            this.workCycle(addr, oldVal);\n            const val = this.increment(oldVal);\n            this.writeByte(addr, val);\n            this.ar = this.add(this.ar, val ^ 0xff, true);\n        };\n        /* ALR = AND + LSR */\n        this.alr = (readFn) => {\n            const val = readFn() & this.ar;\n            this.ar = this.shiftRight(val);\n        };\n        /* ARR = AND + ROR */\n        this.arr = (readFn) => {\n            const val = readFn() & this.ar;\n            const ah = val >> 4;\n            const al = val & 0xf;\n            const b7 = val >> 7;\n            const b6 = (val >> 6) & 0x1;\n            this.ar = this.rotateRight(val);\n            let c = !!b7;\n            const v = !!(b7 ^ b6);\n            if (this.sr & flags.D) {\n                if (al + (al & 0x1) > 0x5) {\n                    this.ar = (this.ar & 0xf0) | ((this.ar + 0x6) & 0xf);\n                }\n                if (ah + (ah & 0x1) > 5) {\n                    c = true;\n                    this.ar = (this.ar + 0x60) & 0xff;\n                }\n            }\n            this.setFlag(flags.V, v);\n            this.setFlag(flags.C, c);\n        };\n        /* XAA = TAX + AND */\n        this.xaa = (readFn) => {\n            const val = readFn();\n            this.ar = (this.xr & 0xee) | (this.xr & this.ar & 0x11);\n            this.ar = this.testNZ(this.ar & val);\n        };\n        /** OAL = ORA + AND */\n        this.oal = (readFn) => {\n            this.ar |= 0xee;\n            const val = this.testNZ(this.ar & readFn());\n            this.ar = val;\n            this.xr = val;\n        };\n        /* SAX = A & X + SBC */\n        this.sax = (readFn) => {\n            const a = this.xr & this.ar;\n            let b = readFn();\n            b = b ^ 0xff;\n            const c = a + b + 1;\n            this.setFlag(flags.C, c > 0xff);\n            this.xr = this.testNZ(c & 0xff);\n        };\n        /* TAS = X & Y -> S */\n        this.tas = (readAddrFn) => {\n            const addr = readAddrFn();\n            let val = this.xr & this.ar;\n            this.sp = val;\n            const msb = addr >> 8;\n            val = val & ((msb + 1) & 0xff);\n            this.writeByte(addr, val);\n        };\n        /* SAY = Y & AH + 1 */\n        this.say = (readAddrFn) => {\n            const addr = readAddrFn();\n            const msb = addr >> 8;\n            const val = this.yr & ((msb + 1) & 0xff);\n            this.writeByte(addr, val);\n        };\n        /* XAS = X & AH + 1 */\n        this.xas = (readAddrFn) => {\n            const addr = readAddrFn();\n            const msb = addr >> 8;\n            const val = this.xr & ((msb + 1) & 0xff);\n            this.writeByte(addr, val);\n        };\n        /* AXA = X & AH + 1 */\n        this.axa = (readAddrFn) => {\n            const addr = readAddrFn();\n            let val = this.xr & this.ar;\n            const msb = addr >> 8;\n            val = val & ((msb + 1) & 0xff);\n            this.writeByte(addr, val);\n        };\n        /* ANC = AND with carry */\n        this.anc = (readFn) => {\n            this.ar = this.testNZ(this.ar & readFn());\n            const c = !!(this.ar & 0x80);\n            this.setFlag(flags.C, c);\n        };\n        /* LAS = RD & SP -> A, X, S */\n        this.las = (readFn) => {\n            const val = this.sp & readFn();\n            this.sp = val;\n            this.xr = val;\n            this.ar = this.testNZ(val);\n        };\n        /* SKB/SKW */\n        this.skp = (readFn) => {\n            readFn();\n        };\n        /* HLT */\n        this.hlt = (_impliedFn) => {\n            this.readByte(this.pc);\n            this.readByte(this.pc);\n            // PC shouldn't have advanced\n            this.pc = --this.pc & 0xffff;\n            this.stop = true;\n        };\n        /**\n         * Table of documented 6502 instructions.\n         */\n        this.OPS_6502 = {\n            // LDA\n            0xa9: {\n                name: 'LDA',\n                fn: () => this.lda(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xa5: {\n                name: 'LDA',\n                fn: () => this.lda(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xb5: {\n                name: 'LDA',\n                fn: () => this.lda(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xad: {\n                name: 'LDA',\n                fn: () => this.lda(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xbd: {\n                name: 'LDA',\n                fn: () => this.lda(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xb9: {\n                name: 'LDA',\n                fn: () => this.lda(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xa1: {\n                name: 'LDA',\n                fn: () => this.lda(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xb1: {\n                name: 'LDA',\n                fn: () => this.lda(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // LDX\n            0xa2: {\n                name: 'LDX',\n                fn: () => this.ldx(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xa6: {\n                name: 'LDX',\n                fn: () => this.ldx(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xb6: {\n                name: 'LDX',\n                fn: () => this.ldx(this.readZeroPageY),\n                mode: 'zeroPageY',\n            },\n            0xae: {\n                name: 'LDX',\n                fn: () => this.ldx(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xbe: {\n                name: 'LDX',\n                fn: () => this.ldx(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            // LDY\n            0xa0: {\n                name: 'LDY',\n                fn: () => this.ldy(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xa4: {\n                name: 'LDY',\n                fn: () => this.ldy(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xb4: {\n                name: 'LDY',\n                fn: () => this.ldy(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xac: {\n                name: 'LDY',\n                fn: () => this.ldy(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xbc: {\n                name: 'LDY',\n                fn: () => this.ldy(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // STA\n            0x85: {\n                name: 'STA',\n                fn: () => this.sta(this.writeZeroPage),\n                mode: 'zeroPage',\n            },\n            0x95: {\n                name: 'STA',\n                fn: () => this.sta(this.writeZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x8d: {\n                name: 'STA',\n                fn: () => this.sta(this.writeAbsolute),\n                mode: 'absolute',\n            },\n            0x9d: {\n                name: 'STA',\n                fn: () => this.sta(this.writeAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x99: {\n                name: 'STA',\n                fn: () => this.sta(this.writeAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x81: {\n                name: 'STA',\n                fn: () => this.sta(this.writeZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x91: {\n                name: 'STA',\n                fn: () => this.sta(this.writeZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // STX\n            0x86: {\n                name: 'STX',\n                fn: () => this.stx(this.writeZeroPage),\n                mode: 'zeroPage',\n            },\n            0x96: {\n                name: 'STX',\n                fn: () => this.stx(this.writeZeroPageY),\n                mode: 'zeroPageY',\n            },\n            0x8e: {\n                name: 'STX',\n                fn: () => this.stx(this.writeAbsolute),\n                mode: 'absolute',\n            },\n            // STY\n            0x84: {\n                name: 'STY',\n                fn: () => this.sty(this.writeZeroPage),\n                mode: 'zeroPage',\n            },\n            0x94: {\n                name: 'STY',\n                fn: () => this.sty(this.writeZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x8c: {\n                name: 'STY',\n                fn: () => this.sty(this.writeAbsolute),\n                mode: 'absolute',\n            },\n            // ADC\n            0x69: {\n                name: 'ADC',\n                fn: () => this.adc(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x65: {\n                name: 'ADC',\n                fn: () => this.adc(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x75: {\n                name: 'ADC',\n                fn: () => this.adc(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x6d: {\n                name: 'ADC',\n                fn: () => this.adc(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0x7d: {\n                name: 'ADC',\n                fn: () => this.adc(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x79: {\n                name: 'ADC',\n                fn: () => this.adc(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x61: {\n                name: 'ADC',\n                fn: () => this.adc(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x71: {\n                name: 'ADC',\n                fn: () => this.adc(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // SBC\n            0xe9: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xe5: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xf5: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xed: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xfd: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xf9: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xe1: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xf1: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // INC\n            0xe6: {\n                name: 'INC',\n                fn: () => this.inc(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0xf6: {\n                name: 'INC',\n                fn: () => this.inc(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xee: {\n                name: 'INC',\n                fn: () => this.inc(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0xfe: {\n                name: 'INC',\n                fn: () => this.inc(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // INX\n            0xe8: { name: 'INX', fn: () => this.inx(), mode: 'implied' },\n            // INY\n            0xc8: { name: 'INY', fn: () => this.iny(), mode: 'implied' },\n            // DEC\n            0xc6: {\n                name: 'DEC',\n                fn: () => this.dec(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0xd6: {\n                name: 'DEC',\n                fn: () => this.dec(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xce: {\n                name: 'DEC',\n                fn: () => this.dec(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0xde: {\n                name: 'DEC',\n                fn: () => this.dec(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // DEX\n            0xca: { name: 'DEX', fn: () => this.dex(), mode: 'implied' },\n            // DEY\n            0x88: { name: 'DEY', fn: () => this.dey(), mode: 'implied' },\n            // ASL\n            0x0a: { name: 'ASL', fn: () => this.aslA(), mode: 'accumulator' },\n            0x06: {\n                name: 'ASL',\n                fn: () => this.asl(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x16: {\n                name: 'ASL',\n                fn: () => this.asl(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x0e: {\n                name: 'ASL',\n                fn: () => this.asl(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x1e: {\n                name: 'ASL',\n                fn: () => this.asl(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // LSR\n            0x4a: { name: 'LSR', fn: () => this.lsrA(), mode: 'accumulator' },\n            0x46: {\n                name: 'LSR',\n                fn: () => this.lsr(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x56: {\n                name: 'LSR',\n                fn: () => this.lsr(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x4e: {\n                name: 'LSR',\n                fn: () => this.lsr(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x5e: {\n                name: 'LSR',\n                fn: () => this.lsr(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // ROL\n            0x2a: { name: 'ROL', fn: () => this.rolA(), mode: 'accumulator' },\n            0x26: {\n                name: 'ROL',\n                fn: () => this.rol(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x36: {\n                name: 'ROL',\n                fn: () => this.rol(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x2e: {\n                name: 'ROL',\n                fn: () => this.rol(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x3e: {\n                name: 'ROL',\n                fn: () => this.rol(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // ROR\n            0x6a: { name: 'ROR', fn: () => this.rorA(), mode: 'accumulator' },\n            0x66: {\n                name: 'ROR',\n                fn: () => this.ror(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x76: {\n                name: 'ROR',\n                fn: () => this.ror(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x6e: {\n                name: 'ROR',\n                fn: () => this.ror(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x7e: {\n                name: 'ROR',\n                fn: () => this.ror(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // AND\n            0x29: {\n                name: 'AND',\n                fn: () => this.and(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x25: {\n                name: 'AND',\n                fn: () => this.and(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x35: {\n                name: 'AND',\n                fn: () => this.and(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x2d: {\n                name: 'AND',\n                fn: () => this.and(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0x3d: {\n                name: 'AND',\n                fn: () => this.and(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x39: {\n                name: 'AND',\n                fn: () => this.and(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x21: {\n                name: 'AND',\n                fn: () => this.and(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x31: {\n                name: 'AND',\n                fn: () => this.and(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // ORA\n            0x09: {\n                name: 'ORA',\n                fn: () => this.ora(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x05: {\n                name: 'ORA',\n                fn: () => this.ora(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x15: {\n                name: 'ORA',\n                fn: () => this.ora(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x0d: {\n                name: 'ORA',\n                fn: () => this.ora(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0x1d: {\n                name: 'ORA',\n                fn: () => this.ora(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x19: {\n                name: 'ORA',\n                fn: () => this.ora(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x01: {\n                name: 'ORA',\n                fn: () => this.ora(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x11: {\n                name: 'ORA',\n                fn: () => this.ora(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // EOR\n            0x49: {\n                name: 'EOR',\n                fn: () => this.eor(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x45: {\n                name: 'EOR',\n                fn: () => this.eor(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x55: {\n                name: 'EOR',\n                fn: () => this.eor(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x4d: {\n                name: 'EOR',\n                fn: () => this.eor(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0x5d: {\n                name: 'EOR',\n                fn: () => this.eor(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x59: {\n                name: 'EOR',\n                fn: () => this.eor(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x41: {\n                name: 'EOR',\n                fn: () => this.eor(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x51: {\n                name: 'EOR',\n                fn: () => this.eor(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // CMP\n            0xc9: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xc5: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xd5: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xcd: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xdd: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xd9: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xc1: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xd1: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // CPX\n            0xe0: {\n                name: 'CPX',\n                fn: () => this.cpx(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xe4: {\n                name: 'CPX',\n                fn: () => this.cpx(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xec: {\n                name: 'CPX',\n                fn: () => this.cpx(this.readAbsolute),\n                mode: 'absolute',\n            },\n            // CPY\n            0xc0: {\n                name: 'CPY',\n                fn: () => this.cpy(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xc4: {\n                name: 'CPY',\n                fn: () => this.cpy(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xcc: {\n                name: 'CPY',\n                fn: () => this.cpy(this.readAbsolute),\n                mode: 'absolute',\n            },\n            // BIT\n            0x24: {\n                name: 'BIT',\n                fn: () => this.bit(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x2c: {\n                name: 'BIT',\n                fn: () => this.bit(this.readAbsolute),\n                mode: 'absolute',\n            },\n            // BCC\n            0x90: { name: 'BCC', fn: () => this.brc(flags.C), mode: 'relative' },\n            // BCS\n            0xb0: { name: 'BCS', fn: () => this.brs(flags.C), mode: 'relative' },\n            // BEQ\n            0xf0: { name: 'BEQ', fn: () => this.brs(flags.Z), mode: 'relative' },\n            // BMI\n            0x30: { name: 'BMI', fn: () => this.brs(flags.N), mode: 'relative' },\n            // BNE\n            0xd0: { name: 'BNE', fn: () => this.brc(flags.Z), mode: 'relative' },\n            // BPL\n            0x10: { name: 'BPL', fn: () => this.brc(flags.N), mode: 'relative' },\n            // BVC\n            0x50: { name: 'BVC', fn: () => this.brc(flags.V), mode: 'relative' },\n            // BVS\n            0x70: { name: 'BVS', fn: () => this.brs(flags.V), mode: 'relative' },\n            // TAX\n            0xaa: { name: 'TAX', fn: () => this.tax(), mode: 'implied' },\n            // TXA\n            0x8a: { name: 'TXA', fn: () => this.txa(), mode: 'implied' },\n            // TAY\n            0xa8: { name: 'TAY', fn: () => this.tay(), mode: 'implied' },\n            // TYA\n            0x98: { name: 'TYA', fn: () => this.tya(), mode: 'implied' },\n            // TSX\n            0xba: { name: 'TSX', fn: () => this.tsx(), mode: 'implied' },\n            // TXS\n            0x9a: { name: 'TXS', fn: () => this.txs(), mode: 'implied' },\n            // PHA\n            0x48: { name: 'PHA', fn: () => this.pha(), mode: 'implied' },\n            // PLA\n            0x68: { name: 'PLA', fn: () => this.pla(), mode: 'implied' },\n            // PHP\n            0x08: { name: 'PHP', fn: () => this.php(), mode: 'implied' },\n            // PLP\n            0x28: { name: 'PLP', fn: () => this.plp(), mode: 'implied' },\n            // JMP\n            0x4c: {\n                name: 'JMP',\n                fn: () => this.jmp(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x6c: {\n                name: 'JMP',\n                fn: () => this.jmp(this.readAddrAbsoluteIndirectBug),\n                mode: 'absoluteIndirect',\n            },\n            // JSR\n            0x20: { name: 'JSR', fn: () => this.jsr(), mode: 'absolute' },\n            // RTS\n            0x60: { name: 'RTS', fn: () => this.rts(), mode: 'implied' },\n            // RTI\n            0x40: { name: 'RTI', fn: () => this.rti(), mode: 'implied' },\n            // SEC\n            0x38: { name: 'SEC', fn: () => this.set(flags.C), mode: 'implied' },\n            // SED\n            0xf8: { name: 'SED', fn: () => this.set(flags.D), mode: 'implied' },\n            // SEI\n            0x78: { name: 'SEI', fn: () => this.set(flags.I), mode: 'implied' },\n            // CLC\n            0x18: { name: 'CLC', fn: () => this.clr(flags.C), mode: 'implied' },\n            // CLD\n            0xd8: { name: 'CLD', fn: () => this.clr(flags.D), mode: 'implied' },\n            // CLI\n            0x58: { name: 'CLI', fn: () => this.clr(flags.I), mode: 'implied' },\n            // CLV\n            0xb8: { name: 'CLV', fn: () => this.clr(flags.V), mode: 'implied' },\n            // NOP\n            0xea: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            // BRK\n            0x00: {\n                name: 'BRK',\n                fn: () => this.brk(this.readImmediate),\n                mode: 'immediate',\n            },\n        };\n        /**\n         * Table of common documented 65C02 instructions\n         */\n        this.OPS_65C02 = {\n            // INC / DEC A\n            0x1a: { name: 'INC', fn: () => this.incA(), mode: 'accumulator' },\n            0x3a: { name: 'DEC', fn: () => this.decA(), mode: 'accumulator' },\n            // Indirect Zero Page for the masses\n            0x12: {\n                name: 'ORA',\n                fn: () => this.ora(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0x32: {\n                name: 'AND',\n                fn: () => this.and(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0x52: {\n                name: 'EOR',\n                fn: () => this.eor(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0x72: {\n                name: 'ADC',\n                fn: () => this.adc(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0x92: {\n                name: 'STA',\n                fn: () => this.sta(this.writeZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0xb2: {\n                name: 'LDA',\n                fn: () => this.lda(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0xd2: {\n                name: 'CMP',\n                fn: () => this.cmp(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            0xf2: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readZeroPageIndirect),\n                mode: 'zeroPageIndirect',\n            },\n            // Better BIT\n            0x34: {\n                name: 'BIT',\n                fn: () => this.bit(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x3c: {\n                name: 'BIT',\n                fn: () => this.bit(this.readAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x89: {\n                name: 'BIT',\n                fn: () => this.bitI(this.readImmediate),\n                mode: 'immediate',\n            },\n            // JMP absolute indirect indexed\n            0x6c: {\n                name: 'JMP',\n                fn: () => this.jmp(this.readAddrAbsoluteIndirect),\n                mode: 'absoluteIndirect',\n            },\n            0x7c: {\n                name: 'JMP',\n                fn: () => this.jmp(this.readAddrAbsoluteXIndirect),\n                mode: 'absoluteXIndirect',\n            },\n            // BBR/BBS\n            0x0f: { name: 'BBR0', fn: () => this.bbr(0), mode: 'zeroPage_relative' },\n            0x1f: { name: 'BBR1', fn: () => this.bbr(1), mode: 'zeroPage_relative' },\n            0x2f: { name: 'BBR2', fn: () => this.bbr(2), mode: 'zeroPage_relative' },\n            0x3f: { name: 'BBR3', fn: () => this.bbr(3), mode: 'zeroPage_relative' },\n            0x4f: { name: 'BBR4', fn: () => this.bbr(4), mode: 'zeroPage_relative' },\n            0x5f: { name: 'BBR5', fn: () => this.bbr(5), mode: 'zeroPage_relative' },\n            0x6f: { name: 'BBR6', fn: () => this.bbr(6), mode: 'zeroPage_relative' },\n            0x7f: { name: 'BBR7', fn: () => this.bbr(7), mode: 'zeroPage_relative' },\n            0x8f: { name: 'BBS0', fn: () => this.bbs(0), mode: 'zeroPage_relative' },\n            0x9f: { name: 'BBS1', fn: () => this.bbs(1), mode: 'zeroPage_relative' },\n            0xaf: { name: 'BBS2', fn: () => this.bbs(2), mode: 'zeroPage_relative' },\n            0xbf: { name: 'BBS3', fn: () => this.bbs(3), mode: 'zeroPage_relative' },\n            0xcf: { name: 'BBS4', fn: () => this.bbs(4), mode: 'zeroPage_relative' },\n            0xdf: { name: 'BBS5', fn: () => this.bbs(5), mode: 'zeroPage_relative' },\n            0xef: { name: 'BBS6', fn: () => this.bbs(6), mode: 'zeroPage_relative' },\n            0xff: { name: 'BBS7', fn: () => this.bbs(7), mode: 'zeroPage_relative' },\n            // BRA\n            0x80: { name: 'BRA', fn: () => this.brc(0), mode: 'relative' },\n            // NOP\n            0x02: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x22: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x42: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x44: {\n                name: 'NOP',\n                fn: () => this.nop(this.readZeroPage),\n                mode: 'immediate',\n            },\n            0x54: {\n                name: 'NOP',\n                fn: () => this.nop(this.readZeroPageX),\n                mode: 'immediate',\n            },\n            0x62: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x82: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xc2: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xd4: {\n                name: 'NOP',\n                fn: () => this.nop(this.readZeroPageX),\n                mode: 'immediate',\n            },\n            0xe2: {\n                name: 'NOP',\n                fn: () => this.nop(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xf4: {\n                name: 'NOP',\n                fn: () => this.nop(this.readZeroPageX),\n                mode: 'immediate',\n            },\n            0x5c: { name: 'NOP', fn: () => this.nop(this.readNop), mode: 'absolute' },\n            0xdc: { name: 'NOP', fn: () => this.nop(this.readNop), mode: 'absolute' },\n            0xfc: { name: 'NOP', fn: () => this.nop(this.readNop), mode: 'absolute' },\n            // PHX\n            0xda: { name: 'PHX', fn: () => this.phx(), mode: 'implied' },\n            // PHY\n            0x5a: { name: 'PHY', fn: () => this.phy(), mode: 'implied' },\n            // PLX\n            0xfa: { name: 'PLX', fn: () => this.plx(), mode: 'implied' },\n            // PLY\n            0x7a: { name: 'PLY', fn: () => this.ply(), mode: 'implied' },\n            // RMB/SMB\n            0x07: { name: 'RMB0', fn: () => this.rmb(0), mode: 'zeroPage' },\n            0x17: { name: 'RMB1', fn: () => this.rmb(1), mode: 'zeroPage' },\n            0x27: { name: 'RMB2', fn: () => this.rmb(2), mode: 'zeroPage' },\n            0x37: { name: 'RMB3', fn: () => this.rmb(3), mode: 'zeroPage' },\n            0x47: { name: 'RMB4', fn: () => this.rmb(4), mode: 'zeroPage' },\n            0x57: { name: 'RMB5', fn: () => this.rmb(5), mode: 'zeroPage' },\n            0x67: { name: 'RMB6', fn: () => this.rmb(6), mode: 'zeroPage' },\n            0x77: { name: 'RMB7', fn: () => this.rmb(7), mode: 'zeroPage' },\n            0x87: { name: 'SMB0', fn: () => this.smb(0), mode: 'zeroPage' },\n            0x97: { name: 'SMB1', fn: () => this.smb(1), mode: 'zeroPage' },\n            0xa7: { name: 'SMB2', fn: () => this.smb(2), mode: 'zeroPage' },\n            0xb7: { name: 'SMB3', fn: () => this.smb(3), mode: 'zeroPage' },\n            0xc7: { name: 'SMB4', fn: () => this.smb(4), mode: 'zeroPage' },\n            0xd7: { name: 'SMB5', fn: () => this.smb(5), mode: 'zeroPage' },\n            0xe7: { name: 'SMB6', fn: () => this.smb(6), mode: 'zeroPage' },\n            0xf7: { name: 'SMB7', fn: () => this.smb(7), mode: 'zeroPage' },\n            // STZ\n            0x64: {\n                name: 'STZ',\n                fn: () => this.stz(this.writeZeroPage),\n                mode: 'zeroPage',\n            },\n            0x74: {\n                name: 'STZ',\n                fn: () => this.stz(this.writeZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x9c: {\n                name: 'STZ',\n                fn: () => this.stz(this.writeAbsolute),\n                mode: 'absolute',\n            },\n            0x9e: {\n                name: 'STZ',\n                fn: () => this.stz(this.writeAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // TRB\n            0x14: {\n                name: 'TRB',\n                fn: () => this.trb(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x1c: {\n                name: 'TRB',\n                fn: () => this.trb(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            // TSB\n            0x04: {\n                name: 'TSB',\n                fn: () => this.tsb(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x0c: {\n                name: 'TSB',\n                fn: () => this.tsb(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n        };\n        /**\n         * Table of undocumented NMOS 6502 instructions\n         */\n        this.OPS_NMOS_6502 = {\n            // ASO\n            0x0f: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x1f: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x1b: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x07: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x17: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x03: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x13: {\n                name: 'ASO',\n                fn: () => this.aso(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // RLA\n            0x2f: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x3f: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x3b: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x27: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x37: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x23: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x33: {\n                name: 'RLA',\n                fn: () => this.rla(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // LSE\n            0x4f: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x5f: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x5b: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x47: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x57: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x43: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x53: {\n                name: 'LSE',\n                fn: () => this.lse(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // RRA\n            0x6f: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x7f: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x7b: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x67: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0x77: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x63: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0x73: {\n                name: 'RRA',\n                fn: () => this.rra(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // AXS\n            0x8f: {\n                name: 'AXS',\n                fn: () => this.axs(this.writeAbsolute),\n                mode: 'absolute',\n            },\n            0x87: {\n                name: 'AXS',\n                fn: () => this.axs(this.writeZeroPage),\n                mode: 'zeroPage',\n            },\n            0x97: {\n                name: 'AXS',\n                fn: () => this.axs(this.writeZeroPageY),\n                mode: 'zeroPageY',\n            },\n            0x83: {\n                name: 'AXS',\n                fn: () => this.axs(this.writeZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            // LAX\n            0xaf: {\n                name: 'LAX',\n                fn: () => this.lax(this.readAbsolute),\n                mode: 'absolute',\n            },\n            0xbf: {\n                name: 'LAX',\n                fn: () => this.lax(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xa7: {\n                name: 'LAX',\n                fn: () => this.lax(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0xb7: {\n                name: 'LAX',\n                fn: () => this.lax(this.readZeroPageY),\n                mode: 'zeroPageY',\n            },\n            0xa3: {\n                name: 'LAX',\n                fn: () => this.lax(this.readZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xb3: {\n                name: 'LAX',\n                fn: () => this.lax(this.readZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // DCM\n            0xcf: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0xdf: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xdb: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xc7: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0xd7: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xc3: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xd3: {\n                name: 'DCM',\n                fn: () => this.dcm(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // INS\n            0xef: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0xff: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xfb: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0xe7: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrZeroPage),\n                mode: 'zeroPage',\n            },\n            0xf7: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xe3: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrZeroPageXIndirect),\n                mode: 'zeroPageXIndirect',\n            },\n            0xf3: {\n                name: 'INS',\n                fn: () => this.ins(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // ALR\n            0x4b: {\n                name: 'ALR',\n                fn: () => this.alr(this.readImmediate),\n                mode: 'immediate',\n            },\n            // ARR\n            0x6b: {\n                name: 'ARR',\n                fn: () => this.arr(this.readImmediate),\n                mode: 'immediate',\n            },\n            // XAA\n            0x8b: {\n                name: 'XAA',\n                fn: () => this.xaa(this.readImmediate),\n                mode: 'immediate',\n            },\n            // OAL\n            0xab: {\n                name: 'OAL',\n                fn: () => this.oal(this.readImmediate),\n                mode: 'immediate',\n            },\n            // SAX\n            0xcb: {\n                name: 'SAX',\n                fn: () => this.sax(this.readImmediate),\n                mode: 'immediate',\n            },\n            // NOP\n            0x1a: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0x3a: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0x5a: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0x7a: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0xda: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0xfa: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            // SKB\n            0x80: {\n                name: 'SKB',\n                fn: () => this.skp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x82: {\n                name: 'SKB',\n                fn: () => this.skp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x89: {\n                name: 'SKB',\n                fn: () => this.skp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xc2: {\n                name: 'SKB',\n                fn: () => this.skp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0xe2: {\n                name: 'SKB',\n                fn: () => this.skp(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x04: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x14: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x34: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x44: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x54: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0x64: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPage),\n                mode: 'zeroPage',\n            },\n            0x74: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xd4: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            0xf4: {\n                name: 'SKB',\n                fn: () => this.skp(this.readZeroPageX),\n                mode: 'zeroPageX',\n            },\n            // SKW\n            0x0c: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsolute),\n                mode: 'absolute',\n            },\n            0x1c: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x3c: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x5c: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0x7c: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xdc: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            0xfc: {\n                name: 'SKW',\n                fn: () => this.skp(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // HLT\n            0x02: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x12: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x22: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x32: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x42: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x52: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x62: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x72: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0x92: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0xb2: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0xd2: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            0xf2: {\n                name: 'HLT',\n                fn: () => this.hlt(this.readNopImplied),\n                mode: 'implied',\n            },\n            // TAS\n            0x9b: {\n                name: 'TAS',\n                fn: () => this.tas(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            // SAY\n            0x9c: {\n                name: 'SAY',\n                fn: () => this.say(this.readAddrAbsoluteX),\n                mode: 'absoluteX',\n            },\n            // XAS\n            0x9e: {\n                name: 'XAS',\n                fn: () => this.xas(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            // AXA\n            0x9f: {\n                name: 'AXA',\n                fn: () => this.axa(this.readAddrAbsoluteY),\n                mode: 'absoluteY',\n            },\n            0x93: {\n                name: 'AXA',\n                fn: () => this.axa(this.readAddrZeroPageIndirectY),\n                mode: 'zeroPageIndirectY',\n            },\n            // ANC\n            0x2b: {\n                name: 'ANC',\n                fn: () => this.anc(this.readImmediate),\n                mode: 'immediate',\n            },\n            0x0b: {\n                name: 'ANC',\n                fn: () => this.anc(this.readImmediate),\n                mode: 'immediate',\n            },\n            // LAS\n            0xbb: {\n                name: 'LAS',\n                fn: () => this.las(this.readAbsoluteY),\n                mode: 'absoluteY',\n            },\n            // SBC\n            0xeb: {\n                name: 'SBC',\n                fn: () => this.sbc(this.readImmediate),\n                mode: 'immediate',\n            },\n        };\n        /**\n         * Table of Rockwell 65C02 specific instructions\n         */\n        this.OPS_ROCKWELL_65C02 = {\n            0xcb: { name: 'NOP', fn: () => this.nop(this.implied), mode: 'implied' },\n            0xdb: {\n                name: 'NOP',\n                fn: () => this.nop(this.readZeroPageX),\n                mode: 'immediate',\n            },\n        };\n        /**\n         * Table of WDC 65C02 specific instructions\n         */\n        this.OPS_WDC_65C02 = {\n            0xcb: { name: 'WAI', fn: () => this.wai(), mode: 'implied' },\n            0xdb: { name: 'STP', fn: () => this.stp(), mode: 'implied' },\n        };\n        this.flavor = flavor !== null && flavor !== void 0 ? flavor : FLAVOR_6502;\n        this.is65C02 = !!flavor && FLAVORS_65C02.includes(flavor);\n        this.memPages.fill(BLANK_PAGE);\n        this.memPages.fill(BLANK_PAGE);\n        // Create this CPU's instruction table\n        let ops = Object.assign({}, this.OPS_6502);\n        switch (this.flavor) {\n            case FLAVOR_WDC_65C02:\n                ops = Object.assign(Object.assign(Object.assign({}, ops), this.OPS_65C02), this.OPS_WDC_65C02);\n                break;\n            case FLAVOR_ROCKWELL_65C02:\n                ops = Object.assign(Object.assign(Object.assign({}, ops), this.OPS_65C02), this.OPS_ROCKWELL_65C02);\n                break;\n            default:\n                ops = Object.assign(Object.assign({}, ops), this.OPS_NMOS_6502);\n        }\n        // Certain browsers benefit from using arrays over maps\n        this.opary = new Array(0x100);\n        for (let idx = 0; idx < 0x100; idx++) {\n            this.opary[idx] = ops[idx] || this.unknown(idx);\n        }\n    }\n    /**\n     * Set or clears `f` in the status register. `f` must be a byte with a\n     * single bit set.\n     */\n    setFlag(f, on) {\n        this.sr = on ? this.sr | f : this.sr & ~f;\n    }\n    /** Updates the status register's zero flag and negative flag. */\n    testNZ(val) {\n        this.sr = val === 0 ? this.sr | flags.Z : this.sr & ~flags.Z;\n        this.sr = val & 0x80 ? this.sr | flags.N : this.sr & ~flags.N;\n        return val;\n    }\n    /** Updates the status register's zero flag. */\n    testZ(val) {\n        this.sr = val === 0 ? this.sr | flags.Z : this.sr & ~flags.Z;\n        return val;\n    }\n    /**\n     * Returns `a + b`, unless `sub` is true, in which case it performs\n     * `a - b`. The status register is updated according to the result.\n     */\n    add(a, b, sub) {\n        const a7 = a >> 7;\n        const b7 = b >> 7;\n        const ci = this.sr & flags.C;\n        let c;\n        let co;\n        let v;\n        let n;\n        let z;\n        const updateFlags = (c) => {\n            const bin = c & 0xff;\n            n = bin >> 7;\n            co = c >> 8;\n            z = !((a + b + ci) & 0xff);\n            v = a7 ^ b7 ^ n ^ co;\n        };\n        const updateBCDFlags = (c) => {\n            var _a;\n            if (this.is65C02) {\n                const bin = c & 0xff;\n                n = bin >> 7;\n                z = !bin;\n                if (((_a = this.op) === null || _a === void 0 ? void 0 : _a.mode) === 'immediate') {\n                    if (this.flavor === FLAVOR_WDC_65C02) {\n                        this.readByte(sub ? 0xb8 : 0x7f);\n                    }\n                    else {\n                        // rockwell65c02\n                        this.readByte(sub ? 0xb1 : 0x59);\n                    }\n                }\n                else {\n                    this.readByte(this.addr);\n                }\n            }\n            if (!sub) {\n                co = c >> 8;\n            }\n        };\n        c = (a & 0x0f) + (b & 0x0f) + ci;\n        if ((this.sr & flags.D) !== 0) {\n            // BCD\n            if (sub) {\n                if (c < 0x10) {\n                    c = (c - 0x06) & 0x0f;\n                }\n                c += (a & 0xf0) + (b & 0xf0);\n                updateFlags(c);\n                if (c < 0x100) {\n                    c += 0xa0;\n                }\n            }\n            else {\n                if (c > 0x9) {\n                    c = 0x10 + ((c + 0x6) & 0xf);\n                }\n                c += (a & 0xf0) + (b & 0xf0);\n                updateFlags(c);\n                if (c >= 0xa0) {\n                    c += 0x60;\n                }\n            }\n            updateBCDFlags(c);\n        }\n        else {\n            c += (a & 0xf0) + (b & 0xf0);\n            updateFlags(c);\n        }\n        c = c & 0xff;\n        this.setFlag(flags.N, !!n);\n        this.setFlag(flags.V, !!v);\n        this.setFlag(flags.Z, !!z);\n        this.setFlag(flags.C, !!co);\n        return c;\n    }\n    /** Increments `a` and returns the value, setting the status register. */\n    increment(a) {\n        return this.testNZ((a + 0x01) & 0xff);\n    }\n    decrement(a) {\n        return this.testNZ((a + 0xff) & 0xff);\n    }\n    readBytePC() {\n        const result = this.readByte(this.pc);\n        this.pc = (this.pc + 1) & 0xffff;\n        return result;\n    }\n    readByte(addr) {\n        this.addr = addr;\n        const page = addr >> 8, off = addr & 0xff;\n        const result = this.memPages[page].read(page, off);\n        this.cycles++;\n        return result;\n    }\n    writeByte(addr, val) {\n        this.addr = addr;\n        const page = addr >> 8, off = addr & 0xff;\n        this.memPages[page].write(page, off, val);\n        this.cycles++;\n    }\n    readWord(addr) {\n        return this.readByte(addr) | (this.readByte(addr + 1) << 8);\n    }\n    readWordPC() {\n        return this.readBytePC() | (this.readBytePC() << 8);\n    }\n    readZPWord(addr) {\n        const lsb = this.readByte(addr & 0xff);\n        const msb = this.readByte((addr + 1) & 0xff);\n        return (msb << 8) | lsb;\n    }\n    pushByte(val) {\n        this.writeByte(loc.STACK | this.sp, val);\n        this.sp = (this.sp + 0xff) & 0xff;\n    }\n    pushWord(val) {\n        this.pushByte(val >> 8);\n        this.pushByte(val & 0xff);\n    }\n    pullByte() {\n        this.sp = (this.sp + 0x01) & 0xff;\n        return this.readByte(loc.STACK | this.sp);\n    }\n    pullWordRaw() {\n        const lsb = this.pullByte();\n        const msb = this.pullByte();\n        return (msb << 8) | lsb;\n    }\n    // Helpers that replicate false reads and writes during work cycles that\n    // vary between CPU versions\n    workCycle(addr, val) {\n        if (this.is65C02) {\n            this.readByte(addr);\n        }\n        else {\n            this.writeByte(addr, val);\n        }\n    }\n    workCycleIndexedWrite(pc, addr, addrIdx) {\n        const oldPage = addr & 0xff00;\n        if (this.is65C02) {\n            this.readByte(pc);\n        }\n        else {\n            const off = addrIdx & 0xff;\n            this.readByte(oldPage | off);\n        }\n    }\n    workCycleIndexedRead(pc, addr, addrIdx) {\n        const oldPage = addr & 0xff00;\n        const newPage = addrIdx & 0xff00;\n        if (newPage !== oldPage) {\n            if (this.is65C02) {\n                this.readByte(pc);\n            }\n            else {\n                const off = addrIdx & 0xff;\n                this.readByte(oldPage | off);\n            }\n        }\n    }\n    rotateRight(a) {\n        const c = this.sr & flags.C;\n        this.setFlag(flags.C, !!(a & 0x01));\n        return this.testNZ((a >> 1) | (c ? 0x80 : 0x00));\n    }\n    compare(a, b) {\n        b = b ^ 0xff;\n        const c = a + b + 1;\n        this.setFlag(flags.C, c > 0xff);\n        this.testNZ(c & 0xff);\n    }\n    unknown(b) {\n        let unk;\n        if (this.is65C02) {\n            // Default behavior is a 1 cycle NOP\n            unk = {\n                name: 'NOP',\n                fn: () => this.nop(this.readNopImplied),\n                mode: 'implied',\n            };\n        }\n        else {\n            // All 6502 Instructions should be defined\n            throw new Error(`Missing ${toHex(b)}`);\n        }\n        return unk;\n    }\n    /**\n     * Execute a single instruction at the program counter address.\n     *\n     * @param cb Callback after instruction is executed\n     */\n    step(cb) {\n        this.sync = true;\n        this.op = this.opary[this.readBytePC()];\n        this.sync = false;\n        this.op.fn();\n        cb === null || cb === void 0 ? void 0 : cb(this);\n    }\n    /**\n     * Execute n instructions, starting at the program counter address.\n     *\n     * @param cb Callback after each instruction is executed\n     */\n    stepN(n, cb) {\n        for (let idx = 0; idx < n; idx++) {\n            this.sync = true;\n            this.op = this.opary[this.readBytePC()];\n            this.sync = false;\n            this.op.fn();\n            if (cb === null || cb === void 0 ? void 0 : cb(this)) {\n                return;\n            }\n        }\n    }\n    /**\n     * Execute c cycles worth instructions, starting at the program\n     * counter address.\n     */\n    stepCycles(c) {\n        const end = this.cycles + c;\n        while (this.cycles < end) {\n            this.sync = true;\n            this.op = this.opary[this.readBytePC()];\n            this.sync = false;\n            this.op.fn();\n        }\n    }\n    /**\n     * Execute c cycles worth instructions, starting at the program\n     * counter address.\n     *\n     * @param cb Callback after each instruction is executed\n     */\n    stepCyclesDebug(c, cb) {\n        const end = this.cycles + c;\n        while (this.cycles < end) {\n            this.sync = true;\n            this.op = this.opary[this.readBytePC()];\n            this.sync = false;\n            this.op.fn();\n            if (cb === null || cb === void 0 ? void 0 : cb(this)) {\n                return;\n            }\n        }\n    }\n    /**\n     * Add a page handler. Page handlers cover specific pages in the\n     * 6502 address space. The page handler defines its own memory range.\n     * If multiple page handlers cover the same page range, the last\n     * added will be used.\n     *\n     * @param pageHandler The page handler to add.\n     */\n    addPageHandler(pageHandler) {\n        for (let idx = pageHandler.start(); idx <= pageHandler.end(); idx++) {\n            this.memPages[idx] = pageHandler;\n        }\n        if (isResettablePageHandler(pageHandler))\n            this.resetHandlers.push(pageHandler);\n    }\n    /**\n     * Simulate a RESET signal. The CPU will update its register states\n     * as appropriate and jump to the RESET vector.\n     */\n    reset() {\n        // cycles = 0;\n        this.sr = flags.X;\n        this.sp = 0xff;\n        this.ar = 0;\n        this.yr = 0;\n        this.xr = 0;\n        this.pc = this.readWord(loc.RESET);\n        this.wait = false;\n        this.stop = false;\n        for (let idx = 0; idx < this.resetHandlers.length; idx++) {\n            this.resetHandlers[idx].reset();\n        }\n    }\n    /**\n     * Interrupt Request. Simulates a IRQ signal. If interrupts\n     * are enabled, will jump to the interrupt vector with the\n     * stack populated as expected.\n     */\n    irq() {\n        if ((this.sr & flags.I) === 0) {\n            this.pushWord(this.pc);\n            this.pushByte(this.sr & ~flags.B);\n            if (this.is65C02) {\n                this.setFlag(flags.D, false);\n            }\n            this.setFlag(flags.I, true);\n            this.pc = this.readWord(loc.BRK);\n            this.wait = false;\n        }\n    }\n    /**\n     * Non-maskable Interrupt. Simulates a NMI signal. Will\n     * jump to the interrupt vector with the stack populated as expected.\n     */\n    nmi() {\n        this.pushWord(this.pc);\n        this.pushByte(this.sr & ~flags.B);\n        if (this.is65C02) {\n            this.setFlag(flags.D, false);\n        }\n        this.setFlag(flags.I, true);\n        this.pc = this.readWord(loc.NMI);\n        this.wait = false;\n    }\n    /**\n     * Returns the current program counter register.\n     */\n    getPC() {\n        return this.pc;\n    }\n    /**\n     * Set the current program counter register.\n     */\n    setPC(pc) {\n        this.pc = pc;\n    }\n    getDebugInfo() {\n        const b = this.read(this.pc);\n        const op = this.opary[b];\n        const size = sizes[op.mode];\n        const cmd = new Array(size);\n        cmd[0] = b;\n        for (let idx = 1; idx < size; idx++) {\n            cmd[idx] = this.read(this.pc + idx);\n        }\n        return {\n            pc: this.pc,\n            ar: this.ar,\n            xr: this.xr,\n            yr: this.yr,\n            sr: this.sr,\n            sp: this.sp,\n            cmd,\n        };\n    }\n    /**\n     * Returns the state of the SYNC signal. Indicates that the CPU\n     * is fetching an instruction.\n     */\n    getSync() {\n        return this.sync;\n    }\n    /**\n     * Returns the state of the STOP signal. True after a 65C02 `STP`\n     * instruction is encountered. Cleared by reset.\n     */\n    getStop() {\n        return this.stop;\n    }\n    /**\n     * Returns the state of the WAIT signal. True after a 65C02 `WAI`\n     * instruction is encountered. Cleared by reset.\n     */\n    getWait() {\n        return this.wait;\n    }\n    /**\n     * Returns the number of cycles processed since the CPU was instantiated.\n     * Could potentially overflow.\n     */\n    getCycles() {\n        return this.cycles;\n    }\n    /**\n     * Return the Instruction for the given byte value for the current\n     * CPU flavor.\n     */\n    getOpInfo(opcode) {\n        return this.opary[opcode];\n    }\n    /**\n     *\n     * @returns The register state of the cpu.\n     */\n    getState() {\n        return {\n            a: this.ar,\n            x: this.xr,\n            y: this.yr,\n            s: this.sr,\n            pc: this.pc,\n            sp: this.sp,\n            cycles: this.cycles,\n        };\n    }\n    setState(state) {\n        this.ar = state.a;\n        this.xr = state.x;\n        this.yr = state.y;\n        this.sr = state.s;\n        this.pc = state.pc;\n        this.sp = state.sp;\n        this.cycles = state.cycles;\n    }\n    read(a, b) {\n        let page, off;\n        if (b !== undefined) {\n            page = a & 0xff;\n            off = b & 0xff;\n        }\n        else {\n            page = (a >> 8) & 0xff;\n            off = a & 0xff;\n        }\n        return this.memPages[page].read(page, off);\n    }\n    write(a, b, c) {\n        let page, off, val;\n        if (c !== undefined) {\n            page = a & 0xff;\n            off = b & 0xff;\n            val = c & 0xff;\n        }\n        else {\n            page = (a >> 8) & 0xff;\n            off = a & 0xff;\n            val = b & 0xff;\n        }\n        this.memPages[page].write(page, off, val);\n    }\n}\n//# sourceMappingURL=cpu6502.js.map","import { debug, toHex } from './util';\nimport { flags, sizes } from './cpu6502';\nconst alwaysBreak = (_info) => {\n    return true;\n};\n/**\n * Converts a status register value into the well known string version\n * of the status register.\n *\n * @param sr Status register value\n * @returns Status register value as a string\n */\nexport const dumpStatusRegister = (sr) => [\n    sr & flags.N ? 'N' : '-',\n    sr & flags.V ? 'V' : '-',\n    sr & flags.X ? 'X' : '-',\n    sr & flags.B ? 'B' : '-',\n    sr & flags.D ? 'D' : '-',\n    sr & flags.I ? 'I' : '-',\n    sr & flags.Z ? 'Z' : '-',\n    sr & flags.C ? 'C' : '-',\n].join('');\n/**\n * Class that can be used to wrap the CPU6502 object to provide\n * additional support for stepping, tracing and setting breakpoints.\n */\nexport class Debugger {\n    constructor(cpu, container) {\n        this.cpu = cpu;\n        this.container = container;\n        this.verbose = false;\n        this.maxTrace = 256;\n        this.trace = [];\n        this.breakpoints = new Map();\n        this.symbols = {};\n        this.break = () => {\n            this.container.stop();\n        };\n        this.step = () => {\n            this.cpu.step(() => {\n                const info = this.cpu.getDebugInfo();\n                debug(this.printDebugInfo(info));\n                this.updateTrace(info);\n            });\n        };\n        this.continue = () => {\n            this.container.run();\n        };\n        /**\n         * Restart at a given memory address.\n         *\n         * @param address Address to start execution\n         */\n        this.runAt = (address) => {\n            this.cpu.reset();\n            this.cpu.setPC(address);\n        };\n        this.isRunning = () => this.container.isRunning();\n        this.setVerbose = (verbose) => {\n            this.verbose = verbose;\n        };\n        this.setMaxTrace = (maxTrace) => {\n            this.maxTrace = maxTrace;\n        };\n        this.getTrace = (count) => {\n            return this.trace\n                .slice(count ? -count : undefined)\n                .map(this.printDebugInfo)\n                .join('\\n');\n        };\n        this.printTrace = (count) => {\n            debug(this.getTrace(count));\n        };\n        this.getStack = (size) => {\n            const { sp } = this.cpu.getDebugInfo();\n            const stack = [];\n            let max = 255;\n            let min = 0;\n            if (size) {\n                if (sp - 3 >= 255 - size) {\n                    min = Math.max(255 - size + 1, 0);\n                }\n                else {\n                    max = Math.min(sp + size - 4, 255);\n                    min = Math.max(sp - 3, 0);\n                }\n            }\n            for (let addr = max; addr >= min; addr--) {\n                const isSP = addr === sp ? '*' : ' ';\n                const addrStr = `$${toHex(0x0100 + addr)}`;\n                const valStr = toHex(this.cpu.read(0x01, addr));\n                if (!size || (sp + size > addr && addr > sp - size)) {\n                    stack.push(`${isSP} ${addrStr} ${valStr}`);\n                }\n            }\n            return stack.join('\\n');\n        };\n        this.setBreakpoint = (addr, exp) => {\n            this.breakpoints.set(addr, exp || alwaysBreak);\n        };\n        this.clearBreakpoint = (addr) => {\n            this.breakpoints.delete(addr);\n        };\n        this.listBreakpoints = () => {\n            for (const [addr, fn] of this.breakpoints.entries()) {\n                debug(toHex(addr, 4), fn);\n            }\n        };\n        this.addSymbols = (symbols) => {\n            this.symbols = Object.assign(Object.assign({}, this.symbols), symbols);\n        };\n        this.printDebugInfo = (info) => {\n            const { pc, cmd } = info;\n            const symbol = this.padWithSymbol(pc);\n            return [\n                toHex(pc, 4),\n                '- ',\n                symbol,\n                this.dumpRegisters(info),\n                ' ',\n                this.dumpRawOp(cmd),\n                ' ',\n                this.dumpOp(pc, cmd),\n            ].join('');\n        };\n        this.dumpPC = (pc) => {\n            const b = this.cpu.read(pc);\n            const op = this.cpu.getOpInfo(b);\n            const size = sizes[op.mode];\n            let result = toHex(pc, 4) + '- ';\n            result += this.padWithSymbol(pc);\n            const cmd = new Array(size);\n            for (let idx = 0, jdx = pc; idx < size; idx++, jdx++) {\n                cmd[idx] = this.cpu.read(jdx);\n            }\n            result += this.dumpRawOp(cmd) + ' ' + this.dumpOp(pc, cmd);\n            return result;\n        };\n        this.dumpRegisters = (debugInfo) => {\n            if (debugInfo === undefined) {\n                debugInfo = this.cpu.getDebugInfo();\n            }\n            const { ar, xr, yr, sr, sp } = debugInfo;\n            return [\n                'A=' + toHex(ar),\n                ' X=' + toHex(xr),\n                ' Y=' + toHex(yr),\n                ' P=' + toHex(sr),\n                ' S=' + toHex(sp),\n                ' ',\n                dumpStatusRegister(sr),\n            ].join('');\n        };\n        this.dumpPage = (start, end) => {\n            let result = '';\n            if (end === undefined) {\n                end = start;\n            }\n            for (let page = start; page <= end; page++) {\n                for (let idx = 0; idx < 16; idx++) {\n                    result += toHex(page) + toHex(idx << 4) + ': ';\n                    for (let jdx = 0; jdx < 16; jdx++) {\n                        const b = this.cpu.read(page, idx * 16 + jdx);\n                        result += toHex(b) + ' ';\n                    }\n                    result += '        ';\n                    for (let jdx = 0; jdx < 16; jdx++) {\n                        const b = this.cpu.read(page, idx * 16 + jdx) & 0x7f;\n                        if (b >= 0x20 && b < 0x7f) {\n                            result += String.fromCharCode(b);\n                        }\n                        else {\n                            result += '.';\n                        }\n                    }\n                    result += '\\n';\n                }\n            }\n            return result;\n        };\n        this.list = (pc) => {\n            const results = [];\n            for (let idx = 0; idx < 20; idx++) {\n                const b = this.cpu.read(pc);\n                const op = this.cpu.getOpInfo(b);\n                results.push(this.dumpPC(pc));\n                pc += sizes[op.mode];\n            }\n            return results;\n        };\n    }\n    stepCycles(cycles) {\n        this.cpu.stepCyclesDebug(this.verbose ? 1 : cycles, () => {\n            var _a;\n            const info = this.cpu.getDebugInfo();\n            if ((_a = this.breakpoints.get(info.pc)) === null || _a === void 0 ? void 0 : _a(info)) {\n                debug('breakpoint', this.printDebugInfo(info));\n                this.container.stop();\n                return true;\n            }\n            if (this.verbose) {\n                debug(this.printDebugInfo(info));\n            }\n            else {\n                this.updateTrace(info);\n            }\n        });\n    }\n    /**\n     * Reads a range of memory. Will wrap at memory limit.\n     *\n     * @param address Starting address to read memory\n     * @param length Length of memory to read.\n     * @returns Byte array containing memory\n     */\n    getMemory(address, length) {\n        const bytes = new Uint8Array(length);\n        for (let idx = 0; idx < length; idx++) {\n            address &= 0xffff;\n            bytes[idx] = this.cpu.read(address++);\n        }\n        return bytes;\n    }\n    /**\n     * Writes a range of memory. Will wrap at memory limit.\n     *\n     * @param address Starting address to write memory\n     * @param bytes Data to write\n     */\n    setMemory(address, bytes) {\n        for (const byte of bytes) {\n            address &= 0xffff;\n            this.cpu.write(address++, byte);\n        }\n    }\n    updateTrace(info) {\n        this.trace.push(info);\n        if (this.trace.length > this.maxTrace) {\n            this.trace.shift();\n        }\n    }\n    padWithSymbol(pc) {\n        const padding = '          ';\n        const symbol = this.symbols[pc];\n        let result = padding;\n        if (symbol) {\n            result = `${symbol}${padding.substring(symbol.length)}`;\n        }\n        return result;\n    }\n    dumpRawOp(parts) {\n        const result = new Array(4);\n        for (let idx = 0; idx < 4; idx++) {\n            if (idx < parts.length) {\n                result[idx] = toHex(parts[idx]);\n            }\n            else {\n                result[idx] = '  ';\n            }\n        }\n        return result.join(' ');\n    }\n    dumpOp(pc, parts) {\n        const op = this.cpu.getOpInfo(parts[0]);\n        const lsb = parts[1];\n        const msb = parts[2];\n        const addr = (msb << 8) | lsb;\n        let val;\n        let off;\n        const toHexOrSymbol = (v, n) => this.symbols[v] || '$' + toHex(v, n);\n        let result = op.name + ' ';\n        switch (op.mode) {\n            case 'implied':\n                break;\n            case 'immediate':\n                result += `#${toHexOrSymbol(lsb)}`;\n                break;\n            case 'absolute':\n                result += `${toHexOrSymbol(addr, 4)}`;\n                break;\n            case 'zeroPage':\n                result += `${toHexOrSymbol(lsb)}`;\n                break;\n            case 'relative':\n                {\n                    off = lsb;\n                    if (off > 127) {\n                        off -= 256;\n                    }\n                    pc += off + 2;\n                    result += `${toHexOrSymbol(pc, 4)} (${off})`;\n                }\n                break;\n            case 'absoluteX':\n                result += `${toHexOrSymbol(addr, 4)},X`;\n                break;\n            case 'absoluteY':\n                result += `${toHexOrSymbol(addr, 4)},Y`;\n                break;\n            case 'zeroPageX':\n                result += `${toHexOrSymbol(lsb)},X`;\n                break;\n            case 'zeroPageY':\n                result += `${toHexOrSymbol(lsb)},Y`;\n                break;\n            case 'absoluteIndirect':\n                result += `(${toHexOrSymbol(addr, 4)})`;\n                break;\n            case 'zeroPageXIndirect':\n                result += `(${toHexOrSymbol(lsb)},X)`;\n                break;\n            case 'zeroPageIndirectY':\n                result += `(${toHexOrSymbol(lsb)},),Y`;\n                break;\n            case 'accumulator':\n                result += 'A';\n                break;\n            case 'zeroPageIndirect':\n                result += `(${toHexOrSymbol(lsb)})`;\n                break;\n            case 'absoluteXIndirect':\n                result += `(${toHexOrSymbol(addr, 4)},X)`;\n                break;\n            case 'zeroPage_relative':\n                val = lsb;\n                off = msb;\n                if (off > 127) {\n                    off -= 256;\n                }\n                pc += off + 2;\n                result += `${toHexOrSymbol(val)},${toHexOrSymbol(pc, 4)} (${off})`;\n                break;\n            default:\n                break;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=debugger.js.map","import { debug, toHex } from '../util';\nimport { rom as smartPortRom } from '../roms/cards/smartport';\nimport { Card, Restorable, byte, word, rom } from '../types';\nimport {\n    BlockDisk,\n    BlockFormat,\n    MassStorageData,\n    DiskFormat,\n    Disk,\n    MemoryBlockDisk,\n    DRIVE_NUMBERS,\n    BlockStorage,\n} from '../formats/types';\nimport { CPU6502, flags } from '@whscullin/cpu6502';\nimport {\n    create2MGFromBlockDisk,\n    HeaderData,\n    read2MGHeader,\n} from '../formats/2mg';\nimport createBlockDisk from '../formats/block';\nimport { DriveNumber } from '../formats/types';\nimport { VDH_BLOCK, VDH_OFFSETS } from 'js/formats/prodos/vdh';\nimport { readFileName } from 'js/formats/prodos/utils';\n\nconst ID = 'SMARTPORT.J.S';\n\nexport interface SmartPortDiskState {\n    disk: Disk;\n    format: BlockFormat;\n    blocks: Uint8Array[];\n}\n\nexport interface SmartPortState {\n    disks: Array<SmartPortDiskState | null>;\n}\n\nexport interface SmartPortOptions {\n    block: boolean;\n}\n\nexport interface Callbacks {\n    driveLight: (driveNo: DriveNumber, on: boolean) => void;\n    dirty: (driveNo: DriveNumber, dirty: boolean) => void;\n    label: (driveNo: DriveNumber, name?: string, side?: string) => void;\n}\n\nclass Address {\n    lo: byte;\n    hi: byte;\n\n    constructor(\n        private cpu: CPU6502,\n        a: byte,\n        b?: byte\n    ) {\n        if (b === undefined) {\n            this.lo = a & 0xff;\n            this.hi = a >> 8;\n        } else {\n            this.lo = a;\n            this.hi = b;\n        }\n    }\n\n    loByte() {\n        return this.lo;\n    }\n\n    hiByte() {\n        return this.hi;\n    }\n\n    inc(val: byte) {\n        return new Address(\n            this.cpu,\n            (((this.hi << 8) | this.lo) + val) & 0xffff\n        );\n    }\n\n    readByte() {\n        return this.cpu.read(this.hi, this.lo);\n    }\n\n    readWord() {\n        const readLo = this.readByte();\n        const readHi = this.inc(1).readByte();\n\n        return (readHi << 8) | readLo;\n    }\n\n    readAddress() {\n        const readLo = this.readByte();\n        const readHi = this.inc(1).readByte();\n\n        return new Address(this.cpu, readLo, readHi);\n    }\n\n    writeByte(val: byte) {\n        this.cpu.write(this.hi, this.lo, val);\n    }\n\n    writeWord(val: word) {\n        this.writeByte(val & 0xff);\n        this.inc(1).writeByte(val >> 8);\n    }\n\n    writeAddress(val: Address) {\n        this.writeByte(val.loByte());\n        this.inc(1).writeByte(val.hiByte());\n    }\n\n    toString() {\n        return '$' + toHex(this.hi) + toHex(this.lo);\n    }\n}\n\n// ProDOS zero page locations\n\nconst COMMAND = 0x42;\nconst UNIT = 0x43;\nconst ADDRESS_LO = 0x44;\n// const ADDRESS_HI = 0x45;\nconst BLOCK_LO = 0x46;\n// const BLOCK_HI = 0x47;\n\nconst OK = 0x00;\n// const IO_ERROR = 0x27;\nconst NO_DEVICE_CONNECTED = 0x28;\nconst WRITE_PROTECTED = 0x2b;\nconst DEVICE_OFFLINE = 0x2f;\n// const VOLUME_DIRECTORY_NOT_FOUND = 0x45;\n// const NOT_A_PRODOS_DISK = 0x52;\n// const VOLUME_CONTROL_BLOCK_FULL = 0x55;\n// const BAD_BUFFER_ADDRESS = 0x56;\n// const DUPLICATE_VOLUME_ONLINE = 0x57;\nconst BUSY = 0x80;\n\n// Type: Device\n// $00: Memory Expansion Card (RAM disk)\n// $01: 3.5\" disk\n// $02: ProFile-type hard disk\n// $03: Generic SCSI\n// $04: ROM disk\n// $05: SCSI CD-ROM\n// $06: SCSI tape or other SCSI sequential device\n// $07: SCSI hard disk\nconst DEVICE_TYPE_SCSI_HD = 0x07;\n// $08: Reserved\n// $09: SCSI printer\n// $0A: 5-1/4\" disk\n// $0B: Reserved\n// $0C: Reserved\n// $0D: Printer\n// $0E: Clock\n// $0F: Modem\nexport default class SmartPort\n    implements Card, BlockStorage, Restorable<SmartPortState>\n{\n    private rom: rom;\n    private disks: BlockDisk[] = [];\n    private busy: boolean[] = [];\n    private busyTimeout: ReturnType<typeof setTimeout>[] = [];\n    private ext: DiskFormat[] = [];\n    private metadata: Array<HeaderData | null> = [];\n    private statusByte = 0x80;\n    private xReg = 0x00;\n    private yReg = 0x00;\n\n    constructor(\n        private cpu: CPU6502,\n        private callbacks: Callbacks | null,\n        options: SmartPortOptions\n    ) {\n        if (options?.block) {\n            const dumbPortRom = new Uint8Array(smartPortRom);\n            dumbPortRom[0x07] = 0x3c;\n            this.rom = dumbPortRom;\n            debug('DumbPort card');\n        } else {\n            debug('SmartPort card');\n            this.rom = smartPortRom;\n        }\n    }\n\n    private debug(..._args: unknown[]) {\n        // debug.apply(this, arguments);\n    }\n\n    private driveLight(driveNo: DriveNumber) {\n        if (!this.busy[driveNo]) {\n            this.busy[driveNo] = true;\n            this.callbacks?.driveLight(driveNo, true);\n        }\n        clearTimeout(this.busyTimeout[driveNo]);\n        this.busyTimeout[driveNo] = setTimeout(() => {\n            this.busy[driveNo] = false;\n            this.callbacks?.driveLight(driveNo, false);\n        }, 100);\n    }\n\n    /*\n     * dumpBlock\n     */\n\n    async dumpBlock(driveNo: DriveNumber, blockNumber: number) {\n        let result = '';\n        let b;\n        let jdx;\n\n        const block = await this.disks[driveNo].read(blockNumber);\n\n        for (let idx = 0; idx < 32; idx++) {\n            result += toHex(idx << 4, 4) + ': ';\n            for (jdx = 0; jdx < 16; jdx++) {\n                b = block[idx * 16 + jdx];\n                if (jdx === 8) {\n                    result += ' ';\n                }\n                result += toHex(b) + ' ';\n            }\n            result += '        ';\n            for (jdx = 0; jdx < 16; jdx++) {\n                b = block[idx * 16 + jdx] & 0x7f;\n                if (jdx === 8) {\n                    result += ' ';\n                }\n                if (b >= 0x20 && b < 0x7f) {\n                    result += String.fromCharCode(b);\n                } else {\n                    result += '.';\n                }\n            }\n            result += '\\n';\n        }\n        return result;\n    }\n\n    /*\n     * getDeviceInfo\n     */\n\n    async getDeviceInfo(driveNo: DriveNumber): Promise<number> {\n        if (this.disks[driveNo]) {\n            const blocks = await this.disks[driveNo].blockCount();\n            this.xReg = blocks & 0xff;\n            this.yReg = blocks >> 8;\n\n            return OK;\n        } else {\n            return NO_DEVICE_CONNECTED;\n        }\n    }\n\n    /*\n     * readBlock\n     */\n\n    async readBlock(\n        driveNo: DriveNumber,\n        blockNUmber: number,\n        buffer: Address\n    ): Promise<number> {\n        this.debug(`read drive=${driveNo}`);\n        this.debug(`read buffer=${buffer.toString()}`);\n        this.debug(`read block=$${toHex(blockNUmber)}`);\n\n        const blockCount = await this.disks[driveNo]?.blockCount();\n        if (!blockCount) {\n            debug('Drive', driveNo, 'is empty');\n            return DEVICE_OFFLINE;\n        }\n\n        // debug('read', '\\n' + dumpBlock(drive, block));\n        this.driveLight(driveNo);\n\n        const block = await this.disks[driveNo].read(blockNUmber);\n        for (let idx = 0; idx < 512; idx++) {\n            buffer.writeByte(block[idx]);\n            buffer = buffer.inc(1);\n        }\n\n        return OK;\n    }\n\n    /*\n     * writeBlock\n     */\n\n    async writeBlock(\n        driveNo: DriveNumber,\n        blockNUmber: number,\n        buffer: Address\n    ): Promise<number> {\n        this.debug(`write drive=${driveNo}`);\n        this.debug(`write buffer=${buffer.toString()}`);\n        this.debug(`write block=$${toHex(blockNUmber)}`);\n\n        if (!this.disks[driveNo]) {\n            debug('Drive', driveNo, 'is empty');\n            return DEVICE_OFFLINE;\n        }\n\n        if (this.disks[driveNo].readOnly) {\n            debug('Drive', driveNo, 'is write protected');\n            return WRITE_PROTECTED;\n        }\n\n        // debug('write', '\\n' + dumpBlock(drive, block));\n        this.driveLight(driveNo);\n\n        const block = new Uint8Array(512);\n        for (let idx = 0; idx < 512; idx++) {\n            block[idx] = buffer.readByte();\n            buffer = buffer.inc(1);\n        }\n        await this.disks[driveNo].write(blockNUmber, block);\n        return 0;\n    }\n\n    /*\n     * formatDevice\n     */\n\n    async formatDevice(driveNo: DriveNumber): Promise<number> {\n        if (!this.disks[driveNo]) {\n            debug('Drive', driveNo, 'is empty');\n            return DEVICE_OFFLINE;\n        }\n\n        if (this.disks[driveNo].readOnly) {\n            debug('Drive', driveNo, 'is write protected');\n            return WRITE_PROTECTED;\n        }\n\n        const blockCount = await this.disks[driveNo].blockCount();\n\n        for (let idx = 0; idx < blockCount; idx++) {\n            const block = new Uint8Array(512);\n            for (let jdx = 0; jdx < 512; jdx++) {\n                block[jdx] = 0;\n            }\n            await this.disks[driveNo].write(idx, block);\n        }\n\n        return 0;\n    }\n\n    handleAsync(fn: () => Promise<number>): void {\n        this.statusByte = BUSY;\n        this.xReg = 0x00;\n        this.yReg = 0x00;\n        fn()\n            .then((statusByte) => {\n                this.statusByte = statusByte;\n            })\n            .catch((error) => {\n                console.error(error);\n                this.statusByte = DEVICE_OFFLINE;\n            });\n    }\n\n    private access(off: byte, val: byte) {\n        let result = 0x00;\n        const readMode = val === undefined;\n\n        switch (off & 0x8f) {\n            case 0x80:\n                if (readMode) {\n                    result = 0;\n                    for (let idx = 0; idx < this.disks.length; idx++) {\n                        result <<= 1;\n                        if (this.disks[idx]) {\n                            result |= 0x01;\n                        }\n                    }\n                }\n                break;\n            case 0x81:\n                result = this.statusByte;\n                break;\n            case 0x82:\n                result = this.xReg;\n                break;\n            case 0x83:\n                result = this.yReg;\n                break;\n            case 0x84:\n                result = this.statusByte ? 0x01 : 0x00;\n                break;\n        }\n\n        return result;\n    }\n\n    /*\n     * Interface\n     */\n\n    ioSwitch(off: byte, val: byte) {\n        return this.access(off, val);\n    }\n\n    read(_page: byte, off: byte) {\n        const state = this.cpu.getState();\n        let cmd: number;\n        let unit: number;\n        let buffer: Address;\n        let block: number;\n        const blockOff = this.rom[0xff];\n        const smartOff = blockOff + 3;\n\n        if (off === blockOff && this.cpu.getSync()) {\n            // Regular block device entry POINT\n            this.debug('block device entry');\n            cmd = this.cpu.read(0x00, COMMAND);\n            unit = this.cpu.read(0x00, UNIT);\n            const bufferAddr = new Address(this.cpu, ADDRESS_LO);\n            const blockAddr = new Address(this.cpu, BLOCK_LO);\n            const drive = unit & 0x80 ? 2 : 1;\n            const driveSlot = (unit & 0x70) >> 4;\n\n            buffer = bufferAddr.readAddress();\n            block = blockAddr.readWord();\n\n            this.debug(`cmd=${cmd}`);\n            this.debug('unit=$' + toHex(unit));\n\n            this.debug(`slot=${driveSlot} drive=${drive}`);\n            this.debug(`buffer=${buffer.toString()} block=$${toHex(block)}`);\n\n            switch (cmd) {\n                case 0: // INFO\n                    this.handleAsync(() => this.getDeviceInfo(drive));\n                    break;\n\n                case 1: // READ\n                    this.handleAsync(() =>\n                        this.readBlock(drive, block, buffer)\n                    );\n                    break;\n\n                case 2: // WRITE\n                    this.handleAsync(() =>\n                        this.writeBlock(drive, block, buffer)\n                    );\n                    break;\n\n                case 3: // FORMAT\n                    this.handleAsync(() => this.formatDevice(drive));\n                    break;\n            }\n        } else if (off === smartOff && this.cpu.getSync()) {\n            this.debug('smartport entry');\n            const stackAddr = new Address(this.cpu, state.sp + 1, 0x01);\n            let blocks;\n\n            const retVal = stackAddr.readAddress();\n\n            this.debug(`return=${retVal.toString()}`);\n\n            const cmdBlockAddr = retVal.inc(1);\n            cmd = cmdBlockAddr.readByte();\n            const cmdListAddr = cmdBlockAddr.inc(1).readAddress();\n\n            this.debug(`cmd=${cmd}`);\n            this.debug(`cmdListAddr=${cmdListAddr.toString()}`);\n\n            stackAddr.writeAddress(retVal.inc(3));\n\n            const parameterCount = cmdListAddr.readByte();\n            unit = cmdListAddr.inc(1).readByte();\n            const drive = unit ? 2 : 1;\n            buffer = cmdListAddr.inc(2).readAddress();\n            let status;\n\n            this.debug(`parameterCount=${parameterCount}`);\n            switch (cmd) {\n                case 0x00: // INFO\n                    status = cmdListAddr.inc(4).readByte();\n                    this.debug(`info unit=${unit}`);\n                    this.debug(`info buffer=${buffer.toString()}`);\n                    this.debug(`info status=${status}`);\n                    switch (unit) {\n                        case 0:\n                            switch (status) {\n                                case 0:\n                                    this.handleAsync(async () => {\n                                        buffer.writeByte(2); // two devices\n                                        buffer.inc(1).writeByte(1 << 6); // no interrupts\n                                        buffer.inc(2).writeByte(0x2); // Other vendor\n                                        buffer.inc(3).writeByte(0x0); // Other vendor\n                                        buffer.inc(4).writeByte(0); // reserved\n                                        buffer.inc(5).writeByte(0); // reserved\n                                        buffer.inc(6).writeByte(0); // reserved\n                                        buffer.inc(7).writeByte(0); // reserved\n                                        this.xReg = 8;\n                                        this.yReg = 0;\n                                        return 0;\n                                    });\n                                    break;\n                            }\n                            break;\n                        default: // Unit 1\n                            switch (status) {\n                                case 0:\n                                    this.handleAsync(async () => {\n                                        blocks =\n                                            (await this.disks[\n                                                unit\n                                            ]?.blockCount()) ?? 0;\n                                        buffer.writeByte(0xf0); // W/R Block device in drive\n                                        buffer.inc(1).writeByte(blocks & 0xff); // 1600 blocks\n                                        buffer\n                                            .inc(2)\n                                            .writeByte((blocks & 0xff00) >> 8);\n                                        buffer\n                                            .inc(3)\n                                            .writeByte(\n                                                (blocks & 0xff0000) >> 16\n                                            );\n                                        this.xReg = 4;\n                                        this.yReg = 0;\n                                        return 0;\n                                    });\n                                    break;\n                                case 3:\n                                    this.handleAsync(async () => {\n                                        blocks =\n                                            (await this.disks[\n                                                unit\n                                            ]?.blockCount()) ?? 0;\n                                        buffer.writeByte(0xf0); // W/R Block device in drive\n                                        buffer.inc(1).writeByte(blocks & 0xff); // Blocks low byte\n                                        buffer\n                                            .inc(2)\n                                            .writeByte((blocks & 0xff00) >> 8); // Blocks middle byte\n                                        buffer\n                                            .inc(3)\n                                            .writeByte(\n                                                (blocks & 0xff0000) >> 16\n                                            ); // Blocks high byte\n                                        buffer.inc(4).writeByte(ID.length); // Vendor ID length\n                                        for (\n                                            let idx = 0;\n                                            idx < ID.length;\n                                            idx++\n                                        ) {\n                                            // Vendor ID\n                                            buffer\n                                                .inc(5 + idx)\n                                                .writeByte(ID.charCodeAt(idx));\n                                        }\n                                        buffer\n                                            .inc(21)\n                                            .writeByte(DEVICE_TYPE_SCSI_HD); // Device Type\n                                        buffer.inc(22).writeByte(0x0); // Device Subtype\n                                        buffer.inc(23).writeWord(0x0101); // Version\n                                        this.xReg = 24;\n                                        this.yReg = 0;\n                                        return OK;\n                                    });\n                            }\n                            break;\n                    }\n                    state.a = 0;\n                    state.s &= ~flags.C;\n                    break;\n\n                case 0x01: // READ BLOCK\n                    block = cmdListAddr.inc(4).readWord();\n                    this.handleAsync(() =>\n                        this.readBlock(drive, block, buffer)\n                    );\n                    break;\n\n                case 0x02: // WRITE BLOCK\n                    block = cmdListAddr.inc(4).readWord();\n                    this.handleAsync(() =>\n                        this.writeBlock(drive, block, buffer)\n                    );\n                    break;\n\n                case 0x03: // FORMAT\n                    this.handleAsync(() => this.formatDevice(drive));\n                    break;\n\n                case 0x04: // CONTROL\n                    break;\n\n                case 0x05: // INIT\n                    break;\n\n                case 0x06: // OPEN\n                    break;\n\n                case 0x07: // CLOSE\n                    break;\n\n                case 0x08: // READ\n                    break;\n\n                case 0x09: // WRITE\n                    break;\n            }\n        }\n\n        this.cpu.setState(state);\n\n        return this.rom[off];\n    }\n\n    write() {\n        // not writable\n    }\n\n    async getState(): Promise<SmartPortState> {\n        const disks = [];\n        for (let diskNo = 0; diskNo < 2; diskNo++) {\n            const diskState = async (disk: BlockDisk | null) => {\n                let result: SmartPortDiskState | null = null;\n                if (disk) {\n                    const blocks = [];\n                    const blockCount = await disk.blockCount();\n                    for (let idx = 0; idx < blockCount; idx++) {\n                        blocks.push(await disk.read(idx));\n                    }\n                    result = {\n                        blocks,\n                        format: disk.format,\n                        disk: {\n                            readOnly: disk.readOnly,\n                            metadata: { ...disk.metadata },\n                        },\n                    };\n                }\n                return result;\n            };\n            const disk = this.disks[diskNo];\n            disks[diskNo] = await diskState(disk);\n        }\n        return {\n            disks,\n        };\n    }\n\n    async setState(state: SmartPortState) {\n        for (const idx of DRIVE_NUMBERS) {\n            const diskState = state.disks[idx];\n            if (diskState) {\n                const disk = new MemoryBlockDisk(\n                    diskState.format,\n                    diskState.disk.metadata,\n                    diskState.disk.readOnly,\n                    diskState.blocks\n                );\n                await this.setBlockDisk(idx, disk);\n            } else {\n                this.resetBlockDisk(idx);\n            }\n        }\n    }\n\n    async setBlockDisk(driveNo: DriveNumber, disk: BlockDisk) {\n        this.disks[driveNo] = disk;\n        this.ext[driveNo] = disk.format;\n        const volumeName = await this.getVolumeName(driveNo);\n        const name = volumeName || disk.metadata.name;\n\n        this.callbacks?.label(driveNo, name);\n    }\n\n    async getBlockDisk(driveNo: DriveNumber): Promise<BlockDisk> {\n        return this.disks[driveNo];\n    }\n\n    resetBlockDisk(driveNo: DriveNumber) {\n        delete this.disks[driveNo];\n    }\n\n    async setBinary(\n        driveNo: DriveNumber,\n        name: string,\n        fmt: BlockFormat,\n        rawData: ArrayBuffer\n    ): Promise<void> {\n        let volume = 254;\n        let readOnly = false;\n        if (fmt === '2mg') {\n            const header = read2MGHeader(rawData);\n            this.metadata[driveNo] = header;\n            const { bytes, offset } = header;\n            volume = header.volume;\n            readOnly = header.readOnly;\n            rawData = rawData.slice(offset, offset + bytes);\n        } else {\n            this.metadata[driveNo] = null;\n        }\n\n        const options = {\n            rawData,\n            name,\n            readOnly,\n            volume,\n        };\n\n        this.ext[driveNo] = fmt;\n        this.disks[driveNo] = createBlockDisk(fmt, options);\n        name = (await this.getVolumeName(driveNo)) || name;\n\n        this.callbacks?.label(driveNo, name);\n    }\n\n    async getBinary(drive: DriveNumber): Promise<MassStorageData | null> {\n        if (!this.disks[drive]) {\n            return null;\n        }\n        const disk = this.disks[drive];\n        const ext = this.disks[drive].format;\n        const { readOnly } = disk;\n        const { name } = disk.metadata;\n        let data: ArrayBuffer;\n        if (ext === '2mg') {\n            data = await create2MGFromBlockDisk(this.metadata[drive], disk);\n        } else {\n            const blockCount = await disk.blockCount();\n            const byteArray = new Uint8Array(blockCount * 512);\n            for (let idx = 0; idx < blockCount; idx++) {\n                const block = await disk.read(idx);\n                byteArray.set(block, idx * 512);\n            }\n            data = byteArray.buffer;\n        }\n        return {\n            metadata: { name },\n            ext,\n            data,\n            readOnly,\n        };\n    }\n\n    async getVolumeName(driveNo: number): Promise<string | null> {\n        const vdhBlock = await this.disks[driveNo]?.read(VDH_BLOCK);\n        if (!vdhBlock?.buffer) {\n            return null;\n        }\n        const dataView = new DataView(vdhBlock.buffer);\n\n        const nameLength = dataView.getUint8(VDH_OFFSETS.NAME_LENGTH) & 0xf;\n        const caseBits = dataView.getUint8(VDH_OFFSETS.CASE_BITS);\n        return readFileName(\n            dataView,\n            VDH_OFFSETS.VOLUME_NAME,\n            nameLength,\n            caseBits\n        );\n    }\n}\n","import { DiskOptions, BlockDisk, BlockFormat, MemoryBlockDisk } from './types';\n\n/**\n * Returns a `Disk` object for a block volume with block-ordered data.\n * @param options the disk image and options\n */\nexport default function createBlockDisk(\n    fmt: BlockFormat,\n    options: DiskOptions\n): BlockDisk {\n    const { rawData, readOnly, name } = options;\n\n    if (!rawData) {\n        throw new Error('Requires rawData');\n    }\n\n    const blocks = [];\n    let offset = 0;\n    while (offset < rawData.byteLength) {\n        blocks.push(new Uint8Array(rawData.slice(offset, offset + 0x200)));\n        offset += 0x200;\n    }\n\n    const disk: BlockDisk = new MemoryBlockDisk(\n        fmt,\n        { name },\n        readOnly,\n        blocks\n    );\n\n    return disk;\n}\n","import {\n    dateToUint32,\n    readFileName,\n    writeFileName,\n    uint32ToDate,\n} from './utils';\nimport { FileEntry, readEntries, writeEntries } from './file_entry';\nimport { STORAGE_TYPES, ACCESS_TYPES } from './constants';\nimport { byte, word } from 'js/types';\nimport { ProDOSVolume } from '.';\n\nexport const VDH_BLOCK = 2;\nexport const VDH_OFFSETS = {\n    PREV: 0x00,\n    NEXT: 0x02,\n    STORAGE_TYPE: 0x04,\n    NAME_LENGTH: 0x04,\n    VOLUME_NAME: 0x05,\n    RESERVED_1: 0x14,\n    CASE_BITS: 0x1a,\n    CREATION: 0x1c,\n    VERSION: 0x20,\n    MIN_VERSION: 0x21,\n    ACCESS: 0x22,\n    ENTRY_LENGTH: 0x23,\n    ENTRIES_PER_BLOCK: 0x24,\n    FILE_COUNT: 0x25,\n    BIT_MAP_POINTER: 0x27,\n    TOTAL_BLOCKS: 0x29,\n} as const;\n\nexport class VDH {\n    prev: word = 0;\n    next: word = 0;\n    storageType: byte = STORAGE_TYPES.VDH_HEADER;\n    name: string = '';\n    creation: Date = new Date();\n    access: byte = ACCESS_TYPES.ALL;\n    entryLength = 0x27;\n    entriesPerBlock = 23;\n    fileCount = 0;\n    bitMapPointer: word = 0;\n    totalBlocks: word = 0;\n    entries: FileEntry[] = [];\n\n    constructor(private volume: ProDOSVolume) {}\n\n    async read() {\n        const vdhBlock = await this.volume.disk().read(VDH_BLOCK);\n        const block = new DataView(vdhBlock.buffer);\n\n        this.next = block.getUint16(VDH_OFFSETS.NEXT, true);\n        this.storageType = block.getUint8(VDH_OFFSETS.STORAGE_TYPE) >> 4;\n        const nameLength = block.getUint8(VDH_OFFSETS.NAME_LENGTH) & 0xf;\n        const caseBits = block.getUint8(VDH_OFFSETS.CASE_BITS);\n        this.name = readFileName(\n            block,\n            VDH_OFFSETS.VOLUME_NAME,\n            nameLength,\n            caseBits\n        );\n        this.creation = uint32ToDate(\n            block.getUint32(VDH_OFFSETS.CREATION, true)\n        );\n        this.access = block.getUint8(VDH_OFFSETS.ACCESS);\n        this.entryLength = block.getUint8(VDH_OFFSETS.ENTRY_LENGTH);\n        this.entriesPerBlock = block.getUint8(VDH_OFFSETS.ENTRIES_PER_BLOCK);\n        this.fileCount = block.getUint16(VDH_OFFSETS.FILE_COUNT, true);\n        this.bitMapPointer = block.getUint16(VDH_OFFSETS.BIT_MAP_POINTER, true);\n        this.totalBlocks = block.getUint16(VDH_OFFSETS.TOTAL_BLOCKS, true);\n\n        this.entries = await readEntries(this.volume, block, this);\n    }\n\n    async write() {\n        const vdhBlock = await this.volume.disk().read(VDH_BLOCK);\n        const block = new DataView(vdhBlock.buffer);\n\n        const nameLength = this.name.length & 0x0f;\n        block.setUint8(\n            VDH_OFFSETS.STORAGE_TYPE,\n            (this.storageType << 4) & nameLength\n        );\n        const caseBits = writeFileName(\n            block,\n            VDH_OFFSETS.VOLUME_NAME,\n            this.name\n        );\n        block.setUint32(\n            VDH_OFFSETS.CREATION,\n            dateToUint32(this.creation),\n            true\n        );\n        block.setUint16(VDH_OFFSETS.CASE_BITS, caseBits);\n        block.setUint8(VDH_OFFSETS.ACCESS, this.access);\n        block.setUint8(VDH_OFFSETS.ENTRY_LENGTH, this.entryLength);\n        block.setUint8(VDH_OFFSETS.ENTRIES_PER_BLOCK, this.entriesPerBlock);\n        block.setUint16(VDH_OFFSETS.FILE_COUNT, this.fileCount, true);\n        block.setUint16(VDH_OFFSETS.BIT_MAP_POINTER, this.bitMapPointer, true);\n        block.setUint16(VDH_OFFSETS.TOTAL_BLOCKS, this.totalBlocks, true);\n\n        await writeEntries(this.volume, block, this);\n    }\n}\n","import { STORAGE_TYPES } from './constants';\nimport { Directory } from './directory';\nimport type { byte, word } from 'js/types';\nimport { ProDOSVolume } from '.';\nimport { FileEntry } from './file_entry';\n\nexport function uint32ToDate(val: word) {\n    // yyyyyyy m|mmmm ddddd|000hhhhh|00mmmmmm\n\n    if (val) {\n        const yearMonthDay = val & 0xffff;\n        const hourMinute = val >> 16;\n\n        const year = yearMonthDay >> 9;\n        const month = (yearMonthDay & 0x01e0) >> 5;\n        const day = yearMonthDay & 0x001f;\n\n        const hour = hourMinute >> 8;\n        const min = hourMinute & 0xff;\n\n        return new Date(\n            year < 70 ? 2000 + year : 1900 + year,\n            month - 1,\n            day,\n            hour,\n            min\n        );\n    }\n    return new Date(0);\n}\n\nexport function dateToUint32(date: Date) {\n    // yyyyyyy m|mmmm ddddd|000hhhhh|00mmmmmm\n\n    let val = 0;\n\n    if (date) {\n        const year = date.getFullYear() - 1900;\n        const month = date.getMonth() + 1;\n        const day = date.getDate();\n\n        const hour = date.getHours();\n        const min = date.getMinutes();\n\n        const yearMonthDay = (year << 9) | (month << 5) | day;\n        const hourMinute = (hour << 8) | min;\n        val = (hourMinute << 16) | yearMonthDay;\n    }\n\n    return val;\n}\n\nexport function readFileName(\n    block: DataView,\n    offset: word,\n    nameLength: byte,\n    caseBits: word\n) {\n    let name = '';\n    if (!(caseBits & 0x8000)) {\n        caseBits = 0;\n    }\n    // File is deleted, brute force old name\n    if (nameLength === 0) {\n        nameLength = 15;\n    }\n    for (let idx = 0; idx < nameLength; idx++) {\n        caseBits <<= 1;\n        const char = String.fromCharCode(block.getUint8(offset + idx) & 0x7f);\n        name += caseBits & 0x8000 ? char.toLowerCase() : char;\n    }\n    return name;\n}\n\nexport function writeFileName(block: DataView, offset: word, name: string) {\n    let caseBits = 0;\n    for (let idx = 0; idx < name.length; idx++) {\n        caseBits <<= 1;\n        let charCode = name.charCodeAt(idx);\n        if (charCode > 0x60 && charCode < 0x7b) {\n            caseBits |= 0x1;\n            charCode -= 0x20;\n        }\n        block.setUint8(offset + idx, charCode);\n    }\n    return caseBits;\n}\n\nexport async function dumpDirectory(\n    volume: ProDOSVolume,\n    dirEntry: FileEntry,\n    depth: string\n) {\n    const dir = new Directory(volume, dirEntry);\n    await dir.init();\n    let str = '';\n\n    for (let idx = 0; idx < dir.entries.length; idx++) {\n        const fileEntry = dir.entries[idx];\n        if (fileEntry.storageType !== STORAGE_TYPES.DELETED) {\n            str += depth + fileEntry.name + '\\n';\n            if (fileEntry.storageType === STORAGE_TYPES.DIRECTORY) {\n                str += await dumpDirectory(volume, fileEntry, depth + '  ');\n            }\n        }\n    }\n    return str;\n}\n\nexport async function dump(volume: ProDOSVolume) {\n    const vdh = await volume.vdh();\n    let str = vdh.name;\n    for (let idx = 0; idx < vdh.entries.length; idx++) {\n        const fileEntry = vdh.entries[idx];\n        str += fileEntry.name + '\\n';\n        if (fileEntry.storageType === STORAGE_TYPES.DIRECTORY) {\n            str += await dumpDirectory(volume, fileEntry, '  ');\n        }\n    }\n    return str;\n}\n","import { ReadonlyUint8Array } from '../../types';\n\nexport const rom = new Uint8Array([\n    0x08,0x78,0x28,0x2c,0x58,0xff,0x70,0x05, // 00\n    0x38,0xb0,0x01,0x18,0xb8,0x08,0x78,0x48,\n    0x8a,0x48,0x98,0x48,0xad,0xff,0xcf,0x20, // 10\n    0x1a,0xc8,0x68,0x68,0xba,0x8d,0xf8,0x07,\n    0x0a,0x0a,0x0a,0x0a,0x8d,0x78,0x07,0x68, // 20\n    0x68,0x68,0xa8,0x68,0x9a,0x09,0x04,0x48,\n    0x28,0x98,0xac,0x78,0x07,0xae,0xf8,0x07, // 30\n    0x29,0x7f,0x48,0x50,0x0e,0xb8,0xa5,0x36,\n    0xd0,0x04,0xe4,0x37,0xf0,0x0a,0xa9,0x08, // 40\n    0x85,0x38,0x38,0x90,0x16,0x4c,0x50,0xc9,\n    0xa9,0x0b,0x85,0x36,0xa9,0x5e,0x9d,0xb8, // 50\n    0x04,0xa9,0x0a,0x9d,0x38,0x04,0xa9,0x00,\n    0x9d,0x38,0x05,0x68,0xc9,0x25,0xf0,0x5c, // 60\n    0xc9,0x26,0xf0,0x58,0xc9,0x3c,0xf0,0x54,\n    0xc9,0x3e,0xf0,0x50,0xc9,0x23,0xf0,0x4c, // 70\n    0xc9,0x5e,0xf0,0x5a,0xc9,0x21,0xf0,0x4a,\n    0xc9,0x2a,0xf0,0x52,0xa2,0x20,0xc9,0x2c, // 80\n    0xf0,0x52,0xa2,0x28,0xc9,0x2e,0xf0,0x4c,\n    0xa2,0x30,0xc9,0x2f,0xf0,0x46,0xae,0xf8, // 90\n    0x07,0x48,0xbd,0xb8,0x04,0xc9,0x21,0xf0,\n    0x41,0xc9,0x5e,0xf0,0x0e,0x68,0x29,0x1f, // A0\n    0x0a,0x38,0xe9,0x01,0x9d,0x38,0x04,0xa9,\n    0x5e,0xd0,0x23,0x68,0x38,0xe9,0x41,0x30, // B0\n    0x20,0xc9,0x16,0x10,0x1c,0xaa,0xbd,0x8d,\n    0xcb,0x4c,0x04,0xcb,0x9d,0x38,0x05,0x4c, // C0\n    0x2f,0xc9,0xa9,0x20,0x20,0xb7,0xca,0xa9,\n    0x08,0x20,0xb7,0xca,0xa9,0x21,0x9d,0xb8, // D0\n    0x04,0x4c,0x2f,0xc9,0x8a,0x20,0xb7,0xca,\n    0xd0,0xf7,0x68,0xc9,0x0d,0xf0,0x13,0xc9, // E0\n    0x20,0xf0,0x44,0x29,0x0f,0x20,0xcf,0xca,\n    0xf0,0x02,0xa9,0x0a,0x9d,0x38,0x07,0x18, // F0\n    0x90,0x35,0x20,0xcf,0xca,0x7d,0x38,0x07,\n    0x48,0xa9,0x09,0x9d,0x38,0x06,0x20,0xcf, // 00\n    0xca,0x48,0xde,0x38,0x06,0xd0,0xf7,0xa9,\n    0x0a,0x9d,0x38,0x06,0x68,0x20,0xcf,0xca,\n    0xde,0x38,0x06,0xd0,0xf7,0xa9,0x10,0x20,\n    0xb7,0xca,0xd0,0xb2,0xba,0x68,0x68,0x98,\n    0x48,0x68,0x68,0xa9,0x8d,0x48,0x9a,0xae,\n    0xf8,0x07,0xac,0x78,0x07,0xbd,0xb8,0x03,\n    0xdd,0x38,0x07,0xd0,0x0c,0x1d,0x38,0x07,\n    0xf0,0x07,0xc9,0x40,0xd0,0x03,0x99,0x80,\n    0xc0,0x68,0xa8,0x68,0xaa,0x68,0x28,0x60,\n    0x68,0xa9,0x18,0x20,0xb7,0xca,0xa9,0x08,\n    0x20,0xb7,0xca,0xa9,0x09,0x9d,0x38,0x06,\n    0x20,0xcf,0xca,0xc9,0x0a,0x30,0x02,0xa9,\n    0x00,0x48,0xde,0x38,0x06,0xd0,0xf1,0x20,\n    0xcf,0xca,0xc9,0x0d,0x30,0x02,0xa9,0x00,\n    0x48,0xbd,0x38,0x05,0xf0,0x04,0xc9,0x23,\n    0xd0,0x5e,0xa0,0x00,0x68,0xc9,0x0a,0x30,\n    0x04,0xc8,0x38,0xe9,0x0a,0x48,0x98,0xa2,\n    0x00,0x20,0xa6,0xca,0x68,0x20,0xa6,0xca,\n    0xac,0xf8,0x07,0xb9,0x38,0x05,0xd0,0x2a,\n    0xa9,0xaf,0x20,0xa8,0xca,0x68,0xa0,0x04,\n    0x68,0x20,0xa6,0xca,0x68,0x20,0xa6,0xca,\n    0x88,0xf0,0x07,0xa9,0x3b,0x20,0xa8,0xca,\n    0xd0,0xee,0xa9,0xa0,0x8d,0x05,0x02,0xb9,\n    0xf3,0xcb,0xf0,0x19,0x20,0xa8,0xca,0xc8,\n    0xd0,0xf5,0xa9,0x00,0x48,0xa0,0x05,0x20,\n    0xaf,0xca,0x68,0x20,0xa6,0xca,0x68,0x20,\n    0xa6,0xca,0x88,0xd0,0xf2,0x4c,0x9a,0xca,\n    0x68,0xaa,0x68,0x0a,0x0a,0xa8,0x8a,0x0a,\n    0x0a,0x48,0xae,0xf8,0x07,0xbd,0x38,0x05,\n    0xa2,0xa0,0xc9,0x3c,0xb0,0x02,0xa2,0xa2,\n    0x8a,0xa2,0x00,0x20,0xa8,0xca,0xb9,0xa3,\n    0xcb,0xc8,0x20,0xa8,0xca,0xc9,0xa0,0xd0,\n    0xf5,0x68,0xa8,0xb9,0xbf,0xcb,0xc8,0x20,\n    0xa8,0xca,0xc9,0xa0,0xd0,0xf5,0x68,0x20,\n    0xa4,0xca,0x68,0x20,0xa6,0xca,0x20,0xb3,\n    0xca,0xa0,0x03,0x68,0x20,0xa4,0xca,0xd0,\n    0x03,0x20,0xa6,0xca,0x68,0x20,0xa6,0xca,\n    0x88,0xf0,0x09,0xa9,0xba,0x20,0xa8,0xca,\n    0x68,0x4c,0x29,0xca,0xac,0xf8,0x07,0xb9,\n    0x38,0x05,0xc9,0x25,0xf0,0x04,0xc9,0x3e,\n    0xd0,0x50,0xa0,0x41,0xad,0x0c,0x02,0xc9,\n    0xa0,0xd0,0x02,0xa9,0x30,0x0a,0x0a,0x0a,\n    0x0a,0x8d,0x20,0x02,0xad,0x0d,0x02,0x29,\n    0x0f,0x0d,0x20,0x02,0xc9,0x12,0x30,0x02,\n    0xa0,0x50,0xc9,0x00,0xd0,0x04,0xa9,0x12,\n    0xd0,0x09,0xc9,0x13,0x30,0x16,0xf8,0x38,\n    0xe9,0x12,0xd8,0xa2,0x0c,0x48,0x20,0xff,\n    0xca,0x29,0x0f,0x20,0xa4,0xca,0x68,0x29,\n    0x0f,0x20,0xa6,0xca,0xa2,0x14,0x20,0xb3,\n    0xca,0x98,0x20,0xa8,0xca,0xa9,0x4d,0x20,\n    0xa8,0xca,0x8a,0xa8,0xa9,0x8d,0x20,0xa8,\n    0xca,0x4c,0x24,0xc9,0xf0,0x0d,0x09,0x30,\n    0x09,0x80,0x9d,0x00,0x02,0xe8,0x60,0xa9,\n    0xac,0xd0,0xf5,0xa9,0xa0,0xd0,0xf1,0x99,\n    0x80,0xc0,0x09,0x04,0x99,0x80,0xc0,0x20,\n    0xc7,0xca,0x49,0x04,0x99,0x80,0xc0,0x20,\n    0xca,0xca,0x48,0x48,0x68,0x68,0x60,0x48,\n    0xa9,0x04,0x9d,0xb8,0x06,0xa9,0x00,0x9d,\n    0xb8,0x05,0xb9,0x80,0xc0,0x0a,0x7e,0xb8,\n    0x05,0x68,0x48,0x29,0x01,0x99,0x80,0xc0,\n    0x09,0x02,0x99,0x80,0xc0,0x49,0x02,0x99,\n    0x80,0xc0,0x68,0x6a,0x48,0xde,0xb8,0x06,\n    0xd0,0xe0,0x68,0xbd,0xb8,0x05,0x18,0x6a,\n    0x6a,0x6a,0x6a,0x60,0x48,0xae,0xf8,0x07,\n    0xbd,0x38,0x04,0x9d,0xb8,0x06,0x20,0x50,\n    0xcb,0x68,0x48,0x20,0x4c,0xcb,0x68,0x48,\n    0x49,0xf8,0x20,0x4c,0xcb,0xa2,0xa0,0x20,\n    0x69,0xcb,0xa2,0xa0,0x20,0x69,0xcb,0xa0,\n    0x18,0x20,0x60,0xcb,0xae,0xf8,0x07,0xde,\n    0xb8,0x06,0xd0,0xda,0x68,0xa0,0xbc,0xca,\n    0xd0,0xfd,0x88,0xd0,0xfa,0x4c,0x2f,0xc9,\n    0x48,0x90,0x05,0x20,0x50,0xcb,0xf0,0x03,\n    0x20,0x59,0xcb,0x68,0x0a,0xd0,0xf1,0x60,\n    0xa2,0x50,0x20,0x69,0xcb,0xa0,0x28,0xd0,\n    0x07,0xa2,0x18,0x20,0x69,0xcb,0xa0,0x44,\n    0xa2,0x13,0xca,0xd0,0xfd,0x88,0xd0,0xf8,\n    0x60,0xac,0x78,0x07,0xa9,0x20,0x99,0x80,\n    0xc0,0xea,0xea,0xea,0x49,0x20,0x99,0x80,\n    0xc0,0xea,0xea,0xea,0x49,0x20,0x99,0x80,\n    0xc0,0xea,0xea,0xea,0x49,0x20,0x99,0x80,\n    0xc0,0xca,0xd0,0xe0,0x60,0x64,0xe4,0x24,\n    0xa4,0x14,0x94,0x54,0xd4,0x74,0xf4,0x34,\n    0xb4,0x04,0x84,0x44,0xc4,0x2c,0x3c,0x5c,\n    0x4c,0x1c,0x0c,0x53,0x55,0x4e,0x20,0x4d,\n    0x4f,0x4e,0x20,0x54,0x55,0x45,0x20,0x57,\n    0x45,0x44,0x20,0x54,0x48,0x55,0x20,0x46,\n    0x52,0x49,0x20,0x53,0x41,0x54,0x20,0x45,\n    0x52,0x52,0x20,0x4a,0x41,0x4e,0x20,0x46,\n    0x45,0x42,0x20,0x4d,0x41,0x52,0x20,0x41,\n    0x50,0x52,0x20,0x4d,0x41,0x59,0x20,0x4a,\n    0x55,0x4e,0x20,0x4a,0x55,0x4c,0x20,0x41,\n    0x55,0x47,0x20,0x53,0x45,0x50,0x20,0x4f,\n    0x43,0x54,0x20,0x4e,0x4f,0x56,0x20,0x44,\n    0x45,0x43,0x20,0xae,0xb0,0xb0,0xb0,0x00,\n    0xae,0xb0,0xb0,0xb0,0x00,0xa0,0xa0,0xc1,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff\n]) as ReadonlyUint8Array;\n","import { debug, toHex } from '../util';\nimport { Card, Restorable, byte } from '../types';\nimport { rom } from '../roms/cards/thunderclock';\n\nconst LOC = {\n    CONTROL: 0x80,\n    AUX: 0x88,\n} as const;\n\nconst COMMANDS = {\n    MASK: 0x18,\n    REGHOLD: 0x00,\n    REGSHIFT: 0x08,\n    TIMED: 0x18,\n} as const;\n\nconst FLAGS = {\n    DATA: 0x01,\n    CLOCK: 0x02,\n    STROBE: 0x04,\n} as const;\n\nexport interface ThunderclockState {}\n\nexport default class Thunderclock\n    implements Card, Restorable<ThunderclockState>\n{\n    constructor() {\n        debug('Thunderclock');\n    }\n\n    private clock = false;\n    private strobe = false;\n    private shiftMode = false;\n    private register = 0;\n    private bits: boolean[] = [];\n    private command: byte = COMMANDS.REGHOLD;\n\n    private debug(..._args: unknown[]) {\n        // debug.apply(this, arguments);\n    }\n\n    private calcBits() {\n        const shift = (val: byte) => {\n            for (let idx = 0; idx < 4; idx++) {\n                this.bits.push((val & 0x08) !== 0);\n                val <<= 1;\n            }\n        };\n\n        const shiftBCD = (val: byte) => {\n            shift(Math.floor(val / 10));\n            shift(val % 10);\n        };\n\n        const now = new Date();\n        const day = now.getDate();\n        const weekday = now.getDay();\n        const month = now.getMonth() + 1;\n        const hour = now.getHours();\n        const minutes = now.getMinutes();\n        const seconds = now.getSeconds();\n\n        this.bits = [];\n        shift(month);\n        shift(weekday);\n        shiftBCD(day);\n        shiftBCD(hour);\n        shiftBCD(minutes);\n        shiftBCD(seconds);\n    }\n\n    private shift() {\n        if (this.shiftMode) {\n            if (this.bits.pop()) {\n                this.debug('shifting 1');\n                this.register |= 0x80;\n            } else {\n                this.debug('shifting 0');\n                this.register &= 0x7f;\n            }\n        }\n    }\n\n    private access(off: byte, val?: byte) {\n        switch (off & 0x8f) {\n            case LOC.CONTROL:\n                if (val !== undefined) {\n                    const strobe = val & FLAGS.STROBE ? true : false;\n                    if (strobe !== this.strobe) {\n                        this.debug('strobe', this.strobe ? 'high' : 'low');\n                        if (strobe) {\n                            this.command = val & COMMANDS.MASK;\n                            switch (this.command) {\n                                case COMMANDS.TIMED:\n                                    this.debug('TIMED');\n                                    this.calcBits();\n                                    break;\n                                case COMMANDS.REGSHIFT:\n                                    this.debug('REGSHIFT');\n                                    this.shiftMode = true;\n                                    this.shift();\n                                    break;\n                                case COMMANDS.REGHOLD:\n                                    this.debug('REGHOLD');\n                                    this.shiftMode = false;\n                                    break;\n                                default:\n                                    this.debug(\n                                        'Unknown command',\n                                        toHex(this.command)\n                                    );\n                            }\n                        }\n                    }\n\n                    const clock = val & FLAGS.CLOCK ? true : false;\n\n                    if (clock !== this.clock) {\n                        this.clock = clock;\n                        this.debug('clock', this.clock ? 'high' : 'low');\n                        if (clock) {\n                            this.shift();\n                        }\n                    }\n                }\n                break;\n            case LOC.AUX:\n                break;\n        }\n        return this.register;\n    }\n\n    read(page: byte, off: byte) {\n        let result;\n        if (page < 0xc8) {\n            result = rom[off];\n        } else {\n            result = rom[((page - 0xc8) << 8) | off];\n        }\n        return result;\n    }\n\n    write() {\n        // not writable\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        return this.access(off, val);\n    }\n\n    getState() {\n        return {};\n    }\n\n    setState(_state: ThunderclockState) {\n        // can't set the state\n    }\n}\n","import { ReadonlyUint8Array } from '../../types';\n\nexport const ROM = new Uint8Array([\n    0xad,0x7b,0x07,0x29,0xf8,0xc9,0x30,0xf0,\n    0x21,0xa9,0x30,0x8d,0x7b,0x07,0x8d,0xfb,\n    0x07,0xa9,0x00,0x8d,0xfb,0x06,0x20,0x61,\n    0xc9,0xa2,0x00,0x8a,0x8d,0xb0,0xc0,0xbd,\n    0xa1,0xc8,0x8d,0xb1,0xc0,0xe8,0xe0,0x10,\n    0xd0,0xf1,0x8d,0x59,0xc0,0x60,0xad,0xfb,\n    0x07,0x29,0x08,0xf0,0x09,0x20,0x93,0xfe,\n    0x20,0x22,0xfc,0x20,0x89,0xfe,0x68,0xa8,\n    0x68,0xaa,0x68,0x60,0x20,0xd1,0xc8,0xe6,\n    0x4e,0xd0,0x02,0xe6,0x4f,0xad,0x00,0xc0,\n    0x10,0xf5,0x20,0x5c,0xc8,0x90,0xf0,0x2c,\n    0x10,0xc0,0x18,0x60,0xc9,0x8b,0xd0,0x02,\n    0xa9,0xdb,0xc9,0x81,0xd0,0x0a,0xad,0xfb,\n    0x07,0x49,0x40,0x8d,0xfb,0x07,0xb0,0xe7,\n    0x48,0xad,0xfb,0x07,0x0a,0x0a,0x68,0x90,\n    0x1f,0xc9,0xb0,0x90,0x1b,0x2c,0x63,0xc0,\n    0x30,0x14,0xc9,0xb0,0xf0,0x0e,0xc9,0xc0,\n    0xd0,0x02,0xa9,0xd0,0xc9,0xdb,0x90,0x08,\n    0x29,0xcf,0xd0,0x04,0xa9,0xdd,0x09,0x20,\n    0x48,0x29,0x7f,0x8d,0x7b,0x06,0x68,0x38,\n    0x60,0x7b,0x50,0x5e,0x29,0x1b,0x08,0x18,\n    0x19,0x00,0x08,0xe0,0x08,0x00,0x00,0x00,\n    0x00,0x8d,0x7b,0x06,0xa5,0x25,0xcd,0xfb,\n    0x05,0xf0,0x06,0x8d,0xfb,0x05,0x20,0x04,\n    0xca,0xa5,0x24,0xcd,0x7b,0x05,0x90,0x03,\n    0x8d,0x7b,0x05,0xad,0x7b,0x06,0x20,0x89,\n    0xca,0xa9,0x0f,0x8d,0xb0,0xc0,0xad,0x7b,\n    0x05,0xc9,0x50,0xb0,0x13,0x6d,0x7b,0x04,\n    0x8d,0xb1,0xc0,0xa9,0x0e,0x8d,0xb0,0xc0,\n    0xa9,0x00,0x6d,0xfb,0x04,0x8d,0xb1,0xc0,\n    0x60,0x49,0xc0,0xc9,0x08,0xb0,0x1d,0xa8,\n    0xa9,0xc9,0x48,0xb9,0xf2,0xcb,0x48,0x60,\n    0xea,0xac,0x7b,0x05,0xa9,0xa0,0x20,0x71,\n    0xca,0xc8,0xc0,0x50,0x90,0xf8,0x60,0xa9,\n    0x34,0x8d,0x7b,0x07,0x60,0xa9,0x32,0xd0,\n    0xf8,0xa0,0xc0,0xa2,0x80,0xca,0xd0,0xfd,\n    0xad,0x30,0xc0,0x88,0xd0,0xf5,0x60,0xac,\n    0x7b,0x05,0xc0,0x50,0x90,0x05,0x48,0x20,\n    0xb0,0xc9,0x68,0xac,0x7b,0x05,0x20,0x71,\n    0xca,0xee,0x7b,0x05,0x2c,0x78,0x04,0x10,\n    0x07,0xad,0x7b,0x05,0xc9,0x50,0xb0,0x68,\n    0x60,0xac,0x7b,0x05,0xad,0xfb,0x05,0x48,\n    0x20,0x07,0xca,0x20,0x04,0xc9,0xa0,0x00,\n    0x68,0x69,0x00,0xc9,0x18,0x90,0xf0,0xb0,\n    0x23,0x20,0x67,0xc9,0x98,0xf0,0xe8,0xa9,\n    0x00,0x8d,0x7b,0x05,0x8d,0xfb,0x05,0xa8,\n    0xf0,0x12,0xce,0x7b,0x05,0x10,0x9d,0xa9,\n    0x4f,0x8d,0x7b,0x05,0xad,0xfb,0x05,0xf0,\n    0x93,0xce,0xfb,0x05,0x4c,0x04,0xca,0xa9,\n    0x30,0x8d,0x7b,0x07,0x68,0x09,0x80,0xc9,\n    0xb1,0xd0,0x67,0xa9,0x08,0x8d,0x58,0xc0,\n    0xd0,0x5b,0xc9,0xb2,0xd0,0x51,0xa9,0xfe,\n    0x2d,0xfb,0x07,0x8d,0xfb,0x07,0x60,0x8d,\n    0x7b,0x06,0x4e,0x78,0x04,0x4c,0xcb,0xc8,\n    0x20,0x27,0xca,0xee,0xfb,0x05,0xad,0xfb,\n    0x05,0xc9,0x18,0x90,0x4a,0xce,0xfb,0x05,\n    0xad,0xfb,0x06,0x69,0x04,0x29,0x7f,0x8d,\n    0xfb,0x06,0x20,0x12,0xca,0xa9,0x0d,0x8d,\n    0xb0,0xc0,0xad,0x7b,0x04,0x8d,0xb1,0xc0,\n    0xa9,0x0c,0x8d,0xb0,0xc0,0xad,0xfb,0x04,\n    0x8d,0xb1,0xc0,0xa9,0x17,0x20,0x07,0xca,\n    0xa0,0x00,0x20,0x04,0xc9,0xb0,0x95,0xc9,\n    0xb3,0xd0,0x0e,0xa9,0x01,0x0d,0xfb,0x07,\n    0xd0,0xa9,0xc9,0xb0,0xd0,0x9c,0x4c,0x09,\n    0xc8,0x4c,0x27,0xc9,0xad,0xfb,0x05,0x8d,\n    0xf8,0x04,0x0a,0x0a,0x6d,0xf8,0x04,0x6d,\n    0xfb,0x06,0x48,0x4a,0x4a,0x4a,0x4a,0x8d,\n    0xfb,0x04,0x68,0x0a,0x0a,0x0a,0x0a,0x8d,\n    0x7b,0x04,0x60,0xc9,0x0d,0xd0,0x06,0xa9,\n    0x00,0x8d,0x7b,0x05,0x60,0x09,0x80,0xc9,\n    0xa0,0xb0,0xce,0xc9,0x87,0x90,0x08,0xa8,\n    0xa9,0xc9,0x48,0xb9,0xb9,0xc9,0x48,0x60,\n    0x18,0x71,0x13,0xb2,0x48,0x60,0xaf,0x9d,\n    0xf2,0x13,0x13,0x13,0x13,0x13,0x13,0x13,\n    0x13,0x13,0x66,0x0e,0x13,0x38,0x00,0x14,\n    0x7b,0x18,0x98,0x6d,0x7b,0x04,0x48,0xa9,\n    0x00,0x6d,0xfb,0x04,0x48,0x0a,0x29,0x0c,\n    0xaa,0xbd,0xb0,0xc0,0x68,0x4a,0x68,0xaa,\n    0x60,0x0a,0x48,0xad,0xfb,0x07,0x4a,0x68,\n    0x6a,0x48,0x20,0x59,0xca,0x68,0xb0,0x05,\n    0x9d,0x00,0xcc,0x90,0x03,0x9d,0x00,0xcd,\n    0x60,0x48,0xa9,0xf7,0x20,0xa0,0xc9,0x8d,\n    0x59,0xc0,0xad,0x7b,0x07,0x29,0x07,0xd0,\n    0x04,0x68,0x4c,0x23,0xca,0x29,0x04,0xf0,\n    0x03,0x4c,0x87,0xc9,0x68,0x38,0xe9,0x20,\n    0x29,0x7f,0x48,0xce,0x7b,0x07,0xad,0x7b,\n    0x07,0x29,0x03,0xd0,0x15,0x68,0xc9,0x18,\n    0xb0,0x03,0x8d,0xfb,0x05,0xad,0xf8,0x05,\n    0xc9,0x50,0xb0,0x03,0x8d,0x7b,0x05,0x4c,\n    0x04,0xca,0x68,0x8d,0xf8,0x05,0x60,0xad,\n    0x00,0xc0,0xc9,0x93,0xd0,0x0f,0x2c,0x10,\n    0xc0,0xad,0x00,0xc0,0x10,0xfb,0xc9,0x83,\n    0xf0,0x03,0x2c,0x10,0xc0,0x60,0xa8,0xb9,\n    0x31,0xcb,0x20,0xf1,0xc8,0x20,0x44,0xc8,\n    0xc9,0xce,0xb0,0x08,0xc9,0xc9,0x90,0x04,\n    0xc9,0xcc,0xd0,0xea,0x4c,0xf1,0xc8,0xea,\n    0x2c,0xcb,0xff,0x70,0x31,0x38,0x90,0x18,\n    0xb8,0x50,0x2b,0x01,0x82,0x11,0x14,0x1c,\n    0x22,0x4c,0x00,0xc8,0x20,0x44,0xc8,0x29,\n    0x7f,0xa2,0x00,0x60,0x20,0xa7,0xc9,0xa2,\n    0x00,0x60,0xc9,0x00,0xf0,0x09,0xad,0x00,\n    0xc0,0x0a,0x90,0x03,0x20,0x5c,0xc8,0xa2,\n    0x00,0x60,0x91,0x28,0x38,0xb8,0x8d,0xff,\n    0xcf,0x48,0x85,0x35,0x8a,0x48,0x98,0x48,\n    0xa5,0x35,0x86,0x35,0xa2,0xc3,0x8e,0x78,\n    0x04,0x48,0x50,0x10,0xa9,0x32,0x85,0x38,\n    0x86,0x39,0xa9,0x07,0x85,0x36,0x86,0x37,\n    0x20,0x00,0xc8,0x18,0x90,0x6f,0x68,0xa4,\n    0x35,0xf0,0x1f,0x88,0xad,0x78,0x06,0xc9,\n    0x88,0xf0,0x17,0xd9,0x00,0x02,0xf0,0x12,\n    0x49,0x20,0xd9,0x00,0x02,0xd0,0x3b,0xad,\n    0x78,0x06,0x99,0x00,0x02,0xb0,0x03,0x20,\n    0xed,0xca,0xa9,0x80,0x20,0xf5,0xc9,0x20,\n    0x44,0xc8,0xc9,0x9b,0xf0,0xf1,0xc9,0x8d,\n    0xd0,0x05,0x48,0x20,0x01,0xc9,0x68,0xc9,\n    0x95,0xd0,0x12,0xac,0x7b,0x05,0x20,0x59,\n    0xca,0xb0,0x05,0xbd,0x00,0xcc,0x90,0x03,\n    0xbd,0x00,0xcd,0x09,0x80,0x8d,0x78,0x06,\n    0xd0,0x08,0x20,0x44,0xc8,0xa0,0x00,0x8c,\n    0x78,0x06,0xba,0xe8,0xe8,0xe8,0x9d,0x00,\n    0x01,0xa9,0x00,0x85,0x24,0xad,0xfb,0x05,\n    0x85,0x25,0x4c,0x2e,0xc8,0x68,0xac,0xfb,\n    0x07,0x10,0x08,0xac,0x78,0x06,0xc0,0xe0,\n    0x90,0x01,0x98,0x20,0xb1,0xc8,0x20,0xcf,\n    0xca,0xa9,0x7f,0x20,0xa0,0xc9,0xad,0x7b,\n    0x05,0xe9,0x47,0x90,0xd4,0x69,0x1f,0x18,\n    0x90,0xd1,0x60,0x38,0x71,0xb2,0x7b,0x00,\n    0x48,0x66,0xc4,0xc2,0xc1,0xff,0xc3,0xea,\n]) as ReadonlyUint8Array;\n\nexport const VIDEO_ROM = new Uint8Array([\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,\n    0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xff,0xff,0xff,0x00,0x00,0x00,0xff,0xff,\n    0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0xff,0xff,0xff,0xff,0xff,\n    0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,\n    0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xe0,0x90,0xe0,0x9e,0xf0,0x0c,0x02,0x1c,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x90,0x90,0xf0,0x90,0xbe,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x80,0x80,0x80,0x9e,0xf0,0x18,0x10,0x10,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x88,0x88,0x50,0x20,0x3e,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xf0,0x80,0xc0,0x9e,0x90,0x18,0x10,0x10,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x70,0x80,0x80,0x7c,0x12,0x1c,0x14,0x12,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x70,0x80,0x60,0x10,0xec,0x12,0x12,0x0c,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x70,0x80,0x60,0x1e,0xe4,0x04,0x04,0x0e,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x08,0x08,0x08,0x0f,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0x0f,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x0f,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0xf8,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x08,0x08,0x08,0xf8,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0xff,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x08,0x08,0x08,0xff,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0xf8,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0xf8,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0xff,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0xff,0x08,0x08,0x08,\n    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x36,0x36,0x12,0x24,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x24,0x24,0x7e,0x24,0x7e,0x24,0x24,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x3e,0x48,0x3c,0x12,0x7c,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x62,0x94,0x68,0x10,0x2c,0x52,0x8c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x20,0x50,0x50,0x62,0x94,0x88,0x76,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x18,0x18,0x08,0x10,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x0c,0x10,0x20,0x20,0x20,0x10,0x0c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x30,0x08,0x04,0x04,0x04,0x08,0x30,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x10,0x92,0x54,0x38,0x54,0x92,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x10,0x10,0xfe,0x10,0x10,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x18,0x18,0x08,0x10,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x7e,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x38,0x44,0x8a,0x92,0xa2,0x44,0x38,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x38,0x08,0x08,0x08,0x08,0x3e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x02,0x1c,0x20,0x40,0x7e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7e,0x04,0x08,0x1c,0x02,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x04,0x0c,0x14,0x24,0x7e,0x04,0x04,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7e,0x40,0x7c,0x02,0x02,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x1e,0x20,0x40,0x7c,0x42,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7e,0x02,0x04,0x08,0x10,0x20,0x20,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x42,0x3c,0x42,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x42,0x3e,0x02,0x04,0x78,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x18,0x18,0x00,0x18,0x18,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x18,0x18,0x00,0x18,0x18,0x08,0x10,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x06,0x18,0x60,0x18,0x06,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x7e,0x00,0x7e,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x60,0x18,0x06,0x18,0x60,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x02,0x0c,0x10,0x00,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x9a,0xaa,0x94,0x40,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x18,0x24,0x42,0x42,0x7e,0x42,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7c,0x42,0x42,0x7c,0x42,0x42,0x7c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x1c,0x22,0x40,0x40,0x40,0x22,0x1c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x78,0x44,0x42,0x42,0x42,0x44,0x78,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7e,0x40,0x40,0x78,0x40,0x40,0x7e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7e,0x40,0x40,0x78,0x40,0x40,0x40,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x1c,0x22,0x40,0x4e,0x42,0x22,0x1e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x42,0x42,0x42,0x7e,0x42,0x42,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x1c,0x08,0x08,0x08,0x08,0x08,0x1c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x0e,0x04,0x04,0x04,0x04,0x44,0x38,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x42,0x44,0x48,0x50,0x68,0x44,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x40,0x40,0x40,0x40,0x40,0x40,0x7e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x82,0xc6,0xaa,0x92,0x82,0x82,0x82,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x42,0x62,0x52,0x4a,0x46,0x42,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x38,0x44,0x82,0x82,0x82,0x44,0x38,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7c,0x42,0x42,0x7c,0x40,0x40,0x40,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x38,0x44,0x82,0x82,0x8a,0x44,0x3a,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x7c,0x42,0x42,0x7c,0x48,0x44,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3c,0x42,0x40,0x3c,0x02,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xfe,0x10,0x10,0x10,0x10,0x10,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x42,0x42,0x42,0x42,0x42,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x82,0x82,0x82,0x82,0x92,0xaa,0x44,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x82,0x44,0x28,0x10,0x28,0x44,0x82,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x82,0x44,0x28,0x10,0x10,0x10,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0xfe,0x04,0x08,0x10,0x20,0x40,0xfe,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3e,0x30,0x30,0x30,0x30,0x30,0x3e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x3e,0x06,0x06,0x06,0x06,0x06,0x3e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x1c,0x2a,0x08,0x08,0x08,0x08,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfe,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x18,0x18,0x10,0x08,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0xf8,0x04,0x7c,0x84,0x7a,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x40,0x40,0x7c,0x42,0x42,0x42,0x7c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x3c,0x42,0x40,0x40,0x3e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x02,0x02,0x3e,0x42,0x42,0x42,0x3e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x3c,0x42,0x7e,0x40,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x1c,0x22,0x20,0x78,0x20,0x20,0x20,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x02,0x3c,0x42,0x42,0x3e,0x02,0x42,\n    0x3c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x40,0x40,0x5c,0x62,0x42,0x42,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x00,0x08,0x08,0x08,0x08,0x08,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x04,0x00,0x04,0x04,0x04,0x04,0x04,0x24,\n    0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x40,0x40,0x46,0x58,0x60,0x58,0x46,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x18,0x08,0x08,0x08,0x08,0x08,0x1c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0xec,0x92,0x92,0x92,0x92,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x5c,0x22,0x22,0x22,0x22,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x3c,0x42,0x42,0x42,0x3c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x7c,0x42,0x42,0x42,0x7c,0x40,\n    0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x3e,0x42,0x42,0x42,0x3e,0x02,\n    0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x5c,0x62,0x40,0x40,0x40,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x3e,0x40,0x3c,0x02,0x7c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x10,0x3e,0x10,0x10,0x10,0x0e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x44,0x44,0x44,0x44,0x3a,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x82,0x82,0x44,0x28,0x10,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x82,0x82,0x92,0xaa,0x44,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x42,0x24,0x18,0x24,0x42,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x82,0x82,0x44,0x28,0x10,0x20,\n    0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x7e,0x04,0x18,0x20,0x7e,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x0c,0x10,0x08,0x30,0x08,0x10,0x0c,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x08,0x08,0x08,0x00,0x08,0x08,0x08,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x30,0x08,0x10,0x0c,0x10,0x08,0x30,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x60,0x92,0x0c,0x00,0x00,0x00,0x00,0x00,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n    0x24,0x48,0x92,0x24,0x48,0x92,0x24,0x48,\n    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\n]) as ReadonlyUint8Array;\n","import { allocMemPages, debug } from '../util';\nimport { Card, Restorable, byte, Color, memory, word } from '../types';\nimport { ROM, VIDEO_ROM } from '../roms/cards/videoterm';\n\ninterface VideotermState {\n    curReg: byte;\n    startPos: word;\n    cursorPos: word;\n    bank: byte;\n    buffer: memory;\n    regs: byte[];\n}\n\nconst LOC = {\n    IOREG: 0x80,\n    IOVAL: 0x81,\n} as const;\n\nconst REGS = {\n    CURSOR_UPPER: 0x0a,\n    CURSOR_LOWER: 0x0b,\n    STARTPOS_HI: 0x0c,\n    STARTPOS_LO: 0x0d,\n    CURSOR_HI: 0x0e,\n    CURSOR_LO: 0x0f,\n    LIGHTPEN_HI: 0x10,\n    LIGHTPEN_LO: 0x11,\n} as const;\n\nconst CURSOR_MODES = {\n    SOLID: 0x00,\n    HIDDEN: 0x01,\n    BLINK: 0x10,\n    FAST_BLINK: 0x11,\n} as const;\n\nconst BLACK: Color = [0x00, 0x00, 0x00];\nconst WHITE: Color = [0xff, 0xff, 0xff];\n\nexport default class Videoterm implements Card, Restorable<VideotermState> {\n    private regs = [\n        0x7b, // 00 - Horiz. total\n        0x50, // 01 - Horiz. displayed\n        0x62, // 02 - Horiz. sync pos\n        0x29, // 03 - Horiz. sync width\n        0x1b, // 04 - Vert. total\n        0x08, // 05 - Vert. adjust\n        0x18, // 06 - Vert. displayed\n        0x19, // 07 - Vert. sync pos\n        0x00, // 08 - Interlaced\n        0x08, // 09 - Max. scan line\n        0xc0, // 0A - Cursor upper\n        0x08, // 0B - Cursor lower\n        0x00, // 0C - Startpos Hi\n        0x00, // 0D - Startpos Lo\n        0x00, // 0E - Cursor Hi\n        0x00, // 0F - Cursor Lo\n        0x00, // 10 - Lightpen Hi\n        0x00, // 11 - Lightpen Lo\n    ];\n\n    private blink = false;\n    private curReg = 0;\n    private startPos: word;\n    private cursorPos: word;\n    private shouldRefresh: boolean;\n\n    // private cursor = 0;\n    private bank = 0;\n    private buffer = allocMemPages(8);\n    private imageData;\n    private dirty = false;\n\n    constructor() {\n        debug('Videx Videoterm');\n\n        this.imageData = new ImageData(560, 192);\n        for (let idx = 0; idx < 560 * 192 * 4; idx++) {\n            this.imageData.data[idx] = 0xff;\n        }\n\n        for (let idx = 0; idx < 0x800; idx++) {\n            this.buffer[idx] = idx & 0xff;\n        }\n\n        this.refresh();\n\n        setInterval(() => {\n            this.blink = !this.blink;\n            this.refreshCursor(false);\n        }, 300);\n    }\n\n    private updateBuffer(addr: word, val: byte) {\n        this.buffer[addr] = val;\n        val &= 0x7f; // XXX temp\n        const saddr = (0x800 + addr - this.startPos) & 0x7ff;\n        const data = this.imageData.data;\n        const row = (saddr / 80) & 0xff;\n        const col = saddr % 80;\n        const x = col * 7;\n        const y = row << 3;\n        const c = val << 4;\n        let color;\n\n        if (row < 25) {\n            this.dirty = true;\n            for (let idx = 0; idx < 8; idx++) {\n                let cdata = VIDEO_ROM[c + idx];\n                for (let jdx = 0; jdx < 7; jdx++) {\n                    if (cdata & 0x80) {\n                        color = WHITE;\n                    } else {\n                        color = BLACK;\n                    }\n                    data[(y + idx) * 560 * 4 + (x + jdx) * 4] = color[0];\n                    data[(y + idx) * 560 * 4 + (x + jdx) * 4 + 1] = color[1];\n                    data[(y + idx) * 560 * 4 + (x + jdx) * 4 + 2] = color[2];\n                    cdata <<= 1;\n                }\n            }\n        }\n    }\n\n    private refreshCursor(fromRegs: boolean) {\n        const addr =\n            (this.regs[REGS.CURSOR_HI] << 8) | this.regs[REGS.CURSOR_LO];\n        const saddr = (0x800 + addr - this.startPos) & 0x7ff;\n        const data = this.imageData.data;\n        const row = (saddr / 80) & 0xff;\n        const col = saddr % 80;\n        const x = col * 7;\n        const y = row << 3;\n        const blinkmode = (this.regs[REGS.CURSOR_UPPER] & 0x60) >> 5;\n\n        if (fromRegs) {\n            if (addr !== this.cursorPos) {\n                const caddr = (0x800 + this.cursorPos - this.startPos) & 0x7ff;\n                this.updateBuffer(caddr, this.buffer[caddr]);\n                this.cursorPos = addr;\n            }\n        }\n\n        this.updateBuffer(addr, this.buffer[addr]);\n        if (blinkmode === CURSOR_MODES.HIDDEN) {\n            return;\n        }\n        if (this.blink || blinkmode === CURSOR_MODES.SOLID) {\n            this.dirty = true;\n            for (let idx = 0; idx < 8; idx++) {\n                const color = WHITE;\n                if (\n                    idx >= (this.regs[REGS.CURSOR_UPPER] & 0x1f) &&\n                    idx <= (this.regs[REGS.CURSOR_LOWER] & 0x1f)\n                ) {\n                    for (let jdx = 0; jdx < 7; jdx++) {\n                        data[(y + idx) * 560 * 4 + (x + jdx) * 4] = color[0];\n                        data[(y + idx) * 560 * 4 + (x + jdx) * 4 + 1] =\n                            color[1];\n                        data[(y + idx) * 560 * 4 + (x + jdx) * 4 + 2] =\n                            color[2];\n                    }\n                }\n            }\n        }\n    }\n\n    private updateStartPos() {\n        const startPos =\n            (this.regs[REGS.STARTPOS_HI] << 8) | this.regs[REGS.STARTPOS_LO];\n        if (this.startPos !== startPos) {\n            this.startPos = startPos;\n            this.shouldRefresh = true;\n        }\n    }\n\n    private refresh() {\n        for (let idx = 0; idx < 0x800; idx++) {\n            this.updateBuffer(idx, this.buffer[idx]);\n        }\n    }\n\n    private access(off: byte, val?: byte) {\n        let result = undefined;\n        switch (off & 0x81) {\n            case LOC.IOREG:\n                if (val !== undefined) {\n                    this.curReg = val;\n                } else {\n                    result = this.curReg;\n                }\n                break;\n            case LOC.IOVAL:\n                if (val !== undefined) {\n                    this.regs[this.curReg] = val;\n                    switch (this.curReg) {\n                        case REGS.CURSOR_UPPER:\n                        case REGS.CURSOR_LOWER:\n                            this.refreshCursor(true);\n                            break;\n                        case REGS.CURSOR_HI:\n                        case REGS.CURSOR_LO:\n                            this.refreshCursor(true);\n                            break;\n                        case REGS.STARTPOS_HI:\n                        case REGS.STARTPOS_LO:\n                            this.updateStartPos();\n                            break;\n                    }\n                } else {\n                    result = this.regs[this.curReg];\n                }\n                break;\n        }\n        this.bank = (off & 0x0c) >> 2;\n        return result;\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        return this.access(off, val);\n    }\n\n    read(page: byte, off: byte) {\n        if (page < 0xcc) {\n            return ROM[((page & 0x03) << 8) | off];\n        } else if (page < 0xce) {\n            const addr = (((page & 0x01) + (this.bank << 1)) << 8) | off;\n            return this.buffer[addr];\n        }\n        return 0;\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        if (page > 0xcb && page < 0xce) {\n            const addr = (((page & 0x01) + (this.bank << 1)) << 8) | off;\n            this.updateBuffer(addr, val);\n        }\n    }\n\n    blit() {\n        if (this.shouldRefresh) {\n            this.refresh();\n            this.shouldRefresh = false;\n        }\n        if (this.dirty) {\n            this.dirty = false;\n            return this.imageData;\n        }\n        return;\n    }\n\n    getState() {\n        return {\n            curReg: this.curReg,\n            startPos: this.startPos,\n            cursorPos: this.cursorPos,\n            bank: this.bank,\n            buffer: new Uint8Array(this.buffer),\n            regs: [...this.regs],\n        };\n    }\n\n    setState(state: VideotermState) {\n        this.curReg = state.curReg;\n        this.startPos = state.startPos;\n        this.cursorPos = state.cursorPos;\n        this.bank = state.bank;\n        this.buffer = new Uint8Array(this.buffer);\n        this.regs = [...state.regs];\n\n        this.shouldRefresh = true;\n        this.dirty = true;\n    }\n}\n","import { CPU6502 } from '@whscullin/cpu6502';\nimport { Card, Memory, MemoryPages, TapeData, byte, Restorable } from './types';\nimport { debug, garbage } from './util';\nimport { VideoModes } from './videomodes';\n\nexport type slot = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\nexport type button = 0 | 1 | 2;\nexport type paddle = 0 | 1 | 2 | 3;\nexport type annunciator = 0 | 1 | 2 | 3;\n\ntype Annunciators = Record<annunciator, boolean>;\n\nexport interface Apple2IOState {\n    annunciators: Annunciators;\n    cards: Array<unknown>;\n}\n\nexport type SampleListener = (sample: number[]) => void;\n\nconst LOC = {\n    KEYBOARD: 0x00, // keyboard data (latched) (Read),\n    STROBE: 0x10, // clear bit 7 of keyboard data ($C000)\n    TAPEOUT: 0x20, // toggle the cassette output.\n    SPEAKER: 0x30, // toggle speaker diaphragm\n    C040STB: 0x40, // trigger game port sync\n    CLRTEXT: 0x50, // display graphics\n    SETTEXT: 0x51, // display text\n    CLRMIXED: 0x52, // clear mixed mode- enable full graphics\n    SETMIXED: 0x53, // enable graphics/text mixed mode\n    PAGE1: 0x54, // select text/graphics page1\n    PAGE2: 0x55, // select text/graphics page2\n    CLRHIRES: 0x56, // select Lo-res\n    SETHIRES: 0x57, // select Hi-res\n    CLRAN0: 0x58, // Set annunciator-0 output to 0\n    SETAN0: 0x59, // Set annunciator-0 output to 1\n    CLRAN1: 0x5a, // Set annunciator-1 output to 0\n    SETAN1: 0x5b, // Set annunciator-1 output to 1\n    CLRAN2: 0x5c, // Set annunciator-2 output to 0\n    SETAN2: 0x5d, // Set annunciator-2 output to 1\n    CLRAN3: 0x5e, // Set annunciator-3 output to 0\n    SETAN3: 0x5f, // Set annunciator-3 output to 1\n    TAPEIN: 0x60, // bit 7: data from cassette\n    PB0: 0x61, // game Pushbutton 0 / open apple (command) key data\n    PB1: 0x62, // game Pushbutton 1 / closed apple (option) key data\n    PB2: 0x63, // game Pushbutton 2 (read)\n    PADDLE0: 0x64, // bit 7: status of pdl-0 timer (read)\n    PADDLE1: 0x65, // bit 7: status of pdl-1 timer (read)\n    PADDLE2: 0x66, // bit 7: status of pdl-2 timer (read)\n    PADDLE3: 0x67, // bit 7: status of pdl-3 timer (read)\n    PDLTRIG: 0x70, // trigger paddles\n    ACCEL: 0x74, // CPU Speed control\n};\n\nexport default class Apple2IO\n    implements MemoryPages, Restorable<Apple2IOState>\n{\n    private _slot: Array<Card | null> = new Array<Card | null>(7).fill(null);\n    private _auxRom: Memory | null = null;\n\n    private _khz = 1023;\n    private _rate = 44000;\n    private _sample_size = 4096;\n\n    private _cycles_per_sample: number;\n\n    private _buffer: string[] = [];\n    private _key = 0;\n    private _keyDown = false;\n    private _button = [false, false, false];\n    private _paddle = [0.0, 0.0, 0.0, 0.0];\n    private _phase = -1;\n    private _sample: number[] = [];\n    private _sampleIdx = 0;\n    private _sampleTime = 0;\n    private _didAudio = false;\n\n    private _high = 0.5;\n    private _low = -0.5;\n\n    private _audioListener: SampleListener | undefined;\n\n    private _trigger = 0;\n    private _annunciators: Annunciators = [false, false, false, false];\n\n    private _tape: TapeData = [];\n    private _tapeOffset: number = 0;\n    private _tapeNext: number = 0;\n    private _tapeCurrent = false;\n\n    constructor(\n        private readonly cpu: CPU6502,\n        private readonly vm: VideoModes\n    ) {\n        this.init();\n    }\n\n    init() {\n        this._calcSampleRate();\n    }\n\n    _debug(..._args: unknown[]) {\n        // debug.apply(this, arguments);\n    }\n\n    _tick() {\n        const now = this.cpu.getCycles();\n        const phase = this._didAudio\n            ? this._phase > 0\n                ? this._high\n                : this._low\n            : 0.0;\n        for (\n            ;\n            this._sampleTime < now;\n            this._sampleTime += this._cycles_per_sample\n        ) {\n            this._sample[this._sampleIdx++] = phase;\n            if (this._sampleIdx === this._sample_size) {\n                if (this._audioListener) {\n                    this._audioListener(this._sample);\n                }\n                this._sample = new Array<number>(this._sample_size);\n                this._sampleIdx = 0;\n            }\n        }\n        this._didAudio = false;\n    }\n\n    _calcSampleRate() {\n        this._cycles_per_sample = (this._khz * 1000) / this._rate;\n    }\n\n    _updateKHz(khz: number) {\n        this._khz = khz;\n        this._calcSampleRate();\n    }\n\n    _access(off: byte, val?: byte): byte | undefined {\n        let result: number | undefined = 0;\n        const now = this.cpu.getCycles();\n        const writeMode = val === undefined;\n        const delta = now - this._trigger;\n        switch (off) {\n            case LOC.CLRTEXT:\n                this._debug('Graphics Mode');\n                this.vm.text(false);\n                break;\n            case LOC.SETTEXT:\n                this._debug('Text Mode');\n                this.vm.text(true);\n                break;\n            case LOC.CLRMIXED:\n                this._debug('Mixed Mode off');\n                this.vm.mixed(false);\n                break;\n            case LOC.SETMIXED:\n                this._debug('Mixed Mode on');\n                this.vm.mixed(true);\n                break;\n            case LOC.CLRHIRES:\n                this._debug('LoRes Mode');\n                this.vm.hires(false);\n                break;\n            case LOC.SETHIRES:\n                this._debug('HiRes Mode');\n                this.vm.hires(true);\n                break;\n            case LOC.PAGE1:\n                this.vm.page(1);\n                break;\n            case LOC.PAGE2:\n                this.vm.page(2);\n                break;\n            case LOC.SETAN0:\n                this._debug('Annunciator 0 on');\n                this._annunciators[0] = true;\n                break;\n            case LOC.SETAN1:\n                this._debug('Annunciator 1 on');\n                this._annunciators[1] = true;\n                break;\n            case LOC.SETAN2:\n                this._debug('Annunciator 2 on');\n                this._annunciators[2] = true;\n                break;\n            case LOC.SETAN3:\n                this._debug('Annunciator 3 on');\n                this._annunciators[3] = true;\n                break;\n            case LOC.CLRAN0:\n                this._debug('Annunciator 0 off');\n                this._annunciators[0] = false;\n                break;\n            case LOC.CLRAN1:\n                this._debug('Annunciator 1 off');\n                this._annunciators[1] = false;\n                break;\n            case LOC.CLRAN2:\n                this._debug('Annunciator 2 off');\n                this._annunciators[2] = false;\n                break;\n            case LOC.CLRAN3:\n                this._debug('Annunciator 3 off');\n                this._annunciators[3] = false;\n                break;\n            case LOC.PB0:\n                result = this._button[0] ? 0x80 : 0;\n                break;\n            case LOC.PB1:\n                result = this._button[1] ? 0x80 : 0;\n                break;\n            case LOC.PB2:\n                result = this._button[2] ? 0x80 : 0;\n                break;\n            case LOC.PADDLE0:\n                result = delta < this._paddle[0] * 2756 ? 0x80 : 0x00;\n                break;\n            case LOC.PADDLE1:\n                result = delta < this._paddle[1] * 2756 ? 0x80 : 0x00;\n                break;\n            case LOC.PADDLE2:\n                result = delta < this._paddle[2] * 2756 ? 0x80 : 0x00;\n                break;\n            case LOC.PADDLE3:\n                result = delta < this._paddle[3] * 2756 ? 0x80 : 0x00;\n                break;\n            case LOC.ACCEL:\n                if (val !== undefined) {\n                    this._updateKHz(val & 0x01 ? 1023 : 4096);\n                }\n                break;\n            case LOC.TAPEIN:\n                if (this._tapeOffset === -1) {\n                    this._tapeOffset = 0;\n                    this._tapeNext = now;\n                }\n\n                if (this._tapeOffset < this._tape.length) {\n                    this._tapeCurrent = this._tape[this._tapeOffset][1];\n                    while (now >= this._tapeNext) {\n                        if (this._tapeOffset % 1000 === 0) {\n                            debug(`Read ${this._tapeOffset / 1000}`);\n                        }\n                        this._tapeCurrent = this._tape[this._tapeOffset][1];\n                        this._tapeNext += this._tape[this._tapeOffset++][0];\n                    }\n                }\n\n                result = this._tapeCurrent ? 0x80 : 0x00;\n                break;\n\n            default:\n                switch (off & 0xf0) {\n                    case LOC.KEYBOARD: // C00x\n                        result = this._key;\n                        break;\n                    case LOC.STROBE: // C01x\n                        if (off === LOC.STROBE || writeMode) {\n                            this._key &= 0x7f;\n                        }\n                        if (this._buffer.length > 0) {\n                            let val = this._buffer.shift() as string;\n                            if (val === '\\n') {\n                                val = '\\r';\n                            }\n                            this._key = val.charCodeAt(0) | 0x80;\n                        }\n                        result = this._key & 0x7f;\n                        if (off === LOC.STROBE) {\n                            result |= this._keyDown ? 0x80 : 0x00;\n                        }\n                        break;\n                    case LOC.TAPEOUT: // C02x\n                        // this._phase = -this._phase;\n                        // this._didAudio = true;\n                        // this._tick();\n                        break;\n                    case LOC.SPEAKER: // C03x\n                        this._phase = -this._phase;\n                        this._didAudio = true;\n                        this._tick();\n                        break;\n                    case LOC.C040STB: // C04x\n                        // I/O Strobe\n                        break;\n                    case LOC.PDLTRIG: // C07x\n                        this._trigger = this.cpu.getCycles();\n                        break;\n                }\n        }\n\n        if (val !== undefined) {\n            result = undefined;\n        }\n\n        return result;\n    }\n\n    start() {\n        return 0xc0;\n    }\n\n    end() {\n        return 0xcf;\n    }\n\n    ioSwitch(off: byte, val?: byte) {\n        let result;\n        if (off < 0x80) {\n            result = this._access(off, val);\n        } else {\n            const slot = (off & 0x70) >> 4;\n            const card = this._slot[slot];\n            if (card && card.ioSwitch) {\n                result = card.ioSwitch(off, val);\n            }\n        }\n\n        return result;\n    }\n\n    reset() {\n        for (let slot = 0; slot < 8; slot++) {\n            const card = this._slot[slot];\n            if (card) {\n                card.reset?.();\n            }\n        }\n        this.vm.reset();\n    }\n\n    blit() {\n        const card = this._slot[3];\n        if (card) {\n            return card.blit?.();\n        }\n        return undefined;\n    }\n\n    read(page: byte, off: byte) {\n        let result: number = 0;\n        let slot;\n        let card;\n\n        switch (page) {\n            case 0xc0:\n                result = this.ioSwitch(off, undefined) || 0;\n                break;\n            case 0xc1:\n            case 0xc2:\n            case 0xc3:\n            case 0xc4:\n            case 0xc5:\n            case 0xc6:\n            case 0xc7:\n                slot = page & 0x0f;\n                card = this._slot[slot];\n                if (this._auxRom !== card) {\n                    // _debug('Setting auxRom to slot', slot);\n                    this._auxRom = card;\n                }\n                if (card) {\n                    result = card.read(page, off);\n                } else {\n                    result = garbage();\n                }\n                break;\n            default:\n                if (this._auxRom) {\n                    result = this._auxRom.read(page, off);\n                }\n                break;\n        }\n        return result;\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        let slot;\n        let card;\n\n        switch (page) {\n            case 0xc0:\n                this.ioSwitch(off, val);\n                break;\n            case 0xc1:\n            case 0xc2:\n            case 0xc3:\n            case 0xc4:\n            case 0xc5:\n            case 0xc6:\n            case 0xc7:\n                slot = page & 0x0f;\n                card = this._slot[slot];\n                if (this._auxRom !== card) {\n                    // _debug('Setting auxRom to slot', slot);\n                    this._auxRom = card;\n                }\n                if (card) {\n                    card.write(page, off, val);\n                }\n                break;\n            default:\n                if (this._auxRom) {\n                    this._auxRom.write(page, off, val);\n                }\n                break;\n        }\n    }\n\n    getState(): Apple2IOState {\n        // TODO vet more potential state\n        return {\n            annunciators: this._annunciators,\n            cards: this._slot.map((card) => (card ? card.getState() : null)),\n        };\n    }\n\n    setState(state: Apple2IOState) {\n        this._annunciators = state.annunciators;\n        state.cards.map(\n            (cardState, idx) => this._slot[idx]?.setState(cardState)\n        );\n    }\n\n    setSlot(slot: slot, card: Card) {\n        this._slot[slot] = card;\n    }\n\n    getSlot(slot: slot): Card | null {\n        return this._slot[slot];\n    }\n\n    keyDown(ascii: byte) {\n        this._keyDown = true;\n        this._key = ascii | 0x80;\n    }\n\n    keyUp() {\n        this._keyDown = false;\n    }\n\n    buttonDown(b: button, state = true) {\n        this._button[b] = state;\n    }\n\n    buttonUp(b: button) {\n        this._button[b] = false;\n    }\n\n    paddle(p: paddle, v: byte) {\n        this._paddle[p] = v;\n    }\n\n    updateKHz(khz: number) {\n        this._updateKHz(khz);\n    }\n\n    getKHz() {\n        return this._khz;\n    }\n\n    setKeyBuffer(buffer: string) {\n        this._buffer = buffer.split(''); // split to charaters\n        if (this._buffer.length > 0) {\n            this._keyDown = true;\n            const key = this._buffer.shift() as string; // never undefined\n            this._key = key.charCodeAt(0) | 0x80;\n        }\n    }\n\n    setTape(tape: TapeData) {\n        debug(`Tape length: ${tape.length}`);\n        this._tape = tape;\n        this._tapeOffset = -1;\n    }\n\n    sampleRate(rate: number, sample_size: number) {\n        this._rate = rate;\n        this._sample_size = sample_size;\n        this._sample = new Array<number>(this._sample_size);\n        this._sampleIdx = 0;\n        this._calcSampleRate();\n    }\n\n    tick() {\n        this._tick();\n        for (let idx = 0; idx < 8; idx++) {\n            this._slot[idx]?.tick?.();\n        }\n    }\n\n    addSampleListener(cb: SampleListener) {\n        this._audioListener = cb;\n    }\n\n    annunciator(idx: annunciator) {\n        return this._annunciators[idx];\n    }\n\n    cycles() {\n        return this.cpu.getCycles();\n    }\n}\n","import { byte, Color, memory, MemoryPages, rom } from './types';\nimport RAM from './ram';\nimport {\n    HiresPage,\n    LoresPage,\n    Region,\n    VideoModes,\n    VideoModesState,\n    bank,\n    pageNo,\n} from './videomodes';\n\nconst dim = (c: Color): Color => {\n    return [(c[0] * 0.75) & 0xff, (c[1] * 0.75) & 0xff, (c[2] * 0.75) & 0xff];\n};\n\n// hires colors\nconst orangeCol: Color = [255, 106, 60];\nconst greenCol: Color = [20, 245, 60];\nconst blueCol: Color = [20, 207, 253];\nconst violetCol: Color = [255, 68, 253];\nconst whiteCol: Color = [255, 255, 255];\nconst blackCol: Color = [0, 0, 0];\n\n// lores colors\nconst _colors: Color[] = [\n    [0, 0, 0], // 0x0 black\n    [227, 30, 96], // 0x1 deep red\n    [96, 78, 189], // 0x2 dark blue\n    [255, 68, 253], // 0x3 purple\n    [0, 163, 96], // 0x4 dark green\n    [156, 156, 156], // 0x5 dark gray\n    [20, 207, 253], // 0x6 medium blue\n    [208, 195, 255], // 0x7 light blue\n    [96, 114, 3], // 0x8 brown\n    [255, 106, 60], // 0x9 orange\n    [156, 156, 156], // 0xa light gray\n    [255, 160, 208], // 0xb pink\n    [20, 245, 60], // 0xc green\n    [208, 221, 141], // 0xd yellow\n    [114, 255, 208], // 0xe aquamarine\n    [255, 255, 255], // 0xf white\n];\n\n//\nconst r4 = [\n    0, // Black\n    2, // Dark Blue\n    4, // Dark Green\n    6, // Medium Blue\n\n    8, // Brown\n    5, // Gray 1\n    12, // Light Green\n    14, // Aqua\n\n    1, // Red\n    3, // Purple\n    10, // Gray 2\n    7, // Pink\n\n    9, // Orange\n    11, // Light Blue\n    13, // Yellow\n    15, // White\n] as const;\n\nconst dcolors: Color[] = [\n    [0, 0, 0], // 0x0 black\n    [227, 30, 96], // 0x1 deep red\n    [96, 78, 189], // 0x2 dark blue\n    [255, 68, 253], // 0x3 purple\n    [0, 163, 96], // 0x4 dark green\n    [156, 156, 156], // 0x5 dark gray\n    [20, 207, 253], // 0x6 medium blue\n    [208, 195, 255], // 0x7 light blue\n    [96, 114, 3], // 0x8 brown\n    [255, 106, 60], // 0x9 orange\n    [156, 156, 156], // 0xa light gray\n    [255, 160, 208], // 0xb pink\n    [20, 245, 60], // 0xc green\n    [208, 221, 141], // 0xd yellow\n    [114, 255, 208], // 0xe aquamarine\n    [255, 255, 255], // 0xf white\n];\n\nconst notDirty: Region = {\n    top: 193,\n    bottom: -1,\n    left: 561,\n    right: -1,\n} as const;\n\n/****************************************************************************\n *\n * Text/Lores Graphics\n *\n ***************************************************************************/\n\nexport class LoresPage2D implements LoresPage {\n    // $00-$3F inverse\n    // $40-$7F flashing\n    // $80-$FF normal\n\n    private _buffer: memory[] = [];\n    private _refreshing = false;\n    private _blink = false;\n    private _blinkInterval: ReturnType<typeof setInterval> | undefined;\n\n    private highColorTextMode = false;\n\n    dirty: Region = { ...notDirty };\n    imageData: ImageData;\n\n    constructor(\n        private vm: VideoModes,\n        private page: pageNo,\n        private ram: RAM[],\n        private charset: rom,\n        private readonly e: boolean\n    ) {\n        this.imageData = this.vm.context.createImageData(560, 192);\n        this.imageData.data.fill(0xff);\n        const start = 0x4 * this.page;\n        const end = start + 0x4;\n        this._buffer[0] = this.ram[0].getBuffer(start, end);\n        this._buffer[1] = this.ram[1]?.getBuffer(start, end);\n\n        this.vm.setLoresPage(page, this);\n    }\n\n    private _drawPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n        data[off + 0] = data[off + 4] = c0;\n        data[off + 1] = data[off + 5] = c1;\n        data[off + 2] = data[off + 6] = c2;\n    }\n\n    private _drawHalfPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n        data[off + 0] = c0;\n        data[off + 1] = c1;\n        data[off + 2] = c2;\n    }\n\n    private _checkInverse(val: byte) {\n        let inverse = false;\n        if (this.e) {\n            if (!this.vm._80colMode && !this.vm.altCharMode) {\n                inverse = (val & 0xc0) === 0x40 && this._blink;\n            }\n        } else {\n            inverse = !(val & 0x80 || (val & 0x40 && this._blink));\n        }\n        return inverse;\n    }\n\n    bank0(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 0),\n            write: (page, off, val) => this._write(page, off, val, 0),\n        };\n    }\n\n    bank1(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 1),\n            write: (page, off, val) => this._write(page, off, val, 1),\n        };\n    }\n\n    // These are used by both bank 0 and 1\n\n    private _start() {\n        return 0x04 * this.page;\n    }\n\n    private _end() {\n        return 0x04 * this.page + 0x03;\n    }\n\n    private _read(page: byte, off: byte, bank: bank) {\n        const addr = (page << 8) | off,\n            base = addr & 0x3ff;\n        return this._buffer[bank][base];\n    }\n\n    private _write(page: byte, off: byte, val: byte, bank: bank) {\n        const addr = (page << 8) | off;\n        const base = addr & 0x3ff;\n        let fore, back;\n\n        if (this._buffer[bank][base] === val && !this._refreshing) {\n            return;\n        }\n        this._buffer[bank][base] = val;\n\n        const col = (base % 0x80) % 0x28;\n        const adj = off - col;\n\n        // 000001cd eabab000 -> 000abcde\n        const ab = adj & 0x18;\n        const cd = (page & 0x03) << 1;\n        const ee = adj >> 7;\n        const row = ab | cd | ee;\n\n        const data = this.imageData.data;\n        if (row < 24 && col < 40) {\n            let y = row << 3;\n            if (y < this.dirty.top) {\n                this.dirty.top = y;\n            }\n            y += 8;\n            if (y > this.dirty.bottom) {\n                this.dirty.bottom = y;\n            }\n            let x = col * 14;\n            if (x < this.dirty.left) {\n                this.dirty.left = x;\n            }\n            x += 14;\n            if (x > this.dirty.right) {\n                this.dirty.right = x;\n            }\n\n            if (\n                this.vm.textMode ||\n                this.vm.hiresMode ||\n                (this.vm.mixedMode && row > 19)\n            ) {\n                if (this.vm._80colMode) {\n                    const inverse = this._checkInverse(val);\n\n                    fore = inverse ? blackCol : whiteCol;\n                    back = inverse ? whiteCol : blackCol;\n\n                    if (!this.vm.altCharMode) {\n                        val = val >= 0x40 && val < 0x80 ? val - 0x40 : val;\n                    }\n\n                    let offset =\n                        (col * 14 + (bank ? 0 : 1) * 7 + row * 560 * 8) * 4;\n\n                    for (let jdx = 0; jdx < 8; jdx++) {\n                        let b = this.charset[val * 8 + jdx];\n                        for (let idx = 0; idx < 7; idx++) {\n                            const color = b & 0x01 ? back : fore;\n                            this._drawHalfPixel(data, offset, color);\n                            b >>= 1;\n                            offset += 4;\n                        }\n                        offset += 553 * 4;\n                    }\n                } else {\n                    val = this._buffer[0][base];\n\n                    const inverse = this._checkInverse(val);\n\n                    fore = inverse ? blackCol : whiteCol;\n                    back = inverse ? whiteCol : blackCol;\n\n                    if (!this.vm.altCharMode) {\n                        val = val >= 0x40 && val < 0x80 ? val - 0x40 : val;\n                    }\n\n                    let offset = (col * 14 + row * 560 * 8) * 4;\n\n                    if (this.highColorTextMode) {\n                        fore = _colors[this._buffer[1][base] >> 4];\n                        back = _colors[this._buffer[1][base] & 0x0f];\n                    }\n\n                    if (this.e) {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let b = this.charset[val * 8 + jdx];\n                            for (let idx = 0; idx < 7; idx++) {\n                                const color = b & 0x01 ? back : fore;\n                                this._drawPixel(data, offset, color);\n                                b >>= 1;\n                                offset += 8;\n                            }\n                            offset += 546 * 4;\n                        }\n                    } else {\n                        const colorMode =\n                            this.vm.mixedMode &&\n                            !this.vm.textMode &&\n                            !this.vm.monoMode;\n                        // var val0 = col > 0 ? _buffer[0][base - 1] : 0;\n                        // var val2 = col < 39 ? _buffer[0][base + 1] : 0;\n\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let odd = !(col & 0x1);\n                            let b = this.charset[val * 8 + jdx] << 1;\n                            if (colorMode) {\n                                // var b0 = charset[val0 * 8 + jdx];\n                                // var b2 = charset[val2 * 8 + jdx];\n                                if (inverse) {\n                                    b ^= 0x1ff;\n                                }\n                            }\n\n                            for (let idx = 0; idx < 7; idx++) {\n                                let color;\n                                if (colorMode) {\n                                    if (b & 0x80) {\n                                        if ((b & 0x1c0) !== 0x80) {\n                                            color = whiteCol;\n                                        } else {\n                                            color = odd ? violetCol : greenCol;\n                                        }\n                                    } else {\n                                        color = blackCol;\n                                    }\n                                    odd = !odd;\n                                } else {\n                                    color = b & 0x80 ? fore : back;\n                                }\n                                this._drawPixel(data, offset, color);\n                                b <<= 1;\n                                offset += 8;\n                            }\n                            offset += 546 * 4;\n                        }\n                    }\n                }\n            } else {\n                if (this.vm._80colMode && !this.vm.an3State) {\n                    let offset =\n                        (col * 14 + (bank ? 0 : 1) * 7 + row * 560 * 8) * 4;\n                    if (this.vm.monoMode) {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let b = jdx < 4 ? val & 0x0f : val >> 4;\n                            b |= b << 4;\n                            b |= b << 8;\n                            if (col & 0x1) {\n                                b >>= 2;\n                            }\n                            for (let idx = 0; idx < 7; idx++) {\n                                const color = b & 0x01 ? whiteCol : blackCol;\n                                this._drawHalfPixel(data, offset, color);\n                                b >>= 1;\n                                offset += 4;\n                            }\n                            offset += 553 * 4;\n                        }\n                    } else {\n                        if (bank & 0x1) {\n                            val = ((val & 0x77) << 1) | ((val & 0x88) >> 3);\n                        }\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            const color =\n                                _colors[jdx < 4 ? val & 0x0f : val >> 4];\n                            for (let idx = 0; idx < 7; idx++) {\n                                this._drawHalfPixel(data, offset, color);\n                                offset += 4;\n                            }\n                            offset += 553 * 4;\n                        }\n                    }\n                } else if (bank === 0) {\n                    let offset = (col * 14 + row * 560 * 8) * 4;\n\n                    if (this.vm.monoMode) {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let b = jdx < 4 ? val & 0x0f : val >> 4;\n                            b |= b << 4;\n                            b |= b << 8;\n                            if (col & 0x1) {\n                                b >>= 2;\n                            }\n                            for (let idx = 0; idx < 14; idx++) {\n                                const color = b & 0x0001 ? whiteCol : blackCol;\n                                this._drawHalfPixel(data, offset, color);\n                                b >>= 1;\n                                offset += 4;\n                            }\n                            offset += 546 * 4;\n                        }\n                    } else {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            const color =\n                                _colors[jdx < 4 ? val & 0x0f : val >> 4];\n                            for (let idx = 0; idx < 7; idx++) {\n                                this._drawPixel(data, offset, color);\n                                offset += 8;\n                            }\n                            offset += 546 * 4;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    refresh() {\n        this.highColorTextMode =\n            !this.vm.an3State && this.vm.textMode && !this.vm._80colMode;\n\n        let addr = 0x400 * this.page;\n        this._refreshing = true;\n        for (let idx = 0; idx < 0x400; idx++, addr++) {\n            this._write(addr >> 8, addr & 0xff, this._buffer[0][idx], 0);\n            if (this.vm._80colMode) {\n                this._write(addr >> 8, addr & 0xff, this._buffer[1][idx], 1);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    blink() {\n        let addr = 0x400 * this.page;\n        this._refreshing = true;\n        this._blink = !this._blink;\n        for (let idx = 0; idx < 0x400; idx++, addr++) {\n            const b = this._buffer[0][idx];\n            if ((b & 0xc0) === 0x40) {\n                this._write(addr >> 8, addr & 0xff, this._buffer[0][idx], 0);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    start() {\n        if (!this._blinkInterval) {\n            this._blinkInterval = setInterval(() => this.blink(), 267);\n        }\n        return this._start();\n    }\n\n    end() {\n        return this._end();\n    }\n\n    read(page: byte, off: byte) {\n        return this._read(page, off, 0);\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        return this._write(page, off, val, 0);\n    }\n\n    private rowToBase(row: number) {\n        const ab = (row >> 3) & 3;\n        const cd = (row >> 1) & 0x3;\n        const e = row & 1;\n        return (cd << 8) | (e << 7) | (ab << 5) | (ab << 3);\n    }\n\n    private mapCharCode(charCode: byte) {\n        charCode &= 0x7f;\n        if (charCode < 0x20) {\n            charCode += 0x40;\n        }\n        if (!this.e && charCode >= 0x60) {\n            charCode -= 0x40;\n        }\n        return charCode;\n    }\n\n    getText() {\n        let buffer = '',\n            line,\n            charCode;\n        let row, col, base;\n        for (row = 0; row < 24; row++) {\n            base = this.rowToBase(row);\n            line = '';\n            if (this.e && this.vm._80colMode) {\n                for (col = 0; col < 80; col++) {\n                    charCode = this.mapCharCode(\n                        this._buffer[1 - (col % 2)][base + Math.floor(col / 2)]\n                    );\n                    line += String.fromCharCode(charCode);\n                }\n            } else {\n                for (col = 0; col < 40; col++) {\n                    charCode = this.mapCharCode(this._buffer[0][base + col]);\n                    line += String.fromCharCode(charCode);\n                }\n            }\n            line = line.trimEnd();\n            buffer += line + '\\n';\n        }\n        return buffer;\n    }\n}\n\n/****************************************************************************\n *\n * Hires Graphics\n *\n ***************************************************************************/\n\nexport class HiresPage2D implements HiresPage {\n    public imageData: ImageData;\n    dirty: Region = { ...notDirty };\n\n    private _buffer: memory[] = [];\n    private _refreshing = false;\n\n    highColorHGRMode: boolean;\n    oneSixtyMode: boolean;\n    mixedDHRMode: boolean;\n    monoDHRMode: boolean;\n    colorDHRMode: boolean = true;\n\n    constructor(\n        private vm: VideoModes,\n        private page: pageNo,\n        private ram: RAM[]\n    ) {\n        this.imageData = this.vm.context.createImageData(560, 192);\n        this.imageData.data.fill(0xff);\n\n        const start = 0x20 * this.page;\n        const end = start + 0x20;\n        this._buffer[0] = this.ram[0].getBuffer(start, end);\n        this._buffer[1] = this.ram[1]?.getBuffer(start, end);\n\n        this.vm.setHiresPage(page, this);\n    }\n\n    private _drawPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n\n        data[off + 0] = data[off + 4] = c0;\n        data[off + 1] = data[off + 5] = c1;\n        data[off + 2] = data[off + 6] = c2;\n    }\n\n    private _drawHalfPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n\n        data[off + 0] = c0;\n        data[off + 1] = c1;\n        data[off + 2] = c2;\n    }\n\n    //\n    // 160x192 pixels alternate 3 and 4 base pixels wide\n    //\n\n    private _draw3Pixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n\n        data[off + 0] = data[off + 4] = data[off + 8] = c0;\n        data[off + 1] = data[off + 5] = data[off + 9] = c1;\n        data[off + 2] = data[off + 6] = data[off + 10] = c2;\n    }\n\n    private _draw4Pixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n\n        data[off + 0] = data[off + 4] = data[off + 8] = data[off + 12] = c0;\n        data[off + 1] = data[off + 5] = data[off + 9] = data[off + 13] = c1;\n        data[off + 2] = data[off + 6] = data[off + 10] = data[off + 14] = c2;\n    }\n\n    bank0(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 0),\n            write: (page, off, val) => this._write(page, off, val, 0),\n        };\n    }\n\n    bank1(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 1),\n            write: (page, off, val) => this._write(page, off, val, 1),\n        };\n    }\n\n    private _start() {\n        return 0x20 * this.page;\n    }\n\n    private _end() {\n        return 0x020 * this.page + 0x1f;\n    }\n\n    private _read(page: byte, off: byte, bank: bank) {\n        const addr = (page << 8) | off,\n            base = addr & 0x1fff;\n        return this._buffer[bank][base];\n    }\n\n    private _write(page: byte, off: byte, val: byte, bank: bank) {\n        const addr = (page << 8) | off;\n        const base = addr & 0x1fff;\n\n        if (this._buffer[bank][base] === val && !this._refreshing) {\n            return;\n        }\n        this._buffer[bank][base] = val;\n\n        const col = (base % 0x80) % 0x28;\n        const adj = off - col;\n\n        // 000001cd eabab000 -> 000abcde\n        const ab = adj & 0x18;\n        const cd = (page & 0x03) << 1;\n        const e = adj >> 7;\n\n        const rowa = ab | cd | e,\n            rowb = base >> 10;\n\n        const data = this.imageData.data;\n        let dx, dy;\n        if (rowa < 24 && col < 40 && (this.vm.hiresMode || this._refreshing)) {\n            let y = (rowa << 4) | (rowb << 1);\n            if (y < this.dirty.top) {\n                this.dirty.top = y;\n            }\n            y += 1;\n            if (y > this.dirty.bottom) {\n                this.dirty.bottom = y;\n            }\n            let x = col * 14 - 2;\n            if (x < this.dirty.left) {\n                this.dirty.left = x;\n            }\n            x += 18;\n            if (x > this.dirty.right) {\n                this.dirty.right = x;\n            }\n\n            dy = (rowa << 4) | (rowb << 1);\n            let bz, b0, b1, b2, b3, b4, c;\n            if (this.oneSixtyMode && !this.vm.monoMode) {\n                // 1 byte = two pixels, but 3:4 ratio\n                const c3 = val & 0xf;\n                const c4 = val >> 4;\n\n                dx = col * 2 + (bank ^ 1);\n                const offset = dx * 28 + dy * 280 * 4;\n\n                this._draw3Pixel(data, offset, dcolors[c3]);\n                this._draw4Pixel(data, offset + 12, dcolors[c4]);\n            } else if (this.vm.doubleHiresMode) {\n                val &= 0x7f;\n\n                // Every 4 bytes is 7 pixels\n                // 2 bytes per bank\n\n                // b0       b1       b2       b3\n                //  c0  c1    c2  c3    c4  c5    c6\n                // 76543210 76543210 76543210 76543210\n                //  1111222  2333344  4455556  6667777\n\n                const mod = col % 2,\n                    mcol = col - mod,\n                    baseOff = base - mod;\n                bz = this._buffer[0][baseOff - 1];\n                b0 = this._buffer[1][baseOff];\n                b1 = this._buffer[0][baseOff];\n                b2 = this._buffer[1][baseOff + 1];\n                b3 = this._buffer[0][baseOff + 1];\n                b4 = this._buffer[1][baseOff + 2];\n                c = [\n                    0,\n                    (b0 & 0x0f) >> 0, // 0\n                    ((b0 & 0x70) >> 4) | ((b1 & 0x01) << 3), // 1\n                    (b1 & 0x1e) >> 1, // 2\n                    ((b1 & 0x60) >> 5) | ((b2 & 0x03) << 2), // 3\n                    (b2 & 0x3c) >> 2, // 4\n                    ((b2 & 0x40) >> 6) | ((b3 & 0x07) << 1), // 5\n                    (b3 & 0x78) >> 3, // 6\n                    0,\n                ]; // 7\n                const hb = [\n                    0,\n                    b0 & 0x80, // 0\n                    b0 & 0x80, // 1\n                    b1 & 0x80, // 2\n                    b2 & 0x80, // 3\n                    b2 & 0x80, // 4\n                    b3 & 0x80, // 5\n                    b3 & 0x80, // 6\n                    0,\n                ]; // 7\n                if (col > 0) {\n                    c[0] = (bz & 0x78) >> 3;\n                    hb[0] = bz & 0x80;\n                }\n                if (col < 39) {\n                    c[8] = b4 & 0x0f;\n                    hb[8] = b4 & 0x80;\n                }\n                dx = mcol * 14;\n                let offset = dx * 4 + dy * 280 * 4;\n\n                let monoColor = null;\n                if (this.vm.monoMode || this.monoDHRMode) {\n                    monoColor = whiteCol;\n                }\n\n                for (let idx = 1; idx < 8; idx++) {\n                    const hbs = hb[idx];\n                    const dcolor = dcolors[r4[c[idx]]];\n                    let bits = c[idx - 1] | (c[idx] << 4) | (c[idx + 1] << 8);\n                    for (let jdx = 0; jdx < 4; jdx++, offset += 4) {\n                        if (monoColor) {\n                            if (bits & 0x10) {\n                                this._drawHalfPixel(data, offset, monoColor);\n                            } else {\n                                this._drawHalfPixel(data, offset, blackCol);\n                            }\n                        } else if (this.mixedDHRMode) {\n                            if (hbs) {\n                                this._drawHalfPixel(data, offset, dcolor);\n                            } else {\n                                if (bits & 0x10) {\n                                    this._drawHalfPixel(data, offset, whiteCol);\n                                } else {\n                                    this._drawHalfPixel(data, offset, blackCol);\n                                }\n                            }\n                        } else if (this.colorDHRMode) {\n                            this._drawHalfPixel(data, offset, dcolor);\n                        } else if (\n                            c[idx] !== c[idx - 1] &&\n                            c[idx] !== c[idx + 1] &&\n                            ((bits & 0x1c) === 0x1c ||\n                                (bits & 0x70) === 0x70 ||\n                                (bits & 0x38) === 0x38)\n                        ) {\n                            this._drawHalfPixel(data, offset, whiteCol);\n                        } else if (\n                            bits & 0x38 ||\n                            c[idx] === c[idx + 1] ||\n                            c[idx] === c[idx - 1]\n                        ) {\n                            this._drawHalfPixel(data, offset, dcolor);\n                        } else if (bits & 0x28) {\n                            this._drawHalfPixel(data, offset, dim(dcolor));\n                        } else {\n                            this._drawHalfPixel(data, offset, blackCol);\n                        }\n                        bits >>= 1;\n                    }\n                }\n\n                if (!this._refreshing) {\n                    this._refreshing = true;\n                    const bb: bank = bank ? 0 : 1;\n                    for (let rr = addr - 1; rr <= addr + 1; rr++) {\n                        const vv = this._read(rr >> 8, rr & 0xff, bb);\n                        this._write(rr >> 8, rr & 0xff, vv, bb);\n                    }\n                    this._refreshing = false;\n                }\n            } else {\n                val = this._buffer[0][base];\n                const hbs = val & 0x80;\n                val &= 0x7f;\n                dx = col * 14 - 2;\n                b0 = col > 0 ? this._buffer[0][base - 1] : 0;\n                b2 = col < 39 ? this._buffer[0][base + 1] : 0;\n                val |= (b2 & 0x3) << 7;\n                let v0 = b0 & 0x20,\n                    v1 = b0 & 0x40,\n                    v2 = val & 0x1,\n                    odd = !(col & 0x1),\n                    color;\n                const oddCol = hbs ? orangeCol : greenCol;\n                const evenCol = hbs ? blueCol : violetCol;\n\n                let offset = dx * 4 + dy * 280 * 4;\n\n                const monoColor = this.vm.monoMode ? whiteCol : null;\n\n                for (let idx = 0; idx < 9; idx++, offset += 8) {\n                    val >>= 1;\n\n                    if (v1) {\n                        if (monoColor) {\n                            color = monoColor;\n                        } else if (this.highColorHGRMode) {\n                            color = dcolors[this._buffer[1][base] >> 4];\n                        } else if (v0 || v2) {\n                            color = whiteCol;\n                        } else {\n                            color = odd ? oddCol : evenCol;\n                        }\n                    } else {\n                        if (monoColor) {\n                            color = blackCol;\n                        } else if (this.highColorHGRMode) {\n                            color = dcolors[this._buffer[1][base] & 0x0f];\n                        } else if (odd && v2 && v0) {\n                            color = v0 ? dim(evenCol) : evenCol;\n                        } else if (!odd && v0 && v2) {\n                            color = v2 ? dim(oddCol) : oddCol;\n                        } else {\n                            color = blackCol;\n                        }\n                    }\n\n                    if (dx > -1 && dx < 560) {\n                        this._drawPixel(data, offset, color);\n                    }\n                    dx += 2;\n\n                    v0 = v1;\n                    v1 = v2;\n                    v2 = val & 0x01;\n                    odd = !odd;\n                }\n            }\n        }\n    }\n\n    refresh() {\n        this.highColorHGRMode =\n            !this.vm.an3State && this.vm.hiresMode && !this.vm._80colMode;\n        this.oneSixtyMode = this.vm.flag === 1 && this.vm.doubleHiresMode;\n        this.mixedDHRMode = this.vm.flag === 2 && this.vm.doubleHiresMode;\n        this.monoDHRMode = this.vm.flag === 3 && this.vm.doubleHiresMode;\n\n        let addr = 0x2000 * this.page;\n        this._refreshing = true;\n        for (let idx = 0; idx < 0x2000; idx++, addr++) {\n            const page = addr >> 8;\n            const off = addr & 0xff;\n            this._write(page, off, this._buffer[0][idx], 0);\n            if (this.vm._80colMode) {\n                this._write(page, off, this._buffer[1][idx], 1);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    start() {\n        return this._start();\n    }\n\n    end() {\n        return this._end();\n    }\n\n    read(page: byte, off: byte) {\n        return this._read(page, off, 0);\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        return this._write(page, off, val, 0);\n    }\n}\n\nexport class VideoModes2D implements VideoModes {\n    private _grs: LoresPage[] = [];\n    private _hgrs: HiresPage[] = [];\n    private _screenContext: CanvasRenderingContext2D;\n    private _canvas: HTMLCanvasElement;\n    private _left: number;\n    private _top: number;\n    private _refreshFlag: boolean = true;\n\n    public ready = Promise.resolve();\n\n    textMode: boolean;\n    mixedMode: boolean;\n    hiresMode: boolean;\n    pageMode: pageNo;\n    _80colMode: boolean;\n    altCharMode: boolean;\n    an3State: boolean;\n    doubleHiresMode: boolean;\n\n    flag = 0;\n    monoMode = false;\n\n    context: CanvasRenderingContext2D;\n\n    constructor(\n        private screen: HTMLCanvasElement,\n        private e: boolean\n    ) {\n        this._canvas = document.createElement('canvas');\n        const { width, height } = { width: 560, height: 384 };\n        this._canvas.width = width;\n        this._canvas.height = height;\n\n        const context = this._canvas.getContext('2d');\n        const screenContext = this.screen.getContext('2d');\n        if (!context || !screenContext) {\n            throw new Error('No 2d context');\n        }\n        this.context = context;\n\n        this._screenContext = screenContext;\n        this._screenContext.imageSmoothingEnabled = false;\n        this._left = (this.screen.width - 560) / 2;\n        this._top = (this.screen.height - 384) / 2;\n    }\n\n    _refresh() {\n        this.doubleHiresMode =\n            !this.an3State && this.hiresMode && this._80colMode;\n\n        this._refreshFlag = true;\n    }\n\n    refresh() {\n        this._refresh();\n    }\n\n    reset() {\n        this.textMode = true;\n        this.mixedMode = false;\n        this.hiresMode = true;\n        this.pageMode = 1;\n\n        this._80colMode = false;\n        this.altCharMode = false;\n\n        this.flag = 0;\n        this.an3State = true;\n\n        this._refresh();\n    }\n\n    setLoresPage(page: pageNo, lores: LoresPage) {\n        this._grs[page - 1] = lores;\n    }\n\n    setHiresPage(page: pageNo, hires: HiresPage) {\n        this._hgrs[page - 1] = hires;\n    }\n\n    getLoresPage(page: pageNo) {\n        return this._grs[page - 1];\n    }\n\n    getHiresPage(page: pageNo) {\n        return this._hgrs[page - 1];\n    }\n\n    text(on: boolean) {\n        const old = this.textMode;\n        this.textMode = on;\n        if (on) {\n            this.flag = 0;\n        }\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    _80col(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this._80colMode;\n        this._80colMode = on;\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    altChar(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this.altCharMode;\n        this.altCharMode = on;\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    hires(on: boolean) {\n        const old = this.hiresMode;\n        this.hiresMode = on;\n        if (!on) {\n            this.flag = 0;\n        }\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    an3(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this.an3State;\n        this.an3State = on;\n\n        if (on) {\n            this.flag =\n                ((this.flag << 1) | (this._80colMode ? 0x0 : 0x1)) & 0x3;\n        }\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    doubleHires(on: boolean) {\n        this.an3(!on);\n    }\n\n    mixed(on: boolean) {\n        const old = this.mixedMode;\n        this.mixedMode = on;\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    page(pageNo: pageNo) {\n        const old = this.pageMode;\n        this.pageMode = pageNo;\n        if (old !== pageNo) {\n            this._refresh();\n        }\n    }\n\n    isText() {\n        return this.textMode;\n    }\n\n    isMixed() {\n        return this.mixedMode;\n    }\n\n    isPage2() {\n        return this.pageMode === 2;\n    }\n\n    isHires() {\n        return this.hiresMode;\n    }\n\n    isDoubleHires() {\n        return this.doubleHiresMode;\n    }\n\n    is80Col() {\n        return this._80colMode;\n    }\n\n    isAltChar() {\n        return this.altCharMode;\n    }\n\n    buildScreen(mainData: ImageData, mixData?: ImageData | null) {\n        // TODO(whscullin): - figure out 80 column offset\n        const { x, y } = this._80colMode ? { x: 0, y: 0 } : { x: 0, y: 0 };\n\n        if (mixData) {\n            this.context.putImageData(mainData, x, y, 0, 0, 560, 160);\n            this.context.putImageData(mixData, x, y, 0, 160, 560, 32);\n        } else {\n            this.context.putImageData(mainData, x, y);\n        }\n        return this._canvas;\n    }\n\n    updateImage(\n        mainData: ImageData,\n        mainDirty: Region,\n        mixData?: ImageData | null,\n        mixDirty?: Region | null\n    ) {\n        let blitted = false;\n\n        if (mainDirty.bottom !== -1 || (mixDirty && mixDirty.bottom !== -1)) {\n            const imageData = this.buildScreen(mainData, mixData);\n            this._screenContext.drawImage(\n                imageData,\n                0,\n                0,\n                560,\n                192,\n                this._left,\n                this._top,\n                560,\n                384\n            );\n            blitted = true;\n        }\n        return blitted;\n    }\n\n    blit(altData?: ImageData) {\n        let blitted = false;\n        const hgr = this._hgrs[this.pageMode - 1];\n        const gr = this._grs[this.pageMode - 1];\n\n        if (this._refreshFlag) {\n            hgr.refresh();\n            gr.refresh();\n            this._refreshFlag = false;\n        }\n\n        if (altData) {\n            blitted = this.updateImage(altData, {\n                top: 0,\n                left: 0,\n                right: 560,\n                bottom: 192,\n            });\n        } else if (this.hiresMode && !this.textMode) {\n            blitted = this.updateImage(\n                hgr.imageData,\n                hgr.dirty,\n                this.mixedMode ? gr.imageData : null,\n                this.mixedMode ? gr.dirty : null\n            );\n        } else {\n            blitted = this.updateImage(gr.imageData, gr.dirty);\n        }\n        hgr.dirty = { ...notDirty };\n        gr.dirty = { ...notDirty };\n\n        return blitted;\n    }\n\n    getState(): VideoModesState {\n        return {\n            textMode: this.textMode,\n            mixedMode: this.mixedMode,\n            hiresMode: this.hiresMode,\n            pageMode: this.pageMode,\n            _80colMode: this._80colMode,\n            altCharMode: this.altCharMode,\n            an3State: this.an3State,\n            flag: this.flag,\n        };\n    }\n\n    setState(state: VideoModesState) {\n        this.textMode = state.textMode;\n        this.mixedMode = state.mixedMode;\n        this.hiresMode = state.hiresMode;\n        this.pageMode = state.pageMode;\n        this._80colMode = state._80colMode;\n        this.altCharMode = state.altCharMode;\n        this.an3State = state.an3State;\n        this.flag = state.flag;\n\n        this._refresh();\n    }\n\n    mono(on: boolean) {\n        if (on) {\n            this.screen.classList.add('mono');\n        } else {\n            this.screen.classList.remove('mono');\n        }\n        this.monoMode = on;\n        this._refresh();\n    }\n\n    scanlines(on: boolean) {\n        // Can't apply scanline filter to canvas\n        const parent = this.screen.parentElement;\n        if (parent) {\n            if (on) {\n                parent.classList.add('scanlines');\n            } else {\n                parent.classList.remove('scanlines');\n            }\n        }\n    }\n\n    getText() {\n        return this._grs[this.pageMode - 1].getText();\n    }\n\n    async getCanvasAsBlob() {\n        return new Promise<Blob>((resolve, reject) => {\n            this.screen.toBlob((blob) => {\n                if (blob) {\n                    resolve(blob);\n                } else {\n                    reject(new Error('Could not read canvas'));\n                }\n            });\n        });\n    }\n}\n","import { byte, Color, memory, MemoryPages, rom } from './types';\n\nimport { screenEmu } from 'apple2shader';\n\nimport {\n    HiresPage,\n    LoresPage,\n    Region,\n    VideoModes,\n    VideoModesState,\n    bank,\n    pageNo,\n} from './videomodes';\nimport RAM from './ram';\n\n// Color constants\nconst whiteCol: Color = [255, 255, 255];\nconst blackCol: Color = [0, 0, 0];\n\nconst notDirty: Region = {\n    top: 193,\n    bottom: -1,\n    left: 561,\n    right: -1,\n};\n\n/****************************************************************************\n *\n * Text/Lores Graphics\n *\n ***************************************************************************/\n\nexport class LoresPageGL implements LoresPage {\n    // $00-$3F inverse\n    // $40-$7F flashing\n    // $80-$FF normal\n\n    private _buffer: memory[] = [];\n    private _refreshing = false;\n    private _blink = false;\n    private _blinkInterval: ReturnType<typeof setInterval> | undefined;\n\n    dirty: Region = { ...notDirty };\n    imageData: ImageData;\n\n    constructor(\n        private vm: VideoModes,\n        private page: pageNo,\n        private ram: RAM[],\n        private charset: rom,\n        private readonly e: boolean\n    ) {\n        this.imageData = this.vm.context.createImageData(560, 192);\n        this.imageData.data.fill(0xff);\n\n        const start = 0x4 * this.page;\n        const end = start + 0x4;\n        this._buffer[0] = this.ram[0].getBuffer(start, end);\n        this._buffer[1] = this.ram[1]?.getBuffer(start, end);\n\n        this.vm.setLoresPage(page, this);\n    }\n\n    private _drawPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n        data[off + 0] = data[off + 4] = c0;\n        data[off + 1] = data[off + 5] = c1;\n        data[off + 2] = data[off + 6] = c2;\n    }\n\n    private _drawHalfPixel(data: Uint8ClampedArray, off: number, color: Color) {\n        const c0 = color[0],\n            c1 = color[1],\n            c2 = color[2];\n        data[off + 0] = c0;\n        data[off + 1] = c1;\n        data[off + 2] = c2;\n    }\n\n    private _checkInverse(val: byte) {\n        let inverse = false;\n        if (this.e) {\n            if (!this.vm._80colMode && !this.vm.altCharMode) {\n                inverse = (val & 0xc0) === 0x40 && this._blink;\n            }\n        } else {\n            inverse = !(val & 0x80 || (val & 0x40 && this._blink));\n        }\n        return inverse;\n    }\n\n    bank0(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 0),\n            write: (page, off, val) => this._write(page, off, val, 0),\n        };\n    }\n\n    bank1(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 1),\n            write: (page, off, val) => this._write(page, off, val, 1),\n        };\n    }\n\n    // These are used by both bank 0 and 1\n\n    private _start() {\n        return 0x04 * this.page;\n    }\n\n    private _end() {\n        return 0x04 * this.page + 0x03;\n    }\n\n    private _read(page: byte, off: byte, bank: bank) {\n        const addr = (page << 8) | off,\n            base = addr & 0x3ff;\n        return this._buffer[bank][base];\n    }\n\n    private _write(page: byte, off: byte, val: byte, bank: bank) {\n        const addr = (page << 8) | off;\n        const base = addr & 0x3ff;\n        let fore, back;\n\n        if (this._buffer[bank][base] === val && !this._refreshing) {\n            return;\n        }\n        this._buffer[bank][base] = val;\n\n        const col = (base % 0x80) % 0x28;\n        const adj = off - col;\n\n        // 000001cd eabab000 -> 000abcde\n        const ab = adj & 0x18;\n        const cd = (page & 0x03) << 1;\n        const ee = adj >> 7;\n        const row = ab | cd | ee;\n\n        const data = this.imageData.data;\n        if (row < 24 && col < 40) {\n            let y = row << 3;\n            if (y < this.dirty.top) {\n                this.dirty.top = y;\n            }\n            y += 8;\n            if (y > this.dirty.bottom) {\n                this.dirty.bottom = y;\n            }\n            let x = col * 14;\n            if (x < this.dirty.left) {\n                this.dirty.left = x;\n            }\n            x += 14;\n            if (x > this.dirty.right) {\n                this.dirty.right = x;\n            }\n\n            if (\n                this.vm.textMode ||\n                this.vm.hiresMode ||\n                (this.vm.mixedMode && row > 19)\n            ) {\n                if (this.vm._80colMode) {\n                    const inverse = this._checkInverse(val);\n\n                    fore = inverse ? blackCol : whiteCol;\n                    back = inverse ? whiteCol : blackCol;\n\n                    if (!this.vm.altCharMode) {\n                        val = val >= 0x40 && val < 0x80 ? val - 0x40 : val;\n                    }\n\n                    let offset =\n                        (col * 14 + (bank ? 0 : 1) * 7 + row * 560 * 8) * 4;\n\n                    for (let jdx = 0; jdx < 8; jdx++) {\n                        let b = this.charset[val * 8 + jdx];\n                        for (let idx = 0; idx < 7; idx++) {\n                            const color = b & 0x01 ? back : fore;\n                            this._drawHalfPixel(data, offset, color);\n                            b >>= 1;\n                            offset += 4;\n                        }\n                        offset += 553 * 4;\n                    }\n                } else if (bank === 0) {\n                    val = this._buffer[0][base];\n\n                    const inverse = this._checkInverse(val);\n\n                    fore = inverse ? blackCol : whiteCol;\n                    back = inverse ? whiteCol : blackCol;\n\n                    if (!this.vm.altCharMode) {\n                        val = val >= 0x40 && val < 0x80 ? val - 0x40 : val;\n                    }\n\n                    let offset = (col * 14 + row * 560 * 8) * 4;\n\n                    if (this.e) {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let b = this.charset[val * 8 + jdx];\n                            for (let idx = 0; idx < 7; idx++) {\n                                const color = b & 0x01 ? back : fore;\n                                this._drawPixel(data, offset, color);\n                                b >>= 1;\n                                offset += 8;\n                            }\n                            offset += 546 * 4;\n                        }\n                    } else {\n                        for (let jdx = 0; jdx < 8; jdx++) {\n                            let b = this.charset[val * 8 + jdx] << 1;\n\n                            for (let idx = 0; idx < 7; idx++) {\n                                const color = b & 0x80 ? fore : back;\n                                this._drawPixel(data, offset, color);\n                                b <<= 1;\n                                offset += 8;\n                            }\n                            offset += 546 * 4;\n                        }\n                    }\n                }\n            } else {\n                if (this.vm._80colMode && !this.vm.an3State) {\n                    let offset =\n                        (col * 14 + (bank ? 0 : 1) * 7 + row * 560 * 8) * 4;\n                    for (let jdx = 0; jdx < 8; jdx++) {\n                        let b = jdx < 4 ? val & 0x0f : val >> 4;\n                        b |= b << 4;\n                        b |= b << 8;\n                        if (col & 0x1) {\n                            b >>= 2;\n                        }\n                        for (let idx = 0; idx < 7; idx++) {\n                            const color = b & 0x01 ? whiteCol : blackCol;\n                            this._drawHalfPixel(data, offset, color);\n                            b >>= 1;\n                            offset += 4;\n                        }\n                        offset += 553 * 4;\n                    }\n                } else if (bank === 0) {\n                    let offset = (col * 14 + row * 560 * 8) * 4;\n                    for (let jdx = 0; jdx < 8; jdx++) {\n                        let b = jdx < 4 ? val & 0x0f : val >> 4;\n                        b |= b << 4;\n                        b |= b << 8;\n                        if (col & 0x1) {\n                            b >>= 2;\n                        }\n                        for (let idx = 0; idx < 14; idx++) {\n                            const color = b & 0x0001 ? whiteCol : blackCol;\n                            this._drawHalfPixel(data, offset, color);\n                            b >>= 1;\n                            offset += 4;\n                        }\n                        offset += 546 * 4;\n                    }\n                }\n            }\n        }\n    }\n\n    refresh() {\n        let addr = 0x400 * this.page;\n        this._refreshing = true;\n        for (let idx = 0; idx < 0x400; idx++, addr++) {\n            this._write(addr >> 8, addr & 0xff, this._buffer[0][idx], 0);\n            if (this.vm._80colMode) {\n                this._write(addr >> 8, addr & 0xff, this._buffer[1][idx], 1);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    blink() {\n        let addr = 0x400 * this.page;\n        this._refreshing = true;\n        this._blink = !this._blink;\n        for (let idx = 0; idx < 0x400; idx++, addr++) {\n            const b = this._buffer[0][idx];\n            if ((b & 0xc0) === 0x40) {\n                this._write(addr >> 8, addr & 0xff, this._buffer[0][idx], 0);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    start() {\n        if (!this._blinkInterval) {\n            this._blinkInterval = setInterval(() => this.blink(), 267);\n        }\n        return this._start();\n    }\n\n    end() {\n        return this._end();\n    }\n\n    read(page: byte, off: byte) {\n        return this._read(page, off, 0);\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        return this._write(page, off, val, 0);\n    }\n\n    private rowToBase(row: number) {\n        const ab = (row >> 3) & 3;\n        const cd = (row >> 1) & 0x3;\n        const e = row & 1;\n        return (cd << 8) | (e << 7) | (ab << 5) | (ab << 3);\n    }\n\n    private mapCharCode(charCode: byte) {\n        charCode &= 0x7f;\n        if (charCode < 0x20) {\n            charCode += 0x40;\n        }\n        if (!this.e && charCode >= 0x60) {\n            charCode -= 0x40;\n        }\n        return charCode;\n    }\n\n    getText() {\n        let buffer = '',\n            line,\n            charCode;\n        let row, col, base;\n        for (row = 0; row < 24; row++) {\n            base = this.rowToBase(row);\n            line = '';\n            if (this.e && this.vm._80colMode) {\n                for (col = 0; col < 80; col++) {\n                    charCode = this.mapCharCode(\n                        this._buffer[1 - (col % 2)][base + Math.floor(col / 2)]\n                    );\n                    line += String.fromCharCode(charCode);\n                }\n            } else {\n                for (col = 0; col < 40; col++) {\n                    charCode = this.mapCharCode(this._buffer[0][base + col]);\n                    line += String.fromCharCode(charCode);\n                }\n            }\n            line = line.trimRight();\n            buffer += line + '\\n';\n        }\n        return buffer;\n    }\n}\n\n/****************************************************************************\n *\n * Hires Graphics\n *\n ***************************************************************************/\n\nconst _drawPixel = (data: Uint8ClampedArray, off: number, color: Color) => {\n    const c0 = color[0],\n        c1 = color[1],\n        c2 = color[2];\n\n    data[off + 0] = data[off + 4] = c0;\n    data[off + 1] = data[off + 5] = c1;\n    data[off + 2] = data[off + 6] = c2;\n};\n\nconst _drawHalfPixel = (data: Uint8ClampedArray, off: number, color: Color) => {\n    const c0 = color[0],\n        c1 = color[1],\n        c2 = color[2];\n\n    data[off + 0] = c0;\n    data[off + 1] = c1;\n    data[off + 2] = c2;\n};\n\nexport class HiresPageGL implements HiresPage {\n    public imageData: ImageData;\n    dirty: Region = { ...notDirty };\n\n    private _buffer: memory[] = [];\n    private _refreshing = false;\n\n    constructor(\n        private vm: VideoModes,\n        private page: pageNo,\n        private ram: RAM[]\n    ) {\n        this.imageData = this.vm.context.createImageData(560, 192);\n        this.imageData.data.fill(0xff);\n\n        const start = 0x20 * this.page;\n        const end = start + 0x20;\n        this._buffer[0] = this.ram[0].getBuffer(start, end);\n        this._buffer[1] = this.ram[1]?.getBuffer(start, end);\n\n        this.vm.setHiresPage(page, this);\n    }\n\n    bank0(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 0),\n            write: (page, off, val) => this._write(page, off, val, 0),\n        };\n    }\n\n    bank1(): MemoryPages {\n        return {\n            start: () => this._start(),\n            end: () => this._end(),\n            read: (page, off) => this._read(page, off, 1),\n            write: (page, off, val) => this._write(page, off, val, 1),\n        };\n    }\n\n    private _start() {\n        return 0x20 * this.page;\n    }\n\n    private _end() {\n        return 0x020 * this.page + 0x1f;\n    }\n\n    private _read(page: byte, off: byte, bank: bank) {\n        const addr = (page << 8) | off,\n            base = addr & 0x1fff;\n        return this._buffer[bank][base];\n    }\n\n    private _write(page: byte, off: byte, val: byte, bank: bank) {\n        const addr = (page << 8) | off;\n        const base = addr & 0x1fff;\n\n        if (this._buffer[bank][base] === val && !this._refreshing) {\n            return;\n        }\n        this._buffer[bank][base] = val;\n\n        const col = (base % 0x80) % 0x28;\n        const adj = off - col;\n\n        // 000001cd eabab000 -> 000abcde\n        const ab = adj & 0x18;\n        const cd = (page & 0x03) << 1;\n        const e = adj >> 7;\n\n        const rowa = ab | cd | e,\n            rowb = base >> 10;\n\n        const data = this.imageData.data;\n        if (rowa < 24 && col < 40 && this.vm.hiresMode) {\n            let y = (rowa << 3) | rowb;\n            if (y < this.dirty.top) {\n                this.dirty.top = y;\n            }\n            y += 1;\n            if (y > this.dirty.bottom) {\n                this.dirty.bottom = y;\n            }\n            let x = col * 14 - 2;\n            if (x < this.dirty.left) {\n                this.dirty.left = x;\n            }\n            x += 14;\n            if (x > this.dirty.right) {\n                this.dirty.right = x;\n            }\n\n            const dy = (rowa << 3) | rowb;\n            if (this.vm.doubleHiresMode) {\n                const dx = col * 14 + (bank ? 0 : 7);\n                let offset = dx * 4 + dy * 280 * 4 * 2;\n\n                let bits = val;\n                for (let jdx = 0; jdx < 7; jdx++, offset += 4) {\n                    if (bits & 0x01) {\n                        _drawHalfPixel(data, offset, whiteCol);\n                    } else {\n                        _drawHalfPixel(data, offset, blackCol);\n                    }\n                    bits >>= 1;\n                }\n            } else if (bank === 0) {\n                const hbs = val & 0x80;\n                const lastCol = col === 39;\n                const cropLastPixel = hbs && lastCol;\n                const dx = col * 14;\n                let offset = dx * 4 + dy * 560 * 4;\n                if (hbs) {\n                    const val0 = this._buffer[bank][base - 1] || 0;\n                    if (val0 & 0x40) {\n                        _drawHalfPixel(data, offset, whiteCol);\n                    } else {\n                        _drawHalfPixel(data, offset, blackCol);\n                    }\n                    offset += 4;\n                }\n                let bits = val;\n                for (let idx = 0; idx < 7; idx++, offset += 8) {\n                    const drawPixel =\n                        cropLastPixel && idx === 6\n                            ? _drawHalfPixel\n                            : _drawPixel;\n                    if (bits & 0x01) {\n                        drawPixel(data, offset, whiteCol);\n                    } else {\n                        drawPixel(data, offset, blackCol);\n                    }\n                    bits >>= 1;\n                }\n                if (!this._refreshing) {\n                    this._refreshing = true;\n                    const after = addr + 1;\n                    this._write(\n                        after >> 8,\n                        after & 0xff,\n                        this._buffer[0][after & 0x1fff],\n                        0\n                    );\n                    this._refreshing = false;\n                }\n            }\n        }\n    }\n\n    refresh() {\n        let addr = 0x2000 * this.page;\n        this._refreshing = true;\n        for (let idx = 0; idx < 0x2000; idx++, addr++) {\n            const page = addr >> 8;\n            const off = addr & 0xff;\n            this._write(page, off, this._buffer[0][idx], 0);\n            if (this.vm._80colMode) {\n                this._write(page, off, this._buffer[1][idx], 1);\n            }\n        }\n        this._refreshing = false;\n    }\n\n    start() {\n        return this._start();\n    }\n\n    end() {\n        return this._end();\n    }\n\n    read(page: byte, off: byte) {\n        return this._read(page, off, 0);\n    }\n\n    write(page: byte, off: byte, val: byte) {\n        return this._write(page, off, val, 0);\n    }\n}\n\nexport class VideoModesGL implements VideoModes {\n    private _grs: LoresPage[] = [];\n    private _hgrs: HiresPage[] = [];\n    private _sv: screenEmu.ScreenView;\n    private _displayConfig: screenEmu.DisplayConfiguration;\n    private _scanlines: boolean = false;\n    private _refreshFlag: boolean = true;\n    private _canvas: HTMLCanvasElement;\n\n    public ready: Promise<void>;\n\n    public textMode: boolean;\n    public mixedMode: boolean;\n    public hiresMode: boolean;\n    public pageMode: pageNo;\n    public _80colMode: boolean;\n    public altCharMode: boolean;\n    public an3State: boolean;\n    public doubleHiresMode: boolean;\n\n    public flag = 0;\n    public monoMode: boolean = false;\n\n    public context: CanvasRenderingContext2D;\n\n    constructor(\n        private screen: HTMLCanvasElement,\n        private e: boolean\n    ) {\n        this._canvas = document.createElement('canvas');\n        const context = this._canvas.getContext('2d', {\n            willReadFrequently: true,\n        });\n        if (!context) {\n            throw new Error('no 2d context');\n        }\n        const { width, height } = screenEmu.C.NTSC_DETAILS.imageSize;\n        this._canvas.width = width;\n        this._canvas.height = height;\n        this.context = context;\n        this._sv = new screenEmu.ScreenView(this.screen);\n\n        this.ready = this.init();\n    }\n\n    async init() {\n        await this._sv.initOpenGL();\n\n        this._displayConfig = this.defaultMonitor();\n        this._sv.displayConfiguration = this._displayConfig;\n    }\n\n    private defaultMonitor(): screenEmu.DisplayConfiguration {\n        const config = new screenEmu.DisplayConfiguration();\n        config.displayResolution = new screenEmu.Size(\n            this.screen.width,\n            this.screen.height\n        );\n        config.displayScanlineLevel = 0.5;\n        config.videoWhiteOnly = true;\n        config.videoSaturation = 0.8;\n        config.videoSize = new screenEmu.Size(1.25, 1.15);\n        config.videoCenter = new screenEmu.Point(0.01, 0.02);\n        // config.videoDecoder = 'CANVAS_CXA2025AS';\n        return config;\n    }\n\n    private monitorII(): screenEmu.DisplayConfiguration {\n        // Values taken from openemulator/libemulation/res/library/Monitors/Apple Monitor II.xml\n        const config = new screenEmu.DisplayConfiguration();\n        config.displayResolution = new screenEmu.Size(\n            this.screen.width,\n            this.screen.height\n        );\n        config.videoDecoder = 'CANVAS_MONOCHROME';\n        config.videoBrightness = 0.15;\n        config.videoContrast = 0.8;\n        config.videoSaturation = 1.45;\n        config.videoHue = 0.27;\n        config.videoCenter = new screenEmu.Point(0.01, 0.02);\n        config.videoSize = new screenEmu.Size(1.25, 1.15);\n        config.videoBandwidth = 9000000;\n        config.displayBarrel = 0.1;\n        config.displayScanlineLevel = 0.5;\n        config.displayCenterLighting = 0.5;\n        config.displayLuminanceGain = 1.5;\n        return config;\n    }\n\n    private _refresh() {\n        this.doubleHiresMode =\n            !this.an3State && this.hiresMode && this._80colMode;\n\n        this._refreshFlag = true;\n\n        if (this._displayConfig) {\n            this._displayConfig.videoWhiteOnly = this.textMode || this.monoMode;\n            this._displayConfig.displayScanlineLevel = this._scanlines\n                ? 0.5\n                : 0;\n            this._sv.displayConfiguration = this._displayConfig;\n        }\n    }\n\n    refresh() {\n        this._refresh();\n    }\n\n    reset() {\n        this.textMode = true;\n        this.mixedMode = false;\n        this.hiresMode = true;\n        this.pageMode = 1;\n\n        this._80colMode = false;\n        this.altCharMode = false;\n\n        this.an3State = true;\n\n        this._refresh();\n    }\n\n    setLoresPage(page: pageNo, lores: LoresPage) {\n        this._grs[page - 1] = lores;\n    }\n\n    setHiresPage(page: pageNo, hires: HiresPage) {\n        this._hgrs[page - 1] = hires;\n    }\n\n    getLoresPage(page: pageNo) {\n        return this._grs[page - 1];\n    }\n\n    getHiresPage(page: pageNo) {\n        return this._hgrs[page - 1];\n    }\n\n    text(on: boolean) {\n        const old = this.textMode;\n        this.textMode = on;\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    _80col(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this._80colMode;\n        this._80colMode = on;\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    altChar(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this.altCharMode;\n        this.altCharMode = on;\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    hires(on: boolean) {\n        const old = this.hiresMode;\n        this.hiresMode = on;\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    an3(on: boolean) {\n        if (!this.e) {\n            return;\n        }\n\n        const old = this.an3State;\n        this.an3State = on;\n\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    doubleHires(on: boolean) {\n        this.an3(!on);\n    }\n\n    mixed(on: boolean) {\n        const old = this.mixedMode;\n        this.mixedMode = on;\n        if (old !== on) {\n            this._refresh();\n        }\n    }\n\n    page(pageNo: pageNo) {\n        const old = this.pageMode;\n        this.pageMode = pageNo;\n        if (old !== pageNo) {\n            this._refresh();\n        }\n    }\n\n    isText() {\n        return this.textMode;\n    }\n\n    isMixed() {\n        return this.mixedMode;\n    }\n\n    isPage2() {\n        return this.pageMode === 2;\n    }\n\n    isHires() {\n        return this.hiresMode;\n    }\n\n    isDoubleHires() {\n        return this.doubleHiresMode;\n    }\n\n    is80Col() {\n        return this._80colMode;\n    }\n\n    isAltChar() {\n        return this.altCharMode;\n    }\n\n    updateImage(\n        mainData: ImageData,\n        mainDirty: Region,\n        mixData?: ImageData | null,\n        mixDirty?: Region | null\n    ) {\n        let blitted = false;\n        if (mainDirty.bottom !== -1 || (mixDirty && mixDirty.bottom !== -1)) {\n            const imageData = this.buildScreen(mainData, mixData);\n            const imageInfo = new screenEmu.ImageInfo(imageData);\n            this._sv.image = imageInfo;\n            blitted = true;\n        }\n        this._sv.vsync();\n        return blitted;\n    }\n\n    buildScreen(mainData: ImageData, mixData?: ImageData | null) {\n        const details = screenEmu.C.NTSC_DETAILS;\n        const { width, height } = details.imageSize;\n        const { x, y } = this._80colMode\n            ? details.topLeft80Col\n            : details.topLeft;\n\n        if (mixData) {\n            this.context.putImageData(mainData, x, y, 0, 0, 560, 160);\n            this.context.putImageData(mixData, x, y, 0, 160, 560, 32);\n        } else {\n            this.context.putImageData(mainData, x, y);\n        }\n        return this.context.getImageData(0, 0, width, height);\n    }\n\n    blit(altData?: ImageData) {\n        let blitted = false;\n        const hgr = this._hgrs[this.pageMode - 1];\n        const gr = this._grs[this.pageMode - 1];\n\n        if (this._refreshFlag) {\n            const { width, height } = screenEmu.C.NTSC_DETAILS.imageSize;\n            this.context.clearRect(0, 0, width, height);\n            hgr.refresh();\n            gr.refresh();\n            this._refreshFlag = false;\n        }\n\n        if (altData) {\n            blitted = this.updateImage(altData, {\n                top: 0,\n                left: 0,\n                right: 560,\n                bottom: 192,\n            });\n        } else if (this.hiresMode && !this.textMode) {\n            blitted = this.updateImage(\n                hgr.imageData,\n                hgr.dirty,\n                this.mixedMode ? gr.imageData : null,\n                this.mixedMode ? gr.dirty : null\n            );\n        } else {\n            blitted = this.updateImage(gr.imageData, gr.dirty);\n        }\n        hgr.dirty = { ...notDirty };\n        gr.dirty = { ...notDirty };\n\n        return blitted;\n    }\n\n    getState(): VideoModesState {\n        return {\n            textMode: this.textMode,\n            mixedMode: this.mixedMode,\n            hiresMode: this.hiresMode,\n            pageMode: this.pageMode,\n            _80colMode: this._80colMode,\n            altCharMode: this.altCharMode,\n            an3State: this.an3State,\n            flag: 0,\n        };\n    }\n\n    setState(state: VideoModesState) {\n        this.textMode = state.textMode;\n        this.mixedMode = state.mixedMode;\n        this.hiresMode = state.hiresMode;\n        this.pageMode = state.pageMode;\n        this._80colMode = state._80colMode;\n        this.altCharMode = state.altCharMode;\n        this.an3State = state.an3State;\n\n        this._refresh();\n    }\n\n    mono(on: boolean) {\n        this.monoMode = on;\n        this._displayConfig = on ? this.monitorII() : this.defaultMonitor();\n        this._refresh();\n    }\n\n    scanlines(on: boolean) {\n        this._scanlines = on;\n        this._refresh();\n    }\n\n    getText() {\n        return this._grs[this.pageMode - 1].getText();\n    }\n\n    async getCanvasAsBlob() {\n        return new Promise<Blob>((resolve, reject) => {\n            this.screen.toBlob((blob) => {\n                if (blob) {\n                    resolve(blob);\n                } else {\n                    reject(new Error('Could not read canvas'));\n                }\n            });\n        });\n    }\n}\n","import { CPU6502, MemoryPages } from '@whscullin/cpu6502';\nimport RAM, { RAMState } from './ram';\nimport ROM, { ROMState } from './roms/rom';\nimport { debug } from './util';\nimport { byte, Memory, Restorable } from './types';\nimport Apple2IO from './apple2io';\nimport { HiresPage, LoresPage, VideoModes } from './videomodes';\n\n/*\n * I/O Switch locations\n */\nconst LOC = {\n    // 80 Column memory\n    _80STOREOFF: 0x00,\n    _80STOREON: 0x01,\n\n    // Aux RAM\n    RAMRDOFF: 0x02,\n    RAMRDON: 0x03,\n\n    RAMWROFF: 0x04,\n    RAMWRON: 0x05,\n\n    // Bank switched ROM\n    INTCXROMOFF: 0x06,\n    INTCXROMON: 0x07,\n    ALTZPOFF: 0x08,\n    ALTZPON: 0x09,\n    SLOTC3ROMOFF: 0x0a,\n    SLOTC3ROMON: 0x0b,\n\n    // 80 Column video\n    CLR80VID: 0x0c, // clear 80 column mode\n    SET80VID: 0x0d, // set 80 column mode\n    CLRALTCH: 0x0e, // clear mousetext\n    SETALTCH: 0x0f, // set mousetext\n\n    // Status\n    BSRBANK2: 0x11,\n    BSRREADRAM: 0x12,\n    RAMRD: 0x13,\n    RAMWRT: 0x14,\n    INTCXROM: 0x15,\n    ALTZP: 0x16,\n    SLOTC3ROM: 0x17,\n    _80STORE: 0x18,\n    VERTBLANK: 0x19,\n\n    RDTEXT: 0x1a, // using text mode\n    RDMIXED: 0x1b, // using mixed mode\n    RDPAGE2: 0x1c, // using text/graphics page2\n    RDHIRES: 0x1d, // using Hi-res graphics mode\n    RDALTCH: 0x1e, // using alternate character set\n    RD80VID: 0x1f, // using 80-column display mode\n\n    // Graphics\n    PAGE1: 0x54, // select text/graphics page1 main/aux\n    PAGE2: 0x55, // select text/graphics page2 main/aux\n    RESET_HIRES: 0x56,\n    SET_HIRES: 0x57,\n\n    DHIRESON: 0x5e, // Enable double hires (CLRAN3)\n    DHIRESOFF: 0x5f, // Disable double hires (SETAN3)\n\n    // Misc\n    BANK: 0x73, // Back switched RAM card bank\n\n    IOUDISON: 0x7e, // W IOU Disable on / R7 IOU Disable\n    IOUDISOFF: 0x7f, // W IOU Disable off / R7 Double Hires\n\n    // Language Card\n\n    // Bank 2\n    READBSR2: 0x80,\n    WRITEBSR2: 0x81,\n    OFFBSR2: 0x82,\n    READWRBSR2: 0x83,\n\n    // Bank 1\n    READBSR1: 0x88,\n    WRITEBSR1: 0x89,\n    OFFBSR1: 0x8a,\n    READWRBSR1: 0x8b,\n};\n\nclass Switches implements Memory {\n    constructor(private mmu: MMU) {}\n\n    read(_page: byte, off: byte) {\n        return this.mmu._access(off) || 0;\n    }\n\n    write(_page: byte, off: byte, val: byte) {\n        this.mmu._access(off, val);\n    }\n}\n\nclass AuxRom implements Memory {\n    constructor(\n        private readonly mmu: MMU,\n        private readonly rom: ROM\n    ) {}\n\n    _access(page: byte, off: byte) {\n        if (page === 0xc3) {\n            this.mmu._setIntc8rom(true);\n            this.mmu._updateBanks();\n        }\n        if (page === 0xcf && off === 0xff) {\n            this.mmu._setIntc8rom(false);\n            this.mmu._updateBanks();\n        }\n    }\n\n    read(page: byte, off: byte) {\n        this._access(page, off);\n        return this.rom.read(page, off);\n    }\n\n    write(page: byte, off: byte, _val: byte) {\n        this._access(page, off);\n    }\n}\n\nexport interface MMUState {\n    bank1: boolean;\n    readbsr: boolean;\n    writebsr: boolean;\n    prewrite: boolean;\n\n    intcxrom: boolean;\n    slot3rom: boolean;\n    intc8rom: boolean;\n\n    auxRamRead: boolean;\n    auxRamWrite: boolean;\n    altzp: boolean;\n\n    _80store: boolean;\n    page2: boolean;\n    hires: boolean;\n\n    mem00_BF: [RAMState, RAMState];\n    memD0_DF: [ROMState, RAMState, RAMState, RAMState, RAMState];\n    memE0_FF: [ROMState, RAMState, RAMState];\n}\n\nexport default class MMU implements Memory, Restorable<MMUState> {\n    private _readPages = new Array<Memory>(0x100);\n    private _writePages = new Array<Memory>(0x100);\n    private _pages: Memory[][] = [\n        new Array<Memory>(0x100),\n        new Array<Memory>(0x100),\n        new Array<Memory>(0x100),\n        new Array<Memory>(0x100),\n        new Array<Memory>(0x100),\n    ];\n\n    // Language Card RAM Softswitches\n    private _bank1: boolean;\n    private _readbsr: boolean;\n    private _writebsr: boolean;\n    private _prewrite: boolean;\n\n    // Auxillary ROM\n    private _intcxrom: boolean;\n    private _slot3rom: boolean;\n    private _intc8rom: boolean;\n\n    // Auxillary RAM\n    private _auxRamRead: boolean;\n    private _auxRamWrite: boolean;\n    private _altzp: boolean;\n\n    // Video\n    private __80store: boolean;\n    private _page2: boolean;\n    private _hires: boolean;\n\n    private _iouDisable: boolean;\n\n    private _vbEnd = 0;\n\n    private switches = new Switches(this);\n    private auxRom = new AuxRom(this, this.rom);\n\n    // These fields represent the bank-switched memory ranges.\n    private mem00_01: [MemoryPages, MemoryPages];\n    private mem02_03: [MemoryPages, MemoryPages];\n    private mem04_07: [MemoryPages, MemoryPages];\n    private mem08_0B: [MemoryPages, MemoryPages];\n    private mem0C_1F: [MemoryPages, MemoryPages];\n    private mem20_3F: [MemoryPages, MemoryPages];\n    private mem40_5F: [MemoryPages, MemoryPages];\n    private mem60_BF: [MemoryPages, MemoryPages];\n    private memC0_C0 = [this.switches];\n    private memC1_CF = [this.io, this.auxRom];\n    private memD0_DF: [ROM, RAM, RAM, RAM, RAM] = [\n        this.rom,\n        new RAM(0xd0, 0xdf),\n        new RAM(0xd0, 0xdf),\n        new RAM(0xd0, 0xdf),\n        new RAM(0xd0, 0xdf),\n    ];\n    private memE0_FF: [ROM, RAM, RAM] = [\n        this.rom,\n        new RAM(0xe0, 0xff),\n        new RAM(0xe0, 0xff),\n    ];\n\n    constructor(\n        private readonly cpu: CPU6502,\n        private readonly vm: VideoModes,\n        private readonly lores1: LoresPage,\n        private readonly lores2: LoresPage,\n        private readonly hires1: HiresPage,\n        private readonly hires2: HiresPage,\n        private readonly io: Apple2IO,\n        private readonly ram: RAM[],\n        private readonly rom: ROM\n    ) {\n        this.mem00_01 = [this.ram[0], this.ram[1]];\n        this.mem02_03 = [this.ram[0], this.ram[1]];\n        this.mem04_07 = [this.lores1.bank0(), this.lores1.bank1()];\n        this.mem08_0B = [this.lores2.bank0(), this.lores2.bank1()];\n        this.mem0C_1F = [this.ram[0], this.ram[1]];\n        this.mem20_3F = [this.hires1.bank0(), this.hires1.bank1()];\n        this.mem40_5F = [this.hires2.bank0(), this.hires2.bank1()];\n        this.mem60_BF = [this.ram[0], this.ram[1]];\n\n        /*\n         * Initialize read/write banks\n         */\n\n        // Zero Page/Stack\n        for (let idx = 0x0; idx < 0x2; idx++) {\n            this._pages[0][idx] = this.mem00_01[0];\n            this._pages[1][idx] = this.mem00_01[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // 0x300-0x400\n        for (let idx = 0x2; idx < 0x4; idx++) {\n            this._pages[0][idx] = this.mem02_03[0];\n            this._pages[1][idx] = this.mem02_03[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Text Page 1\n        for (let idx = 0x4; idx < 0x8; idx++) {\n            this._pages[0][idx] = this.mem04_07[0];\n            this._pages[1][idx] = this.mem04_07[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Text Page 2\n        for (let idx = 0x8; idx < 0xc; idx++) {\n            this._pages[0][idx] = this.mem08_0B[0];\n            this._pages[1][idx] = this.mem08_0B[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // 0xC00-0x2000\n        for (let idx = 0xc; idx < 0x20; idx++) {\n            this._pages[0][idx] = this.mem0C_1F[0];\n            this._pages[1][idx] = this.mem0C_1F[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Hires Page 1\n        for (let idx = 0x20; idx < 0x40; idx++) {\n            this._pages[0][idx] = this.mem20_3F[0];\n            this._pages[1][idx] = this.mem20_3F[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Hires Page 2\n        for (let idx = 0x40; idx < 0x60; idx++) {\n            this._pages[0][idx] = this.mem40_5F[0];\n            this._pages[1][idx] = this.mem40_5F[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // 0x6000-0xc000\n        for (let idx = 0x60; idx < 0xc0; idx++) {\n            this._pages[0][idx] = this.mem60_BF[0];\n            this._pages[1][idx] = this.mem60_BF[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // I/O Switches\n        {\n            const idx = 0xc0;\n            this._pages[0][idx] = this.memC0_C0[0];\n            this._pages[1][idx] = this.memC0_C0[0];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Slots\n        for (let idx = 0xc1; idx < 0xd0; idx++) {\n            this._pages[0][idx] = this.memC1_CF[0];\n            this._pages[1][idx] = this.memC1_CF[1];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Basic ROM\n        for (let idx = 0xd0; idx < 0xe0; idx++) {\n            this._pages[0][idx] = this.memD0_DF[0];\n            this._pages[1][idx] = this.memD0_DF[1];\n            this._pages[2][idx] = this.memD0_DF[2];\n            this._pages[3][idx] = this.memD0_DF[3];\n            this._pages[4][idx] = this.memD0_DF[4];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n        // Monitor ROM\n        for (let idx = 0xe0; idx < 0x100; idx++) {\n            this._pages[0][idx] = this.memE0_FF[0];\n            this._pages[1][idx] = this.memE0_FF[1];\n            this._pages[2][idx] = this.memE0_FF[2];\n            this._readPages[idx] = this._pages[0][idx];\n            this._writePages[idx] = this._pages[0][idx];\n        }\n    }\n\n    private _initSwitches() {\n        this._bank1 = false;\n        this._readbsr = false;\n        this._writebsr = false;\n        this._prewrite = false;\n\n        this._auxRamRead = false;\n        this._auxRamWrite = false;\n        this._altzp = false;\n\n        this._intcxrom = false;\n        this._slot3rom = false;\n        this._intc8rom = false;\n\n        this.__80store = false;\n        this._page2 = false;\n        this._hires = false;\n\n        this._iouDisable = true;\n    }\n\n    private _debug(..._args: unknown[]) {\n        // debug.apply(this, _args);\n    }\n\n    _setIntc8rom(on: boolean) {\n        this._intc8rom = on;\n    }\n\n    _updateBanks() {\n        let readPages: Memory[];\n        let writePages: Memory[];\n\n        readPages = this._auxRamRead ? this._pages[1] : this._pages[0];\n        writePages = this._auxRamWrite ? this._pages[1] : this._pages[0];\n\n        this._readPages = readPages.slice();\n        this._writePages = writePages.slice();\n\n        if (this.__80store) {\n            readPages = this._page2 ? this._pages[1] : this._pages[0];\n            writePages = this._page2 ? this._pages[1] : this._pages[0];\n            for (let idx = 0x4; idx < 0x8; idx++) {\n                this._readPages[idx] = readPages[idx];\n                this._writePages[idx] = writePages[idx];\n            }\n            if (this._hires) {\n                for (let idx = 0x20; idx < 0x40; idx++) {\n                    this._readPages[idx] = readPages[idx];\n                    this._writePages[idx] = writePages[idx];\n                }\n            }\n        }\n\n        if (this._intcxrom) {\n            readPages = this._pages[1];\n            writePages = this._pages[1];\n            for (let idx = 0xc1; idx < 0xd0; idx++) {\n                this._readPages[idx] = readPages[idx];\n                this._writePages[idx] = writePages[idx];\n            }\n        } else {\n            readPages = this._pages[0];\n            writePages = this._pages[0];\n            for (let idx = 0xc1; idx < 0xd0; idx++) {\n                this._readPages[idx] = readPages[idx];\n                this._writePages[idx] = writePages[idx];\n            }\n            if (!this._slot3rom) {\n                readPages = this._pages[1];\n                writePages = this._pages[1];\n                this._readPages[0xc3] = readPages[0xc3];\n                this._writePages[0xc3] = writePages[0xc3];\n            }\n            if (this._intc8rom) {\n                readPages = this._pages[1];\n                writePages = this._pages[1];\n                for (let idx = 0xc8; idx < 0xd0; idx++) {\n                    this._readPages[idx] = readPages[idx];\n                    this._writePages[idx] = readPages[idx];\n                }\n            }\n        }\n\n        readPages = this._altzp ? this._pages[1] : this._pages[0];\n        writePages = this._altzp ? this._pages[1] : this._pages[0];\n        for (let idx = 0x0; idx < 0x2; idx++) {\n            this._readPages[idx] = readPages[idx];\n            this._writePages[idx] = writePages[idx];\n        }\n\n        if (this._readbsr) {\n            readPages = this._bank1\n                ? this._altzp\n                    ? this._pages[2]\n                    : this._pages[1]\n                : this._altzp\n                  ? this._pages[4]\n                  : this._pages[3];\n            for (let idx = 0xd0; idx < 0xe0; idx++) {\n                this._readPages[idx] = readPages[idx];\n            }\n            readPages = this._altzp ? this._pages[2] : this._pages[1];\n            for (let idx = 0xe0; idx < 0x100; idx++) {\n                this._readPages[idx] = readPages[idx];\n            }\n        } else {\n            readPages = this._pages[0];\n            for (let idx = 0xd0; idx < 0x100; idx++) {\n                this._readPages[idx] = readPages[idx];\n            }\n        }\n\n        if (this._writebsr) {\n            writePages = this._bank1\n                ? this._altzp\n                    ? this._pages[2]\n                    : this._pages[1]\n                : this._altzp\n                  ? this._pages[4]\n                  : this._pages[3];\n\n            for (let idx = 0xd0; idx < 0xe0; idx++) {\n                this._writePages[idx] = writePages[idx];\n            }\n            writePages = this._altzp ? this._pages[2] : this._pages[1];\n            for (let idx = 0xe0; idx < 0x100; idx++) {\n                this._writePages[idx] = writePages[idx];\n            }\n        } else {\n            writePages = this._pages[0];\n            for (let idx = 0xd0; idx < 0x100; idx++) {\n                this._writePages[idx] = writePages[idx];\n            }\n        }\n    }\n\n    // Apple //e memory management\n\n    private _accessMMUSet(off: byte, _val?: byte) {\n        switch (off) {\n            case LOC._80STOREOFF:\n                this.__80store = false;\n                this._debug('80 Store Off', _val);\n                this.vm.page(this._page2 ? 2 : 1);\n                break;\n            case LOC._80STOREON:\n                this.__80store = true;\n                this._debug('80 Store On', _val);\n                break;\n            case LOC.RAMRDOFF:\n                this._auxRamRead = false;\n                this._debug('Aux RAM Read Off');\n                break;\n            case LOC.RAMRDON:\n                this._auxRamRead = true;\n                this._debug('Aux RAM Read On');\n                break;\n            case LOC.RAMWROFF:\n                this._auxRamWrite = false;\n                this._debug('Aux RAM Write Off');\n                break;\n            case LOC.RAMWRON:\n                this._auxRamWrite = true;\n                this._debug('Aux RAM Write On');\n                break;\n\n            case LOC.INTCXROMOFF:\n                this._intcxrom = false;\n                if (this._slot3rom) {\n                    this._intc8rom = false;\n                }\n                this._debug('Int CX ROM Off');\n                break;\n            case LOC.INTCXROMON:\n                this._intcxrom = true;\n                this._debug('Int CX ROM On');\n                break;\n            case LOC.ALTZPOFF: // 0x08\n                this._altzp = false;\n                this._debug('Alt ZP Off');\n                break;\n            case LOC.ALTZPON: // 0x09\n                this._altzp = true;\n                this._debug('Alt ZP On');\n                break;\n            case LOC.SLOTC3ROMOFF: // 0x0A\n                this._slot3rom = false;\n                this._debug('Slot 3 ROM Off');\n                break;\n            case LOC.SLOTC3ROMON: // 0x0B\n                this._slot3rom = true;\n                this._debug('Slot 3 ROM On');\n                break;\n\n            // Graphics Switches\n\n            case LOC.CLR80VID:\n                this._debug('80 Column Mode off');\n                this.vm._80col(false);\n                break;\n            case LOC.SET80VID:\n                this._debug('80 Column Mode on');\n                this.vm._80col(true);\n                break;\n            case LOC.CLRALTCH:\n                this._debug('Alt Char off');\n                this.vm.altChar(false);\n                break;\n            case LOC.SETALTCH:\n                this._debug('Alt Char on');\n                this.vm.altChar(true);\n                break;\n        }\n        this._updateBanks();\n    }\n\n    // Status registers\n\n    private _accessStatus(off: byte, val?: byte) {\n        let result = undefined;\n\n        switch (off) {\n            case LOC.BSRBANK2:\n                this._debug(`Bank 2 Read ${!this._bank1 ? 'true' : 'false'}`);\n                result = !this._bank1 ? 0x80 : 0x00;\n                break;\n            case LOC.BSRREADRAM:\n                this._debug(\n                    `Bank SW RAM Read ${this._readbsr ? 'true' : 'false'}`\n                );\n                result = this._readbsr ? 0x80 : 0x00;\n                break;\n            case LOC.RAMRD: // 0xC013\n                this._debug(\n                    `Aux RAM Read ${this._auxRamRead ? 'true' : 'false'}`\n                );\n                result = this._auxRamRead ? 0x80 : 0x0;\n                break;\n            case LOC.RAMWRT: // 0xC014\n                this._debug(\n                    `Aux RAM Write ${this._auxRamWrite ? 'true' : 'false'}`\n                );\n                result = this._auxRamWrite ? 0x80 : 0x0;\n                break;\n            case LOC.INTCXROM: // 0xC015\n                // _debug('Int CX ROM ' + _intcxrom);\n                result = this._intcxrom ? 0x80 : 0x00;\n                break;\n            case LOC.ALTZP: // 0xC016\n                this._debug(`Alt ZP ${this._altzp ? 'true' : 'false'}`);\n                result = this._altzp ? 0x80 : 0x0;\n                break;\n            case LOC.SLOTC3ROM: // 0xC017\n                this._debug(`Slot C3 ROM ${this._slot3rom ? 'true' : 'false'}`);\n                result = this._slot3rom ? 0x80 : 0x00;\n                break;\n            case LOC._80STORE: // 0xC018\n                this._debug(`80 Store ${this.__80store ? 'true' : 'false'}`);\n                result = this.__80store ? 0x80 : 0x00;\n                break;\n            case LOC.VERTBLANK: // 0xC019\n                // result = cpu.getCycles() % 20 < 5 ? 0x80 : 0x00;\n                result = this.cpu.getCycles() < this._vbEnd ? 0x80 : 0x00;\n                break;\n            case LOC.RDTEXT:\n                result = this.vm.isText() ? 0x80 : 0x0;\n                break;\n            case LOC.RDMIXED:\n                result = this.vm.isMixed() ? 0x80 : 0x0;\n                break;\n            case LOC.RDPAGE2:\n                result = this._page2 ? 0x80 : 0x0;\n                break;\n            case LOC.RDHIRES:\n                result = this.vm.isHires() ? 0x80 : 0x0;\n                break;\n            case LOC.RD80VID:\n                result = this.vm.is80Col() ? 0x80 : 0x0;\n                break;\n            case LOC.RDALTCH:\n                result = this.vm.isAltChar() ? 0x80 : 0x0;\n                break;\n            default:\n                result = this.io.ioSwitch(off, val);\n        }\n\n        return result;\n    }\n\n    private _accessIOUDisable(off: byte, val?: byte) {\n        const writeMode = val !== undefined;\n        let result;\n\n        switch (off) {\n            case LOC.IOUDISON:\n                if (writeMode) {\n                    this._iouDisable = true;\n                } else {\n                    result = this._iouDisable ? 0x00 : 0x80;\n                }\n                break;\n\n            case LOC.IOUDISOFF:\n                if (writeMode) {\n                    this._iouDisable = false;\n                } else {\n                    result = this.vm.isDoubleHires() ? 0x80 : 0x00;\n                }\n                break;\n\n            default:\n                result = this.io.ioSwitch(off, val);\n        }\n\n        return result;\n    }\n\n    private _accessGraphics(off: byte, val?: byte) {\n        let result: byte | undefined = 0;\n\n        switch (off) {\n            case LOC.PAGE1:\n                this._page2 = false;\n                if (!this.__80store) {\n                    result = this.io.ioSwitch(off, val);\n                }\n                this._debug('Page 2 off');\n                break;\n\n            case LOC.PAGE2:\n                this._page2 = true;\n                if (!this.__80store) {\n                    result = this.io.ioSwitch(off, val);\n                }\n                this._debug('Page 2 on');\n                break;\n\n            case LOC.RESET_HIRES:\n                this._hires = false;\n                result = this.io.ioSwitch(off, val);\n                this._debug('Hires off');\n                break;\n\n            case LOC.DHIRESON:\n                if (this._iouDisable) {\n                    this.vm.doubleHires(true);\n                } else {\n                    result = this.io.ioSwitch(off, val); // an3\n                }\n                break;\n\n            case LOC.DHIRESOFF:\n                if (this._iouDisable) {\n                    this.vm.doubleHires(false);\n                } else {\n                    result = this.io.ioSwitch(off, val); // an3\n                }\n                break;\n\n            case LOC.SET_HIRES:\n                this._hires = true;\n                result = this.io.ioSwitch(off, val);\n                this._debug('Hires on');\n                break;\n\n            default:\n                result = this.io.ioSwitch(off, val);\n                break;\n        }\n        this._updateBanks();\n\n        return result;\n    }\n\n    private _accessLangCard(off: byte, val?: byte) {\n        const readMode = val === undefined;\n        const result = readMode ? 0 : undefined;\n\n        const writeSwitch = off & 0x01;\n        const offSwitch = off & 0x02;\n        const bank1Switch = off & 0x08;\n\n        let bankStr;\n        let rwStr;\n\n        if (writeSwitch) {\n            // 0xC081, 0xC083\n            if (readMode) {\n                if (this._prewrite) {\n                    this._writebsr = true;\n                }\n            }\n            this._prewrite = readMode;\n\n            if (offSwitch) {\n                // 0xC08B\n                this._readbsr = true;\n                rwStr = 'Read/Write';\n            } else {\n                this._readbsr = false;\n                rwStr = 'Write';\n            }\n        } else {\n            // 0xC080, 0xC082\n            this._writebsr = false;\n            this._prewrite = false;\n\n            if (offSwitch) {\n                // 0xC082\n                this._readbsr = false;\n                rwStr = 'Off';\n            } else {\n                // 0xC080\n                this._readbsr = true;\n                rwStr = 'Read';\n            }\n        }\n\n        if (bank1Switch) {\n            this._bank1 = true;\n            bankStr = 'Bank 1';\n        } else {\n            this._bank1 = false;\n            bankStr = 'Bank 2';\n        }\n\n        this._debug(bankStr, rwStr);\n        this._updateBanks();\n\n        return result;\n    }\n\n    /*\n     * The Big Switch\n     */\n\n    _access(off: byte, val?: byte) {\n        let result;\n        const writeMode = val !== undefined;\n        const highNibble = off >> 4;\n\n        switch (highNibble) {\n            case 0x0:\n                if (writeMode) {\n                    this._accessMMUSet(off, val);\n                } else {\n                    result = this.io.ioSwitch(off);\n                }\n                break;\n\n            case 0x1:\n                if (writeMode) {\n                    this.io.ioSwitch(off, val);\n                } else {\n                    result = this._accessStatus(off, val);\n                }\n                break;\n\n            case 0x5:\n                result = this._accessGraphics(off, val);\n                break;\n\n            case 0x7:\n                result = this._accessIOUDisable(off, val);\n                break;\n\n            case 0x8:\n                result = this._accessLangCard(off, val);\n                break;\n\n            default:\n                result = this.io.ioSwitch(off, val);\n        }\n\n        return result;\n    }\n\n    public start() {\n        return 0x00;\n    }\n\n    public end() {\n        return 0xff;\n    }\n\n    public reset() {\n        debug('reset');\n        this._initSwitches();\n        this._updateBanks();\n        this.vm.reset();\n        this.io.reset();\n    }\n\n    public read(page: byte, off: byte) {\n        return this._readPages[page].read(page, off);\n    }\n\n    public write(page: byte, off: byte, val: byte) {\n        this._writePages[page].write(page, off, val);\n    }\n\n    public writeBank(bank: number, page: byte, off: byte, val: byte) {\n        this._pages[page][bank].write(page, off, val);\n    }\n\n    public resetVB() {\n        this._vbEnd = this.cpu.getCycles() + 1000;\n    }\n\n    public get bank1() {\n        return this._bank1;\n    }\n\n    public get readbsr() {\n        return this._readbsr;\n    }\n\n    public get writebsr() {\n        return this._writebsr;\n    }\n\n    public get auxread() {\n        return this._auxRamRead;\n    }\n\n    public get auxwrite() {\n        return this._auxRamWrite;\n    }\n\n    public get altzp() {\n        return this._altzp;\n    }\n\n    public get _80store() {\n        return this.__80store;\n    }\n\n    public get page2() {\n        return this._page2;\n    }\n\n    public get hires() {\n        return this._hires;\n    }\n\n    public get intcxrom() {\n        return this._intcxrom;\n    }\n\n    public getState(): MMUState {\n        return {\n            bank1: this._bank1,\n            readbsr: this._readbsr,\n            writebsr: this._writebsr,\n            prewrite: this._prewrite,\n\n            intcxrom: this._intcxrom,\n            slot3rom: this._slot3rom,\n            intc8rom: this._intc8rom,\n\n            auxRamRead: this._auxRamRead,\n            auxRamWrite: this._auxRamWrite,\n            altzp: this._altzp,\n\n            _80store: this.__80store,\n            page2: this._page2,\n            hires: this._hires,\n\n            mem00_BF: [this.ram[0].getState(), this.ram[1].getState()],\n            memD0_DF: [\n                this.memD0_DF[0].getState(),\n                this.memD0_DF[1].getState(),\n                this.memD0_DF[2].getState(),\n                this.memD0_DF[3].getState(),\n                this.memD0_DF[4].getState(),\n            ],\n            memE0_FF: [\n                this.memE0_FF[0].getState(),\n                this.memE0_FF[1].getState(),\n                this.memE0_FF[2].getState(),\n            ],\n        };\n    }\n\n    public setState(state: MMUState) {\n        this._readbsr = state.readbsr;\n        this._writebsr = state.writebsr;\n        this._bank1 = state.bank1;\n        this._prewrite = state.prewrite;\n\n        this._intcxrom = state.intcxrom;\n        this._slot3rom = state.slot3rom;\n        this._intc8rom = state.intc8rom;\n\n        this._auxRamRead = state.auxRamRead;\n        this._auxRamWrite = state.auxRamWrite;\n        this._altzp = state.altzp;\n\n        this.__80store = state._80store;\n        this._page2 = state.page2;\n        this._hires = state.hires;\n\n        this.ram[0].setState(state.mem00_BF[0]);\n        this.ram[1].setState(state.mem00_BF[1]);\n        this.memD0_DF[0].setState(state.memD0_DF[0]);\n        this.memD0_DF[1].setState(state.memD0_DF[1]);\n        this.memD0_DF[2].setState(state.memD0_DF[2]);\n        this.memD0_DF[3].setState(state.memD0_DF[3]);\n        this.memD0_DF[4].setState(state.memD0_DF[4]);\n        this.memE0_FF[0].setState(state.memE0_FF[0]);\n        this.memE0_FF[1].setState(state.memE0_FF[1]);\n        this.memE0_FF[2].setState(state.memE0_FF[2]);\n\n        this._updateBanks();\n    }\n}\n","const SYMBOLS = {\n    /*\n    0x00: 'GOWARM',\n    0x03: 'GOSTROUT',\n    0x0A: 'USR',\n    0x0D: 'CHARAC',\n    0x0E: 'ENDCHR',\n    0x0F: 'TKN.CNTR',\n    0x0F: 'EOL.PNTR',\n    0x0F: 'NUMDIM',\n    0x10: 'DIMFLG',\n    0x11: 'VALTYP',\n    0x13: 'DATAFLG',\n    0x13: 'GARFLG',\n    0x14: 'SUBFLG',\n    0x15: 'INPUTFLG',\n    0x16: 'CPRMASK',\n    0x16: 'SIGNFLG',\n    0x1A: 'HGR.SHAPE',\n    0x1C: 'HGR.BITS',\n    0x1D: 'HGR.COUNT',\n    0x24: 'MON.CH',\n    0x26: 'MON.GBASL',\n    0x27: 'MON.GBASH',\n    0x2C: 'MON.H2',\n    0x2D: 'MON.V2',\n    0x30: 'MON.HMASK',\n    0x32: 'MON.INVFLG',\n    0x33: 'MON.PROMPT',\n    0x3C: 'MON.A1L',\n    0x3D: 'MON.A1H',\n    0x3E: 'MON.A2L',\n    0x3F: 'MON.A2H',\n    0x50: 'LINNUM',\n    0x52: 'TEMPPT',\n    0x53: 'LASTPT',\n    0x55: 'TEMPST',\n    0x5E: 'INDEX',\n    0x60: 'DEST',\n    0x62: 'RESULT',\n    0x67: 'TXTTAB',\n    0x69: 'VARTAB',\n    0x6B: 'ARYTAB',\n    0x6D: 'STREND',\n    0x6F: 'FRETOP',\n    0x71: 'FRESPC',\n    0x73: 'MEMSIZ',\n    0x75: 'CURLIN',\n    0x77: 'OLDLIN',\n    0x79: 'OLDTEXT',\n    0x7B: 'DATLIN',\n    0x7D: 'DATPTR',\n    0x7F: 'INPTR',\n    0x81: 'VARNAM',\n    0x83: 'VARPNT',\n    0x85: 'FORPNT',\n    0x87: 'TXPSV',\n    0x87: 'LASTOP',\n    0x89: 'CPRTYP',\n    0x8A: 'TEMP3',\n    0x8A: 'FNCNAM',\n    0x8C: 'DSCPTR',\n    0x8F: 'DSCLEN',\n    0x90: 'JMPADRS',\n    0x91: 'LENGTH',\n    0x92: 'ARG.EXTENSION',\n    0x93: 'TEMP1',\n    0x94: 'ARYPNT',\n    0x94: 'HIGHDS',\n    0x96: 'HIGHTR',\n    0x98: 'TEMP2',\n    0x99: 'TMPEXP',\n    0x99: 'INDX',\n    0x9A: 'EXPON',\n    0x9B: 'DPFLG',\n    0x9B: 'LOWTR',\n    0x9C: 'EXPSGN',\n    0x9D: 'FAC',\n    0x9D: 'DSCTMP',\n    0xA0: 'VPNT',\n    0xA2: 'FAC.SIGN',\n    0xA3: 'SERLEN',\n    0xA4: 'SHIFT.SIGN.EXT',\n    0xA5: 'ARG',\n    0xAA: 'ARG.SIGN',\n    0xAB: 'SGNCPR',\n    0xAC: 'FAC.EXTENSION',\n    0xAD: 'SERPNT',\n    0xAB: 'STRNG1',\n    0xAD: 'STRNG2',\n    0xAF: 'PRGEND',\n    0xB1: 'CHRGET',\n    0xB7: 'CHRGOT',\n    0xB8: 'TXTPTR',\n    0xC9: 'RNDSEED',\n    0xD0: 'HGR.DX',\n    0xD2: 'HGR.DY',\n    0xD3: 'HGR.QUADRANT',\n    0xD4: 'HGR.E',\n    0xD6: 'LOCK',\n    0xD8: 'ERRFLG',\n    0xDA: 'ERRLIN',\n    0xDC: 'ERRPOS',\n    0xDE: 'ERRNUM',\n    0xDF: 'ERRSTK',\n    0xE0: 'HGR.X',\n    0xE2: 'HGR.Y',\n    0xE4: 'HGR.COLOR',\n    0xE5: 'HGR.HORIZ',\n    0xE6: 'HGR.PAGE',\n    0xE7: 'HGR.SCALE',\n    0xE8: 'HGR.SHAPE.PNTR',\n    0xEA: 'HGR.COLLISIONS',\n    0xF0: 'FIRST',\n    0xF1: 'SPEEDZ',\n    0xF2: 'TRCFLG',\n    0xF3: 'FLASH.BIT',\n    0xF4: 'TXTPSV',\n    0xF6: 'CURLSV',\n    0xF8: 'REMSTK',\n    0xF9: 'HGR.ROTATION',\n    0x0100: 'STACK',\n    0x0200: 'INPUT.BUFFER',\n    0x03F5: 'AMPERSAND.VECTOR',\n*/\n    0xc000: 'KEYBOARD',\n    0xc001: '80STOREON',\n    0xc002: 'RAMRDOFF',\n    0xc003: 'RAMRDON',\n    0xc004: 'RAMWROFF',\n    0xc005: 'RAMWRON',\n    0xc006: 'INTCXOFF',\n    0xc007: 'INTCXON',\n    0xc008: 'ALTZPOFF',\n    0xc009: 'ALTZPON',\n    0xc00a: 'SLOT3OFF',\n    0xc00b: 'SLOT3ON',\n    0xc00c: 'CLR80VID',\n    0xc00d: 'SET80VID',\n    0xc00e: 'CLRALTCH',\n    0xc00f: 'SETALTCH',\n    0xc010: 'STROBE',\n    0xc011: 'BSRBANK2',\n    0xc012: 'BSRREAD',\n    0xc013: 'RAMRD',\n    0xc014: 'RAMWRT',\n    0xc015: 'INTCXROM',\n    0xc016: 'ALTZP',\n    0xc017: 'SLOT3ROM',\n    0xc018: '80STRORE',\n    0xc019: 'VERTBLANK',\n    0xc01a: 'RDTEXT',\n    0xc01b: 'RDMIXED',\n    0xc01c: 'RDPAGE2',\n    0xc01d: 'RDHIRES',\n    0xc01e: 'RDALTCH',\n    0xc01f: 'RD80VID',\n    0xc020: 'TAPEOUT',\n    0xc030: 'SPEAKER',\n    0xc050: 'CLRTEXT',\n    0xc051: 'SETTEXT',\n    0xc052: 'CLRMIXED',\n    0xc053: 'SETMIXED',\n    0xc054: 'PAGE1',\n    0xc055: 'PAGE2',\n    0xc056: 'CLRHIRS',\n    0xc057: 'SETHIRES',\n    0xc058: 'CLRAN0',\n    0xc059: 'SETAN0',\n    0xc05a: 'CLRAN1',\n    0xc05b: 'SETAN1',\n    0xc05c: 'CLRAN2',\n    0xc05d: 'SETAN2',\n    0xc05e: 'CLRAN3',\n    0xc05f: 'SETAN3',\n    0xc060: 'TAPEIN',\n    0xc061: 'PB0',\n    0xc062: 'PB1',\n    0xc063: 'PB2',\n    0xc064: 'PADDLE0',\n    0xc065: 'PADDLE1',\n    0xc066: 'PADDLE2',\n    0xc067: 'PADDLE3',\n    0xc070: 'PDLTRIG',\n    0xc07e: 'SETIOUDIS',\n    0xc07f: 'CLRIOUDIS',\n    0xc080: 'RDBSR2',\n    0xc081: 'WRBSR2',\n    0xc082: 'OFFBSR2',\n    0xc083: 'RWBSR2',\n    0xc084: 'RDBSR2',\n    0xc085: 'WRBSR2',\n    0xc086: 'OFFBSR2',\n    0xc087: 'RWBSR2',\n    0xc088: 'RDBSR1',\n    0xc089: 'WRBSR1',\n    0xc08a: 'OFFBSR1',\n    0xc08b: 'RWBSR1',\n    0xc08c: 'RDBSR1',\n    0xc08d: 'WRBSR1',\n    0xc08e: 'OFFBSR1',\n    0xc08f: 'RWBSR1',\n    0xd000: 'TOKEN.ADDRESS.TABLE',\n    0xd080: 'UNFNC',\n    0xd0b2: 'MATHTBL',\n    0xd0c7: 'M.NEG',\n    0xd0ca: 'M.EQU',\n    0xd0cd: 'M.REL',\n    0xd0d0: 'TOKEN.NAME.TABLE',\n    0xd260: 'ERROR.MESSAGES',\n    0xd350: 'QT.ERROR',\n    0xd358: 'QT.IN',\n    0xd35d: 'QT.BREAK',\n    0xd365: 'GTFORPNT',\n    0xd393: 'BLTU',\n    0xd39a: 'BLTU2',\n    0xd3d6: 'CHKMEM',\n    0xd3e3: 'REASON',\n    0xd410: 'MEMERR',\n    0xd412: 'ERROR',\n    0xd431: 'PRINT.ERROR.LINNUM',\n    0xd43c: 'RESTART',\n    0xd45c: 'NUMBERED.LINE',\n    0xd4b5: 'PUT.NEW.LINE',\n    0xd4f2: 'FIX.LINKS',\n    0xd52c: 'INLIN',\n    0xd52e: 'INLIN2',\n    0xd553: 'INCHR',\n    0xd559: 'PARSE.INPUT.LINE',\n    0xd56c: 'PARSE',\n    0xd61a: 'FNDLIN',\n    0xd61e: 'FL1',\n    0xd648: 'RTS.1',\n    0xd649: 'NEW',\n    0xd64b: 'SCRTCH',\n    0xd665: 'SETPTRS',\n    0xd66a: 'CLEAR',\n    0xd66c: 'CLEARC',\n    0xd683: 'STKINI',\n    0xd696: 'RTS.2',\n    0xd697: 'STXTPT',\n    0xd6a5: 'LIST',\n    0xd6da: 'LIST.0',\n    0xd6fe: 'LIST.1',\n    0xd702: 'LIST.2',\n    0xd724: 'LIST.3',\n    0xd72c: 'GETCHR',\n    0xd734: 'LIST.4',\n    0xd766: 'FOR',\n    0xd7af: 'STEP',\n    0xd7d2: 'NEWSTT',\n    0xd805: 'TRACE.',\n    0xd826: 'GOEND',\n    0xd828: 'EXECUTE.STATEMENT',\n    0xd82a: 'EXECUTE.STATEMENT.1',\n    0xd842: 'COLON.',\n    0xd846: 'SYNERR.1',\n    0xd849: 'RESTORE',\n    0xd853: 'SETDA',\n    0xd857: 'RTS.3',\n    0xd858: 'ISCNTC',\n    0xd863: 'CONTROL.C.TYPED',\n    0xd86e: 'STOP',\n    0xd870: 'END',\n    0xd871: 'END2',\n    0xd88a: 'END4',\n    0xd896: 'CONT',\n    0xd8af: 'RTS.4',\n    0xd8b0: 'SAVE',\n    0xd8c9: 'LOAD',\n    0xd8f0: 'VARTIO',\n    0xd901: 'PROGIO',\n    0xd912: 'RUN',\n    0xd921: 'GOSUB',\n    0xd935: 'GO.TO.LINE',\n    0xd93e: 'GOTO',\n    0xd96a: 'RTS.5',\n    0xd96b: 'POP',\n    0xd97c: 'UNDERR',\n    0xd981: 'SYNERR.2',\n    0xd984: 'RETURN',\n    0xd995: 'DATA',\n    0xd998: 'ADDON',\n    0xd9a2: 'RTS.6',\n    0xd9a3: 'DATAN',\n    0xd9a6: 'REMN',\n    0xd9c5: 'PULL3',\n    0xd9c9: 'IF',\n    0xd9dc: 'REM',\n    0xd9e1: 'IF.TRUE',\n    0xd9ec: 'ONGOTO',\n    0xd9f4: 'ON.1',\n    0xd9f8: 'ON.2',\n    0xda0b: 'RTS.7',\n    0xda0c: 'LINGET',\n    0xda46: 'LET',\n    0xda63: 'LET2',\n    0xda7a: 'LET.STRING',\n    0xda7b: 'PUTSTR',\n    0xdacf: 'PR.STRING',\n    0xdad5: 'PRINT',\n    0xdad7: 'PRINT2',\n    0xdafb: 'CRDO',\n    0xdb00: 'NEGATE',\n    0xdb02: 'RTS.8',\n    0xdb03: 'PR.COMMA',\n    0xdb16: 'PR.TAB.OR.SPC',\n    0xdb2c: 'NXSPC',\n    0xdb2f: 'PR.NEXT.CHAR',\n    0xdb35: 'DOSPC',\n    0xdb3a: 'STROUT',\n    0xdb3d: 'STRPRT',\n    0xdb57: 'OUTSP',\n    0xdb5a: 'OUTQUES',\n    0xdb5c: 'OUTDO',\n    0xdb71: 'INPUTERR',\n    0xdb7b: 'READERR',\n    0xdb7f: 'ERLIN',\n    0xdb86: 'INPERR',\n    0xdb87: 'RESPERR',\n    0xdba0: 'GET',\n    0xdbb2: 'INPUT',\n    0xdbdc: 'NXIN',\n    0xdbe2: 'READ',\n    0xdbe9: 'INPUT.FLAG.ZERO',\n    0xdbeb: 'PROCESS.INPUT.LIST',\n    0xdbf1: 'PROCESS.INPUT.ITEM',\n    0xdc2b: 'INSTART',\n    0xdc69: 'INPUT.DATA',\n    0xdc72: 'INPUT.MORE',\n    0xdc99: 'INPFIN',\n    0xdca0: 'FINDATA',\n    0xdcc6: 'INPDONE',\n    0xdcdf: 'ERR.EXTRA',\n    0xdcef: 'ERR.REENTRY',\n    0xdcf9: 'NEXT',\n    0xdcff: 'NEXT.1',\n    0xdd02: 'NEXT.2',\n    0xdd0d: 'GERR',\n    0xdd0f: 'NEXT.3',\n    0xdd67: 'FRMNUM',\n    0xdd6a: 'CHKNUM',\n    0xdd6c: 'CHKSTR',\n    0xdd6d: 'CHKVAL',\n    0xdd78: 'JERROR',\n    0xdd7b: 'FRMEVL',\n    0xdd86: 'FRMEVL.1',\n    0xdd95: 'FRMEVL.2',\n    0xddcd: 'FRM.PRECEDENCE.TEST',\n    0xddd6: 'NXOP',\n    0xddd7: 'SAVOP',\n    0xdde4: 'FRM.RELATIONAL',\n    0xddf6: 'PREFNC',\n    0xddfd: 'FRM.RECURSE',\n    0xde0d: 'SNTXERR',\n    0xde10: 'FRM.STACK.1',\n    0xde15: 'FRM.STACK.2',\n    0xde20: 'FRM.STACK.3',\n    0xde35: 'NOTMATH',\n    0xde38: 'GOEX',\n    0xde3a: 'FRM.PERFORM.1',\n    0xde43: 'FRM.PERFORM.2',\n    0xde5d: 'EXIT',\n    0xde60: 'FRM.ELEMENT',\n    0xde81: 'STRTXT',\n    0xde90: 'NOT.',\n    0xde98: 'EQUOP',\n    0xdea4: 'FN.',\n    0xdeab: 'SGN.',\n    0xdeb2: 'PARCHK',\n    0xdeb8: 'CHKCLS',\n    0xdebb: 'CHKOPN',\n    0xdebe: 'CHKCOM',\n    0xdec0: 'SYNCHR',\n    0xdec9: 'SYNERR',\n    0xdece: 'MIN',\n    0xded0: 'EQUL',\n    0xded5: 'FRM.VARIABLE',\n    0xded7: 'FRM.VARIABLE.CALL',\n    0xdef9: 'SCREEN',\n    0xdf0c: 'UNARY',\n    0xdf4f: 'OR',\n    0xdf55: 'AND',\n    0xdf5d: 'FALSE',\n    0xdf60: 'TRUE',\n    0xdf65: 'RELOPS',\n    0xdf7d: 'STRCMP',\n    0xdfaa: 'STRCMP.1',\n    0xdfb0: 'NUMCMP',\n    0xdfb5: 'STRCMP.2',\n    0xdfc1: 'CMPDONE',\n    0xdfcd: 'PDL',\n    0xdfd6: 'NXDIM',\n    0xdfd9: 'DIM',\n    0xdfe3: 'PTRGET',\n    0xdfe8: 'PTRGET2',\n    0xdfea: 'PTRGET3',\n    0xdff4: 'BADNAM',\n    0xdff7: 'NAMOK',\n    0xe007: 'PTRGET4',\n    0xe07d: 'ISLETC',\n    0xe087: 'NAME.NOT.FOUND',\n    0xe09a: 'C.ZERO',\n    0xe09c: 'MAKE.NEW.VARIABLE',\n    0xe0de: 'SET.VARPNT.AND.YA',\n    0xe0ed: 'GETARY',\n    0xe0ef: 'GETARY2',\n    0xe0fe: 'NEG32768',\n    0xe102: 'MAKINT',\n    0xe108: 'MKINT',\n    0xe10c: 'AYINT',\n    0xe119: 'MI1',\n    0xe11b: 'MI2',\n    0xe11e: 'ARRAY',\n    0xe196: 'SUBERR',\n    0xe199: 'IQERR',\n    0xe19b: 'JER',\n    0xe19e: 'USE.OLD.ARRAY',\n    0xe1b8: 'MAKE.NEW.ARRAY',\n    0xe24b: 'FIND.ARRAY.ELEMENT',\n    0xe253: 'FAE.1',\n    0xe269: 'GSE',\n    0xe26c: 'GME',\n    0xe26f: 'FAE.2',\n    0xe270: 'FAE.3',\n    0xe2ac: 'RTS.9',\n    0xe2ad: 'MULTIPLY.SUBSCRIPT',\n    0xe2b6: 'MULTIPLY.SUBS.1',\n    0xe2de: 'FRE',\n    0xe2f2: 'GIVAYF',\n    0xe2ff: 'POS',\n    0xe301: 'SNGFLT',\n    0xe306: 'ERRDIR',\n    0xe30e: 'UNDFNC',\n    0xe313: 'DEF',\n    0xe341: 'FNC.',\n    0xe354: 'FUNCT',\n    0xe3af: 'FNCDATA',\n    0xe3c5: 'STR',\n    0xe3d5: 'STRINI',\n    0xe3dd: 'STRSPA',\n    0xe3e7: 'STRLIT',\n    0xe3ed: 'STRLT2',\n    0xe42a: 'PUTNEW',\n    0xe432: 'JERR',\n    0xe435: 'PUTEMP',\n    0xe452: 'GETSPA',\n    0xe484: 'GARBAG',\n    0xe488: 'FIND.HIGHEST.STRING',\n    0xe519: 'CHECK.SIMPLE.VARIABLE',\n    0xe523: 'CHECK.VARIABLE',\n    0xe552: 'CHECK.BUMP',\n    0xe55d: 'CHECK.EXIT',\n    0xe562: 'MOVE.HIGHEST.STRING.TO.TOP',\n    0xe597: 'CAT',\n    0xe5d4: 'MOVINS',\n    0xe5e2: 'MOVSTR',\n    0xe5e6: 'MOVSTR.1',\n    0xe5fd: 'FRESTR',\n    0xe600: 'FREFAC',\n    0xe604: 'FRETMP',\n    0xe635: 'FRETMS',\n    0xe646: 'CHRSTR',\n    0xe65a: 'LEFTSTR',\n    0xe660: 'SUBSTRING.1',\n    0xe667: 'SUBSTRING.2',\n    0xe668: 'SUBSTRING.3',\n    0xe686: 'RIGHTSTR',\n    0xe691: 'MIDSTR',\n    0xe6b9: 'SUBSTRING.SETUP',\n    0xe6d6: 'LEN',\n    0xe6dc: 'GETSTR',\n    0xe6e5: 'ASC',\n    0xe6f2: 'GOIQ',\n    0xe6f5: 'GTBYTC',\n    0xe6f8: 'GETBYT',\n    0xe6fb: 'CONINT',\n    0xe707: 'VAL',\n    0xe73d: 'POINT',\n    0xe746: 'GTNUM',\n    0xe74c: 'COMBYTE',\n    0xe752: 'GETADR',\n    0xe764: 'PEEK',\n    0xe77b: 'POKE',\n    0xe784: 'WAIT',\n    0xe79f: 'RTS.10',\n    0xe7a0: 'FADDH',\n    0xe7a7: 'FSUB',\n    0xe7aa: 'FSUBT',\n    0xe7b9: 'FADD.1',\n    0xe7be: 'FADD',\n    0xe7c1: 'FADDT',\n    0xe7ce: 'FADD.2',\n    0xe7fa: 'FADD.3',\n    0xe829: 'NORMALIZE.FAC.1',\n    0xe82e: 'NORMALIZE.FAC.2',\n    0xe84e: 'ZERO.FAC',\n    0xe850: 'STA.IN.FAC.SIGN.AND.EXP',\n    0xe852: 'STA.IN.FAC.SIGN',\n    0xe855: 'FADD.4',\n    0xe874: 'NORMALIZE.FAC.3',\n    0xe880: 'NORMALIZE.FAC.4',\n    0xe88d: 'NORMALIZE.FAC.5',\n    0xe88f: 'NORMALIZE.FAC.6',\n    0xe89d: 'RTS.11',\n    0xe89e: 'COMPLEMENT.FAC',\n    0xe8a4: 'COMPLEMENT.FAC.MANTISSA',\n    0xe8c6: 'INCREMENT.FAC.MANTISSA',\n    0xe8d4: 'RTS.12',\n    0xe8d5: 'OVERFLOW',\n    0xe8da: 'SHIFT.RIGHT.1',\n    0xe8dc: 'SHIFT.RIGHT.2',\n    0xe8f0: 'SHIFT.RIGHT',\n    0xe8fd: 'L',\n    // 0xE8FD: 'SHIFT.RIGHT.3',\n    0xe907: 'SHIFT.RIGHT.4',\n    0xe911: 'SHIFT.RIGHT.5',\n    0xe913: 'CON.ONE',\n    0xe918: 'POLY.LOG',\n    0xe92d: 'CON.SQR.HALF',\n    0xe932: 'CON.SQR.TWO',\n    0xe937: 'CON.NEG.HALF',\n    0xe93c: 'CON.LOG.TWO',\n    0xe941: 'LOG',\n    0xe948: 'GIQ',\n    0xe94b: 'LOG.2',\n    0xe97f: 'FMULT',\n    0xe982: 'FMULTT',\n    0xe9b0: 'MULTIPLY.1',\n    0xe9b5: 'MULTIPLY.2',\n    0xe9e2: 'RTS.13',\n    0xe9e3: 'LOAD.ARG.FROM.YA',\n    0xea0e: 'ADD.EXPONENTS',\n    0xea10: 'ADD.EXPONENTS.1',\n    0xea2b: 'OUTOFRNG',\n    0xea31: 'ZERO',\n    0xea36: 'JOV',\n    0xea39: 'MUL10',\n    0xea50: 'CON.TEN',\n    0xea55: 'DIV10',\n    0xea5e: 'DIV',\n    0xea66: 'FDIV',\n    0xea69: 'FDIVT',\n    0xeae6: 'COPY.RESULT.INTO.FAC',\n    0xeaf9: 'LOAD.FAC.FROM.YA',\n    0xeb1e: 'STORE.FAC.IN.TEMP2.ROUNDED',\n    0xeb21: 'STORE.FAC.IN.TEMP1.ROUNDED',\n    0xeb27: 'SETFOR',\n    0xeb2b: 'STORE.FAC.AT.YX.ROUNDED',\n    0xeb53: 'COPY.ARG.TO.FAC',\n    0xeb55: 'MFA',\n    0xeb63: 'COPY.FAC.TO.ARG.ROUNDED',\n    0xeb66: 'MAF',\n    0xeb71: 'RTS.14',\n    0xeb72: 'ROUND.FAC',\n    0xeb7a: 'INCREMENT.MANTISSA',\n    0xeb82: 'SIGN',\n    0xeb86: 'SIGN1',\n    0xeb88: 'SIGN2',\n    0xeb8f: 'RTS.15',\n    0xeb90: 'SGN',\n    0xeb93: 'FLOAT',\n    0xeb9b: 'FLOAT.1',\n    0xeba0: 'FLOAT.2',\n    0xebaf: 'ABS',\n    0xebb2: 'FCOMP',\n    0xebb4: 'FCOMP2',\n    0xebf2: 'QINT',\n    0xec11: 'RTS.16',\n    0xec12: 'QINT.2',\n    0xec23: 'INT',\n    0xec40: 'QINT.3',\n    0xec49: 'RTS.17',\n    0xec4a: 'FIN',\n    0xec61: 'FIN.1',\n    0xec64: 'FIN.2',\n    0xec66: 'FIN.3',\n    0xec87: 'FIN.4',\n    0xec8a: 'FIN.5',\n    0xec8c: 'FIN.6',\n    0xec98: 'FIN.10',\n    0xec9e: 'FIN.7',\n    0xeca0: 'FIN.8',\n    0xecc1: 'FIN.9',\n    0xecd5: 'ADDACC',\n    0xece8: 'GETEXP',\n    0xed0a: 'CON.99999999.9',\n    0xed0f: 'CON.999999999',\n    0xed14: 'CON.BILLION',\n    0xed19: 'INPRT',\n    0xed24: 'LINPRT',\n    0xed2e: 'PRINT.FAC',\n    0xed31: 'GO.STROUT',\n    0xed34: 'FOUT',\n    0xed36: 'FOUT.1',\n    0xed8c: 'FOUT.2',\n    0xee17: 'FOUT.3',\n    0xee57: 'FOUT.4',\n    0xee5a: 'FOUT.5',\n    0xee5f: 'FOUT.6',\n    0xee64: 'CON.HALF',\n    0xee69: 'DECTBL',\n    // 0xEE8D: 'DECTBL.END',\n    0xee8d: 'SQR',\n    0xee97: 'FPWRT',\n    0xeed0: 'NEGOP',\n    0xeeda: 'RTS.18',\n    0xeedb: 'CON.LOG.E',\n    0xeee0: 'POLY.EXP',\n    0xef09: 'EXP',\n    0xef5c: 'POLYNOMIAL.ODD',\n    0xef72: 'POLYNOMIAL',\n    0xef76: 'SERMAIN',\n    0xefa5: 'RTS.19',\n    0xefa6: 'CON.RND.1',\n    0xefaa: 'CON.RND.2',\n    0xefae: 'RND',\n    0xefe7: 'GO.MOVMF',\n    0xefea: 'COS',\n    0xeff1: 'SIN',\n    0xf023: 'SIN.1',\n    0xf026: 'SIN.2',\n    0xf03a: 'TAN',\n    0xf062: 'TAN.1',\n    0xf066: 'CON.PI.HALF',\n    0xf06b: 'CON.PI.DOUB',\n    0xf070: 'QUARTER',\n    0xf075: 'POLY.SIN',\n    0xf09e: 'ATN',\n    0xf0cd: 'RTS.20',\n    0xf0ce: 'POLY.ATN',\n    0xf10b: 'GENERIC.CHRGET',\n    0xf128: 'COLD.START',\n    // 0xF128: 'GENERIC.END',\n    0xf1d5: 'CALL',\n    0xf1de: 'IN.NUMBER',\n    0xf1e5: 'PR.NUMBER',\n    0xf1ec: 'PLOTFNS',\n    0xf206: 'GOERR',\n    0xf209: 'LINCOOR',\n    0xf225: 'PLOT',\n    0xf232: 'HLIN',\n    0xf241: 'VLIN',\n    0xf24f: 'COLOR',\n    0xf256: 'VTAB',\n    0xf262: 'SPEED',\n    0xf26d: 'TRACE',\n    0xf26f: 'NOTRACE',\n    0xf273: 'NORMAL',\n    0xf277: 'INVERSE',\n    0xf279: 'N.I.',\n    0xf27b: 'N.I.F.',\n    0xf280: 'FLASH',\n    0xf286: 'HIMEM',\n    0xf296: 'JMM',\n    0xf299: 'SETHI',\n    0xf2a6: 'LOMEM',\n    0xf2cb: 'ONERR',\n    0xf2e9: 'HANDLERR',\n    0xf318: 'RESUME',\n    0xf32e: 'JSYN',\n    0xf331: 'DEL',\n    0xf390: 'GR',\n    0xf399: 'TEXT',\n    0xf39f: 'STORE',\n    0xf3bc: 'RECALL',\n    0xf3d8: 'HGR2',\n    0xf3e2: 'HGR',\n    0xf3ea: 'SETHPG',\n    0xf3f2: 'HCLR',\n    0xf3f6: 'BKGND',\n    0xf411: 'HPOSN',\n    0xf457: 'HPLOT0',\n    0xf465: 'MOVE.LEFT.OR.RIGHT',\n    0xf46e: 'LR.1',\n    0xf471: 'LR.2',\n    0xf476: 'LR.3',\n    0xf478: 'LR.4',\n    0xf47e: 'COLOR.SHIFT',\n    0xf48a: 'MOVE.RIGHT',\n    0xf49c: 'LRUDX1',\n    0xf49d: 'LRUDX2',\n    0xf4b3: 'LRUD1',\n    0xf4b4: 'LRUD2',\n    0xf4c4: 'LRUD3',\n    0xf4c8: 'LRUD4',\n    0xf4cd: 'CON.03',\n    0xf4d3: 'MOVE.UP.OR.DOWN',\n    0xf501: 'UD.1',\n    0xf505: 'MOVE.DOWN',\n    0xf508: 'CON.04',\n    0xf530: 'HLINRL',\n    0xf53a: 'HGLIN',\n    0xf57c: 'MOVEX',\n    0xf581: 'MOVEX2',\n    0xf5b2: 'MSKTBL',\n    0xf5b9: 'CON.1C',\n    0xf5ba: 'COSINE.TABLE',\n    0xf5cb: 'HFIND',\n    0xf600: 'RTS.22',\n    0xf601: 'DRAW0',\n    0xf605: 'DRAW1',\n    0xf65d: 'XDRAW0',\n    0xf661: 'XDRAW1',\n    0xf6b9: 'HFNS',\n    0xf6e6: 'GGERR',\n    0xf6e9: 'HCOLOR',\n    0xf6f5: 'RTS.23',\n    0xf6f6: 'COLORTBL',\n    0xf6fe: 'HPLOT',\n    0xf721: 'ROT',\n    0xf727: 'SCALE',\n    0xf72d: 'DRWPNT',\n    0xf769: 'DRAW',\n    0xf76f: 'XDRAW',\n    0xf775: 'SHLOAD',\n    0xf7bc: 'TAPEPNT',\n    0xf7d9: 'GETARYPT',\n    0xf7e7: 'HTAB',\n    0xf800: 'MON.PLOT',\n    0xf819: 'MON.HLINE',\n    0xf828: 'MON.VLINE',\n    0xf864: 'MON.SETCOL',\n    0xf871: 'MON.SCRN',\n    0xfb1e: 'MON.PREAD',\n    0xfb39: 'MON.SETTXT',\n    0xfb40: 'MON.SETGR',\n    0xfb5b: 'MON.TABV',\n    0xfc58: 'MON.HOME',\n    0xfca8: 'MON.WAIT',\n    0xfcfa: 'MON.RD2BIT',\n    0xfd0c: 'MON.RDKEY',\n    0xfd6a: 'MON.GETLN',\n    0xfded: 'MON.COUT',\n    0xfe8b: 'MON.INPORT',\n    0xfe95: 'MON.OUTPORT',\n    0xfecd: 'MON.WRITE',\n    0xfefd: 'MON.READ',\n    0xff02: 'MON.READ2',\n};\n\nexport default SYMBOLS;\n","import Prefs from './prefs';\n\nimport { driveLights, initUI, updateUI } from './ui/apple2';\nimport Printer from './ui/printer';\n\nimport DiskII from './cards/disk2';\nimport LanguageCard from './cards/langcard';\nimport Parallel from './cards/parallel';\nimport RAMFactor from './cards/ramfactor';\nimport SmartPort from './cards/smartport';\nimport Thunderclock from './cards/thunderclock';\nimport VideoTerm from './cards/videoterm';\n\nimport { Apple2 } from './apple2';\nimport { SupportedSectors } from './formats/types';\n\nconst prefs = new Prefs();\nconst romVersion = prefs.readPref('computer_type2');\nlet rom: string;\nlet characterRom: string;\nlet sectors: SupportedSectors = 16;\nlet keyboardLayout: string;\n\nswitch (romVersion) {\n    case 'apple2':\n        rom = 'intbasic';\n        characterRom = 'apple2_char';\n        keyboardLayout = 'apple2';\n        break;\n    case 'apple213':\n        rom = 'intbasic';\n        characterRom = 'apple2_char';\n        sectors = 13;\n        keyboardLayout = 'apple2';\n        break;\n    case 'original':\n        rom = 'original';\n        characterRom = 'apple2_char';\n        keyboardLayout = 'apple2';\n        break;\n    case 'apple2jplus':\n        rom = 'apple2j';\n        characterRom = 'apple2j_char';\n        keyboardLayout = 'apple2';\n        break;\n    case 'apple2pig':\n        rom = 'fpbasic';\n        characterRom = 'pigfont_char';\n        keyboardLayout = 'apple2';\n        break;\n    case 'apple2lc':\n        rom = 'fpbasic';\n        characterRom = 'apple2lc_char';\n        keyboardLayout = 'apple2';\n        break;\n    case 'pravetz82':\n        rom = 'pravetz82';\n        characterRom = 'pravetz82_char';\n        keyboardLayout = 'pravetz82';\n        break;\n    default:\n        rom = 'fpbasic';\n        characterRom = 'apple2_char';\n        keyboardLayout = 'apple2';\n}\n\nconst options = {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    canvas: document.querySelector<HTMLCanvasElement>('#screen')!,\n    gl: prefs.readPref('gl_canvas', 'true') === 'true',\n    rom,\n    characterRom,\n    e: false,\n    enhanced: false,\n    tick: updateUI,\n};\n\nexport const apple2 = new Apple2(options);\napple2.ready\n    .then(() => {\n        const cpu = apple2.getCPU();\n        const io = apple2.getIO();\n\n        const printer = new Printer('#printer-modal .paper');\n\n        const lc = new LanguageCard(apple2.getROM());\n        const parallel = new Parallel(printer);\n        const videoTerm = new VideoTerm();\n        const slinky = new RAMFactor(8 * 1024 * 1024);\n        const disk2 = new DiskII(io, driveLights, sectors);\n        const clock = new Thunderclock();\n        const smartport = new SmartPort(cpu, null, { block: true });\n\n        io.setSlot(0, lc);\n        io.setSlot(1, parallel);\n        io.setSlot(2, slinky);\n        io.setSlot(4, clock);\n        io.setSlot(3, videoTerm);\n        io.setSlot(6, disk2);\n        io.setSlot(7, smartport);\n\n        cpu.addPageHandler(lc);\n\n        initUI(apple2, disk2, smartport, printer, false, keyboardLayout);\n    })\n    .catch(console.error);\n","import Apple2IO from './apple2io';\nimport {\n    HiresPage,\n    LoresPage,\n    VideoModes,\n    VideoModesState,\n} from './videomodes';\nimport { HiresPage2D, LoresPage2D, VideoModes2D } from './canvas';\nimport { HiresPageGL, LoresPageGL, VideoModesGL } from './gl';\nimport ROM from './roms/rom';\nimport { Apple2IOState } from './apple2io';\nimport {\n    CPU6502,\n    CpuState,\n    Debugger,\n    DebuggerContainer,\n    FLAVOR_6502,\n    FLAVOR_ROCKWELL_65C02,\n} from '@whscullin/cpu6502';\nimport MMU, { MMUState } from './mmu';\nimport RAM, { RAMState } from './ram';\n\nimport SYMBOLS from './symbols';\n\nimport { ReadonlyUint8Array, Restorable, rom } from './types';\nimport { processGamepad } from './ui/gamepad';\n\nexport interface Apple2Options {\n    characterRom: string;\n    enhanced: boolean;\n    e: boolean;\n    gl: boolean;\n    rom: string;\n    canvas: HTMLCanvasElement;\n    tick: () => void;\n}\n\nexport interface Stats {\n    cycles: number;\n    frames: number;\n    renderedFrames: number;\n}\n\nexport interface State {\n    cpu: CpuState;\n    vm: VideoModesState;\n    io: Apple2IOState;\n    mmu: MMUState | undefined;\n    ram: RAMState[] | undefined;\n}\n\nexport class Apple2 implements Restorable<State>, DebuggerContainer {\n    private paused = false;\n\n    private theDebugger: Debugger | undefined;\n\n    private runTimer: number | null = null;\n    private runAnimationFrame: number | null = null;\n    private cpu: CPU6502;\n\n    private gr: LoresPage;\n    private gr2: LoresPage;\n    private hgr: HiresPage;\n    private hgr2: HiresPage;\n    private vm: VideoModes;\n\n    private io: Apple2IO;\n    private mmu: MMU | undefined;\n    private ram: RAM[] | undefined;\n    private characterRom: rom;\n    private rom: ROM;\n\n    private tick: () => void;\n\n    private stats: Stats = {\n        cycles: 0,\n        frames: 0,\n        renderedFrames: 0,\n    };\n\n    public ready: Promise<void>;\n\n    constructor(options: Apple2Options) {\n        this.ready = this.init(options);\n    }\n\n    async init(options: Apple2Options) {\n        const romImportPromise = import(\n            `./roms/system/${options.rom}`\n        ) as Promise<{\n            default: new () => ROM;\n        }>;\n        const characterRomImportPromise = import(\n            `./roms/character/${options.characterRom}`\n        ) as Promise<{ default: ReadonlyUint8Array }>;\n\n        const LoresPage = options.gl ? LoresPageGL : LoresPage2D;\n        const HiresPage = options.gl ? HiresPageGL : HiresPage2D;\n        const VideoModes = options.gl ? VideoModesGL : VideoModes2D;\n\n        this.cpu = new CPU6502({\n            flavor: options.enhanced ? FLAVOR_ROCKWELL_65C02 : FLAVOR_6502,\n        });\n        this.vm = new VideoModes(options.canvas, options.e);\n\n        const [{ default: Apple2ROM }, { default: characterRom }] =\n            await Promise.all([\n                romImportPromise,\n                characterRomImportPromise,\n                this.vm.ready,\n            ]);\n\n        this.rom = new Apple2ROM();\n        this.characterRom = characterRom;\n\n        this.ram = [new RAM(0x00, 0xbf)];\n        if (options.e) {\n            this.ram.push(new RAM(0x00, 0xbf));\n        }\n        this.gr = new LoresPage(\n            this.vm,\n            1,\n            this.ram,\n            this.characterRom,\n            options.e\n        );\n        this.gr2 = new LoresPage(\n            this.vm,\n            2,\n            this.ram,\n            this.characterRom,\n            options.e\n        );\n        this.hgr = new HiresPage(this.vm, 1, this.ram);\n        this.hgr2 = new HiresPage(this.vm, 2, this.ram);\n        this.io = new Apple2IO(this.cpu, this.vm);\n        this.tick = options.tick;\n\n        if (options.e) {\n            this.mmu = new MMU(\n                this.cpu,\n                this.vm,\n                this.gr,\n                this.gr2,\n                this.hgr,\n                this.hgr2,\n                this.io,\n                this.ram,\n                this.rom\n            );\n            this.cpu.addPageHandler(this.mmu);\n        } else {\n            this.cpu.addPageHandler(this.ram[0]);\n            this.cpu.addPageHandler(this.gr);\n            this.cpu.addPageHandler(this.gr2);\n            this.cpu.addPageHandler(this.hgr);\n            this.cpu.addPageHandler(this.hgr2);\n            this.cpu.addPageHandler(this.io);\n            this.cpu.addPageHandler(this.rom);\n        }\n    }\n\n    /**\n     * Runs the emulator. If the emulator is already running, this does\n     * nothing. When this function exits either `runTimer` or\n     * `runAnimationFrame` will be non-null.\n     */\n    run() {\n        this.paused = false;\n        if (this.runTimer || this.runAnimationFrame) {\n            return; // already running\n        }\n\n        this.theDebugger = new Debugger(this.cpu, this);\n        this.theDebugger.addSymbols(SYMBOLS);\n\n        const interval = 30;\n\n        let now,\n            last = Date.now();\n        const runFn = () => {\n            const kHz = this.io.getKHz();\n            now = Date.now();\n\n            const stepMax = kHz * interval;\n            let step = (now - last) * kHz;\n            last = now;\n            if (step > stepMax) {\n                step = stepMax;\n            }\n\n            if (this.theDebugger) {\n                this.theDebugger.stepCycles(step);\n            } else {\n                this.cpu.stepCycles(step);\n            }\n            if (this.mmu) {\n                this.mmu.resetVB();\n            }\n            if (this.io.annunciator(0)) {\n                const imageData = this.io.blit();\n                if (imageData) {\n                    this.vm.blit(imageData);\n                    this.stats.renderedFrames++;\n                }\n            } else {\n                if (this.vm.blit()) {\n                    this.stats.renderedFrames++;\n                }\n            }\n            this.stats.cycles = this.cpu.getCycles();\n            this.stats.frames++;\n            this.io.tick();\n            this.tick();\n            processGamepad(this.io);\n\n            if (!this.paused && requestAnimationFrame) {\n                this.runAnimationFrame = requestAnimationFrame(runFn);\n            }\n        };\n        if (requestAnimationFrame) {\n            this.runAnimationFrame = requestAnimationFrame(runFn);\n        } else {\n            this.runTimer = window.setInterval(runFn, interval);\n        }\n    }\n\n    stop() {\n        this.paused = true;\n        if (this.runTimer) {\n            clearInterval(this.runTimer);\n        }\n        if (this.runAnimationFrame) {\n            cancelAnimationFrame(this.runAnimationFrame);\n        }\n        this.runTimer = null;\n        this.runAnimationFrame = null;\n    }\n\n    isRunning() {\n        return !this.paused;\n    }\n\n    getState(): State {\n        const state: State = {\n            cpu: this.cpu.getState(),\n            vm: this.vm.getState(),\n            io: this.io.getState(),\n            mmu: this.mmu?.getState(),\n            ram: this.ram?.map((bank) => bank.getState()),\n        };\n\n        return state;\n    }\n\n    setState(state: State) {\n        this.cpu.setState(state.cpu);\n        this.vm.setState(state.vm);\n        this.io.setState(state.io);\n        if (this.mmu && state.mmu) {\n            this.mmu.setState(state.mmu);\n        }\n        if (this.ram) {\n            this.ram.forEach((bank, idx) => {\n                if (state.ram) {\n                    bank.setState(state.ram[idx]);\n                }\n            });\n        }\n    }\n\n    reset() {\n        this.cpu.reset();\n    }\n\n    getStats(): Stats {\n        return this.stats;\n    }\n\n    getCPU() {\n        return this.cpu;\n    }\n\n    getIO() {\n        return this.io;\n    }\n\n    getMMU() {\n        return this.mmu;\n    }\n\n    getROM() {\n        return this.rom;\n    }\n\n    getVideoModes() {\n        return this.vm;\n    }\n\n    getDebugger() {\n        return this.theDebugger;\n    }\n}\n","import { apple2 } from './main2';\nimport * as UI from './ui/apple2';\n\nexport const Apple2 = { ...UI, apple2 };\n"],"names":["root","factory","exports","module","define","amd","self","inProgress","dataWebpackPrefix","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","screenEmu","Point","constructor","x","y","this","Size","width","height","copy","ratio","Rect","origin","size","l","r","t","b","Vector","n","data","Float32Array","normalize","vec","sum","item","gain","i","mul","other","w","length","realIDFT","omega","Math","PI","j","cos","resize","newData","min","chebyshevWindow","sidelobeDb","m","alpha","cosh","acosh","pow","a","abs","acos","max","reduce","prev","cur","lanczosWindow","fc","v","halfN","floor","sin","Matrix3","c00","c01","c02","c10","c11","c12","c20","c21","c22","at","val","k","NTSC_FSC","NTSC_4FSC","NTSC_IQ_DELTA","NTSC_I_CUTOFF","ntscClockFrequency","ntscVisibleRect","ntscDisplayRect","palVisibleRect","palClockFrequency","palDisplayRect","VERTEX_RENDER_SHADER","buildTiming","clockFrequency","displayRect","visibleRect","vertTotal","fsc","vertStart","frameCycleNum","horizStart","imageSize","imageLeft","colorBurst","cycleNum","topLeft","topLeft80Col","CELL_WIDTH","NTSC_DETAILS","PAL_DETAILS","loadImage","path","reject","img","Image","onload","onerror","src","TEXTURE_NAMES","SHADER_NAMES","resizeCanvas","canvas","displayWidth","clientWidth","displayHeight","clientHeight","createShader","gl","name","type","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","deleteShader","createProgram","shaders","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","TextureInfo","glTexture","C","HORIZ_START","HORIZ_BLANK","HORIZ_DISPLAY","HORIZ_TOTAL","CELL_HEIGHT","VERT_NTSC_START","VERT_PAL_START","VERT_DISPLAY","BLOCK_WIDTH","BLOCK_HEIGHT","NTSC_Q_CUTOFF","screenData","image","details","dhgr","naturalWidth","naturalHeight","document","createElement","context","getContext","fillStyle","fillRect","drawImage","getImageData","ScreenView","getExtension","textures","buffers","display","imageSampleRate","imageBlackLevel","imageWhiteLevel","imageSubcarrier","viewportSize","persistenceTexRect","configurationChanged","imageChanged","_image","displayConfiguration","initOpenGL","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","createTexture","push","createBuffer","loadTextures","pixelStorei","PACK_ALIGNMENT","UNPACK_ALIGNMENT","loadShaders","freeOpenGL","deleteTexture","buffer","deleteBuffer","deleteShaders","all","loadTexture","isMipMap","texInfo","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","generateMipmap","loadShader","fragmentSource","vertexSource","glVertexShader","VERTEX_SHADER","glFragmentShader","FRAGMENT_SHADER","glProgram","vsync","canvasWidth","canvasHeight","viewport","uploadImage","configureShaders","renderImage","displayPersistence","drawDisplayCanvas","resizeTexture","texInfoImage","format","LUMINANCE","luminance","imageData","ary","Uint8Array","luminanceData","texSubImage2D","sampleRate","blackLevel","whiteLevel","subCarrier","texHeight","ceil","log2","phaseAlternation","phaseInfo","c","texInfoPhase","RGB","FLOAT","getRenderShader","videoDecoder","decoder","renderShader","renderShaderName","displayShader","isCompositeDecoder","useProgram","uniform1f","getUniformLocation","wy","wu","wv","bandwidth","videoBandwidth","yBandwidth","videoLumaBandwidth","uBandwidth","videoChromaBandwidth","vBandwidth","videoWhiteOnly","uniform3f","decoderMatrix","videoSaturation","hue","videoHue","brightness","videoBrightness","decoderOffset","contrast","videoContrast","videoLevel","uniformMatrix3fv","displayBarrel","uniform1i","displayShadowMaskLevel","centerLighting","displayCenterLighting","displayLuminanceGain","texSize","uniform2f","activeTexture","TEXTURE1","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE0","clipSize","textureRect","canvasRect","drawRectangle","copyTexSubImage2D","posRect","texRect","texRect2","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","positionLocation","getAttribLocation","texcoordLocations","texRects","positionBuffer","bindBuffer","ARRAY_BUFFER","p_x1","p_x2","p_y1","p_y2","bufferData","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","texcoordBuffer","t_x1","t_x2","t_y1","t_y2","drawArrays","TRIANGLES","displayResolution","vertexRect","viewportAspectRatio","displayAspectRatio","baseTexRect","interlaceShift","interlace","canvasTexLowerLeft","getDisplayCanvasTexPoint","canvasTexUpperRight","canvasTexRect","canvasSize","canvasVideoSize","videoSize","barrelTexRect","texture","scanlineHeight","shadowMaskTexture","shadowMaskAspectRatio","scanlineLevel","displayScanlineLevel","displayShadowMask","shadowMaskDotPitch","displayShadowMaskDotPitch","shadowMaskElemX","displayPixelDensity","shadowMaskSize","TEXTURE2","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","p","videoCenter","dummy","DisplayConfiguration","ImageInfo","ImageData","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","defineProperty","enumerable","get","f","chunkId","promises","u","obj","prop","prototype","hasOwnProperty","call","url","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","setAttribute","onScriptComplete","event","clearTimeout","doneFns","parentNode","removeChild","forEach","fn","setTimeout","bind","target","head","appendChild","Symbol","toStringTag","value","installedChunks","installedChunkData","promise","error","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","havePrefs","window","localStorage","Prefs","URL","location","href","title","readPref","defaultValue","searchParams","has","getItem","writePref","set","history","replaceState","toString","setItem","_defineProperties","props","descriptor","configurable","writable","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","iterator","from","_iterableToArray","minLen","slice","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","arr2","FOCUSABLE_ELEMENTS","Modal","activeModal","validateModalPresence","validateArgs","MicroModal","_ref","targetModal","_ref$triggers","triggers","_ref$onShow","onShow","_ref$onClose","onClose","_ref$openTrigger","openTrigger","_ref$closeTrigger","closeTrigger","_ref$openClass","openClass","_ref$disableScroll","disableScroll","_ref$disableFocus","disableFocus","_ref$awaitCloseAnimat","awaitCloseAnimation","_ref$awaitOpenAnimati","awaitOpenAnimation","_ref$debugMode","debugMode","instance","Constructor","_classCallCheck","modal","getElementById","config","registerTriggers","apply","onClick","onKeydown","protoProps","_this","_len","arguments","_key","filter","Boolean","trigger","addEventListener","showModal","_this2","activeElement","classList","add","scrollBehaviour","addEventListeners","handler","removeEventListener","setFocusToFirstNode","removeEventListeners","focus","remove","closeModal","toggle","body","querySelector","assign","style","overflow","hasAttribute","keyCode","retainFocus","nodes","querySelectorAll","_this3","focusableNodes","getFocusableNodes","nodesWhichAreNotCloseTargets","node","offsetParent","contains","focusedItemIndex","indexOf","shiftKey","preventDefault","console","warn","concat","triggerMap","validateTriggerPresence","init","options","triggerAttr","attributes","generateTriggerMap","show","close","closeModalById","B64","base64_encode","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","charAt","join","base64_decode","DATA_URL_PREFIX","BOOLEAN_OPTION","SELECT_OPTION","hex_digits","garbage","random","allocMem","result","idx","allocMemPages","pages","bytify","args","SOUND_ENABLED_OPTION","AudioContext","webkitAudioContext","Audio","io","sound","samples","started","autoStart","audioContext","resume","catch","start","isEnabled","setOption","AudioWorklet","workletReady","audioWorklet","addModule","ready","workletNode","AudioWorkletNode","addSampleListener","sample","state","port","postMessage","connect","destination","audioNode","createScriptProcessor","onaudioprocess","outputBuffer","getChannelData","shift","ontouchstart","getOptions","label","defaultVal","includes","DRIVE_NUMBERS","NO_DISK","ENCODING_NIBBLE","ENCODING_BITSTREAM","ENCODING_BLOCK","MemoryBlockDisk","metadata","readOnly","blocks","encoding","blockCount","read","block","write","NIBBLE_FORMATS","FLOPPY_FORMATS","BLOCK_FORMATS","DISK_FORMATS","isNoFloppyDisk","disk","isNibbleDisk","isWozDisk","BUTTON","A","B","X","Y","L1","R1","L3","R3","START","SELECT","LOGO","UP","DOWN","LEFT","RIGHT","gamepad","DEFAULT_GAMEPAD","gamepadMap","gamepadState","initGamepad","entry","entries","mapVal","charCodeAt","parseInt","keymap","uiKitMap","Dead","UIKeyInputLeftArrow","UIKeyInputRightArrow","UIKeyInputUpArrow","UIKeyInputDownArrow","UIKeyInputEscape","keys2","keys2e","keyspravetz82","KeyBoard","cpu","layout","shifted","controlled","capslocked","capslockKeyUsed","optioned","commanded","functions","keydown","evt","dialogOpen","metaKey","ctrlKey","mapKeyEvent","keyDown","capslockKey","controlKey","commandKey","optionKey","keyup","keyUp","setFunction","isKeyboardCode","getModifierState","reset","down","shiftKeys","kb","buttonUp","buttonDown","capsLock","stopPropagation","create","el","row","label1","label2","buildLabel","span","innerHTML","append","key1","key2","replace","dataset","mouseDown","genMouseDown","mouseUp","genMouseUp","ev","confirm","reload","TAPE_TYPES","Tape","doLoadLocalTape","file","kHz","getKHz","alert","fileReader","FileReader","decodeAudioData","buf","current","delta","datum","old","last","ival","setTape","readAsArrayBuffer","TOKEN_TO_STRING","STRING_TO_TOKEN","END","FOR","NEXT","DATA","INPUT","DEL","DIM","READ","GR","TEXT","CALL","PLOT","HLIN","VLIN","HGR2","HGR","HPLOT","DRAW","XDRAW","HTAB","HOME","SHLOAD","TRACE","NOTRACE","NORMAL","INVERSE","FLASH","VTAB","ONERR","RESUME","RECALL","STORE","LET","GOTO","RUN","IF","RESTORE","GOSUB","RETURN","REM","STOP","ON","WAIT","LOAD","SAVE","DEF","POKE","PRINT","CONT","LIST","CLEAR","GET","NEW","TO","FN","THEN","AT","NOT","STEP","AND","OR","SGN","INT","ABS","USR","FRE","PDL","POS","SQR","RND","LOG","EXP","COS","SIN","TAN","ATN","PEEK","LEN","STR$","VAL","ASC","CHR$","LEFT$","RIGHT$","MID$","TXTTAB","LETTERS","resolveToken","token","tokenString","DEFAULT_LIST_OPTIONS","apple2","columns","DEFAULT_DECOMPILE_OPTIONS","ApplesoftDecompiler","decompilerFromMemory","ram","end","PRGEND","addr","base","nextLine","wordAt","nextLineIndex","offset","forEachLine","to","callback","count","nextLineAddr","nextLineNo","listLine","lines","line","lineNo","unshift","list","allOptions","compactLine","spaceIf","nextToken","toUpperCase","startsWith","prettyLine","inString","decompile","results","STATES","writeByte","mem","page","off","writeWord","msb","LineBuffer","curChar","prevChar","clone","next","atEnd","lookingAtToken","oldCurChar","oldPrevChar","possibleToken","char","backup","peek","RangeError","ApplesoftCompiler","Map","compileToMemory","programStart","compiler","compile","compiledProgram","byteLength","prgend","readLineNumber","lineBuffer","lineNoStr","character","readToken","lookAhead","compileLine","lineNumber","charCode","STRING","COMMENT","DATA_QUOTE","split","lineNumbers","sort","lineBytes","copyScreenToClipboard","vm","text","getText","ClipboardItem","textMode","htmlBlob","Blob","textBlob","blob","getCanvasAsBlob","navigator","clipboard","writeText","SCREEN_MONO","SCREEN_FULL_PAGE","SCREEN_SCANLINE","Screen","enterFullScreen","elem","fullscreenEnabled","fullscreenElement","exitFullscreen","requestFullscreen","webkitRequestFullScreen","webkitIsFullScreen","webkitCancelFullScreen","mono","setFullPage","scanlines","on","JOYSTICK_DISABLE","JoyStick","disableMouseJoystick","flipX","flipY","swapXY","mousemove","getBoundingClientRect","pageX","left","pageY","top","z","paddle","which","SYSTEM_CPU_ACCELERATED","System","values","updateKHz","DO","_DO","PO","_PO","D13O","_D13O","TRANS53","DETRANS53","TRANS62","DETRANS62","fourXfour","xx","yy","defourXfour","explodeSector16","volume","track","sector","gap","checksum","nibbles","idx2","idx6","val6","val2","explodeSector13","jdx","a5","a3","b5","b3","c5","c3","d5","d3","e5","e3","LookingFor","FindSectorError","super","String","InvalidChecksum","expected","received","ReadSectorError","readSector","trackNibble","tracks","sectors","START_OF_FIELD_MARKER_FIRST_NIBBLE","retry","_readNext","_skipBytes","checkSum","START_OF_FIELD_MARKER_SECOND_NIBBLE","FIELD_TYPE_MARKER","ADDRESS_FIELD","DATA_FIELD_6AND2","DATA_FIELD_5AND3","nibble","findSector","dOff","eOff","bit","readSector13","data2","kdx","readSector16","grabNibble","waitForOne","createDiskFromDOS","side","rawData","physical_sector","dos_sector","createDiskFromNibble","BLOCK_SIZE","createDiskFromProDOS","physical_track","prodos_sector","OFFSETS","SIGNATURE","CREATOR","HEADER_LENGTH","VERSION","FORMAT","FLAGS","BLOCKS","DATA_OFFSET","DATA_LENGTH","COMMENT_LENGTH","CREATOR_DATA","CREATOR_DATA_LENGTH","PADDING","READ_ONLY","VOLUME_VALID","VOLUME_MASK","read2MGHeader","prefix","DataView","TextDecoder","signature","decode","creator","headerLength","getInt16","getInt32","flags","bytes","commentOffset","commentLength","creatorDataOffset","creatorDataLength","ProDOS","dataEnd","commentEnd","creatorDataEnd","extras","comment","creatorData","DOS","create2MGFromBlockDisk","headerData","suffix","prefixView","prefixLength","dataLength","commentData","TextEncoder","encode","encoder","setInt32","setInt16","create2MGFragments","imageLength","byteArray","Deferred","HttpBlockDisk","contentLength","fetchMap","getHeaderData","header","fetch","headers","range","headerBody","arrayBuffer","blockNumber","fetchBlock","deferred","response","ok","statusText","startBlock","endBlock","startOffset","endOffset","paused","startTime","Date","now","lastCycles","lastFrames","lastRenderedFrames","hashtag","hash","oldHashFiles","prefs","handlers","sections","addOptions","section","option","getOption","stringVal","prefVal","getSections","optionsModal","openModal","content","textContent","onChange","checked","listItem","element","inputElement","selectOption","selectElement","selected","optionElement","labelElement","reloadElement","CIDERPRESS_EXTENSION","BIN_TYPES","KNOWN_FILE_TYPES","disk_categories","disk_sets","disk_cur_name","disk_cur_cat","_apple2","stats","tape","_disk2","_massStorage","_printer","audio","screen","joystick","system","keyboard","_e","driveNo","driveLights","driveLight","backgroundImage","dirty","_driveNo","_dirty","labelText","innerText","dumpApplesoftProgram","compileApplesoftProgram","openLoad","driveString","selectCategory","openSave","getBinary","storageData","createObjectURL","download","wind","open","getJSON","dumpDisk","openAlert","msg","handleDragOver","dataTransfer","dropEffect","handleDragEnd","dt","items","clearData","handleDrop","getMetadata","files","runOnLoad","doLoadLocal","getAsString","parts","hup","loadingStart","loadingStop","run","loadAjax","json","bin","maxLen","pos","setPC","loadBinary","category","setDisk","loadDisk","doLoad","urls","filename","diskIndex","JSON","parse","setJSON","loadLocalStorage","r1","exec","doSave","stringify","updateLocalStorage","saveLocalStorage","doDelete","deleteLocalStorage","ext","toLowerCase","matches","match","aux","pop","setBinary","doLoadLocalDisk","address","auxAddress","doLoadBinary","addressInput","addressStr","isNaN","defaultLoadHttp","reader","getReader","chunks","readChunk","total","meter","progress","loadingProgress","doLoadHTTP","input","fileParts","decodeURIComponent","method","setBlockDisk","showStats","ms","cycles","getCycles","fps","khz","kHzElement","trunc","renderedFrames","frames","toggleShowFPS","toggleSound","updateSoundButton","diskSelect","categorySelect","cat","selectDisk","clickDisk","names","contentDiv","processHash","drive","updateUI","pauseRun","stop","openOptions","paste","readText","setKeyBuffer","asyncPaste","openPrinterModal","getRawOutput","clearPrinterPaper","exitFullScreen","regex","RegExp","initUI","disk2","massStorage","printer","keyboardLayout","getCPU","getIO","getStats","getVideoModes","getState","localState","setState","oldCat","disk_index","buildDiskIndex","screenElement","doPaste","clipboardData","getData","doCopy","standalone","setInterval","URLSearchParams","search","onLoaded","Printer","_lineBuffer","_rawLen","_raw","paper","newLine","_line","putChar","ascii","visible","fromCharCode","newRaw","hasPrintout","stringFromBytes","byteOffset","InfoChunk","sides","bootSector","bitTiming","compatibleHardware","requiredRAM","largestTrack","version","getUint8","diskType","writeProtected","synchronized","cleaned","getUint16","TMapChunk","trackMap","TrksChunk","TrksChunk1","rawTracks","trackNo","rawTrack","trackData","trackBitCount","byteIndex","bitIndex","TrksChunk2","trks","bitCount","getUint32","trk","MetaChunk","acc","part","subParts","createDisk","fmt","NIB","createDiskFrom2MG","disk_sector","dv","wozVersion","dvOffset","WOZ_HEADER_START","readHeader","chunk","info","tmap","meta","createDiskFromWoz","BOOTSTRAP_ROM_16","BOOTSTRAP_ROM_13","EmptyDriver","tick","onQ6Low","onQ6High","_readMode","onDriveOn","onDriveOff","clampTrack","_state","BaseDiskDriver","controller","debug","_args","isOn","isWriteProtected","NibbleDiskDriver","onDirty","skip","nibbleCount","q7","bus","latch","readMode","WozDiskDriver","zeros","clock","moveHead","workCycles","pulse","q6","command","SEQUENCER_ROM","lastTrack","BOOTSTRAP_ROM","PHASE_DELTA","getDiskState","DiskII","callbacks","drives","phase","disks","driver","offTimeout","updateActiveDrive","initWorker","curDrive","curDriver","setPhase","access","updateDirty","ioSwitch","_page","getDriveState","curDisk","controllerState","setDriveState","setDiskInternal","rwts","jsonDisk","worker","payload","createDiskFromJsonDisk","insertDisk","pretty","_sector","jsonEncode","_s","jsonDecode","Worker","maxSector","sectorMap","getBase64","RAM","sp","ep","start_page","end_page","getBuffer","subarray","LanguageCard","rom","_readbsr","_writebsr","_bsr2","_prewrite","bank1","bank2","write1","write2","read1","read2","updateBanks","offSwitch","bank1Switch","bankStr","rwStr","bsr2","readbsr","writebsr","prewrite","Parallel","cbs","RAMFactor","firmware","ramlo","rammid","ramhi","loc","sethi","setmid","setlo","FLAVOR_6502","FLAVOR_ROCKWELL_65C02","FLAVOR_WDC_65C02","FLAVORS_65C02","sizes","accumulator","implied","immediate","absolute","zeroPage","relative","absoluteX","absoluteY","zeroPageX","zeroPageY","absoluteIndirect","zeroPageXIndirect","zeroPageIndirectY","zeroPageIndirect","absoluteXIndirect","zeroPage_relative","BLANK_PAGE","CPU6502","flavor","pc","sr","ar","xr","yr","memPages","resetHandlers","sync","wait","readByte","readImmediate","readBytePC","readAbsolute","readWordPC","readZeroPage","readAbsoluteX","addrIdx","workCycleIndexedRead","readAbsoluteY","readZeroPageX","zpAddr","readZeroPageY","readZeroPageXIndirect","readZPWord","readZeroPageIndirectY","readZeroPageIndirect","writeAbsolute","writeZeroPage","writeAbsoluteX","workCycleIndexedWrite","writeAbsoluteY","writeZeroPageX","writeZeroPageY","writeZeroPageXIndirect","writeZeroPageIndirectY","writeZeroPageIndirect","readAddrZeroPage","readAddrZeroPageX","readAddrAbsolute","readAddrAbsoluteIndirectBug","lsb","readAddrAbsoluteIndirect","readWord","readAddrAbsoluteX","opts","is65C02","inc","readAddrAbsoluteY","readAddrZeroPageXIndirect","readAddrZeroPageIndirectY","oldPage","readAddrAbsoluteXIndirect","readNop","readNopImplied","brk","readFn","pushWord","pushByte","setFlag","stp","wai","lda","testNZ","ldx","ldy","sta","writeFn","stx","sty","stz","adc","sbc","incA","increment","readAddrFn","oldVal","workCycle","inx","iny","decA","decrement","dec","dex","dey","shiftLeft","aslA","asl","shiftRight","lsrA","lsr","rotateLeft","rolA","rol","rorA","rotateRight","ror","and","ora","eor","rmb","smb","trb","testZ","tsb","bitI","cmp","compare","cpx","cpy","brs","newPage","newOff","brc","bbr","newPC","bbs","tax","txa","tay","tya","tsx","txs","pha","pla","pullByte","phx","plx","phy","ply","php","plp","jmp","jsr","rts","pullWordRaw","rti","flag","clr","nop","aso","rla","lse","rra","axs","lax","dcm","ins","alr","ah","al","b7","b6","xaa","oal","sax","tas","say","xas","axa","anc","las","skp","hlt","_impliedFn","OPS_6502","mode","OPS_65C02","OPS_NMOS_6502","OPS_ROCKWELL_65C02","OPS_WDC_65C02","fill","ops","opary","unknown","sub","a7","ci","co","updateFlags","_a","op","updateBCDFlags","unk","step","cb","stepN","stepCycles","stepCyclesDebug","addPageHandler","pageHandler","isResettablePageHandler","irq","nmi","getPC","getDebugInfo","cmd","getSync","getStop","getWait","getOpInfo","opcode","alwaysBreak","_info","dumpStatusRegister","Debugger","container","verbose","maxTrace","trace","breakpoints","symbols","break","printDebugInfo","updateTrace","continue","runAt","isRunning","setVerbose","setMaxTrace","getTrace","printTrace","getStack","stack","isSP","addrStr","valStr","setBreakpoint","exp","clearBreakpoint","delete","listBreakpoints","addSymbols","symbol","padWithSymbol","dumpRegisters","dumpRawOp","dumpOp","dumpPC","debugInfo","dumpPage","getMemory","setMemory","byte","padding","substring","toHexOrSymbol","Address","lo","hi","loByte","hiByte","readLo","readAddress","readHi","writeAddress","SmartPort","busy","busyTimeout","statusByte","xReg","yReg","dumbPortRom","dumpBlock","getDeviceInfo","readBlock","blockNUmber","writeBlock","formatDevice","handleAsync","unit","blockOff","smartOff","bufferAddr","blockAddr","driveSlot","stackAddr","retVal","cmdBlockAddr","cmdListAddr","parameterCount","status","ID","diskNo","diskState","resetBlockDisk","getVolumeName","getBlockDisk","createBlockDisk","vdhBlock","dataView","nameLength","caseBits","VDH_OFFSETS","Thunderclock","strobe","shiftMode","register","calcBits","shiftBCD","day","getDate","weekday","getDay","month","getMonth","hour","getHours","minutes","getMinutes","seconds","getSeconds","ROM","VIDEO_ROM","BLACK","WHITE","Videoterm","regs","blink","curReg","bank","refresh","refreshCursor","updateBuffer","saddr","startPos","color","cdata","fromRegs","blinkmode","cursorPos","caddr","updateStartPos","shouldRefresh","blit","Apple2IO","_slot","_auxRom","_khz","_rate","_sample_size","_buffer","_keyDown","_button","_paddle","_phase","_sample","_sampleIdx","_sampleTime","_didAudio","_high","_low","_trigger","_annunciators","_tape","_tapeOffset","_tapeNext","_tapeCurrent","_calcSampleRate","_debug","_tick","_cycles_per_sample","_audioListener","_updateKHz","_access","writeMode","mixed","hires","slot","card","annunciators","cards","cardState","setSlot","getSlot","rate","sample_size","annunciator","dim","orangeCol","greenCol","blueCol","violetCol","whiteCol","blackCol","_colors","r4","dcolors","notDirty","bottom","right","LoresPage2D","_refreshing","_blink","highColorTextMode","createImageData","setLoresPage","_drawPixel","c0","c1","c2","_drawHalfPixel","_checkInverse","inverse","_80colMode","altCharMode","bank0","_start","_end","_read","_write","fore","back","col","adj","hiresMode","mixedMode","colorMode","monoMode","odd","an3State","_blinkInterval","rowToBase","ab","mapCharCode","trimEnd","HiresPage2D","colorDHRMode","setHiresPage","_draw3Pixel","_draw4Pixel","rowa","rowb","dx","dy","bz","b0","b1","b2","b4","oneSixtyMode","c4","doubleHiresMode","mod","mcol","baseOff","hb","monoColor","monoDHRMode","hbs","dcolor","mixedDHRMode","bb","rr","vv","v0","v1","v2","oddCol","evenCol","highColorHGRMode","VideoModes2D","_grs","_hgrs","_refreshFlag","_canvas","screenContext","_screenContext","imageSmoothingEnabled","_left","_top","_refresh","pageMode","lores","getLoresPage","getHiresPage","_80col","altChar","an3","doubleHires","pageNo","isText","isMixed","isPage2","isHires","isDoubleHires","is80Col","isAltChar","buildScreen","mainData","mixData","putImageData","updateImage","mainDirty","mixDirty","blitted","altData","hgr","gr","parent","parentElement","toBlob","LoresPageGL","trimRight","HiresPageGL","cropLastPixel","val0","after","VideoModesGL","_scanlines","willReadFrequently","_sv","_displayConfig","defaultMonitor","monitorII","imageInfo","clearRect","Switches","mmu","AuxRom","_setIntc8rom","_updateBanks","_val","MMU","lores1","lores2","hires1","hires2","_readPages","_writePages","_pages","_vbEnd","switches","auxRom","memC0_C0","memC1_CF","memD0_DF","memE0_FF","mem00_01","mem02_03","mem04_07","mem08_0B","mem0C_1F","mem20_3F","mem40_5F","mem60_BF","_initSwitches","_bank1","_auxRamRead","_auxRamWrite","_altzp","_intcxrom","_slot3rom","_intc8rom","__80store","_page2","_hires","_iouDisable","readPages","writePages","_accessMMUSet","_accessStatus","_accessIOUDisable","_accessGraphics","_accessLangCard","writeBank","resetVB","auxread","auxwrite","altzp","_80store","page2","intcxrom","slot3rom","intc8rom","auxRamRead","auxRamWrite","mem00_BF","romVersion","characterRom","enhanced","runTimer","runAnimationFrame","romImportPromise","characterRomImportPromise","LoresPage","HiresPage","VideoModes","default","Apple2ROM","gr2","hgr2","theDebugger","runFn","stepMax","getGamepads","axes","buttons","button","pressed","processGamepad","requestAnimationFrame","clearInterval","cancelAnimationFrame","getMMU","getROM","getDebugger","lc","parallel","videoTerm","slinky","smartport"],"sourceRoot":""}